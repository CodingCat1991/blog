{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/books/s1078958.jpg","path":"books/s1078958.jpg","modified":0,"renderable":0},{"_id":"source/books/s1458949.jpg","path":"books/s1458949.jpg","modified":0,"renderable":0},{"_id":"source/books/s1469173.jpg","path":"books/s1469173.jpg","modified":0,"renderable":0},{"_id":"source/books/s1739240.jpg","path":"books/s1739240.jpg","modified":0,"renderable":0},{"_id":"source/books/s27237850.jpg","path":"books/s27237850.jpg","modified":0,"renderable":0},{"_id":"source/books/s28277258.jpg","path":"books/s28277258.jpg","modified":0,"renderable":0},{"_id":"source/books/s28383857.jpg","path":"books/s28383857.jpg","modified":0,"renderable":0},{"_id":"source/books/s28470753.jpg","path":"books/s28470753.jpg","modified":0,"renderable":0},{"_id":"source/books/s29621120.jpg","path":"books/s29621120.jpg","modified":0,"renderable":0},{"_id":"source/books/s29634528.jpg","path":"books/s29634528.jpg","modified":0,"renderable":0},{"_id":"source/books/s29737802.jpg","path":"books/s29737802.jpg","modified":0,"renderable":0},{"_id":"source/books/s30011804.jpg","path":"books/s30011804.jpg","modified":0,"renderable":0},{"_id":"source/books/s33471187.jpg","path":"books/s33471187.jpg","modified":0,"renderable":0},{"_id":"source/books/s32294606.jpg","path":"books/s32294606.jpg","modified":0,"renderable":0},{"_id":"source/books/s33492346.jpg","path":"books/s33492346.jpg","modified":0,"renderable":0},{"_id":"source/books/s33522285.jpg","path":"books/s33522285.jpg","modified":0,"renderable":0},{"_id":"source/books/s33556519.jpg","path":"books/s33556519.jpg","modified":0,"renderable":0},{"_id":"source/books/s3984108.jpg","path":"books/s3984108.jpg","modified":0,"renderable":0},{"_id":"source/books/s8873145.jpg","path":"books/s8873145.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575089241.jpg","path":"gallery/focus/1575089241.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575174603.jpg","path":"gallery/focus/1575174603.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575347430.jpg","path":"gallery/focus/1575347430.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575261004.jpg","path":"gallery/focus/1575261004.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575447585.jpg","path":"gallery/focus/1575447585.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575617405.jpg","path":"gallery/focus/1575617405.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575703804.jpg","path":"gallery/focus/1575703804.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575790204.jpg","path":"gallery/focus/1575790204.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575531003.jpg","path":"gallery/focus/1575531003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575876608.jpg","path":"gallery/focus/1575876608.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1575963003.jpg","path":"gallery/focus/1575963003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576049404.jpg","path":"gallery/focus/1576049404.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576135807.jpg","path":"gallery/focus/1576135807.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576222204.jpg","path":"gallery/focus/1576222204.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576308604.jpg","path":"gallery/focus/1576308604.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576395005.jpg","path":"gallery/focus/1576395005.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576481405.jpg","path":"gallery/focus/1576481405.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576519204.jpg","path":"gallery/focus/1576519204.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576605604.jpg","path":"gallery/focus/1576605604.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576692003.jpg","path":"gallery/focus/1576692003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1576778403.jpg","path":"gallery/focus/1576778403.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1577124003.jpg","path":"gallery/focus/1577124003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1577210403.jpg","path":"gallery/focus/1577210403.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1577296802.jpg","path":"gallery/focus/1577296802.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1577383203.jpg","path":"gallery/focus/1577383203.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1577556003.jpg","path":"gallery/focus/1577556003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1577642402.jpg","path":"gallery/focus/1577642402.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1577728804.jpg","path":"gallery/focus/1577728804.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1578074404.jpg","path":"gallery/focus/1578074404.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1578333602.jpg","path":"gallery/focus/1578333602.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1578420003.jpg","path":"gallery/focus/1578420003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1578679205.jpg","path":"gallery/focus/1578679205.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1578765602.jpg","path":"gallery/focus/1578765602.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1578852003.jpg","path":"gallery/focus/1578852003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1578938404.jpg","path":"gallery/focus/1578938404.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1579024804.jpg","path":"gallery/focus/1579024804.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1579111203.jpg","path":"gallery/focus/1579111203.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1579197604.jpg","path":"gallery/focus/1579197604.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1579284003.jpg","path":"gallery/focus/1579284003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1579370403.jpg","path":"gallery/focus/1579370403.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1579456803.jpg","path":"gallery/focus/1579456803.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1579543202.jpg","path":"gallery/focus/1579543202.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582048805.jpg","path":"gallery/focus/1582048805.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582135203.jpg","path":"gallery/focus/1582135203.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582221604.jpg","path":"gallery/focus/1582221604.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582308003.jpg","path":"gallery/focus/1582308003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582394403.jpg","path":"gallery/focus/1582394403.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582480803.jpg","path":"gallery/focus/1582480803.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582653602.jpg","path":"gallery/focus/1582653602.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582567203.jpg","path":"gallery/focus/1582567203.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582740003.jpg","path":"gallery/focus/1582740003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582826403.jpg","path":"gallery/focus/1582826403.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582912803.jpg","path":"gallery/focus/1582912803.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1582999203.jpg","path":"gallery/focus/1582999203.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583085603.jpg","path":"gallery/focus/1583085603.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583172003.jpg","path":"gallery/focus/1583172003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583258403.jpg","path":"gallery/focus/1583258403.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583344803.jpg","path":"gallery/focus/1583344803.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583431203.jpg","path":"gallery/focus/1583431203.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583517603.jpg","path":"gallery/focus/1583517603.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583604003.jpg","path":"gallery/focus/1583604003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583690403.jpg","path":"gallery/focus/1583690403.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583776802.jpg","path":"gallery/focus/1583776802.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583863205.jpg","path":"gallery/focus/1583863205.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1584122405.jpg","path":"gallery/focus/1584122405.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1584036003.jpg","path":"gallery/focus/1584036003.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1583949605.jpg","path":"gallery/focus/1583949605.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1584208804.jpg","path":"gallery/focus/1584208804.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1584295205.jpg","path":"gallery/focus/1584295205.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1584381603.jpg","path":"gallery/focus/1584381603.jpg","modified":0,"renderable":0},{"_id":"source/gallery/focus/1584468003.jpg","path":"gallery/focus/1584468003.jpg","modified":0,"renderable":0},{"_id":"themes/butterfly/source/css/background.css","path":"css/background.css","modified":0,"renderable":1},{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/about.jpg","path":"img/about.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/algolia.svg","path":"img/algolia.svg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/archive.jpg","path":"img/archive.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/background.jpg","path":"img/background.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/books.jpg","path":"img/books.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/category.jpg","path":"img/category.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover.jpg","path":"img/cover.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/footer.jpg","path":"img/footer.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/gallery.jpg","path":"img/gallery.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/link.jpg","path":"img/link.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/movies.jpg","path":"img/movies.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/index.jpg","path":"img/index.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/tag.jpg","path":"img/tag.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/music.jpg","path":"img/music.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/top.jpg","path":"img/top.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/wechat.jpg","path":"img/wechat.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"3ceeb28e08cc647c6d042aaa1d986cf9c83dc199","modified":1641047535468},{"_id":"source/_data/link.yml","hash":"ff4579bd0d691aa6683e6cecb75a07957f324232","modified":1641047535468},{"_id":"source/about/index.md","hash":"859164e3a2b7f297093a546f4e211e73425ca47d","modified":1641047535519},{"_id":"source/archives/index.md","hash":"bc97393590409fbe61212250f8ba0a591781f009","modified":1641047535519},{"_id":"source/categories/index.md","hash":"ad5fcaee6f90f8679bd75b78ef0dafae8fef91be","modified":1641047535522},{"_id":"source/_drafts/MySQL出现Waiting-for-table-metadata-lock问题排查过程.md","hash":"78092eaace6dba0810a9a2261c95186131115fec","modified":1641047535468},{"_id":"source/_drafts/Python中timeit模块的使用.md","hash":"53aca344d3a52864563ba5d6ff22eaa49571b384","modified":1641047535468},{"_id":"source/_drafts/Python垃圾回收机制.md","hash":"d3d230d48e3d4f9f5f4d7ee57eda6cc77edd9c75","modified":1641047535468},{"_id":"source/_drafts/Python中heapq模块的使用.md","hash":"bdd825e53b8804899ebfbd3d5b49f26c269352e3","modified":1641047535468},{"_id":"source/_drafts/Python数据结构之单向循环链表.md","hash":"340f86e347bd12eb6a38e394249861547f96ea07","modified":1641047535469},{"_id":"source/_drafts/Python数据结构之单链表.md","hash":"143838e9a5407eccc3a0479b63ffd0bc2f6d2b74","modified":1641047535469},{"_id":"source/_drafts/Python数据结构之双链表.md","hash":"350fb079a34505dae1debcd44465f662a8084742","modified":1641047535469},{"_id":"source/_drafts/Python数据结构之队列.md","hash":"3429381f36ed446c45d9b5fa2ae591bf7131696b","modified":1641047535469},{"_id":"source/_drafts/Python算法之希尔排序.md","hash":"2b8e5c6e6b06c471de962ed81e10539d911713ae","modified":1641047535469},{"_id":"source/_drafts/Python数据结构之栈.md","hash":"3eb63ae4d6ac8dfb274f9dcccfe845fb1d380f12","modified":1641047535469},{"_id":"source/_drafts/Python算法之排序算法简介.md","hash":"7df0decb17f1f3bbe62da66d5b07b4f9596e2e0f","modified":1641047535469},{"_id":"source/_drafts/Python算法之选择排序.md","hash":"ef387af921243639b475f411fd01ea16a89380e7","modified":1641047535469},{"_id":"source/_drafts/Python算法之插入排序.md","hash":"592ea13a58651441d7a8506871d76f0c3b5b5d60","modified":1641047535469},{"_id":"source/_drafts/Python设计模式之代理模式.md","hash":"4bc2d26b2f951b0e168ccb23e7ec76aac47b1f09","modified":1641047535469},{"_id":"source/_drafts/Python设计模式之建造者模式.md","hash":"6797cd496429a9d00475ed200ee301a5c6f715e5","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之单例模式.md","hash":"514d122b4a2e5cbe0514f08a23fc8e058939140a","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之模板方法模式.md","hash":"fac1f95fb31286b26e8138a25f802caffe9f41c3","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之桥模式.md","hash":"ddbf626dbd0e84dc306a60308a34680f9962c5a4","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之策略模式.md","hash":"ee4d74309c5cc04f5f29d60884dc1fd628441cbe","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之组合模式.md","hash":"d06cd02f6a6cbd7b0079efed37baaff1617250e6","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之观察者模式.md","hash":"7251f9515d28df50df1e41c8796c5a0b6e6709d2","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之责任链模式.md","hash":"2a3fe2b5ce1464b7c8636c46b7de533d3af08758","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之工厂模式.md","hash":"340d899b12b431c04bd3f1460f328ef99d75cad0","modified":1641047535470},{"_id":"source/_drafts/Python设计模式之适配器模式.md","hash":"53e0fee14564f5a9a52b2279dcaa94bda2b90260","modified":1641047535470},{"_id":"source/_drafts/Python面试问题整理.md","hash":"a88471bdaf7aa7932394f16cf7696a25a50f6fe5","modified":1641047535471},{"_id":"source/_drafts/且在人间：按自己的想法去生活.md","hash":"6616746c03837b9ff22acd9cfe96c72096f5cd8c","modified":1641047535471},{"_id":"source/_drafts/使用Travis-CI搭建持续集成和持续部署.md","hash":"e6a81b8d49fc0c27f246a3d4fa5d45dd06f27d25","modified":1641047535472},{"_id":"source/gallery/index.md","hash":"6544457fa65c1211a519b9a3517885efee84c314","modified":1662555694360},{"_id":"source/_drafts/五魁：信什么就会失去什么.md","hash":"de5402bd7b95e0146e78283cc58efa2cade3d4c1","modified":1641047535471},{"_id":"source/_posts/CentOS7下如何设置MySQL开机自启.md","hash":"940c8d564af90c53682ba21e8136580ff739ec3c","modified":1641047535473},{"_id":"source/_posts/Django多表关联查询时数据错误.md","hash":"8e1a8abac03a3456f824f01e93b84ba1de20fec2","modified":1641047535477},{"_id":"source/_posts/Django常见问题.md","hash":"8ef97376161d90c17166dd4dd5793382dd8c2919","modified":1641047535480},{"_id":"source/_posts/MySQL8-0-OCP大纲.md","hash":"745783e778990ca30d7a0d152f91811fc8d1f3f7","modified":1641047535490},{"_id":"source/_posts/MySQL主从复制原理.md","hash":"f1b1ae92635c6e8a3dc3159c7753e5f2a1ac2351","modified":1641047535491},{"_id":"source/_posts/MySQL性能优化之key_buffer_size.md","hash":"f0432c5b3e6159499be4c3cd2f65800c537b2fce","modified":1641047535493},{"_id":"source/_posts/MySQL忘记root密码怎么办.md","hash":"fbebd7ad83fea0417268ac28c5e3d44227e6c810","modified":1641047535493},{"_id":"source/_posts/MySQL性能优化：回表、覆盖索引及索引下推优化.md","hash":"4f14f8c9d2843d64cefd1b73e45e2d59c0db58ed","modified":1641047535493},{"_id":"source/_posts/MySQL查询未区分大小写.md","hash":"88526e3c6f2cab692f97f4735d2c9a4eb09941a1","modified":1641047535494},{"_id":"source/_posts/MySQL索引介绍.md","hash":"da42406590ddc231edaac6065249feb670128d44","modified":1641047535495},{"_id":"source/_posts/InnoDB-Cluster部署.md","hash":"9b40aedb21f8c48cca4f7cec5ebea6ca73507778","modified":1641047535489},{"_id":"source/_posts/Oracle关闭的情况下如何修改参数.md","hash":"1364c8605b671b80c6c3020fa32f75a64a8d0145","modified":1641047535498},{"_id":"source/_posts/MySQL组复制介绍.md","hash":"f896cc264f6bfc27d80027e4e3ada231cc721b3a","modified":1641047535496},{"_id":"source/.DS_Store","hash":"7c6ac351788e10de7688021bcefef551c0dc2660","modified":1662561083401},{"_id":"source/_posts/Python生成公共包（SDK）.md","hash":"ef1151a0c63f90c998a7da7fa1cb574197826e58","modified":1641047535498},{"_id":"source/_posts/Python算法之冒泡排序.md","hash":"e45e158e1f676f09a8b81e161cf09d4cf9f7f92d","modified":1641047535499},{"_id":"source/_posts/SQL注入介绍及预防.md","hash":"06f172849d567597a694c7b394d2404df3f0a8bc","modified":1641047535501},{"_id":"source/_posts/使用码云自动化部署应用.md","hash":"82ccd1b4cd9505d42ee24df00dd4414ee4b35a21","modified":1641047535501},{"_id":"source/_posts/如何写好一篇技术文章.md","hash":"55563ac3c9eac071949d34d40494f4310b0e4419","modified":1641047535508},{"_id":"source/_posts/如何升级MySQL.md","hash":"1c8ad209d88e1901c48a55deb3a2d04417fa797f","modified":1641047535511},{"_id":"source/_posts/股票盈利宝典：强庄股买卖.md","hash":"4105761d158bb9e3e92d19b189767dfc3d4d72e9","modified":1641047535515},{"_id":"source/_posts/搭建一个单主模式的MGR集群.md","hash":"ba9d55b1c180e634d9d48c495ecfecc8f8e128b6","modified":1641047535511},{"_id":"source/_posts/活着：现实与意义.md","hash":"4dc8e86574d8d728f5a2ee21a4f40a9c4cad1a0f","modified":1641047535512},{"_id":"source/_posts/西西弗神话：去活还是去死.md","hash":"3213ee2b98f80efcd315a6cf6a9d2f370a9012ae","modified":1641047535518},{"_id":"source/link/index.md","hash":"40ad0d065d94a4a681483be05a37bedf27ee9317","modified":1641047535583},{"_id":"source/message/index.md","hash":"63c0ba622db6a30bee3b5342d150fe6a2eb193ff","modified":1641047535583},{"_id":"source/movies/index.md","hash":"c1d33c6e2e4d5b5608dac5fb94ab876bff86c5e1","modified":1641047535583},{"_id":"source/books/s1458949.jpg","hash":"d83bdf489b89cdeb5274cf328f7bb91725cf18ef","modified":1641047535519},{"_id":"source/books/s1739240.jpg","hash":"e43782e52cf2cde711c28d167b4a8d3a76b8d7a4","modified":1641047535520},{"_id":"source/books/index.md","hash":"afff5709c1111d2de9ba7cfee849a7dc2e90ee50","modified":1641047535519},{"_id":"source/books/s1078958.jpg","hash":"f6735f46bf79dc42cefde1a56b90f61a1a912e7e","modified":1641047535519},{"_id":"source/books/s27237850.jpg","hash":"4acd9df66e8be94c4aca768e21eb3dca7b2422c7","modified":1641047535520},{"_id":"source/books/s1469173.jpg","hash":"904eb97dfcac9182592e1bc0ce8d7bb501f8a62a","modified":1641047535519},{"_id":"source/books/s28277258.jpg","hash":"acc393fc80c56c1bda1f2ab087f42025852a4885","modified":1641047535520},{"_id":"source/books/s28383857.jpg","hash":"3fe743d2529d911d7ac0eaeead4849c1b94f0722","modified":1641047535520},{"_id":"source/books/s29621120.jpg","hash":"3b7f2499ad73b55cb2792599370108d123302574","modified":1641047535520},{"_id":"source/books/s29634528.jpg","hash":"52adc781d52e28a2397e346a48df798f8d835fce","modified":1641047535520},{"_id":"source/books/s29737802.jpg","hash":"a8c101fb7f65805d084dbf7e023fe60ed5f65f80","modified":1641047535521},{"_id":"source/books/s30011804.jpg","hash":"a562d2492697b60b535a28852d5e677ea285bb15","modified":1641047535521},{"_id":"source/books/s28470753.jpg","hash":"0b68b602af62292f083f501f42148d32fc4f19e3","modified":1641047535520},{"_id":"source/books/s33471187.jpg","hash":"480c05e7b99de1dbd782c8ab95e8fcfd8c38cccb","modified":1641047535521},{"_id":"source/books/s32294606.jpg","hash":"d21a8f4f689810f30fe4611d2362c1d4298bef95","modified":1641047535521},{"_id":"source/books/s33492346.jpg","hash":"955ba8d37eec573dd9636eaaa3e9b8b8baa48d79","modified":1641047535521},{"_id":"source/books/s33556519.jpg","hash":"d468adb4d03ed36107b3677f929d597ffec7085e","modified":1641047535522},{"_id":"source/books/s33522285.jpg","hash":"b0fd4ed17235259215f87e95ee3bdca2882fc92a","modified":1641047535522},{"_id":"source/books/s3984108.jpg","hash":"61ac4be3f0d6d6570300ed1e31b1e6dc1a9691a1","modified":1641047535522},{"_id":"source/books/s8873145.jpg","hash":"781e2169825f112906f63d329acf5ee98d2df38e","modified":1641047535522},{"_id":"source/music/index.md","hash":"a25fb9bac0a153e103f8fce52a4fbc94a0f9fc14","modified":1641047535583},{"_id":"source/nonsense/index.md","hash":"3eb4b49aff424700fcc67b2e7d86c6837fc6d1b5","modified":1641047535583},{"_id":"source/tags/index.md","hash":"9e8ad71533e956a4aea197e68f44decf1576b74e","modified":1641047535583},{"_id":"source/gallery/深圳/index.md","hash":"4632e5f52edcf91de5905de43d36bceb7a829014","modified":1641047535572},{"_id":"source/_posts/.obsidian/app.json","hash":"ad001769c49663b0d6d8e447f9e16955b7db5876","modified":1651763868235},{"_id":"source/_posts/.obsidian/appearance.json","hash":"bf21a9e8fbc5a3846fb05b4fa0859e0917b2202f","modified":1651763868236},{"_id":"source/_posts/.obsidian/core-plugins.json","hash":"072341e5a074625ec8b265787004641393a046de","modified":1651763867732},{"_id":"source/_posts/.obsidian/workspace","hash":"a5b2c96164b90571e67a86902308b796497956e5","modified":1651763918299},{"_id":"source/_posts/.obsidian/graph.json","hash":"a93bba9a59cf4c87a0b0e2242289276c8b47417f","modified":1651763919399},{"_id":"source/_posts/.obsidian/hotkeys.json","hash":"bf21a9e8fbc5a3846fb05b4fa0859e0917b2202f","modified":1651763857002},{"_id":"source/gallery/莲花山公园/index.md","hash":"d50bea8f38fba8ba1254d47392b03e0c2a6b4a65","modified":1641047535583},{"_id":"source/gallery/focus/index.md","hash":"e0cdbffbacf53a6167c978204e472f5b17330283","modified":1641047535571},{"_id":"source/_posts/Django多表关联查询时数据错误/image-20211112182409956.png","hash":"04a6e0881a590dafd3d2d5108c21d07bc36243e0","modified":1641047535479},{"_id":"source/_posts/Django多表关联查询时数据错误/image-20211112181443714.png","hash":"a29e75df2f6bf0a978778df6f31310285a8b707f","modified":1641047535479},{"_id":"source/_posts/Django多表关联查询时数据错误/image-20211112184343393.png","hash":"b9b5fa839be2b8f8c8572615b62bbf40af7beab2","modified":1641047535480},{"_id":"source/_posts/MySQL性能优化：回表、覆盖索引及索引下推优化/InnoDB索引结构.png","hash":"e7eddc688733525496b80d0cefbc25838c5633ca","modified":1641047535494},{"_id":"source/_posts/MySQL主从复制原理/MySQL主从复制原理.png","hash":"7cddc4b77057aaa9a1a452727e0d2cde9450d445","modified":1641047535493},{"_id":"source/_posts/MySQL索引介绍/B+树索引结构.jpg","hash":"ac32ff3e29f26026f46c9649aca75a34c06cab24","modified":1641047535496},{"_id":"source/_posts/MySQL索引介绍/文章大纲.png","hash":"b47aa714794936ea5dc5e62a955a6a50dfa85aa7","modified":1641047535496},{"_id":"source/_posts/MySQL组复制介绍/单节点单主组复制架构.png","hash":"71f5bc72a75bf9300216bdc45dcd348f14c3de29","modified":1641047535498},{"_id":"source/_posts/MySQL组复制介绍/半同步复制原理.png","hash":"18ec2950e73f3a102d62d758c66c7db4c2329454","modified":1641047535498},{"_id":"source/_posts/MySQL组复制介绍/异步复制原理.png","hash":"7a7066b0a91399ef53e1a9c1c0841fc70fb7312b","modified":1641047535498},{"_id":"source/_posts/MySQL组复制介绍/组复制原理.png","hash":"91c5e3edbdabc61917f21a38665d9c5c34e59716","modified":1641047535498},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160948267.png","hash":"c248eccf4ec9dfa7bccd1d305f4dff06bdfa6a96","modified":1641047535504},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160943238.png","hash":"c248eccf4ec9dfa7bccd1d305f4dff06bdfa6a96","modified":1641047535504},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161008502.png","hash":"9bd92bde6ae1b904f69ae3c7b80e263f2896a40c","modified":1641047535504},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160843863.png","hash":"18e09f1f61607d732ace50c0826ec0a0ea87d9b5","modified":1641047535503},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161152973.png","hash":"e1fc861f23c39144b815a855e4f9a1a11530f270","modified":1641047535504},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161301912.png","hash":"704c2f1bfe6f435ebf087ab58fc0e67ba51857cb","modified":1641047535504},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161706814.png","hash":"19140f520ed4ac89d3a4de308d48f1810ebc1500","modified":1641047535505},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206162433796.png","hash":"69036a5784e4dab0b86b0ba3ca12502417bea645","modified":1641047535505},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161903300.png","hash":"1187f0bfe1164be23d5bd01804fde2a2cfb99759","modified":1641047535505},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206163142229.png","hash":"9adfdb2c00251c24af379784d7dc83d02b17c248","modified":1641047535506},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206163208246.png","hash":"b182ae79d63630e71abd8ad74c13785eea846eae","modified":1641047535506},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206163253121.png","hash":"a38585bd9d6f54dcf4bdee0ccb8541f4de252ef2","modified":1641047535506},{"_id":"source/_posts/搭建一个单主模式的MGR集群/单节点单主组复制架构.png","hash":"71f5bc72a75bf9300216bdc45dcd348f14c3de29","modified":1641047535512},{"_id":"source/gallery/深圳/20210910172451.jpg","hash":"b06e1af63c7116c7d836af30bee13ad17a36ea2f","modified":1641047535571},{"_id":"source/gallery/莲花山公园/20210925193719.jpg","hash":"5f570badc96b191c4dc1476ee9098efae3b83c9e","modified":1641047535583},{"_id":"source/gallery/focus/1575347430.jpg","hash":"717ab21f0c8101c3300bc239677d1902ade7821a","modified":1641047535525},{"_id":"source/gallery/focus/1578333602.jpg","hash":"2da5662f0622d64d0d637663e8ff349a3f051784","modified":1641047535544},{"_id":"source/gallery/focus/1579370403.jpg","hash":"473929e870fe2eb13c67818d2df02a9a520c25ed","modified":1641047535550},{"_id":"source/gallery/focus/1582912803.jpg","hash":"0a169f4b0502794c2f7a10e3068a41a1c8bcd120","modified":1641047535559},{"_id":"source/gallery/focus/1583258403.jpg","hash":"dcdc7e8e9273804a19b0e8d2afd243813dc195bc","modified":1641047535562},{"_id":"source/gallery/focus/1583431203.jpg","hash":"ebdaa9833ec783de43539459de6564527442f795","modified":1641047535563},{"_id":"source/_posts/InnoDB-Cluster部署/bg.jpg","hash":"1d78bf9da603355d9faff08e2f9ec425e782dbd0","modified":1641047535490},{"_id":"source/_posts/Python算法之冒泡排序/1604599205.jpg","hash":"0d68208a2b829ffad71271bf55b1a1c21a185fc5","modified":1641047535500},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160759969.png","hash":"ad6066d954be7ac47b14ad881cde84784b2decce","modified":1641047535503},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160755363.png","hash":"ad6066d954be7ac47b14ad881cde84784b2decce","modified":1641047535503},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206162611806.png","hash":"e147f03fe3cd367bd55815c538c81f0c56d9eb1c","modified":1641047535505},{"_id":"source/gallery/深圳/20210910172534.jpg","hash":"cdaf37ea7e7afbfd27ac80e0488a5403dc00c1c4","modified":1641047535571},{"_id":"source/gallery/莲花山公园/20210925193453.jpg","hash":"1424f3345139698c5461eb0cc6d0ee1b95acfe2c","modified":1641047535572},{"_id":"source/_drafts/五魁：信什么就会失去什么/1600020006.jpg","hash":"ba25a17c84e65235f025f7e68635421c619661e3","modified":1641047535472},{"_id":"source/gallery/莲花山公园/20210925193518.jpg","hash":"4928f000f5a9c4c1d823136c37b6eb90f52ac19e","modified":1641047535573},{"_id":"source/gallery/莲花山公园/20210925193523.jpg","hash":"29d4c2f461bea1f739614f7629ff2a8b9c9eb21e","modified":1641047535574},{"_id":"source/gallery/莲花山公园/20210925193603.jpg","hash":"d395e9945458ef8b88f24af76672be49a4fa84bb","modified":1641047535577},{"_id":"source/gallery/focus/1575174603.jpg","hash":"96e38d8f337db799368ff97f48a1eef17e400850","modified":1641047535523},{"_id":"source/gallery/莲花山公园/20210925193653.jpg","hash":"ea818c4ae0107f5f3415083c94aa235823b09845","modified":1641047535580},{"_id":"source/gallery/focus/1575261004.jpg","hash":"b797e47cff8232bdfb28d81910842ba84cc5bdc1","modified":1641047535524},{"_id":"source/gallery/focus/1575963003.jpg","hash":"f361bd4904fd8139c13efc322e95bd7f8a5afcb5","modified":1641047535530},{"_id":"source/gallery/focus/1577124003.jpg","hash":"a443339e057d845daa2f6d6a0f1ea177e9578d81","modified":1641047535538},{"_id":"source/gallery/focus/1578074404.jpg","hash":"440fc1b852dfd1d23826903a9468982a57742a60","modified":1641047535544},{"_id":"source/gallery/focus/1578852003.jpg","hash":"f43844dea1595ba2fe167ae7afec5b052897929d","modified":1641047535547},{"_id":"source/gallery/focus/1582135203.jpg","hash":"1b42cfb1a308d51e168b0bfad69716046810326f","modified":1641047535552},{"_id":"source/gallery/focus/1582480803.jpg","hash":"7e331f581fa77ae03d7d73ca276878ad2aca96a1","modified":1641047535554},{"_id":"source/gallery/focus/1583172003.jpg","hash":"e4564e9da5e367c160430c18085ba312381fb1bc","modified":1641047535561},{"_id":"source/gallery/focus/1582999203.jpg","hash":"4224328df7cdc2535b91b89179ecb17ef6c89a2c","modified":1641047535560},{"_id":"source/gallery/focus/1583863205.jpg","hash":"e4d40e0f12f0ca33f1270a7929a503fdf777c262","modified":1641047535567},{"_id":"source/gallery/focus/1584468003.jpg","hash":"2f773ee0297dfbdb02dee28bdd90b19f1fecd019","modified":1641047535570},{"_id":"source/_posts/Django多表关联查询时数据错误/1588096803.jpg","hash":"9de9a887c98d56f90be49da2751956e50ce2d9cc","modified":1641047535478},{"_id":"source/_posts/InnoDB-Cluster部署/InnoDB Cluster架构.jpg","hash":"43f74d5f9c23250cd754bc90e6b0f9f59d04cf76","modified":1641047535490},{"_id":"source/_posts/如何写好一篇技术文章/1603476003.jpg","hash":"0cf176350076f2038bceb42c46b50d6513b79349","modified":1641047535509},{"_id":"source/_posts/活着：现实与意义/活着.png","hash":"4191449f89c41114c212aad02daa2aaec80adaa2","modified":1641047535514},{"_id":"source/_posts/活着：现实与意义/活着.xmind","hash":"fce4467986b6baf7a14cbebe5587e9568a404e7a","modified":1641047535515},{"_id":"source/gallery/莲花山公园/20210925193528.jpg","hash":"fbc44dad3a8563d4d03f8da850b60f5a616df43f","modified":1641047535574},{"_id":"source/gallery/莲花山公园/20210925193623.jpg","hash":"5151448161a3d58d416a1401deaa67d4334d587d","modified":1641047535579},{"_id":"source/gallery/莲花山公园/20210925193703.jpg","hash":"92ab6a207d7fca314b9604f826e39b7e116dc841","modified":1641047535581},{"_id":"source/gallery/莲花山公园/20210925193708.jpg","hash":"06d493e2a2fa26bcf6fc45c96152d7cf4475a238","modified":1641047535581},{"_id":"source/gallery/莲花山公园/20210925193658.jpg","hash":"2a1f2663503bc9b51d5d226b5d546fb897aa262f","modified":1641047535581},{"_id":"source/gallery/莲花山公园/20210925193714.jpg","hash":"595294edf90f61b2201755daf50fa516be0fd88d","modified":1641047535582},{"_id":"source/gallery/focus/1575617405.jpg","hash":"abf0362ccb1d6bb3e3405937ac6dfe44abd0ce5a","modified":1641047535527},{"_id":"source/gallery/focus/1576135807.jpg","hash":"42e995120fec70516aa8471126427b2becdd711e","modified":1641047535533},{"_id":"source/gallery/focus/1577296802.jpg","hash":"cbe5ca7729f929fdb843aa8c598fd8d60ab42b6a","modified":1641047535540},{"_id":"source/gallery/focus/1579284003.jpg","hash":"a4603bb47beaab4b7775b9e40dea87a147639abb","modified":1641047535549},{"_id":"source/gallery/focus/1579543202.jpg","hash":"4c6617f05bc0973b508ef68ac3fecc6973cc2cd4","modified":1641047535551},{"_id":"source/gallery/focus/1582740003.jpg","hash":"ff4ba8afb27a2886c1d13b9cf19cbb472a0380f4","modified":1641047535556},{"_id":"source/gallery/focus/1584122405.jpg","hash":"8129213d94558aa9d8c7eedf1ce0d91794a77fb2","modified":1641047535569},{"_id":"source/gallery/focus/1584381603.jpg","hash":"f61b6080aeaa3209a5ad40004058f02211fe5de2","modified":1641047535570},{"_id":"source/_posts/CentOS7下如何设置MySQL开机自启/1611770404.jpg","hash":"81bd0d23c6f122ea40267542bc4a188e491bd2cb","modified":1641047535474},{"_id":"source/gallery/莲花山公园/20210925193545.jpg","hash":"9318dca9d9f1df5b0fb1457b769d5588e7e0831b","modified":1641047535575},{"_id":"source/gallery/莲花山公园/20210925193550.jpg","hash":"660937dccb5ff7745d6dbf52aa26eeab7571f023","modified":1641047535576},{"_id":"source/gallery/莲花山公园/20210925193617.jpg","hash":"44ac19e7c7a610c8aa5c4bbb081bcc4d92ea8167","modified":1641047535578},{"_id":"source/gallery/莲花山公园/20210925193558.jpg","hash":"554bf703b475673fc7e6ab439a14e6d18b523c35","modified":1641047535576},{"_id":"source/gallery/莲花山公园/20210925193628.jpg","hash":"e3ba456b8fb951b57d4b73a3b13c5737ed706ed8","modified":1641047535579},{"_id":"source/gallery/莲花山公园/20210925193633.jpg","hash":"6916a40fd96a375c4fe7a8a64728778bf57f1ff2","modified":1641047535579},{"_id":"source/gallery/focus/1575790204.jpg","hash":"d3098b91f6d467fda58b66f167ebdf1a3ceb5a5c","modified":1641047535528},{"_id":"source/gallery/focus/1576308604.jpg","hash":"e6049770a30abe1648c6259e047fba4f0ae01e9e","modified":1641047535534},{"_id":"source/gallery/focus/1576481405.jpg","hash":"b5cd9c62ad173738c975c941632d71e1c2d4058f","modified":1641047535536},{"_id":"source/gallery/focus/1576519204.jpg","hash":"765990186bb5d56715b36ab0925dfc18969034ce","modified":1641047535536},{"_id":"source/gallery/focus/1577383203.jpg","hash":"717c9137828f907cf6828f9fc093f47711fc5056","modified":1641047535540},{"_id":"source/gallery/focus/1583690403.jpg","hash":"fd57b5fcaf3709db9e60c561c2b82eff2e8cb5d6","modified":1641047535565},{"_id":"source/gallery/focus/1583949605.jpg","hash":"9d934b7902243e08b5d510506873cbf89b41ed19","modified":1641047535568},{"_id":"source/gallery/focus/1584295205.jpg","hash":"99ace47c33381edb7d0aabc44569e8defb11d9ea","modified":1641047535569},{"_id":"source/_posts/CentOS7下如何设置MySQL开机自启/1611856804.jpg","hash":"eb7448650a4b8bb1edbb49f07f2fe10cfdcffde3","modified":1641047535476},{"_id":"source/_posts/MySQL主从复制原理/1600279205.jpg","hash":"63678cd2cfaf1577e315f562fc01b337d996a8b8","modified":1641047535492},{"_id":"source/_posts/Python算法之冒泡排序/冒泡排序.gif","hash":"428ad0bcaf8286402078f6a6dd47b618e604b1ba","modified":1641047535501},{"_id":"source/_posts/Python生成公共包（SDK）/1590516004.jpg","hash":"983a08f3e5a6e22684ad120fec080ba6f18fdb63","modified":1641047535499},{"_id":"source/_posts/搭建一个单主模式的MGR集群/1605722404.jpg","hash":"7f0db0ceead2bc975bb10f643c73b9c93334f126","modified":1641047535512},{"_id":"source/_posts/如何写好一篇技术文章/如何写好一篇技术文章.png","hash":"06d7a29ae30faf2b66ebc74f4c62ac5e0b5e456d","modified":1641047535511},{"_id":"source/gallery/莲花山公园/20210925193510.jpg","hash":"b0e2ce71023228d0ab7880f248a3aa757c460440","modified":1641047535573},{"_id":"source/gallery/莲花山公园/20210925193535.jpg","hash":"71fceaa58defffe9dc47f5a569ca273a147b89db","modified":1641047535574},{"_id":"source/gallery/focus/1576605604.jpg","hash":"9b3337c56747c38393888a0b64952661f1252f9e","modified":1641047535537},{"_id":"source/gallery/focus/1577642402.jpg","hash":"c3d0bd6af0957c3a599f58b266958f801d072e4c","modified":1641047535542},{"_id":"source/gallery/focus/1578938404.jpg","hash":"e0750367f6f6a1abd38ffe1781b4e412710dbd3b","modified":1641047535547},{"_id":"source/gallery/focus/1579456803.jpg","hash":"2429c9875f307f30b6517522b9d86cea970302b6","modified":1641047535550},{"_id":"source/gallery/focus/1582308003.jpg","hash":"5b4d799c22d04a578461b10c49ea9fc540ad5015","modified":1641047535553},{"_id":"source/gallery/focus/1582394403.jpg","hash":"6c379d182543584c4ba619e04e65f663d02dbf0f","modified":1641047535554},{"_id":"source/gallery/focus/1583085603.jpg","hash":"c76c58ade9516c801722e3353206669ed9b259c2","modified":1641047535560},{"_id":"source/gallery/focus/1584208804.jpg","hash":"6db5bb37e8647bf6f424ec2b52d95d490c26acf4","modified":1641047535569},{"_id":"source/_posts/Django常见问题/Django.xmind","hash":"e267150bcd7891840720a2e6c5bab598b46dea9a","modified":1641047535487},{"_id":"source/_posts/MySQL性能优化：回表、覆盖索引及索引下推优化/1618855205.jpg","hash":"4c0d712af678096e9a8486d0eac2bf0bb7d1f0ec","modified":1641047535494},{"_id":"source/_posts/使用码云自动化部署应用/1624644007.jpg","hash":"a8971e4917b553abff8e6ab72271d98389ee24ac","modified":1641047535502},{"_id":"source/_posts/西西弗神话：去活还是去死/1623434404.jpg","hash":"04fd915b549c44a34b4eafd3bef2de75ef375f4a","modified":1641047535519},{"_id":"source/gallery/focus/1575703804.jpg","hash":"a70714b8d58e3ef7bd926120a786540993e1b1c2","modified":1641047535528},{"_id":"source/gallery/focus/1576049404.jpg","hash":"f5c8f3d4b2dc370a18dd6a4f785298afbe993e0c","modified":1641047535532},{"_id":"source/gallery/focus/1577728804.jpg","hash":"ffbb6c399526ffea78d49b3f5b9d3373b2d33706","modified":1641047535543},{"_id":"source/gallery/focus/1577210403.jpg","hash":"4be3c39b907e472067e871b2e9093922c4fa1aff","modified":1641047535539},{"_id":"source/gallery/focus/1579197604.jpg","hash":"c29b674de05d3fdf24c3f41cece2bf77d6c5c973","modified":1641047535549},{"_id":"source/gallery/focus/1582048805.jpg","hash":"f3bf7789277c14cceca730e767100d6e8dee6e3c","modified":1641047535551},{"_id":"source/gallery/focus/1582653602.jpg","hash":"859f92b46570dc829211a8aba8dcfef35df97562","modified":1641047535556},{"_id":"source/gallery/focus/1583344803.jpg","hash":"47f688bee18b26a24c18d380d2e7f5fa5138986b","modified":1641047535562},{"_id":"source/gallery/focus/1583517603.jpg","hash":"438d5bf915c322cd9e435fc83ffffe638dadad18","modified":1641047535563},{"_id":"source/gallery/focus/1584036003.jpg","hash":"b1f11fc1097e194c9191b8bd17142bf974412c1f","modified":1641047535568},{"_id":"source/_posts/MySQL8-0-OCP大纲/1603562403.jpg","hash":"0606fe25cecd2d9048dada9861c1328434d65ef3","modified":1641047535491},{"_id":"source/_posts/MySQL查询未区分大小写/1606845605.jpg","hash":"3eb10ca8f6d7032edb81c1fc2d249624509cf36c","modified":1641047535495},{"_id":"themes/butterfly/_config.yml","hash":"2c1166a6ba75f7c441494678cdd8279d728fe09a","modified":1662557349736},{"_id":"themes/butterfly/package.json","hash":"c18b118422237b964063874a099945b79573feca","modified":1641047535590},{"_id":"themes/butterfly/README.md","hash":"cedd13fcd8c75a68742265dd8eced4087e940ffd","modified":1641047535584},{"_id":"themes/butterfly/README_CN.md","hash":"459d6f3200863021bee1fe72a719aef236fb4090","modified":1641047535584},{"_id":"themes/butterfly/.github/stale.yml","hash":"05a55a87fa7f122c59683e41c8b2e37e79f688f0","modified":1641047535584},{"_id":"themes/butterfly/languages/en.yml","hash":"cd333235ff1648a6bf58dfafc81f2c57672a15a5","modified":1641047535584},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"741e522b2387f94764a73844e7b084cc7e927c54","modified":1641047535584},{"_id":"themes/butterfly/layout/archive.pug","hash":"bd62286afb64a51c97e800c5945620d51605d5fa","modified":1641047535585},{"_id":"themes/butterfly/layout/category.pug","hash":"60c1b795b6e227b5dd81963b51d29d1b81d0bf49","modified":1641047535585},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"79a50c40d9f5463f1fa42aa870ac6b8b84540412","modified":1641047535584},{"_id":"themes/butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1641047535590},{"_id":"themes/butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1641047535584},{"_id":"themes/butterfly/layout/page.pug","hash":"82aa988527a11835e7ac86ce4f23b8cd20014dfa","modified":1641047535590},{"_id":"themes/butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1641047535590},{"_id":"themes/butterfly/layout/post.pug","hash":"8d398c8925182699d9f2b9f1b727f06228488312","modified":1641047535590},{"_id":"themes/butterfly/languages/default.yml","hash":"7ca673fb629ea74f5ba5e75b4f0f95248cfb5090","modified":1641047535584},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/bug_report.md","hash":"476802922b774b679225102ac30a9d9183394701","modified":1641047535584},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"7d378e328a53cc99d5acc9682dce53f5eb61537d","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"4156224c47bfc2482281ac4e4df701c30476ff00","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"1377952022ee0a9eaa7a2fd1098f1571efc468d9","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"6f2608c4d93d3d10ae6b2cd7f8918f303f024321","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"0b80f04950bd0fe5e6c4e7b7559adf4d0ce28436","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"2d0453adf92a3fd3466cf0793f14685d17b8b51d","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"8dafc2dcd8c33f70a546fee443f0b6d80b3cd243","modified":1641047535586},{"_id":"themes/butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1641047535590},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"d575137c8779e50422c2416f4d0832fdea346ee6","modified":1641047535590},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"4cc2d517195c8779471d326ada09f9371cbad4dd","modified":1641047535590},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"9821872007cf57efae4b728dc575ef9d004547bb","modified":1641047535590},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1641047535590},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"65f2442e04c4defd16e7c1e67701d3bb41d9577a","modified":1641047535590},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"e00efdb5d02bc5c6eb4159e498af69fa61a7dbb9","modified":1641047535590},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"c6611d97087c51845cb1ab4821696a62fa33daeb","modified":1641047535590},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"54b9324e3506dcc9c9991ef5e11e37e66e21594f","modified":1641047535590},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"b816ded1451f28c7c54151ffe6c259b110253ae3","modified":1641047535591},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"94826ea6bcc4d2304199adae12c4e2b272caf529","modified":1641047535591},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1641047535591},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"03b2afef41d02bd1045c89578a02402c28356006","modified":1641047535591},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"f33858ffb9e88191e644796e11d2f901eb332308","modified":1641047535591},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"35f073021db93699fcac9ef351e26c59c31aadf7","modified":1641047535591},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"c16c6eb058af2b36bcd583b2591076c7ebdd51ad","modified":1641047535591},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"6c6e415623d0fd39da016d9e353bb4f5cca444f5","modified":1641047535591},{"_id":"themes/butterfly/source/css/background.css","hash":"a5d3ee178213696970adcf2bb8b53d111e44ca3d","modified":1641047535594},{"_id":"themes/butterfly/source/css/index.styl","hash":"861998e4ac67a59529a8245a9130d68f826c9c12","modified":1641047535594},{"_id":"themes/butterfly/source/css/var.styl","hash":"40c3f64422205a24e68ce1ad8fe8163f24fdd525","modified":1641047535594},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1641047535594},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/custom.md","hash":"eff495eb1584cf4586e33c76e8b2fa6a469a179b","modified":1641047535584},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/feature_request.md","hash":"f6867a2f0417fe89a0f2008730ee19dd38422021","modified":1641047535584},{"_id":"themes/butterfly/source/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1641047535594},{"_id":"themes/butterfly/.github/workflows/publish.yml","hash":"05857c2f265246d8de00e31037f2720709540c09","modified":1641047535584},{"_id":"themes/butterfly/scripts/events/init.js","hash":"018aa446265fe627301b1d53d7cba4f4ff1960ac","modified":1641047535590},{"_id":"themes/butterfly/source/img/favicon.png","hash":"86f0e5334c14472fea0d85e8bf56bb2559f82c1e","modified":1641047535605},{"_id":"themes/butterfly/source/img/avatar.png","hash":"d35a53dce5d374303f8aacc7f77d329630c8c788","modified":1641047535595},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1641047535606},{"_id":"themes/butterfly/source/img/wechat.jpg","hash":"4d29c66e741eaecde1165e1931b346394d6f2f64","modified":1641047535611},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1641047535611},{"_id":"themes/butterfly/source/js/main.js","hash":"8ef2821ceb92d81aa0f8c02ee932f094adcafb2b","modified":1641047535611},{"_id":"themes/butterfly/source/js/utils.js","hash":"8319b59c26ce8cd2b0ae7d030c4912215148fa92","modified":1641047535611},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"6c41f49a3e682067533dd9384e6e4511fc3a1349","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"90d01b88d0f406d00184960b1afe9230aec2ebe6","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"889ef16fa34a39e5533bc170e62f20f3450cc522","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"4def0aab9e2172ad1f29abd1535d8e08ff23aa0b","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"e55f8bdb876d5429a908498db1307b94094c0d06","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"65fa23680af0daf64930a399c2f2ca37809a8149","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"c205b9fd72b2fe19e6d15c5b5ab0fb38c653032e","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"24370508ee87f14418e8f06e9d79ad8c52a342c4","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1641047535585},{"_id":"themes/butterfly/layout/includes/loading/loading-js.pug","hash":"4cfcf0100e37ce91864703cd44f1cb99cb5493ea","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"0d953e51d04a9294a64153c89c20f491a9ec42d4","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/loading/loading.pug","hash":"5276937fbcceb9d62879dc47be880cd469a27349","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"2fb74d0b0e4b98749427c5a1a1b0acb6c85fadc4","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"4c3c5cb69b3aead8c232cb0fbc251929f28aad75","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"1f30952fed73dec21b42e2e30b7fe2e84618d2e4","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"92f81a437c9db49f7ebcf608bc09488ecdb55a21","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"b53a2d4f9c37b375a4446d2273dcfb7712d91b3e","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"dbec869c62135695495703a29ad7655e9965d461","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"93d4ebc7dc8228c7a10ddeb5a553d0dcdabbe145","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"5b404356f311d2ee36478291ca3553210867b738","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"88e3b611b03149665e4113cfa39595c1a3fca7e5","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"292646dfab135973b09f0fa9e3931e83da2ed30e","modified":1641047535586},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"b9d54a01d7c2a7a183cb7209e99430ce7fea1fe3","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"d5fec7dedc52ab23865fb4db002755e9bdaadc9f","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"933cb710d2dbcea25c6426a57c6f49d2f48b792c","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"1fbecfd299068f90d727f0c8c65e2a792fa6e3e2","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"d50e5c22cd6bc3c378bc581918136746cfa3447f","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"3d8e3706a056389176f55dd21956aabc78046761","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"0366c658cdcff839aa1df2e2d252a03a53fd427e","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"27afd2274bd5f2cbbf1bad9f0afe2b2b72c213ca","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"ae9336bf31cdad08ff586ead4295912a96563c76","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"9c1229af6ab48961021886882c473514101fba21","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"438aea3e713ed16b7559b9a80a9c5ec0221263df","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"0612aaee878f33ea8d3da0293c7dc3b6cd871466","modified":1641047535590},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"b5525891f6affd02c1ea3b2327c026882efe428b","modified":1641047535590},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"eda47f3e807a466ba8275627ea936c5100c43818","modified":1641047535591},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"e211efbd1952d4b1b881287aa43423133c1d166e","modified":1641047535591},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"85e72c70a0cef29e40be1968f5d23b06c6f8e3aa","modified":1641047535591},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"fa7a4c1685f391d60ed863e869b9604b59746c27","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"29f48f9370f245e6e575b5836bccf47eb5688d8b","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"f1b63892baafa48ab872bc79671d57aafd511f6c","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"7feb755ca7c22da36bbad11e74ecd95fdcf3b879","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"dd8cdf639ba2b726437c77fa7aa8d5edbabe8f9b","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"98235fcda3b87ad6f7e91eafbed94d0d6ae847ca","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"7d18a7be9cfea65091de3ef00014063d2d649912","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"90fe01c968696a9f791cb2b84fca621cbbb56f47","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"d748951d9fbcd04dda839085af78b01b8fa04cba","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"0551c5893d1589a3d17ce161e50ecb1d724cc6e8","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"ea1ba40dd5954c2ed718a126336fb7f94da4e66f","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"7a072589e6097dbe942783131964f2372fdf1eb6","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"2c5fb77c448ce0a734040c8ce532b28fed688899","modified":1641047535592},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"978c397d0966eaf9e6e2afd13866f8f4900b509f","modified":1641047535592},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"4e629f510b73f998ab208b739c5bd7dcd168d1a7","modified":1641047535593},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"f59a9a0059d5261251bdd6de45aa97dd2d11e633","modified":1641047535593},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":1641047535594},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"1c3f9d7efc3b9dfcfa8926a1132d0c44ffc7d4b2","modified":1641047535593},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"53ecae272e16223a436c497abbf25dd5f0fc4aaa","modified":1641047535593},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"d0386ba6d8d63afc72b9673e8f3e89df6446ffc2","modified":1641047535593},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"21964fdd6d74ffbea519418bab65024aee5f3736","modified":1641047535593},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1641047535593},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"f741e85295ce15c70a6027ec15a542636dd5dcca","modified":1641047535593},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"86fee274a62f7f034547342930f445c47378eb55","modified":1641047535594},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"917e0e399e117217184ca63d3eb5c4843bcccf7b","modified":1641047535593},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"1756791581c0ec51cb03353a09dac4778d944349","modified":1641047535594},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"f168f5c669978f633abe118cdcc4a12cfc883c01","modified":1641047535593},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"b0488ceacde74af139d66c8db5cb36cc21737b9b","modified":1641047535593},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"6874adc2e276443f354bbe50d0072e9bec37243c","modified":1641047535593},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"e554549f0a0ae85362f0b0e8687981741f486f6b","modified":1641047535593},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"97fec1e814f88237862f4d800a35362b802f6625","modified":1641047535593},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"2cc49d3f6a6beb9f7bff93e292f88aa5681da1d0","modified":1641047535593},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"7c4152162a03aa8331a783df5695e4ebbb816a8c","modified":1641047535593},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"9a881c031f463c486bd25248c2814fd09f97892b","modified":1641047535593},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"6befe4c51b86d0c1de130beeecad9e28d6442713","modified":1641047535593},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"65b45e61586f7e66c3f338370bfd9daadd71a4b7","modified":1641047535611},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"d85c3737b5c9548553a78b757a7698df126a52cf","modified":1641047535587},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"459e2541afda483916d16fce4aaa56b41bcd42ba","modified":1641047535611},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"7848ec58c6ec03243abf80a3b22b4dc10f3edf53","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"e3bf847553515174f6085df982f0623e9783db7a","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"ef1b2b5b980d6aeaa5d06b97d1afc9644b155a16","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"400ce038548d6f9ddb486150c724c87b6923a88b","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"cfe63e7d26a6665df6aa32ca90868ad48e05ec04","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"d1d2474420bf4edc2e43ccdff6f92b8b082143df","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"24a926756c2300b9c561aaab6bd3a71fdd16e16d","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"a111407fdcafcf1099e26ffa69786f8822c5d9fb","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"3f05f8311ae559d768ee3d0925e84ed767c314d3","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"2e52c64e89f16267596a8465841dd46f51820982","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"bba9871f446c10ffcc8fa9023f5a2eb701a86bae","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"0b7571919e8ad51285deda56a1868fccf8c563d7","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"da9813f8dc0d388869c15413cf056012cfb69e1a","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"bafb3d5710824caa59a56017afb058fd2b4eac65","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"52ea8aa26b84d3ad38ae28cdf0f163e9ca8dced7","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"481cd5053bafb1a19f623554a27d3aa077ea59c3","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"16378d8646ea3f4ac99c18f0296dd85b13f9d775","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"b871ea208e36398b4d668db9a9a0b61c79415381","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"36f3c603d2a2ecddaa6d2675a89d76ad94968f72","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"2b45fe09d5b591dca156b76dae99981f8d8e1c61","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"f9b00ead54573ba6e6eb33481588af144aab648d","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"3f3a3cd8bea2103dedd754f767aca5cb84d5f586","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"b443d6b16baf3ea250041342cc0361a42a412b7f","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"a47d8f9f593091cc91192c0c49deaa2c0d2317fd","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"34088a15655704d12e9b1807b47b3f6a860c9eec","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"f6506ccfd1ce994b9e53aa95588d0b6dbad11411","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"cb38ffe911023092a90a28f2ba8317a92b22cd0c","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"59b4c26a827ace5a54855881d199977103ff6f50","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"a2bc2601b7e0ae5caf1fc51a07390562d928620a","modified":1641047535588},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"d8f59e94eafc669c49349561dc5bbea3915aecb7","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"613280d61b8ab9612014ec016ae3d3698d36fd1a","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"da3b9437d061ee68dbc383057db5c73034c49605","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"309f51bc5302e72fc469d54c577fbcfe57fb07a8","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4c4a9c15215ae8ac5eadb0e086b278f76db9ee92","modified":1641047535589},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"006acc91ce25fc7c7d778ca043e970f57dc46b83","modified":1641047535589},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"8c0726fb8d9a497d2f900b0be2845efaa68e3d87","modified":1641047535591},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"89cbcc8e087788ecec18b5fa58710afacdb7d080","modified":1641047535591},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"76634112c64023177260d1317ae39cef2a68e35f","modified":1641047535587},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"c46a932257212f82e4a9974fbbc5de8878c8b383","modified":1641047535587},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"e0e7065124ef0d99f8322a47bc47838982e04ad0","modified":1641047535591},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1641047535591},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1641047535592},{"_id":"source/gallery/莲花山公园/20210925193724.jpg","hash":"96b93c7afa7771c2a0ec6e551eb05e509f601359","modified":1641047535583},{"_id":"source/gallery/focus/1575447585.jpg","hash":"b2129a9d074bd47a00e43d9ee54c7837c4790d65","modified":1641047535525},{"_id":"source/gallery/focus/1575531003.jpg","hash":"957bc27928c6512d371d2b1733693aa55f3a51b4","modified":1641047535526},{"_id":"source/gallery/focus/1576778403.jpg","hash":"1637dbf936ad47ddef2cdf5f41108a99ceac6677","modified":1641047535538},{"_id":"source/gallery/focus/1579111203.jpg","hash":"abfdbd7fbd8e8f0c62c27664d32a28236de82c28","modified":1641047535548},{"_id":"source/gallery/focus/1583604003.jpg","hash":"1373a81fbec335755f164cc5224585f1e6ce55e0","modified":1641047535565},{"_id":"source/gallery/focus/1583776802.jpg","hash":"c2d4882860b2ac4ae68a05ecc105211cf0ae3a3c","modified":1641047535566},{"_id":"source/_posts/Django常见问题/bg.jpg","hash":"273b9839f7e4710f7cd05da5a79ba80895156d0d","modified":1641047535488},{"_id":"source/gallery/focus/1575089241.jpg","hash":"e2b100ae018d4707236d43072045e92196b8a558","modified":1641047535523},{"_id":"source/gallery/focus/1576222204.jpg","hash":"d4b21b465064ed5858f404cfc40cfd34082e4df2","modified":1641047535534},{"_id":"source/gallery/focus/1577556003.jpg","hash":"dd35dc6f886c8bdaa9a333af0c6481d9f0d999b2","modified":1641047535542},{"_id":"themes/butterfly/source/img/about.jpg","hash":"7ca1984446d9049fd86a9e1abcb32eed6acea6ef","modified":1641047535594},{"_id":"themes/butterfly/source/img/archive.jpg","hash":"816c5238c9e4bdc6bdecc239824b98cbef726c3b","modified":1641047535595},{"_id":"source/gallery/莲花山公园/20210925193644.jpg","hash":"1c8d84be58304e3169619d85a6375711b037667a","modified":1641047535580},{"_id":"source/gallery/focus/1578765602.jpg","hash":"6f7dbe7797858ba9447e1352685db5b9e8507994","modified":1641047535546},{"_id":"source/gallery/focus/1582567203.jpg","hash":"ef76a4e4aae7cf7c44bfaa1df97a350893f98a87","modified":1641047535555},{"_id":"source/gallery/focus/1582826403.jpg","hash":"51d3c0e23351dcc4858e0d3d76fda757bd8a8576","modified":1641047535558},{"_id":"source/_posts/CentOS7下如何设置MySQL开机自启/1612461604.jpg","hash":"a9ae4cfd3950442c3eb19288bcb47e66bd158363","modified":1641047535477},{"_id":"themes/butterfly/source/img/footer.jpg","hash":"cbe5ca7729f929fdb843aa8c598fd8d60ab42b6a","modified":1641047535605},{"_id":"themes/butterfly/source/img/music.jpg","hash":"52f05ef71e318025c6b75b6e5f255adb213a2a28","modified":1641047535609},{"_id":"source/gallery/莲花山公园/20210925193609.jpg","hash":"6a1d5d3ea20323263984388e8fda2033c60c0100","modified":1641047535577},{"_id":"source/gallery/focus/1576395005.jpg","hash":"2d33a12a897e853d9d13fd34416c732844f8481e","modified":1641047535535},{"_id":"source/gallery/focus/1578420003.jpg","hash":"e49f4d2c7f4da1183b3e1b2e6f5e4cdea6da7074","modified":1641047535545},{"_id":"source/gallery/focus/1579024804.jpg","hash":"6139eab53e2395873fd3a50b833e9a65aa4c7757","modified":1641047535548},{"_id":"themes/butterfly/source/img/books.jpg","hash":"2d8c049317f7b942e121358b14b6e7287a38716c","modified":1641047535603},{"_id":"themes/butterfly/source/img/gallery.jpg","hash":"2e612dd3689d96cc05d823954f8696baa1c1d3ad","modified":1641047535606},{"_id":"themes/butterfly/source/img/top.jpg","hash":"db91efa12aec49563223ba148cf7e700f4871744","modified":1641047535611},{"_id":"source/gallery/focus/1576692003.jpg","hash":"ca2de8b07f7a0058a0329e415639ca7720f9fd01","modified":1641047535537},{"_id":"source/_posts/活着：现实与意义/451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg","hash":"12b24ce3b296ee46a15379d711dd48da4e368d15","modified":1641047535513},{"_id":"themes/butterfly/source/img/movies.jpg","hash":"b828e7bead55b16df22611fd5af266d93af54cda","modified":1641047535608},{"_id":"themes/butterfly/source/img/tag.jpg","hash":"7b297dffdd4832b35abef579d1187d8a62670b78","modified":1641047535610},{"_id":"source/gallery/focus/1582221604.jpg","hash":"8e4ae54a5796ac6f03ca9b187abe95d509c99c79","modified":1641047535552},{"_id":"themes/butterfly/source/img/category.jpg","hash":"54b3a89aa63f2c22d390578768a44f05edcfe3fa","modified":1641047535604},{"_id":"themes/butterfly/source/img/link.jpg","hash":"de54cdec5c469941a10e12081069f0c1bb5fe6af","modified":1641047535607},{"_id":"source/gallery/focus/1575876608.jpg","hash":"46b0c068ec13d78bea67483314a2e12f40b08806","modified":1641047535530},{"_id":"source/gallery/focus/1578679205.jpg","hash":"255716f2b421c3d81ab6fb0e2c3d97eace1f8a8a","modified":1641047535545},{"_id":"themes/butterfly/source/img/index.jpg","hash":"dccbc5c181652a6dec83fff7c53b72afd5de3ce8","modified":1641047535607},{"_id":"source/_posts/MySQL组复制介绍/46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg","hash":"dca2052caf637c57d408ab33f2c89495875ff25d","modified":1641047535497},{"_id":"source/_posts/股票盈利宝典：强庄股买卖/识别主力手法.png","hash":"fa880972f809369a36d07d08d897f70941f50daf","modified":1641047535518},{"_id":"source/_posts/Django常见问题/Django.png","hash":"f73e8606ba6510792615d0d3210022fde3c74686","modified":1641047535486},{"_id":"themes/butterfly/source/img/cover.jpg","hash":"661fcfc75570a53c8d93cc65f9e8cfce1b930184","modified":1641047535605},{"_id":"source/_posts/股票盈利宝典：强庄股买卖/pc29.jpg","hash":"3d427ceeeb05fea0bff5257c2290fcc5615d5c30","modified":1641047535516},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206164809814.png","hash":"2179575de1e8846344b74e41bd5548355828bcce","modified":1641047535508},{"_id":"themes/butterfly/source/img/background.jpg","hash":"147427fce7bfb1ccb919647155cbf4372f302416","modified":1641047535602},{"_id":"public/atom.xml","hash":"2c409a83f265de5849d4a0a94d9efc2c0d1bc056","modified":1662555088516},{"_id":"public/about/index.html","hash":"0feae32b8e3e9cbd343c53f24255a5f1f5a29e21","modified":1662561513183},{"_id":"public/gallery/index.html","hash":"e970052b6d52bbdbfb9a0ed2dfbe6ece77da959f","modified":1662561513183},{"_id":"public/categories/index.html","hash":"76aa1a76c420214114f6cb6eed781b0fdf30a521","modified":1662561513183},{"_id":"public/message/index.html","hash":"b4a6c72672bc493c7ca1cd30b08c201ce91baaa9","modified":1662561513183},{"_id":"public/movies/index.html","hash":"1097e06df8c1872394b3b6136842cecdce099a5d","modified":1662561513183},{"_id":"public/archives/index.html","hash":"4102d529801cf4549edb80f030ce28fda84ec996","modified":1662561513183},{"_id":"public/gallery/莲花山公园/index.html","hash":"832e18e9d1897d4936d7553a73d273d5833a9280","modified":1662555088516},{"_id":"public/nonsense/index.html","hash":"b977614a7f878e1e0a21c9480c04f7dc9a263a8a","modified":1662561513183},{"_id":"public/gallery/focus/index.html","hash":"5f4303fd28cfe291a63339a0a57d1875d8217912","modified":1662561513183},{"_id":"public/tags/index.html","hash":"4e299c2a8643f1007ed553f528f995cd20ad6fdf","modified":1662561513183},{"_id":"public/gallery/深圳/index.html","hash":"43fa60f908a2ac620d730f2784812cf79e90422e","modified":1662555088516},{"_id":"public/link/index.html","hash":"f4e0ca811f6b10e9b9014a3b1fde7be9dd6f2aea","modified":1662561513183},{"_id":"public/music/index.html","hash":"e2b7901a843053d1b0bb9a0aa84c4e7cc5124a7c","modified":1662561513183},{"_id":"public/books/index.html","hash":"c29e055ba71510ac3a66ef1c5eab599ce98f0e65","modified":1662561513183},{"_id":"public/2021/12/28/Python生成公共包（SDK）/index.html","hash":"efbe9c7febc336da2249ee7cf480fa9b057943ca","modified":1662557912702},{"_id":"public/2021/12/06/使用码云自动化部署应用/index.html","hash":"a0295f4f35aed24cdf05cbd8881dcb6611ceba4a","modified":1662557912702},{"_id":"public/2021/10/21/活着：现实与意义/index.html","hash":"01eb4a5b8f28ee5905e88372ecaf4d8cc296328c","modified":1662557912702},{"_id":"public/2021/09/29/股票盈利宝典：强庄股买卖/index.html","hash":"0248582e503380ad10a73b10a33ee3614a9cf023","modified":1662557912702},{"_id":"public/2021/09/07/西西弗神话：去活还是去死/index.html","hash":"98f4e05def60fc972a8e2345bc1bb9e5d6d651e0","modified":1662557912702},{"_id":"public/2021/07/15/MySQL性能优化：回表、覆盖索引及索引下推优化/index.html","hash":"80b834b41192775e9f60a8123209d1bcb57c4fbf","modified":1662557912702},{"_id":"public/2021/07/05/MySQL查询未区分大小写/index.html","hash":"5042abef2fc0611073d50752c2e02392bee5abf4","modified":1662557912702},{"_id":"public/2021/07/01/Python算法之冒泡排序/index.html","hash":"a8747a45133187e0b31f47adb340b8d22348a5c5","modified":1662557912702},{"_id":"public/2021/06/10/InnoDB-Cluster部署/index.html","hash":"d05aa1f61003425a898ba88143b6d3739899646f","modified":1662557912702},{"_id":"public/2021/06/08/Django多表关联查询时数据错误/index.html","hash":"503dbf17e1c57936ad87308345d668fa21251549","modified":1662557912702},{"_id":"public/2021/06/08/Django常见问题/index.html","hash":"3adee94d6edad6a67db0bac66cfd22bf500baef2","modified":1662557912702},{"_id":"public/2021/05/10/搭建一个单主模式的MGR集群/index.html","hash":"213cc05f9d10e556a329fe40911248f1b5db1b2d","modified":1662557912702},{"_id":"public/2021/05/07/MySQL组复制介绍/index.html","hash":"93f3c652754e517f95bedcd9c943009135303b40","modified":1662557912702},{"_id":"public/2021/04/06/MySQL主从复制原理/index.html","hash":"4a7f6c33130aad116e868a47a7ab44926b3ec3f0","modified":1662557912702},{"_id":"public/2021/03/27/如何写好一篇技术文章/index.html","hash":"3f7ef3fa063dd1159026875a4cebf97e66b70121","modified":1662557912702},{"_id":"public/2021/03/06/MySQL8-0-OCP大纲/index.html","hash":"20a2724a78e6485a9b094eb6f9af160aa1ab359e","modified":1662557912702},{"_id":"public/2020/12/29/CentOS7下如何设置MySQL开机自启/index.html","hash":"8fda44c3c05a33d2dba546870a17160096c50315","modified":1662557912702},{"_id":"public/2020/12/05/SQL注入介绍及预防/index.html","hash":"30c33c9c4fdf65bb28dab2a331573b2bc256c94f","modified":1662557912702},{"_id":"public/2020/10/23/MySQL忘记root密码怎么办/index.html","hash":"eb9d0b99c0fc7a99ae4b12bd72a4dbbb00f636fa","modified":1662557912702},{"_id":"public/2020/10/20/Oracle关闭的情况下如何修改参数/index.html","hash":"f4215ce0571ec69d41c1455502a799f7d96577a7","modified":1662557912702},{"_id":"public/2020/10/09/MySQL索引介绍/index.html","hash":"d4fb4ceb5e14ddbbfcd88c470ede1b2f928a4ef6","modified":1662557912702},{"_id":"public/2020/09/24/如何升级MySQL/index.html","hash":"0407e1a1f854c9e5475eb0e7efe437543d085eae","modified":1662557912702},{"_id":"public/2020/09/23/MySQL性能优化之key_buffer_size/index.html","hash":"e5d41a2a2be337d93c9bcf21ddad89985dd5b2c3","modified":1662557912702},{"_id":"public/categories/读书笔记/index.html","hash":"47a830cd903de86cd7b085b799cf28a4c3b7d14b","modified":1662561513183},{"_id":"public/categories/MySQL/index.html","hash":"bae3557eb383ea5d1d9879de5e04fa32632efffd","modified":1662561513183},{"_id":"public/categories/MySQL/page/2/index.html","hash":"eabbc2309baf4d27696917d722cc9a0e41fc825c","modified":1662561513183},{"_id":"public/categories/Python/index.html","hash":"040bed98f9ed2f0f5457f0742ca5c1a2343f1541","modified":1662561513183},{"_id":"public/categories/Oracle/index.html","hash":"aa93fef2c3a15fb58d26daa5da65cbe76c265589","modified":1662561513183},{"_id":"public/categories/技术文章/index.html","hash":"5994ccf7762fff2426ad17792793ce8ca60058f7","modified":1662561513183},{"_id":"public/categories/算法/index.html","hash":"647bf9baffd80c0c0e061deedb7ef7fa38b5a5fe","modified":1662561513183},{"_id":"public/categories/股票/index.html","hash":"a40ed05d5942d786912db3ed027a2b2a3ba2818d","modified":1662561513183},{"_id":"public/categories/运维/index.html","hash":"2d47d4e76a399335fad1f0b03a83c0120c828710","modified":1662561513183},{"_id":"public/tags/读书笔记/index.html","hash":"f79886d3e142f5247b149960de80bd6cdd44eb17","modified":1662561513183},{"_id":"public/tags/MySQL/index.html","hash":"a64cad5f5d20625913eade19a52859914ffac29c","modified":1662561513183},{"_id":"public/tags/MySQL/page/2/index.html","hash":"8692929bbb6788c5e2dfff5007e06cd0dba8555c","modified":1662561513183},{"_id":"public/tags/Python/index.html","hash":"2f83014ba445450d1ad74bba5881252145bb9a5b","modified":1662561513183},{"_id":"public/tags/Django/index.html","hash":"b2d4af884793715754b58dcabd5085469c38ebaa","modified":1662561513183},{"_id":"public/tags/OCP/index.html","hash":"ff61c99023a52ff2a7e9d12819d5605b5ff0f61f","modified":1662561513183},{"_id":"public/tags/索引/index.html","hash":"fdc027cebfed81e82909ae6fafa195c336dd8990","modified":1662561513183},{"_id":"public/tags/性能优化/index.html","hash":"3efb18402803f76cf09e3cda48b1828e4221b71a","modified":1662561513183},{"_id":"public/tags/Oracle/index.html","hash":"125afa35d94d2ab7be4f5686a9ba62afc8fe5d8a","modified":1662561513183},{"_id":"public/tags/组复制/index.html","hash":"8ace204fd324d2ee59a88f1aef124c0a8103a25c","modified":1662561513183},{"_id":"public/tags/排序算法/index.html","hash":"60986aa0ada75d4ce5bffb4e93723ffc658ce57b","modified":1662561513183},{"_id":"public/tags/冒泡排序/index.html","hash":"aeeeda2c416623d1435108942d51eaac884c8944","modified":1662561513183},{"_id":"public/tags/SQL注入/index.html","hash":"e1abf9f84cd1a45e78141731b953c52376a9007f","modified":1662561513183},{"_id":"public/tags/技术文章/index.html","hash":"803781407e2f767f75646059a0e03eb20c7395bb","modified":1662561513183},{"_id":"public/tags/股票/index.html","hash":"179e6351aae9206ac93340f779c81c6bd327e23a","modified":1662561513183},{"_id":"public/tags/运维/index.html","hash":"dcbb55529059801d302613e04dd37975012b8b3a","modified":1662561513183},{"_id":"public/tags/InnoDB-Cluster/index.html","hash":"9afc34a61cfa6975f0662e37459a17c87ef9423a","modified":1662561513183},{"_id":"public/index.html","hash":"904745a96b1cddf848e6d9ca762b59ae2a8c939a","modified":1662561513183},{"_id":"public/archives/page/2/index.html","hash":"9a5a8f31e6257f47397666eec653b2dbf2edf401","modified":1662561513183},{"_id":"public/archives/page/3/index.html","hash":"9cc10c946a915b7e57fd534dbb02a4cdd573cfee","modified":1662561513183},{"_id":"public/archives/2020/index.html","hash":"9f22313d16748f28636840519f2b959a809926f4","modified":1662561513183},{"_id":"public/page/3/index.html","hash":"3f0fea76ceb5925b07262a9b35e77fbc206e3421","modified":1662561513183},{"_id":"public/page/2/index.html","hash":"9669d8df437316f89e7dc12856f67f6261d221e0","modified":1662561513183},{"_id":"public/archives/2020/09/index.html","hash":"c63888fbd53ac11dade0dfe0ac852687146a2241","modified":1662561513183},{"_id":"public/archives/2020/10/index.html","hash":"63700a011c2e4d19f2b3ffdeceb381e98fc8001c","modified":1662561513183},{"_id":"public/archives/2020/12/index.html","hash":"b9544f16ea28824bc3c006e460339bb95bfec90b","modified":1662561513183},{"_id":"public/archives/2021/index.html","hash":"f0387d9081d2c9a130a427dc9d5c738d8d791781","modified":1662561513183},{"_id":"public/archives/2021/page/2/index.html","hash":"d3a1d3729dfc03399dd0390b381319af57537d9e","modified":1662561513183},{"_id":"public/archives/2021/03/index.html","hash":"a38f20ab643628f7dffbd1ff92c7ece5070c3d44","modified":1662561513183},{"_id":"public/archives/2021/04/index.html","hash":"09b1d9f34ccc7d0d82db3957a2bc1afa70901245","modified":1662561513183},{"_id":"public/archives/2021/05/index.html","hash":"7623ed5b34e192c48dcffe7c07f51a66f607bd58","modified":1662561513183},{"_id":"public/archives/2021/06/index.html","hash":"8f85093e259c416d939687818c3ecd5a6050886f","modified":1662561513183},{"_id":"public/archives/2021/07/index.html","hash":"a760e40f3a65d2947502c5b1c527078967796e2b","modified":1662561513183},{"_id":"public/archives/2021/09/index.html","hash":"2a0f1242a36a935cbcf9255b38254dbf11c9596b","modified":1662561513183},{"_id":"public/archives/2021/10/index.html","hash":"e8799de006d584b82d9c06eb4e3504425c43ba6e","modified":1662561513183},{"_id":"public/archives/2021/12/index.html","hash":"711639662b9a05d0819b002d4d47380c675226b6","modified":1662561513183},{"_id":"public/CNAME","hash":"3ceeb28e08cc647c6d042aaa1d986cf9c83dc199","modified":1662529369235},{"_id":"public/books/s1078958.jpg","hash":"f6735f46bf79dc42cefde1a56b90f61a1a912e7e","modified":1662529369235},{"_id":"public/books/s1469173.jpg","hash":"904eb97dfcac9182592e1bc0ce8d7bb501f8a62a","modified":1662529369235},{"_id":"public/books/s1458949.jpg","hash":"d83bdf489b89cdeb5274cf328f7bb91725cf18ef","modified":1662529369235},{"_id":"public/books/s1739240.jpg","hash":"e43782e52cf2cde711c28d167b4a8d3a76b8d7a4","modified":1662529369235},{"_id":"public/books/s28277258.jpg","hash":"acc393fc80c56c1bda1f2ab087f42025852a4885","modified":1662529369235},{"_id":"public/books/s28383857.jpg","hash":"3fe743d2529d911d7ac0eaeead4849c1b94f0722","modified":1662529369235},{"_id":"public/books/s28470753.jpg","hash":"0b68b602af62292f083f501f42148d32fc4f19e3","modified":1662529369235},{"_id":"public/books/s29621120.jpg","hash":"3b7f2499ad73b55cb2792599370108d123302574","modified":1662529369235},{"_id":"public/books/s29634528.jpg","hash":"52adc781d52e28a2397e346a48df798f8d835fce","modified":1662529369235},{"_id":"public/books/s29737802.jpg","hash":"a8c101fb7f65805d084dbf7e023fe60ed5f65f80","modified":1662529369235},{"_id":"public/books/s27237850.jpg","hash":"4acd9df66e8be94c4aca768e21eb3dca7b2422c7","modified":1662529369235},{"_id":"public/books/s33471187.jpg","hash":"480c05e7b99de1dbd782c8ab95e8fcfd8c38cccb","modified":1662529369235},{"_id":"public/books/s30011804.jpg","hash":"a562d2492697b60b535a28852d5e677ea285bb15","modified":1662529369235},{"_id":"public/books/s33522285.jpg","hash":"b0fd4ed17235259215f87e95ee3bdca2882fc92a","modified":1662529369235},{"_id":"public/books/s33492346.jpg","hash":"955ba8d37eec573dd9636eaaa3e9b8b8baa48d79","modified":1662529369235},{"_id":"public/books/s33556519.jpg","hash":"d468adb4d03ed36107b3677f929d597ffec7085e","modified":1662529369235},{"_id":"public/books/s8873145.jpg","hash":"781e2169825f112906f63d329acf5ee98d2df38e","modified":1662529369235},{"_id":"public/books/s3984108.jpg","hash":"61ac4be3f0d6d6570300ed1e31b1e6dc1a9691a1","modified":1662529369235},{"_id":"public/books/s32294606.jpg","hash":"d21a8f4f689810f30fe4611d2362c1d4298bef95","modified":1662529369235},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1662529369235},{"_id":"public/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1662529369235},{"_id":"public/img/avatar.png","hash":"d35a53dce5d374303f8aacc7f77d329630c8c788","modified":1662529369235},{"_id":"public/img/favicon.png","hash":"86f0e5334c14472fea0d85e8bf56bb2559f82c1e","modified":1662529369235},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1662529369235},{"_id":"public/img/wechat.jpg","hash":"4d29c66e741eaecde1165e1931b346394d6f2f64","modified":1662529369235},{"_id":"public/2021/06/08/Django多表关联查询时数据错误/image-20211112182409956.png","hash":"04a6e0881a590dafd3d2d5108c21d07bc36243e0","modified":1662529369235},{"_id":"public/2021/06/08/Django多表关联查询时数据错误/image-20211112184343393.png","hash":"b9b5fa839be2b8f8c8572615b62bbf40af7beab2","modified":1662529369235},{"_id":"public/2021/06/08/Django多表关联查询时数据错误/image-20211112181443714.png","hash":"a29e75df2f6bf0a978778df6f31310285a8b707f","modified":1662529369235},{"_id":"public/2021/07/15/MySQL性能优化：回表、覆盖索引及索引下推优化/InnoDB索引结构.png","hash":"e7eddc688733525496b80d0cefbc25838c5633ca","modified":1662529369235},{"_id":"public/2021/04/06/MySQL主从复制原理/MySQL主从复制原理.png","hash":"7cddc4b77057aaa9a1a452727e0d2cde9450d445","modified":1662529369235},{"_id":"public/2021/05/07/MySQL组复制介绍/半同步复制原理.png","hash":"18ec2950e73f3a102d62d758c66c7db4c2329454","modified":1662529369235},{"_id":"public/2021/05/07/MySQL组复制介绍/组复制原理.png","hash":"91c5e3edbdabc61917f21a38665d9c5c34e59716","modified":1662529369235},{"_id":"public/2021/05/07/MySQL组复制介绍/异步复制原理.png","hash":"7a7066b0a91399ef53e1a9c1c0841fc70fb7312b","modified":1662529369235},{"_id":"public/2020/10/09/MySQL索引介绍/B+树索引结构.jpg","hash":"ac32ff3e29f26026f46c9649aca75a34c06cab24","modified":1662529369235},{"_id":"public/2021/05/07/MySQL组复制介绍/单节点单主组复制架构.png","hash":"71f5bc72a75bf9300216bdc45dcd348f14c3de29","modified":1662529369235},{"_id":"public/2020/10/09/MySQL索引介绍/文章大纲.png","hash":"b47aa714794936ea5dc5e62a955a6a50dfa85aa7","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206160943238.png","hash":"c248eccf4ec9dfa7bccd1d305f4dff06bdfa6a96","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206160843863.png","hash":"18e09f1f61607d732ace50c0826ec0a0ea87d9b5","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206160948267.png","hash":"c248eccf4ec9dfa7bccd1d305f4dff06bdfa6a96","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206161008502.png","hash":"9bd92bde6ae1b904f69ae3c7b80e263f2896a40c","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206161152973.png","hash":"e1fc861f23c39144b815a855e4f9a1a11530f270","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206161301912.png","hash":"704c2f1bfe6f435ebf087ab58fc0e67ba51857cb","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206161903300.png","hash":"1187f0bfe1164be23d5bd01804fde2a2cfb99759","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206161706814.png","hash":"19140f520ed4ac89d3a4de308d48f1810ebc1500","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206163142229.png","hash":"9adfdb2c00251c24af379784d7dc83d02b17c248","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206162433796.png","hash":"69036a5784e4dab0b86b0ba3ca12502417bea645","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206163208246.png","hash":"b182ae79d63630e71abd8ad74c13785eea846eae","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206163253121.png","hash":"a38585bd9d6f54dcf4bdee0ccb8541f4de252ef2","modified":1662529369235},{"_id":"public/2021/05/10/搭建一个单主模式的MGR集群/单节点单主组复制架构.png","hash":"71f5bc72a75bf9300216bdc45dcd348f14c3de29","modified":1662529369235},{"_id":"public/assets/algolia/algoliasearchLite.min.js","hash":"284416885e4e80e27fa4eae6fc305f4de15b914c","modified":1662529369235},{"_id":"public/gallery/深圳/20210910172451.jpg","hash":"b06e1af63c7116c7d836af30bee13ad17a36ea2f","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193719.jpg","hash":"5f570badc96b191c4dc1476ee9098efae3b83c9e","modified":1662529369235},{"_id":"public/gallery/focus/1575347430.jpg","hash":"717ab21f0c8101c3300bc239677d1902ade7821a","modified":1662529369235},{"_id":"public/gallery/focus/1578333602.jpg","hash":"2da5662f0622d64d0d637663e8ff349a3f051784","modified":1662529369235},{"_id":"public/gallery/focus/1579370403.jpg","hash":"473929e870fe2eb13c67818d2df02a9a520c25ed","modified":1662529369235},{"_id":"public/gallery/focus/1582912803.jpg","hash":"0a169f4b0502794c2f7a10e3068a41a1c8bcd120","modified":1662529369235},{"_id":"public/gallery/focus/1583258403.jpg","hash":"dcdc7e8e9273804a19b0e8d2afd243813dc195bc","modified":1662529369235},{"_id":"public/gallery/focus/1583431203.jpg","hash":"ebdaa9833ec783de43539459de6564527442f795","modified":1662529369235},{"_id":"public/2021/07/01/Python算法之冒泡排序/1604599205.jpg","hash":"0d68208a2b829ffad71271bf55b1a1c21a185fc5","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206160759969.png","hash":"ad6066d954be7ac47b14ad881cde84784b2decce","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206160755363.png","hash":"ad6066d954be7ac47b14ad881cde84784b2decce","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206162611806.png","hash":"e147f03fe3cd367bd55815c538c81f0c56d9eb1c","modified":1662529369235},{"_id":"public/2021/06/10/InnoDB-Cluster部署/bg.jpg","hash":"1d78bf9da603355d9faff08e2f9ec425e782dbd0","modified":1662529369235},{"_id":"public/assets/algolia/algoliasearch.min.js","hash":"a3b131a9a47ccc16f4dd8988fabb6d306548db2f","modified":1662529369235},{"_id":"public/assets/algolia/algoliasearchLite.js","hash":"e56ad6b82caf69066de545201014291fc961635e","modified":1662529369235},{"_id":"public/gallery/深圳/20210910172534.jpg","hash":"cdaf37ea7e7afbfd27ac80e0488a5403dc00c1c4","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193653.jpg","hash":"ea818c4ae0107f5f3415083c94aa235823b09845","modified":1662529369235},{"_id":"public/gallery/focus/1575261004.jpg","hash":"b797e47cff8232bdfb28d81910842ba84cc5bdc1","modified":1662529369235},{"_id":"public/gallery/focus/1575174603.jpg","hash":"96e38d8f337db799368ff97f48a1eef17e400850","modified":1662529369235},{"_id":"public/gallery/focus/1575963003.jpg","hash":"f361bd4904fd8139c13efc322e95bd7f8a5afcb5","modified":1662529369235},{"_id":"public/gallery/focus/1577124003.jpg","hash":"a443339e057d845daa2f6d6a0f1ea177e9578d81","modified":1662529369235},{"_id":"public/gallery/focus/1578852003.jpg","hash":"f43844dea1595ba2fe167ae7afec5b052897929d","modified":1662529369235},{"_id":"public/gallery/focus/1578074404.jpg","hash":"440fc1b852dfd1d23826903a9468982a57742a60","modified":1662529369235},{"_id":"public/gallery/focus/1582135203.jpg","hash":"1b42cfb1a308d51e168b0bfad69716046810326f","modified":1662529369235},{"_id":"public/gallery/focus/1582480803.jpg","hash":"7e331f581fa77ae03d7d73ca276878ad2aca96a1","modified":1662529369235},{"_id":"public/gallery/focus/1582999203.jpg","hash":"4224328df7cdc2535b91b89179ecb17ef6c89a2c","modified":1662529369235},{"_id":"public/gallery/focus/1583172003.jpg","hash":"e4564e9da5e367c160430c18085ba312381fb1bc","modified":1662529369235},{"_id":"public/gallery/focus/1583863205.jpg","hash":"e4d40e0f12f0ca33f1270a7929a503fdf777c262","modified":1662529369235},{"_id":"public/gallery/focus/1584468003.jpg","hash":"2f773ee0297dfbdb02dee28bdd90b19f1fecd019","modified":1662529369235},{"_id":"public/img/about.jpg","hash":"7ca1984446d9049fd86a9e1abcb32eed6acea6ef","modified":1662529369235},{"_id":"public/img/archive.jpg","hash":"816c5238c9e4bdc6bdecc239824b98cbef726c3b","modified":1662529369235},{"_id":"public/2020/12/29/CentOS7下如何设置MySQL开机自启/1611770404.jpg","hash":"81bd0d23c6f122ea40267542bc4a188e491bd2cb","modified":1662529369235},{"_id":"public/2021/06/08/Django多表关联查询时数据错误/1588096803.jpg","hash":"9de9a887c98d56f90be49da2751956e50ce2d9cc","modified":1662529369235},{"_id":"public/2021/10/21/活着：现实与意义/活着.xmind","hash":"fce4467986b6baf7a14cbebe5587e9568a404e7a","modified":1662529369235},{"_id":"public/2021/03/27/如何写好一篇技术文章/1603476003.jpg","hash":"0cf176350076f2038bceb42c46b50d6513b79349","modified":1662529369235},{"_id":"public/2021/06/10/InnoDB-Cluster部署/InnoDB Cluster架构.jpg","hash":"43f74d5f9c23250cd754bc90e6b0f9f59d04cf76","modified":1662529369235},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1662529369235},{"_id":"public/css/background.css","hash":"a5d3ee178213696970adcf2bb8b53d111e44ca3d","modified":1662529369235},{"_id":"public/js/search/algolia.js","hash":"65b45e61586f7e66c3f338370bfd9daadd71a4b7","modified":1662529369235},{"_id":"public/js/search/local-search.js","hash":"459e2541afda483916d16fce4aaa56b41bcd42ba","modified":1662529369235},{"_id":"public/js/utils.js","hash":"8319b59c26ce8cd2b0ae7d030c4912215148fa92","modified":1662529369235},{"_id":"public/css/index.css","hash":"2a95cfd6839ef59bbeae6575afd59a626d4b7e08","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193523.jpg","hash":"29d4c2f461bea1f739614f7629ff2a8b9c9eb21e","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193518.jpg","hash":"4928f000f5a9c4c1d823136c37b6eb90f52ac19e","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193453.jpg","hash":"1424f3345139698c5461eb0cc6d0ee1b95acfe2c","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193528.jpg","hash":"fbc44dad3a8563d4d03f8da850b60f5a616df43f","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193550.jpg","hash":"660937dccb5ff7745d6dbf52aa26eeab7571f023","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193703.jpg","hash":"92ab6a207d7fca314b9604f826e39b7e116dc841","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193623.jpg","hash":"5151448161a3d58d416a1401deaa67d4334d587d","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193708.jpg","hash":"06d493e2a2fa26bcf6fc45c96152d7cf4475a238","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193714.jpg","hash":"595294edf90f61b2201755daf50fa516be0fd88d","modified":1662529369235},{"_id":"public/gallery/focus/1575617405.jpg","hash":"abf0362ccb1d6bb3e3405937ac6dfe44abd0ce5a","modified":1662529369235},{"_id":"public/gallery/focus/1576135807.jpg","hash":"42e995120fec70516aa8471126427b2becdd711e","modified":1662529369235},{"_id":"public/gallery/focus/1577296802.jpg","hash":"cbe5ca7729f929fdb843aa8c598fd8d60ab42b6a","modified":1662529369235},{"_id":"public/gallery/focus/1577383203.jpg","hash":"717c9137828f907cf6828f9fc093f47711fc5056","modified":1662529369235},{"_id":"public/gallery/focus/1579284003.jpg","hash":"a4603bb47beaab4b7775b9e40dea87a147639abb","modified":1662529369235},{"_id":"public/gallery/focus/1582740003.jpg","hash":"ff4ba8afb27a2886c1d13b9cf19cbb472a0380f4","modified":1662529369235},{"_id":"public/gallery/focus/1584122405.jpg","hash":"8129213d94558aa9d8c7eedf1ce0d91794a77fb2","modified":1662529369235},{"_id":"public/gallery/focus/1584381603.jpg","hash":"f61b6080aeaa3209a5ad40004058f02211fe5de2","modified":1662529369235},{"_id":"public/img/footer.jpg","hash":"cbe5ca7729f929fdb843aa8c598fd8d60ab42b6a","modified":1662529369235},{"_id":"public/img/gallery.jpg","hash":"2e612dd3689d96cc05d823954f8696baa1c1d3ad","modified":1662529369235},{"_id":"public/img/music.jpg","hash":"52f05ef71e318025c6b75b6e5f255adb213a2a28","modified":1662529369235},{"_id":"public/2021/07/01/Python算法之冒泡排序/冒泡排序.gif","hash":"428ad0bcaf8286402078f6a6dd47b618e604b1ba","modified":1662529369235},{"_id":"public/2021/12/28/Python生成公共包（SDK）/1590516004.jpg","hash":"983a08f3e5a6e22684ad120fec080ba6f18fdb63","modified":1662529369235},{"_id":"public/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1662529369235},{"_id":"public/js/main.js","hash":"8ef2821ceb92d81aa0f8c02ee932f094adcafb2b","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193603.jpg","hash":"d395e9945458ef8b88f24af76672be49a4fa84bb","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193617.jpg","hash":"44ac19e7c7a610c8aa5c4bbb081bcc4d92ea8167","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193628.jpg","hash":"e3ba456b8fb951b57d4b73a3b13c5737ed706ed8","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193633.jpg","hash":"6916a40fd96a375c4fe7a8a64728778bf57f1ff2","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193658.jpg","hash":"2a1f2663503bc9b51d5d226b5d546fb897aa262f","modified":1662529369235},{"_id":"public/gallery/focus/1575790204.jpg","hash":"d3098b91f6d467fda58b66f167ebdf1a3ceb5a5c","modified":1662529369235},{"_id":"public/gallery/focus/1576481405.jpg","hash":"b5cd9c62ad173738c975c941632d71e1c2d4058f","modified":1662529369235},{"_id":"public/gallery/focus/1576308604.jpg","hash":"e6049770a30abe1648c6259e047fba4f0ae01e9e","modified":1662529369235},{"_id":"public/gallery/focus/1576519204.jpg","hash":"765990186bb5d56715b36ab0925dfc18969034ce","modified":1662529369235},{"_id":"public/gallery/focus/1579543202.jpg","hash":"4c6617f05bc0973b508ef68ac3fecc6973cc2cd4","modified":1662529369235},{"_id":"public/gallery/focus/1579456803.jpg","hash":"2429c9875f307f30b6517522b9d86cea970302b6","modified":1662529369235},{"_id":"public/gallery/focus/1583690403.jpg","hash":"fd57b5fcaf3709db9e60c561c2b82eff2e8cb5d6","modified":1662529369235},{"_id":"public/gallery/focus/1584295205.jpg","hash":"99ace47c33381edb7d0aabc44569e8defb11d9ea","modified":1662529369235},{"_id":"public/img/books.jpg","hash":"2d8c049317f7b942e121358b14b6e7287a38716c","modified":1662529369235},{"_id":"public/img/top.jpg","hash":"db91efa12aec49563223ba148cf7e700f4871744","modified":1662529369235},{"_id":"public/2020/12/29/CentOS7下如何设置MySQL开机自启/1611856804.jpg","hash":"eb7448650a4b8bb1edbb49f07f2fe10cfdcffde3","modified":1662529369235},{"_id":"public/2021/04/06/MySQL主从复制原理/1600279205.jpg","hash":"63678cd2cfaf1577e315f562fc01b337d996a8b8","modified":1662529369235},{"_id":"public/2021/10/21/活着：现实与意义/活着.png","hash":"4191449f89c41114c212aad02daa2aaec80adaa2","modified":1662529369235},{"_id":"public/2021/03/27/如何写好一篇技术文章/如何写好一篇技术文章.png","hash":"06d7a29ae30faf2b66ebc74f4c62ac5e0b5e456d","modified":1662529369235},{"_id":"public/2021/09/07/西西弗神话：去活还是去死/1623434404.jpg","hash":"04fd915b549c44a34b4eafd3bef2de75ef375f4a","modified":1662529369235},{"_id":"public/2021/05/10/搭建一个单主模式的MGR集群/1605722404.jpg","hash":"7f0db0ceead2bc975bb10f643c73b9c93334f126","modified":1662529369235},{"_id":"public/assets/algolia/algoliasearch.js","hash":"6948fcdf071e4983e784e8c458cf201536f77792","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193545.jpg","hash":"9318dca9d9f1df5b0fb1457b769d5588e7e0831b","modified":1662529369235},{"_id":"public/gallery/focus/1575447585.jpg","hash":"b2129a9d074bd47a00e43d9ee54c7837c4790d65","modified":1662529369235},{"_id":"public/gallery/focus/1576049404.jpg","hash":"f5c8f3d4b2dc370a18dd6a4f785298afbe993e0c","modified":1662529369235},{"_id":"public/gallery/focus/1576605604.jpg","hash":"9b3337c56747c38393888a0b64952661f1252f9e","modified":1662529369235},{"_id":"public/gallery/focus/1582308003.jpg","hash":"5b4d799c22d04a578461b10c49ea9fc540ad5015","modified":1662529369235},{"_id":"public/gallery/focus/1582394403.jpg","hash":"6c379d182543584c4ba619e04e65f663d02dbf0f","modified":1662529369235},{"_id":"public/gallery/focus/1583085603.jpg","hash":"c76c58ade9516c801722e3353206669ed9b259c2","modified":1662529369235},{"_id":"public/gallery/focus/1584036003.jpg","hash":"b1f11fc1097e194c9191b8bd17142bf974412c1f","modified":1662529369235},{"_id":"public/img/category.jpg","hash":"54b3a89aa63f2c22d390578768a44f05edcfe3fa","modified":1662529369235},{"_id":"public/img/tag.jpg","hash":"7b297dffdd4832b35abef579d1187d8a62670b78","modified":1662529369235},{"_id":"public/2021/07/15/MySQL性能优化：回表、覆盖索引及索引下推优化/1618855205.jpg","hash":"4c0d712af678096e9a8486d0eac2bf0bb7d1f0ec","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/1624644007.jpg","hash":"a8971e4917b553abff8e6ab72271d98389ee24ac","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193510.jpg","hash":"b0e2ce71023228d0ab7880f248a3aa757c460440","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193558.jpg","hash":"554bf703b475673fc7e6ab439a14e6d18b523c35","modified":1662529369235},{"_id":"public/gallery/focus/1575089241.jpg","hash":"e2b100ae018d4707236d43072045e92196b8a558","modified":1662529369235},{"_id":"public/gallery/focus/1575703804.jpg","hash":"a70714b8d58e3ef7bd926120a786540993e1b1c2","modified":1662529369235},{"_id":"public/gallery/focus/1575531003.jpg","hash":"957bc27928c6512d371d2b1733693aa55f3a51b4","modified":1662529369235},{"_id":"public/gallery/focus/1577210403.jpg","hash":"4be3c39b907e472067e871b2e9093922c4fa1aff","modified":1662529369235},{"_id":"public/gallery/focus/1576778403.jpg","hash":"1637dbf936ad47ddef2cdf5f41108a99ceac6677","modified":1662529369235},{"_id":"public/gallery/focus/1577642402.jpg","hash":"c3d0bd6af0957c3a599f58b266958f801d072e4c","modified":1662529369235},{"_id":"public/gallery/focus/1578938404.jpg","hash":"e0750367f6f6a1abd38ffe1781b4e412710dbd3b","modified":1662529369235},{"_id":"public/gallery/focus/1582048805.jpg","hash":"f3bf7789277c14cceca730e767100d6e8dee6e3c","modified":1662529369235},{"_id":"public/gallery/focus/1582653602.jpg","hash":"859f92b46570dc829211a8aba8dcfef35df97562","modified":1662529369235},{"_id":"public/gallery/focus/1583344803.jpg","hash":"47f688bee18b26a24c18d380d2e7f5fa5138986b","modified":1662529369235},{"_id":"public/gallery/focus/1584208804.jpg","hash":"6db5bb37e8647bf6f424ec2b52d95d490c26acf4","modified":1662529369235},{"_id":"public/img/link.jpg","hash":"de54cdec5c469941a10e12081069f0c1bb5fe6af","modified":1662529369235},{"_id":"public/img/movies.jpg","hash":"b828e7bead55b16df22611fd5af266d93af54cda","modified":1662529369235},{"_id":"public/2021/06/08/Django常见问题/Django.xmind","hash":"e267150bcd7891840720a2e6c5bab598b46dea9a","modified":1662529369235},{"_id":"public/2021/07/05/MySQL查询未区分大小写/1606845605.jpg","hash":"3eb10ca8f6d7032edb81c1fc2d249624509cf36c","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193535.jpg","hash":"71fceaa58defffe9dc47f5a569ca273a147b89db","modified":1662529369235},{"_id":"public/gallery/focus/1577728804.jpg","hash":"ffbb6c399526ffea78d49b3f5b9d3373b2d33706","modified":1662529369235},{"_id":"public/gallery/focus/1577556003.jpg","hash":"dd35dc6f886c8bdaa9a333af0c6481d9f0d999b2","modified":1662529369235},{"_id":"public/gallery/focus/1579197604.jpg","hash":"c29b674de05d3fdf24c3f41cece2bf77d6c5c973","modified":1662529369235},{"_id":"public/gallery/focus/1583776802.jpg","hash":"c2d4882860b2ac4ae68a05ecc105211cf0ae3a3c","modified":1662529369235},{"_id":"public/gallery/focus/1583949605.jpg","hash":"9d934b7902243e08b5d510506873cbf89b41ed19","modified":1662529369235},{"_id":"public/gallery/focus/1583517603.jpg","hash":"438d5bf915c322cd9e435fc83ffffe638dadad18","modified":1662529369235},{"_id":"public/2020/12/29/CentOS7下如何设置MySQL开机自启/1612461604.jpg","hash":"a9ae4cfd3950442c3eb19288bcb47e66bd158363","modified":1662529369235},{"_id":"public/2021/03/06/MySQL8-0-OCP大纲/1603562403.jpg","hash":"0606fe25cecd2d9048dada9861c1328434d65ef3","modified":1662529369235},{"_id":"public/2021/06/08/Django常见问题/bg.jpg","hash":"273b9839f7e4710f7cd05da5a79ba80895156d0d","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193609.jpg","hash":"6a1d5d3ea20323263984388e8fda2033c60c0100","modified":1662529369235},{"_id":"public/gallery/focus/1576222204.jpg","hash":"d4b21b465064ed5858f404cfc40cfd34082e4df2","modified":1662529369235},{"_id":"public/gallery/focus/1578765602.jpg","hash":"6f7dbe7797858ba9447e1352685db5b9e8507994","modified":1662529369235},{"_id":"public/gallery/focus/1579111203.jpg","hash":"abfdbd7fbd8e8f0c62c27664d32a28236de82c28","modified":1662529369235},{"_id":"public/gallery/focus/1582826403.jpg","hash":"51d3c0e23351dcc4858e0d3d76fda757bd8a8576","modified":1662529369235},{"_id":"public/2021/10/21/活着：现实与意义/451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg","hash":"12b24ce3b296ee46a15379d711dd48da4e368d15","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193724.jpg","hash":"96b93c7afa7771c2a0ec6e551eb05e509f601359","modified":1662529369235},{"_id":"public/gallery/focus/1582567203.jpg","hash":"ef76a4e4aae7cf7c44bfaa1df97a350893f98a87","modified":1662529369235},{"_id":"public/gallery/focus/1583604003.jpg","hash":"1373a81fbec335755f164cc5224585f1e6ce55e0","modified":1662529369235},{"_id":"public/gallery/莲花山公园/20210925193644.jpg","hash":"1c8d84be58304e3169619d85a6375711b037667a","modified":1662529369235},{"_id":"public/gallery/focus/1576395005.jpg","hash":"2d33a12a897e853d9d13fd34416c732844f8481e","modified":1662529369235},{"_id":"public/gallery/focus/1578679205.jpg","hash":"255716f2b421c3d81ab6fb0e2c3d97eace1f8a8a","modified":1662529369235},{"_id":"public/img/index.jpg","hash":"dccbc5c181652a6dec83fff7c53b72afd5de3ce8","modified":1662529369235},{"_id":"public/gallery/focus/1578420003.jpg","hash":"e49f4d2c7f4da1183b3e1b2e6f5e4cdea6da7074","modified":1662529369235},{"_id":"public/gallery/focus/1579024804.jpg","hash":"6139eab53e2395873fd3a50b833e9a65aa4c7757","modified":1662529369235},{"_id":"public/gallery/focus/1582221604.jpg","hash":"8e4ae54a5796ac6f03ca9b187abe95d509c99c79","modified":1662529369235},{"_id":"public/gallery/focus/1575876608.jpg","hash":"46b0c068ec13d78bea67483314a2e12f40b08806","modified":1662529369235},{"_id":"public/gallery/focus/1576692003.jpg","hash":"ca2de8b07f7a0058a0329e415639ca7720f9fd01","modified":1662529369235},{"_id":"public/2021/09/29/股票盈利宝典：强庄股买卖/识别主力手法.png","hash":"fa880972f809369a36d07d08d897f70941f50daf","modified":1662529369235},{"_id":"public/2021/06/08/Django常见问题/Django.png","hash":"f73e8606ba6510792615d0d3210022fde3c74686","modified":1662529369235},{"_id":"public/2021/05/07/MySQL组复制介绍/46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg","hash":"dca2052caf637c57d408ab33f2c89495875ff25d","modified":1662529369235},{"_id":"public/img/cover.jpg","hash":"661fcfc75570a53c8d93cc65f9e8cfce1b930184","modified":1662529369235},{"_id":"public/2021/12/06/使用码云自动化部署应用/image-20211206164809814.png","hash":"2179575de1e8846344b74e41bd5548355828bcce","modified":1662529369235},{"_id":"public/2021/09/29/股票盈利宝典：强庄股买卖/pc29.jpg","hash":"3d427ceeeb05fea0bff5257c2290fcc5615d5c30","modified":1662529369235},{"_id":"public/img/background.jpg","hash":"147427fce7bfb1ccb919647155cbf4372f302416","modified":1662529369235},{"_id":"source/gallery/.DS_Store","hash":"e6e39bccafb240373f6ac449cdc5bd60a1b03b81","modified":1662555370177},{"_id":"source/_posts/.DS_Store","hash":"c0c59a94ecc1c8a559817c0c215a407e3dea5606","modified":1662561083379},{"_id":"themes/butterfly/.DS_Store","hash":"5347c9dc4e4bf69cfa61e0aa4b5d70f34b5bc361","modified":1662561083406}],"Category":[{"name":"读书笔记","_id":"cl7r727us0014hx89a6rdg4l7"},{"name":"MySQL","_id":"cl7r727ux0019hx89auo93vrs"},{"name":"Python","_id":"cl7r727v9001lhx899wj4c5b5"},{"name":"Oracle","_id":"cl7r727vi0027hx896jg0amwz"},{"name":"算法","_id":"cl7r727vj002hhx89fqcs0zwf"},{"name":"技术文章","_id":"cl7r727vs003ehx892baah018"},{"name":"股票","_id":"cl7r727vv003mhx899fgrbbwi"},{"name":"运维","_id":"cl7r727vv003thx89eicgfeg3"}],"Data":[{"_id":"link","data":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}],"Page":[{"title":"关于我","date":"2021-08-19T10:21:02.000Z","top_img":"/img/about.jpg","_content":"","source":"about/index.md","raw":"---\ntitle: 关于我\ndate: 2021-08-19 18:21:02\ntop_img: /img/about.jpg\n---\n","updated":"2022-01-01T14:32:15.519Z","path":"about/index.html","comments":1,"layout":"page","_id":"cl7r727tv0000hx890v3nfuzo","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":""},{"title":"分类","date":"2021-08-19T06:46:40.000Z","type":"categories","top_img":"/img/category.jpg","_content":"\n","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2021-08-19 14:46:40\ntype: \"categories\"\ntop_img: /img/category.jpg\n---\n\n","updated":"2022-01-01T14:32:15.522Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cl7r727u30002hx89g6mybg2c","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":""},{"title":"archives","date":"2021-08-19T11:49:28.000Z","type":"archives","top_img":"/img/archives.jpg","_content":"","source":"archives/index.md","raw":"---\ntitle: archives\ndate: 2021-08-19 19:49:28\ntype: \"archives\"\ntop_img: /img/archives.jpg\n---\n","updated":"2022-01-01T14:32:15.519Z","path":"archives/index.html","comments":1,"layout":"page","_id":"cl7r727u50004hx89fsyp6ors","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":""},{"title":"图库","date":"2021-08-19T06:59:27.000Z","top_img":"/img/gallery.jpg","_content":"\n#　网络图片\n\n<div class=\"gallery-group-main\">\n    {% galleryGroup '聚焦' 'win10聚焦图片集合' '/gallery/focus' /gallery/focus/1575089241.jpg %}\n</div>","source":"gallery/index.md","raw":"---\ntitle: 图库\ndate: 2021-08-19 14:59:27\ntop_img: /img/gallery.jpg\n---\n\n#　网络图片\n\n<div class=\"gallery-group-main\">\n    {% galleryGroup '聚焦' 'win10聚焦图片集合' '/gallery/focus' /gallery/focus/1575089241.jpg %}\n</div>","updated":"2022-09-07T13:01:34.360Z","path":"gallery/index.html","_id":"cl7r727u60006hx89fiwn4x9x","comments":1,"layout":"page","content":"<h1 id=\"网络图片\"><a href=\"#网络图片\" class=\"headerlink\" title=\"网络图片\"></a>网络图片</h1><div class=\"gallery-group-main\">\n    \n  <figure class=\"gallery-group\">\n  <img class=\"gallery-group-img\" src='/gallery/focus/1575089241.jpg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">聚焦</div>\n  <p>win10聚焦图片集合</p>\n  <a href='/gallery/focus'></a>\n  </figcaption>\n  </figure>\n  \n</div>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<h1 id=\"网络图片\"><a href=\"#网络图片\" class=\"headerlink\" title=\"网络图片\"></a>网络图片</h1><div class=\"gallery-group-main\">\n    \n  <figure class=\"gallery-group\">\n  <img class=\"gallery-group-img\" src='/gallery/focus/1575089241.jpg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">聚焦</div>\n  <p>win10聚焦图片集合</p>\n  <a href='/gallery/focus'></a>\n  </figcaption>\n  </figure>\n  \n</div>"},{"title":"留言板","date":"2021-08-29T00:05:22.000Z","_content":"","source":"message/index.md","raw":"---\ntitle: 留言板\ndate: 2021-08-29 08:05:22\n---\n","updated":"2022-01-01T14:32:15.583Z","path":"message/index.html","comments":1,"layout":"page","_id":"cl7r727u70008hx891hvl31j8","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":""},{"title":"电影电视","date":"2021-08-19T09:54:17.000Z","top_img":"/img/movies.jpg","_content":"\n{% tabs books %}\n<!-- tab 在看@fas fa-book-reader -->\n在看电影电视清单\n<!-- endtab -->\n\n<!-- tab 已看@fas fa-book-open -->\n已看电影电视清单\n<!-- endtab -->\n\n<!-- tab 想看@fas fa-book -->\n想看电影电视清单\n<!-- endtab -->\n{% endtabs %}","source":"movies/index.md","raw":"---\ntitle: 电影电视\ndate: 2021-08-19 17:54:17\ntop_img: /img/movies.jpg\n---\n\n{% tabs books %}\n<!-- tab 在看@fas fa-book-reader -->\n在看电影电视清单\n<!-- endtab -->\n\n<!-- tab 已看@fas fa-book-open -->\n已看电影电视清单\n<!-- endtab -->\n\n<!-- tab 想看@fas fa-book -->\n想看电影电视清单\n<!-- endtab -->\n{% endtabs %}","updated":"2022-01-01T14:32:15.583Z","path":"movies/index.html","comments":1,"layout":"page","_id":"cl7r727u8000ahx893phldl03","content":"<div class=\"tabs\" id=\"books\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#books-1\"><i class=\"fas fa-book-reader\"></i>在看</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-2\"><i class=\"fas fa-book-open\"></i>已看</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-3\"><i class=\"fas fa-book\"></i>想看</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"books-1\"><p>在看电影电视清单</p><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-2\"><p>已看电影电视清单</p><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-3\"><p>想看电影电视清单</p><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<div class=\"tabs\" id=\"books\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#books-1\"><i class=\"fas fa-book-reader\"></i>在看</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-2\"><i class=\"fas fa-book-open\"></i>已看</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-3\"><i class=\"fas fa-book\"></i>想看</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"books-1\"><p>在看电影电视清单</p><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-2\"><p>已看电影电视清单</p><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-3\"><p>想看电影电视清单</p><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>"},{"title":"常用链接","date":"2021-08-19T06:47:50.000Z","type":"link","top_img":"/img/link.jpg","_content":"\n","source":"link/index.md","raw":"---\ntitle: 常用链接\ndate: 2021-08-19 14:47:50\ntype: \"link\"\ntop_img: /img/link.jpg\n---\n\n","updated":"2022-01-01T14:32:15.583Z","path":"link/index.html","comments":1,"layout":"page","_id":"cl7r727uc000chx893ywagtxp","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":""},{"title":"胡言乱语","type":"artitalk","comments":0,"date":"2021-08-25T13:49:16.000Z","_content":"\n<!-- 引用 artitalk -->\n\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\">\n</script>\n<!-- 存放说说的容器 -->\n\n<div id=\"artitalk_main\"></div>\n<script>\n    new Artitalk({\n        appId: 'dJKSQ2159XWwJNcj16nKYiuy-MdYXbMMI',\n        appKey: 'wmMYNVfJA2kLU2eCuGXj6KIn',\n        atComment: 0,\n        pageSize: 20,\n        avatarPla: 'http://blog.codingcat.net/img/avatar.png'\n    })\n</script>","source":"nonsense/index.md","raw":"---\ntitle: 胡言乱语\ntype: artitalk\ncomments: false\ndate: 2021-08-25 21:49:16\n---\n\n<!-- 引用 artitalk -->\n\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\">\n</script>\n<!-- 存放说说的容器 -->\n\n<div id=\"artitalk_main\"></div>\n<script>\n    new Artitalk({\n        appId: 'dJKSQ2159XWwJNcj16nKYiuy-MdYXbMMI',\n        appKey: 'wmMYNVfJA2kLU2eCuGXj6KIn',\n        atComment: 0,\n        pageSize: 20,\n        avatarPla: 'http://blog.codingcat.net/img/avatar.png'\n    })\n</script>","updated":"2022-01-01T14:32:15.583Z","path":"nonsense/index.html","layout":"page","_id":"cl7r727uc000ehx8986s5hmfi","content":"<!-- 引用 artitalk -->\n\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\">\n</script>\n<!-- 存放说说的容器 -->\n\n<div id=\"artitalk_main\"></div>\n<script>\n    new Artitalk({\n        appId: 'dJKSQ2159XWwJNcj16nKYiuy-MdYXbMMI',\n        appKey: 'wmMYNVfJA2kLU2eCuGXj6KIn',\n        atComment: 0,\n        pageSize: 20,\n        avatarPla: 'http://blog.codingcat.net/img/avatar.png'\n    })\n</script>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<!-- 引用 artitalk -->\n\n<script type=\"text/javascript\" src=\"https://unpkg.com/artitalk\">\n</script>\n<!-- 存放说说的容器 -->\n\n<div id=\"artitalk_main\"></div>\n<script>\n    new Artitalk({\n        appId: 'dJKSQ2159XWwJNcj16nKYiuy-MdYXbMMI',\n        appKey: 'wmMYNVfJA2kLU2eCuGXj6KIn',\n        atComment: 0,\n        pageSize: 20,\n        avatarPla: 'http://blog.codingcat.net/img/avatar.png'\n    })\n</script>"},{"title":"标签","date":"2021-08-19T06:47:17.000Z","type":"tags","top_img":"/img/tag.jpg","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2021-08-19 14:47:17\ntype: \"tags\"\ntop_img: /img/tag.jpg\n---\n","updated":"2022-01-01T14:32:15.583Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cl7r727ud000ghx89341t0ija","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":""},{"title":"聚焦","date":"2021-08-19T09:30:40.000Z","_content":"\n\n\n{% gallery %}\n![](1575089241.jpg)\n![](1575174603.jpg)\n![](1575261004.jpg)\n![](1575347430.jpg)\n![](1575447585.jpg)\n![](1575531003.jpg)\n![](1575617405.jpg)\n![](1575703804.jpg)\n![](1575790204.jpg)\n![](1575876608.jpg)\n![](1575963003.jpg)\n![](1576049404.jpg)\n![](1576135807.jpg)\n![](1576222204.jpg)\n![](1576308604.jpg)\n![](1576395005.jpg)\n![](1576481405.jpg)\n![](1576519204.jpg)\n![](1576605604.jpg)\n![](1576692003.jpg)\n![](1576778403.jpg)\n![](1577124003.jpg)\n![](1577210403.jpg)\n![](1577296802.jpg)\n![](1577383203.jpg)\n![](1577556003.jpg)\n![](1577642402.jpg)\n![](1577728804.jpg)\n![](1578074404.jpg)\n![](1578333602.jpg)\n![](1578420003.jpg)\n![](1578679205.jpg)\n![](1578765602.jpg)\n![](1578852003.jpg)\n![](1578938404.jpg)\n![](1579024804.jpg)\n![](1579111203.jpg)\n![](1579197604.jpg)\n![](1579284003.jpg)\n![](1579370403.jpg)\n![](1579456803.jpg)\n![](1579543202.jpg)\n![](1582048805.jpg)\n![](1582135203.jpg)\n![](1582221604.jpg)\n![](1582308003.jpg)\n![](1582394403.jpg)\n![](1582480803.jpg)\n![](1582567203.jpg)\n![](1582653602.jpg)\n![](1582740003.jpg)\n![](1582826403.jpg)\n![](1582912803.jpg)\n![](1582999203.jpg)\n![](1583085603.jpg)\n![](1583172003.jpg)\n![](1583258403.jpg)\n![](1583344803.jpg)\n![](1583431203.jpg)\n![](1583517603.jpg)\n![](1583604003.jpg)\n![](1583690403.jpg)\n![](1583776802.jpg)\n![](1583863205.jpg)\n![](1583949605.jpg)\n![](1584036003.jpg)\n![](1584122405.jpg)\n![](1584208804.jpg)\n![](1584295205.jpg)\n![](1584381603.jpg)\n![](1584468003.jpg)\n{% endgallery %}\n\n","source":"gallery/focus/index.md","raw":"---\ntitle: 聚焦\ndate: 2021-08-19 17:30:40\n---\n\n\n\n{% gallery %}\n![](1575089241.jpg)\n![](1575174603.jpg)\n![](1575261004.jpg)\n![](1575347430.jpg)\n![](1575447585.jpg)\n![](1575531003.jpg)\n![](1575617405.jpg)\n![](1575703804.jpg)\n![](1575790204.jpg)\n![](1575876608.jpg)\n![](1575963003.jpg)\n![](1576049404.jpg)\n![](1576135807.jpg)\n![](1576222204.jpg)\n![](1576308604.jpg)\n![](1576395005.jpg)\n![](1576481405.jpg)\n![](1576519204.jpg)\n![](1576605604.jpg)\n![](1576692003.jpg)\n![](1576778403.jpg)\n![](1577124003.jpg)\n![](1577210403.jpg)\n![](1577296802.jpg)\n![](1577383203.jpg)\n![](1577556003.jpg)\n![](1577642402.jpg)\n![](1577728804.jpg)\n![](1578074404.jpg)\n![](1578333602.jpg)\n![](1578420003.jpg)\n![](1578679205.jpg)\n![](1578765602.jpg)\n![](1578852003.jpg)\n![](1578938404.jpg)\n![](1579024804.jpg)\n![](1579111203.jpg)\n![](1579197604.jpg)\n![](1579284003.jpg)\n![](1579370403.jpg)\n![](1579456803.jpg)\n![](1579543202.jpg)\n![](1582048805.jpg)\n![](1582135203.jpg)\n![](1582221604.jpg)\n![](1582308003.jpg)\n![](1582394403.jpg)\n![](1582480803.jpg)\n![](1582567203.jpg)\n![](1582653602.jpg)\n![](1582740003.jpg)\n![](1582826403.jpg)\n![](1582912803.jpg)\n![](1582999203.jpg)\n![](1583085603.jpg)\n![](1583172003.jpg)\n![](1583258403.jpg)\n![](1583344803.jpg)\n![](1583431203.jpg)\n![](1583517603.jpg)\n![](1583604003.jpg)\n![](1583690403.jpg)\n![](1583776802.jpg)\n![](1583863205.jpg)\n![](1583949605.jpg)\n![](1584036003.jpg)\n![](1584122405.jpg)\n![](1584208804.jpg)\n![](1584295205.jpg)\n![](1584381603.jpg)\n![](1584468003.jpg)\n{% endgallery %}\n\n","updated":"2022-01-01T14:32:15.571Z","path":"gallery/focus/index.html","comments":1,"layout":"page","_id":"cl7r727ue000khx89434f7tcp","content":"<div class=\"justified-gallery\"><p><img src=\"1575089241.jpg\"><br><img src=\"1575174603.jpg\"><br><img src=\"1575261004.jpg\"><br><img src=\"1575347430.jpg\"><br><img src=\"1575447585.jpg\"><br><img src=\"1575531003.jpg\"><br><img src=\"1575617405.jpg\"><br><img src=\"1575703804.jpg\"><br><img src=\"1575790204.jpg\"><br><img src=\"1575876608.jpg\"><br><img src=\"1575963003.jpg\"><br><img src=\"1576049404.jpg\"><br><img src=\"1576135807.jpg\"><br><img src=\"1576222204.jpg\"><br><img src=\"1576308604.jpg\"><br><img src=\"1576395005.jpg\"><br><img src=\"1576481405.jpg\"><br><img src=\"1576519204.jpg\"><br><img src=\"1576605604.jpg\"><br><img src=\"1576692003.jpg\"><br><img src=\"1576778403.jpg\"><br><img src=\"1577124003.jpg\"><br><img src=\"1577210403.jpg\"><br><img src=\"1577296802.jpg\"><br><img src=\"1577383203.jpg\"><br><img src=\"1577556003.jpg\"><br><img src=\"1577642402.jpg\"><br><img src=\"1577728804.jpg\"><br><img src=\"1578074404.jpg\"><br><img src=\"1578333602.jpg\"><br><img src=\"1578420003.jpg\"><br><img src=\"1578679205.jpg\"><br><img src=\"1578765602.jpg\"><br><img src=\"1578852003.jpg\"><br><img src=\"1578938404.jpg\"><br><img src=\"1579024804.jpg\"><br><img src=\"1579111203.jpg\"><br><img src=\"1579197604.jpg\"><br><img src=\"1579284003.jpg\"><br><img src=\"1579370403.jpg\"><br><img src=\"1579456803.jpg\"><br><img src=\"1579543202.jpg\"><br><img src=\"1582048805.jpg\"><br><img src=\"1582135203.jpg\"><br><img src=\"1582221604.jpg\"><br><img src=\"1582308003.jpg\"><br><img src=\"1582394403.jpg\"><br><img src=\"1582480803.jpg\"><br><img src=\"1582567203.jpg\"><br><img src=\"1582653602.jpg\"><br><img src=\"1582740003.jpg\"><br><img src=\"1582826403.jpg\"><br><img src=\"1582912803.jpg\"><br><img src=\"1582999203.jpg\"><br><img src=\"1583085603.jpg\"><br><img src=\"1583172003.jpg\"><br><img src=\"1583258403.jpg\"><br><img src=\"1583344803.jpg\"><br><img src=\"1583431203.jpg\"><br><img src=\"1583517603.jpg\"><br><img src=\"1583604003.jpg\"><br><img src=\"1583690403.jpg\"><br><img src=\"1583776802.jpg\"><br><img src=\"1583863205.jpg\"><br><img src=\"1583949605.jpg\"><br><img src=\"1584036003.jpg\"><br><img src=\"1584122405.jpg\"><br><img src=\"1584208804.jpg\"><br><img src=\"1584295205.jpg\"><br><img src=\"1584381603.jpg\"><br><img src=\"1584468003.jpg\"></p>\n          </div>\n\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<div class=\"justified-gallery\"><p><img src=\"1575089241.jpg\"><br><img src=\"1575174603.jpg\"><br><img src=\"1575261004.jpg\"><br><img src=\"1575347430.jpg\"><br><img src=\"1575447585.jpg\"><br><img src=\"1575531003.jpg\"><br><img src=\"1575617405.jpg\"><br><img src=\"1575703804.jpg\"><br><img src=\"1575790204.jpg\"><br><img src=\"1575876608.jpg\"><br><img src=\"1575963003.jpg\"><br><img src=\"1576049404.jpg\"><br><img src=\"1576135807.jpg\"><br><img src=\"1576222204.jpg\"><br><img src=\"1576308604.jpg\"><br><img src=\"1576395005.jpg\"><br><img src=\"1576481405.jpg\"><br><img src=\"1576519204.jpg\"><br><img src=\"1576605604.jpg\"><br><img src=\"1576692003.jpg\"><br><img src=\"1576778403.jpg\"><br><img src=\"1577124003.jpg\"><br><img src=\"1577210403.jpg\"><br><img src=\"1577296802.jpg\"><br><img src=\"1577383203.jpg\"><br><img src=\"1577556003.jpg\"><br><img src=\"1577642402.jpg\"><br><img src=\"1577728804.jpg\"><br><img src=\"1578074404.jpg\"><br><img src=\"1578333602.jpg\"><br><img src=\"1578420003.jpg\"><br><img src=\"1578679205.jpg\"><br><img src=\"1578765602.jpg\"><br><img src=\"1578852003.jpg\"><br><img src=\"1578938404.jpg\"><br><img src=\"1579024804.jpg\"><br><img src=\"1579111203.jpg\"><br><img src=\"1579197604.jpg\"><br><img src=\"1579284003.jpg\"><br><img src=\"1579370403.jpg\"><br><img src=\"1579456803.jpg\"><br><img src=\"1579543202.jpg\"><br><img src=\"1582048805.jpg\"><br><img src=\"1582135203.jpg\"><br><img src=\"1582221604.jpg\"><br><img src=\"1582308003.jpg\"><br><img src=\"1582394403.jpg\"><br><img src=\"1582480803.jpg\"><br><img src=\"1582567203.jpg\"><br><img src=\"1582653602.jpg\"><br><img src=\"1582740003.jpg\"><br><img src=\"1582826403.jpg\"><br><img src=\"1582912803.jpg\"><br><img src=\"1582999203.jpg\"><br><img src=\"1583085603.jpg\"><br><img src=\"1583172003.jpg\"><br><img src=\"1583258403.jpg\"><br><img src=\"1583344803.jpg\"><br><img src=\"1583431203.jpg\"><br><img src=\"1583517603.jpg\"><br><img src=\"1583604003.jpg\"><br><img src=\"1583690403.jpg\"><br><img src=\"1583776802.jpg\"><br><img src=\"1583863205.jpg\"><br><img src=\"1583949605.jpg\"><br><img src=\"1584036003.jpg\"><br><img src=\"1584122405.jpg\"><br><img src=\"1584208804.jpg\"><br><img src=\"1584295205.jpg\"><br><img src=\"1584381603.jpg\"><br><img src=\"1584468003.jpg\"></p>\n          </div>\n\n"},{"title":"音乐","date":"2021-08-19T09:53:35.000Z","top_img":"/img/music.jpg","_content":"","source":"music/index.md","raw":"---\ntitle: 音乐\ndate: 2021-08-19 17:53:35\ntop_img: /img/music.jpg\n---\n","updated":"2022-01-01T14:32:15.583Z","path":"music/index.html","comments":1,"layout":"page","_id":"cl7r727uf000ohx895zcggdi1","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":""},{"title":"书籍清单","date":"2021-08-19T10:06:51.000Z","top_img":"/img/books.jpg","_content":"\n<style>\n    .card {\n        position: relative;\n        overflow: hidden;\n        margin-top: 2rem;\n        padding: 1rem 1.2rem;\n        border-radius: 8px;\n        background: var(--tab-botton-bg);\n        -webkit-box-shadow: var(--card-box-shadow);\n        box-shadow: var(--card-box-shadow);\n        -webkit-transition: box-shadow 0.3s;\n        -moz-transition: box-shadow 0.3s;\n        -o-transition: box-shadow 0.3s;\n        -ms-transition: box-shadow 0.3s;\n        transition: box-shadow 0.3s;\n    }\n\n    .image {\n        margin: 3px 0 0 0;\n        float: left;\n        text-align: center;\n        margin: 3px 12px 0 0;\n        max-width: 155px;\n        overflow: hidden;\n    }\n    \n    .desc {\n    }\n</style>\n<script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-latest.js\"></script>\n<script type=\"text/javascript\">\n    var books_data = {\n            \"reading\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s33556519.jpg\",\n                    \"name\": \"西西弗神话\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"(法)阿尔贝·加缪\",\n                            \"href\": \"https://book.douban.com/author/4513690/\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"沈志明\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 西西弗神话：去活还是去死 西西弗神话：去活还是去死 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"阿尔贝•加缪（1913—1960）是法国声名卓著的小说家、散文家和剧作家，“存在主义”文学的大师。1957年因“热情而冷静地阐明了当代向人类良知提出的种种问题”而获诺贝尔文学奖，是有史以来最年轻的诺奖获奖作家之一。加缪在他的小说、戏剧、随笔和论著中深刻地揭示出人在异己的世界中的孤独、个人与自身的日益异化，以及罪恶和死亡的不可避免，但他在揭示出世界的荒诞的同时却并不绝望和颓丧，他主张要在荒诞中奋起反抗，在绝望中坚持真理和正义，他为世人指出了一条基督教和马克思主义以外的自由人道主义道路。他直面惨淡人生的勇气，他“知其不可而为之”的大无畏精神使他在第二次世界大战之后不仅在法国，而且在欧洲并最终在全世界成为他那一代人的代言人和下一代人的精神导师。\"\n                        }\n                    ]\n                }\n            ],\n            \"read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s29621120.jpg\",\n                    \"name\": \"五魁\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"贾平凹\",\n                            \"href\": \"https://book.douban.com/author/4505931/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"海天出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 五魁：信什么就会失去什么 五魁：信什么就会失去什么 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"柳家大少爷娶亲，迎亲队伍在回家途中，遇到了土匪。为了保护美丽的新娘，驮夫五魁背着新娘逃跑，但最终没有逃过土匪的追击，新娘被抢走了。当夜五魁冒死深入匪寨，设计从土匪头领手中救出了新娘。两人千辛万苦回到柳家，柳家大少爷却因为猎枪走火，炸飞了双腿，成为了一个废人。新娘没有如五魁所愿，成为让人羡慕的柳家少奶奶，反而沦为了大少爷发泄的工具，五魁不忍女人所受非人的折磨和屈辱，带着女人逃进了深山老林。最终，女人因五魁杀死了与她亲昵的狗而羞愤自杀，而五魁则由一个坚持不碰女人一根手指的男人变成了一个拥有十一位压寨夫人的暴戾土匪。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1061118/\",\n                    \"image\": \"s1469173.jpg\",\n                    \"name\": \"活着\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"余华\",\n                            \"href\": \"https://book.douban.com/author/4503668/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海文艺出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 活着：现实与意义 活着：现实与意义 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"地主少爷富贵嗜赌成性，终于赌光了家业一贫如洗，穷困之中的富贵因为母亲生病前去求医，没想到半路上被国民党部队抓了壮丁，后被解放军所俘虏，回到家乡他才知道母亲已经去世，妻子家珍含辛茹苦带大了一双儿女，但女儿不幸变成了聋哑人，儿子机灵活泼…… 然而，真正的悲剧从此才开始渐次上演，每读一页，都让我们止不住泪湿双眼，因为生命里难得的温情将被一次次死亡撕扯得粉碎，只剩得老了的富贵伴随着一头老牛在阳光下回忆 \"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3580750/\",\n                    \"image\": \"s8873145.jpg\",\n                    \"name\": \"潜规则\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"吴思\",\n                            \"href\": \"https://book.douban.com/author/4611117/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"复旦大学出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 潜规则：那些有的没的 潜规则：那些有的没的 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这部以历史为解读对象的著作中，作者以亦雅亦俗、亦庄亦谐的写作方式，叙述了历史上值得人们思考的大大小小的无数案例，在生动、有趣地讲述官场故事的同时，作者透过历史表象，揭示出隐藏在正式规则之下、实际上支配着社会运行的不成文的规矩，并将其名之日“潜规则”，进而指出潜规则的产生在于现实的利害计算与趋利避害。书中对于潜规则的定义、特征，潜规则阴影下皇帝、官员、百姓的不同处境与抉择，潜规则盛行的社会土壤，以及潜规则何时会萎缩，均有论述。潜规则现象产生、盛行于我国的封建社会，但它一时还难以消失，只有加强社会主义民主，健全社会主义法制，才能最后根除潜规则。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1799240/\",\n                    \"image\": \"s1739240.jpg\",\n                    \"name\": \"君主论\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"尼科洛·马基雅维里\",\n                            \"href\": \"https://book.douban.com/author/187971/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海三联书店\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李蒙\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 君主论：那些有的没的 君主论：那些有的没的 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"君主国是什么？它有什么种类，怎样获得，怎样维持？它为什么会丧失？……《君主论》是意大利政治家、思想家马基雅维里的代表作，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖。<br />《君主论》是一本毁誉参半、不可不读的奇书，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖，自1532年开始印行，迄今470多年，从西方到东方，本书在政界、宗教界、学术等领域引起巨大的反响，被西方评论界列为和《圣经》、《资本论》等相提并论的影响人类历史的十部著作之一。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/24744505/\",\n                    \"image\": \"s28470753.jpg\",\n                    \"name\": \"人间失格\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"太宰治\",\n                            \"href\": \"https://book.douban.com/author/4526460/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"武汉出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"烨伊\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 人间失格：丧 人间失格：丧 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人间失格，即丧失为人的资格。由序、第一手札、第二手札、第三手札、后记共五个部分构成，其中序和后记以作者口吻叙说，三个手札则以主人公叶藏的口吻叙述。主人公叶藏胆小懦弱，惧怕世间的情感，不了解人类复杂的思想，继而通过搞笑取乐别人，隐藏真实的自己。后来发现饮酒作乐似乎更能逃避这个世界，于是终日放浪形骸，通过酒精、药物、女人来麻痹自己，最终走向毁灭。他被身为人最真切的痛苦所折磨，终其一生都在自我厌倦下寻求爱，逃避爱，最后只能毁灭自己。<br />太宰治的内心独白，一个渴望爱又不懂爱的“胆小鬼”。他无法理清人类生活的头绪，只得以滑稽搞笑来伪装自己。他由恐惧到绝望，由绝望到渴望离开这个世界。这就是《人间失格》。在这里，人性的丑陋和虚伪，无可遁形。“如今的我，谈不上...\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/6082808/\",\n                    \"image\": \"s27237850.jpg\",\n                    \"name\": \"百年孤独\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[哥伦比亚] 加西亚·马尔克斯\",\n                            \"href\": \"https://book.douban.com/author/1039386/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"范晔\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 百年孤独：七代人的离奇故事 百年孤独：七代人的离奇故事 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《百年孤独》是魔幻现实主义文学的代表作，描写了布恩迪亚家族七代人的传奇故事，以及加勒比海沿岸小镇马孔多的百年兴衰，反映了拉丁美洲一个世纪以来风云变幻的历史。作品融入神话传说、民间故事、宗教典故等神秘因素，巧妙地糅合了现实与虚幻，展现出一个瑰丽的想象世界，成为20世纪最重要的经典文学巨著之一。1982年加西亚•马尔克斯获得诺贝尔文学奖，奠定世界级文学大师的地位，很大程度上乃是凭借《百年孤独》的巨大影响。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1068920/\",\n                    \"image\": \"s1078958.jpg\",\n                    \"name\": \"飘\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [美国] 玛格丽特·米切尔\",\n                            \"href\": \"https://book.douban.com/author/4587509/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李美华\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 飘：明天又是新的一天 飘：明天又是新的一天 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"小说中的故事发生在1861年美国南北战争前夕。生活在南方的少女郝思嘉从小深受南方文化传统的熏陶，可在她的血液里却流淌着野性的叛逆因素。随着战火的蔓廷和生活环境的恶化，郝思嘉的叛逆个性越来越丰满，越鲜明，在一系列的的挫折中她改造了自我，改变了个人甚至整个家族的命运，成为时代时势造就的新女性的形象。<br />作品在描绘人物生活与爱情的同时，勾勒出南北双方在政治，经济，文化各个层次的异同，具有浓厚的史诗风格，堪称美国历史转折时期的真实写照，同时也成为历久不衰的爱情经典。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26680378/\",\n                    \"image\": \"s33522285.jpg\",\n                    \"name\": \"脂砚斋批评本·红楼梦\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [清] 曹雪芹 著 / 脂砚斋 评点\",\n                            \"href\": \"https://book.douban.com/author/4508611/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"岳麓书社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 红楼梦：谁解其中味 红楼梦：谁解其中味 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"古典名著在中国文学史上地位的确立，首先当然是这些名著本身所具有的独特魅力所致，但是也与这些小说刊刻之后，一大批眼光独到的小说批评家们极力批点评说有极大的关系。像李卓吾、金圣叹、毛宗岗、脂砚斋等名字在人们的心目中，就是与《西游记》、《三国演义》、《水浒传》、《红楼梦》密切相连的。他们不仅开创了中国古典小说批评史的新局面，也使更多的读者通过他们的批评更深入地了解了这些古典名著的精髓和魅力。脂砚斋这个名字更是与《红楼梦》密不可分，从他的评语中可以看出，脂砚斋与曹雪芹关系密切，但他们究竟是什么关系，众说纷纭，莫衷一是。有的认为他们就是同一个人，有的认为脂砚斋是书中史湘云的原型，也有人认为他们只是一般的亲友。无论脂砚斋是什么人，他对《红楼梦》所作的批评，则的确是给本来已经精彩无比的大观园锦上添花，能让读者对《红楼梦》更加着迷；也让后人对八十回后书中人物的命运有了更多的猜测和想象。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3995526/\",\n                    \"image\": \"s3984108.jpg\",\n                    \"name\": \"目送\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"龙应台\",\n                            \"href\": \"https://book.douban.com/author/104782/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"生活·读书·新知三联书店\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 目送：不用追，不必追 目送：不用追，不必追 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"目送共由七十四篇散文组成，是为一本极具亲情、感人至深的文集。由父亲的逝世、母亲的苍老、儿子的离开、朋友的牵挂、兄弟的携手共行，写出失败和脆弱、失落和放手，写出缠绵不舍和绝然的虚无。正如作者所说：“我慢慢地、慢慢地了解到，所谓父女母子一场，只不过意味着，你和他的缘分就是今生今世不断地在目送他的背影渐行渐远。你站在小路的这一端，看着他逐渐消失在小路转弯的地方，而且，他用背影默默地告诉你，不用追。”\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33440205/\",\n                    \"image\": \"s33492346.jpg\",\n                    \"name\": \"你当像鸟飞往你的山\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 塔拉·韦斯特弗\",\n                            \"href\": \"https://book.douban.com/author/4609348/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 你当像鸟飞往你的山：大山里走出的孩子 你当像鸟飞往你的山：大山里走出的孩子 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人们只看到我的与众不同：一个十七岁前从未踏入教室的大山女孩，却戴上一顶学历的高帽，熠熠生辉。只有我知道自己的真面目：我来自一个极少有人能想象的家庭。我的童年由垃圾场的废铜烂铁铸成，那里没有读书声，只有起重机的轰鸣。不上学，不就医，是父亲要我们坚持的忠诚与真理。父亲不允许我们拥有自己的声音，我们的意志是他眼中的恶魔。哈佛大学，剑桥大学，哲学硕士，历史博士……我知道，像我这样从垃圾堆里爬出来的无知女孩，能取得如今的成就，应当感激涕零才对。但我丝毫提不起热情。我曾怯懦、崩溃、自我怀疑，内心里有什么东西腐烂了，恶臭熏天。直到我逃离大山，打开另一个世界。那是教育给我的新世界，那是我生命的无限可能。\"\n                        }\n                    ]\n                }\n            ],\n            \"to_read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/25887924/\",\n                    \"image\": \"s28383857.jpg\",\n                    \"name\": \"卡拉马佐夫兄弟\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"荣如德\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"本书系俄国大作家陀思妥耶夫斯基代表作之一。小说通过一桩真实的弑父案，描写老卡拉马佐夫同三个儿子即两代人之间的尖锐冲突。老卡拉马佐夫贪婪好色，独占妻子留给儿子们的遗产，并与长子德米特里为一个风流女子争风吃醋。一天黑夜，德米特里疑心自己的情人去跟老头儿幽会，便闯入家园，一怒之下，差点儿把老头儿砸死。他仓皇逃离后，躲在暗中装病的老卡拉马佐夫的私生子斯乜尔加科夫，悄然杀死老爷，造成了一桩震惊全俄的扑朔迷离的血案，从而引发了一连串惊心动魄的事件。作品展示一个错综复杂的社会家庭、道德和人性的悲剧主题，体现了作家一生的最高艺术成就。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1437488/\",\n                    \"image\": \"s1458949.jpg\",\n                    \"name\": \"群魔\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"臧仲伦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《群魔》是陀思妥耶夫斯基的代表作之一。他在这部作品中塑造了19世纪40年代的自由主义者及70年代初民主青年的群像。作者着重探索了恐怖分子的内心活动。《群魔》的主人公之一是自称为革命者的彼得·韦尔霍文斯基。他通过其领导的秘密组织进行恐吓、讹诈、纵火、暗杀等恐怖活动，企图动摇社会基础，以便发起暴动，夺取政权。作者以令人惊叹的洞察力和独特的心理描写拆穿了他的骗局；他是个阴谋家和恶棍。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26954760/\",\n                    \"image\": \"s29634528.jpg\",\n                    \"name\": \"月亮与六便士\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"威廉·萨默塞特·毛姆\",\n                            \"href\": \"https://book.douban.com/author/4576950/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"浙江文艺出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"徐淳刚\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"“满地都是六便士，他却抬头看见了月亮。”<br />银行家查尔斯，人到中年，事业有成，为了追求内心隐秘的绘画梦想，突然抛妻别子，弃家出走。他深知：人的每一种身份都是一种自我绑架，唯有失去是通向自由之途。<br />在异国他乡，他贫病交加，对梦想却愈发坚定执着。他说：我必须画画，就像溺水的人必须挣扎。<br />在经历种种离奇遭遇后，他来到南太平洋的一座孤岛，同当地一位姑娘结婚生子，成功创作出一系列惊世杰作。就在此时，他被绝症和双目失明击倒，临死之前，他做出了让所有人震惊的决定……<br />人世漫长得转瞬即逝，有人见尘埃，有人见星辰。查尔斯就是那个终其一生在追逐星辰的人。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/30192587/\",\n                    \"image\": \"s29737802.jpg\",\n                    \"name\": \"塑造世界经济的50项伟大发明\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"蒂姆·哈福德\",\n                            \"href\": \"https://book.douban.com/author/1151589/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这本书聚焦于世界经济运行中令人着迷的一些细节，为此挑选了50项具体发明——纸张、条形码、知识产权和书写本身等。在每一个案例中，我们会近距离观察，看看这些发明到底改变了什么。一路上，我们会发现一些令人惊讶的问题的答案。<br />•艾尔顿•约翰与无纸化办公室的承诺有何联系？<br />•美国哪项发明在日本被限制40年，这对日本女性就业有何影响？<br />•1803年，为什么警察认为要两次处决一位伦敦的凶手——这与便携式电子产品有何联系？<br />•货币创新如何破坏议会大厦？<br />•哪个产品于1976年推出，很快又失败，但诺贝尔奖获得者经济学家保罗·萨缪尔森（Paul Samuelson）却将其与葡萄酒、字母表和轮子一起加以称赞？<br />•美联储主席耶伦·尤伦与忽必烈有共同之处吗？<br />这50项发明中，有一些比如犁，简单实用。另外一些如时钟，已经变得很精密。其中一些是固体，比如混凝土；其他一些如有限责任公司，是抽象的发明，你根本无法触及。有些，比如苹果手机，已经疯狂获利。其他一些如柴油机，最初是商业灾难。但是，它们都有故事可讲，让我了解到这个世界如何运行，这有助于我们注意周围一些看似平常的奇迹。其中一些涉及巨大、无情的经济力量; 另一些则是关于人类或荣耀或悲剧的故事。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26593084/\",\n                    \"image\": \"s28277258.jpg\",\n                    \"name\": \"迷人的材料\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"马克·米奥多尼克\",\n                            \"href\": \"https://book.douban.com/author/461039/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"未读·探索家·北京联合出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"赖盈满\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"从茶杯、喷气发动机到家用电器、内裤，我们的生活充满了材料。但你想过没有，为什么玻璃是透明的？是什么让橡皮筋有弹性？为什么曲别针会弯曲？为什么不锈钢不生锈？水泥也能做成衣服？世界上最薄却最坚硬的东西是什么？为什么某一种材料做成的东西会长那样？材料如何塑造了我们的世界又对我们的生活产生了怎样的影响？<br />世界顶级材料学大师带你用材料科学家的眼睛，以全新的方式看待你身边的每一样东西：钢、纸、混凝土、巧克力、塑料、玻璃、瓷器……<br />本书以渊博的知识和极富感染力的文字写就。它不仅揭露了各种物质背后的神奇结构，还告诉我们隐藏在其背后的精采故事。每一章介绍一种材料，辅以照片和手绘图，极富可读性和趣味性\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26890863/\",\n                    \"image\": \"s30011804.jpg\",\n                    \"name\": \"我们如何走到今天\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 史蒂文·约翰逊\",\n                            \"href\": \"https://book.douban.com/author/145468/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"秦启越\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《我们如何走到今天：重塑世界的6项创新》这是一本以新颖的眼光重新看待世界本质的科普常识巨著。专注于人类文明史上6种里程碑式的创新发明，审视伟大创意的力量与回响。《纽约时报》畅销书作家史蒂文·约翰逊倾心之作。同名纪录片《我们是如何走到今天的》于英国广播公司（BBC）分辑播出，并取得良好收视。6项创新，6种颠覆世界的方式。这是一本现代器物史，透析人们日常使用的基本物品的起源；更是一本社会变迁史，通过日常用品的演变透视社会生活的演进。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33408247/\",\n                    \"image\": \"s32294606.jpg\",\n                    \"name\": \"病毒星球\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美]卡尔·齐默\",\n                            \"href\": \"https://book.douban.com/author/292557/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"广西师范大学出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"刘旸\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"早在人类出现之前，病毒就占领了这颗星球，历经高温、酷寒或干旱等极端条件，到现在病毒仍然无处不在，抗生素或感冒糖浆等最近用来对付它们的小玩意，更是无法伤及病毒毫发。<br />病毒在我们的DNA里留下了丰富的信息，人类DNA片段中8%来自病毒，说它们是我们亲缘有点远的祖先也不为过。但是要小心，这些休眠在人类DNA中的片段在特定条件下可以复苏，重新组织成活跃的病毒。<br />病毒并不总是面目可憎，人类吸入的氧气里，有1/10是病毒惠予的。被视为宫颈癌罪魁祸首的HPV，其实男女通吃且分布广泛，但绝大多数情况下它们都与人类和平共处。病毒在不同宿主间穿梭，有一定几率携带上一部分宿主的基因片段，然后插入到下一位宿主的基因里，在你感叹人类或其他物种多样性的时候，别忘了其中也有病毒的一份功劳。<br />不可否认，病毒也是自然创造的冷血杀手。甲流、埃博拉、SARS，这些病毒让人类措手不及，它们本来只攻击蝙蝠、老鼠或鸟类等，怎料自然演化无意之间将人类写进了病毒的黑名单。尽管疫苗不断更新，但演化的力量让病毒一次次地突破我们的防线。<br />这本书会让你重新理解病毒与人类的关系，认识人类在万物中的位置。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/34464674/\",\n                    \"image\": \"s33471187.jpg\",\n                    \"name\": \"万物发明指南\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[加] 瑞安·诺思\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"王乔琦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"如果你忽然发现自己穿越到了只在历史书中读到过的古代，你该怎么办？<br />面对陌生的原始社会，没有电、没有手机、没有网络……没有任何现代化的工具，你该如何生存下去？<br />别担心，这本书可以帮到你！<br />从钻木取火到发明蒸汽机、计算机，以你的名字命名元素周期表和物理定律，<br />从时空穿越到再造人类文明，你只需要这一本书。<br />这是一本时光机维修手册，更是你成为人类文明主宰的秘籍。<br />快开始新奇的文明创造游戏吧！<br />这是一部穿越人类发展时空、图文并茂的科普作品，<br />追溯了人类发展历程中的重大发明发现，带领读者重新感受了人类文明的发展进程。<br />本书编排精妙，切入点新颖有趣，是为一位不小心“被穿越”的旅行者而打造的生存指南，读者可以跟随作者的脑洞，搭乘时间机器返回那些曾经在传说中听过的时间、地点，根据具体的情境思考自己该如何生存。<br />书中有详细的操作步骤，交互式设计令读者获得全新的阅读体验，展开一场别具一格的时空旅行和文明创造游戏。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"影响力\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"怪诞行为学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"错误的行为\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无价\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"魔鬼经济学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"思考快与慢\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"经济学原理\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"小狗钱钱\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"穷查理宝典\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"恶意一\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"嫌疑人X的献身\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"白夜行\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"罗杰疑案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无人生还\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"东方快车谋杀案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"占星术杀人魔法\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"三体\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"海伯利安\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"神们自己\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"仿生人会梦见电子羊吗\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"围城\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死疲劳\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死晶黄\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"竹林中\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"动物农场\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"树上的男爵\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"一个女人一生中的二十四小时\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"变形记\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"城堡\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"老人与海\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"撒哈拉的故事\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"血酬定律\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"爱的博弈\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"洞穴奇案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"朝花夕拾\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"乌合之众\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"约翰克里斯朵夫\",\n                    \"info\": []\n                }\n            ]\n        }\n    $(document).ready(function () {\n        for (obj in books_data) {\n            html = \"\";\n            for (var i = 0; i < books_data[obj].length; i++) {\n                html += \"<div class=\\\"card\\\">\"\n                    + \"<div class=\\\"image\\\">\"\n                    + \"<a class=\\\"nbg\\\" target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].douban + \"\\\" title=\\\"\" + books_data[obj][i].name + \"\\\">\"\n                    + \"<img src=\\\"./\" + books_data[obj][i].image + \"\\\" title=\\\"点击看大图\\\" alt=\\\"\" + books_data[obj][i].name + \"\\\" rel=\\\"v:photo\\\" style=\\\"max-width: 135px;max-height: 200px;\\\" />\"\n                    + \"</a>\"\n                    + \"<span>\" + books_data[obj][i].name + \"</span>\"\n                    + \"</div>\"\n                    + \"<div id=\\\"info\\\" class=\\\"desc\\\">\"\n                for (var j = 0; j < books_data[obj][i].info.length; j++) {\n                    html += \"<span class=\\\"pl\\\">\" + books_data[obj][i].info[j].key + \": </span>\"\n                    if (books_data[obj][i].info[j].href !== \"\" && books_data[obj][i].info[j].href !== undefined) {\n                        html += \"<a target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].info[j].href + \"\\\">\"\n                        html += books_data[obj][i].info[j].value\n                        html += \"</a>\"\n                    } else {\n                        html += books_data[obj][i].info[j].value\n                    }\n                    html += \"<br />\"\n                }\n                html += \"</div></div>\"\n            }\n            var elementId = \"read\"\n            if (obj === \"reading\") {\n                elementId = \"books-1\"\n            } else if (obj === \"to_read\") {\n                elementId = \"books-2\"\n            } else {\n                elementId = \"books-3\"\n            }\n            document.getElementById(elementId).innerHTML = html;\n        }\n    })\n</script>\n\n\n\n{% tabs books %}\n<!-- tab 在读@fas fa-book-reader -->\n\n<!-- endtab -->\n\n<!-- tab 想读@fas fa-book -->\n\n<!-- endtab -->\n\n<!-- tab 已读@fas fa-book-open -->\n\n<!-- endtab -->\n\n{% endtabs %}","source":"books/index.md","raw":"---\ntitle: 书籍清单\ndate: 2021-08-19 18:06:51\ntop_img: /img/books.jpg\n---\n\n<style>\n    .card {\n        position: relative;\n        overflow: hidden;\n        margin-top: 2rem;\n        padding: 1rem 1.2rem;\n        border-radius: 8px;\n        background: var(--tab-botton-bg);\n        -webkit-box-shadow: var(--card-box-shadow);\n        box-shadow: var(--card-box-shadow);\n        -webkit-transition: box-shadow 0.3s;\n        -moz-transition: box-shadow 0.3s;\n        -o-transition: box-shadow 0.3s;\n        -ms-transition: box-shadow 0.3s;\n        transition: box-shadow 0.3s;\n    }\n\n    .image {\n        margin: 3px 0 0 0;\n        float: left;\n        text-align: center;\n        margin: 3px 12px 0 0;\n        max-width: 155px;\n        overflow: hidden;\n    }\n    \n    .desc {\n    }\n</style>\n<script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-latest.js\"></script>\n<script type=\"text/javascript\">\n    var books_data = {\n            \"reading\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s33556519.jpg\",\n                    \"name\": \"西西弗神话\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"(法)阿尔贝·加缪\",\n                            \"href\": \"https://book.douban.com/author/4513690/\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"沈志明\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 西西弗神话：去活还是去死 西西弗神话：去活还是去死 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"阿尔贝•加缪（1913—1960）是法国声名卓著的小说家、散文家和剧作家，“存在主义”文学的大师。1957年因“热情而冷静地阐明了当代向人类良知提出的种种问题”而获诺贝尔文学奖，是有史以来最年轻的诺奖获奖作家之一。加缪在他的小说、戏剧、随笔和论著中深刻地揭示出人在异己的世界中的孤独、个人与自身的日益异化，以及罪恶和死亡的不可避免，但他在揭示出世界的荒诞的同时却并不绝望和颓丧，他主张要在荒诞中奋起反抗，在绝望中坚持真理和正义，他为世人指出了一条基督教和马克思主义以外的自由人道主义道路。他直面惨淡人生的勇气，他“知其不可而为之”的大无畏精神使他在第二次世界大战之后不仅在法国，而且在欧洲并最终在全世界成为他那一代人的代言人和下一代人的精神导师。\"\n                        }\n                    ]\n                }\n            ],\n            \"read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s29621120.jpg\",\n                    \"name\": \"五魁\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"贾平凹\",\n                            \"href\": \"https://book.douban.com/author/4505931/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"海天出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 五魁：信什么就会失去什么 五魁：信什么就会失去什么 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"柳家大少爷娶亲，迎亲队伍在回家途中，遇到了土匪。为了保护美丽的新娘，驮夫五魁背着新娘逃跑，但最终没有逃过土匪的追击，新娘被抢走了。当夜五魁冒死深入匪寨，设计从土匪头领手中救出了新娘。两人千辛万苦回到柳家，柳家大少爷却因为猎枪走火，炸飞了双腿，成为了一个废人。新娘没有如五魁所愿，成为让人羡慕的柳家少奶奶，反而沦为了大少爷发泄的工具，五魁不忍女人所受非人的折磨和屈辱，带着女人逃进了深山老林。最终，女人因五魁杀死了与她亲昵的狗而羞愤自杀，而五魁则由一个坚持不碰女人一根手指的男人变成了一个拥有十一位压寨夫人的暴戾土匪。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1061118/\",\n                    \"image\": \"s1469173.jpg\",\n                    \"name\": \"活着\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"余华\",\n                            \"href\": \"https://book.douban.com/author/4503668/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海文艺出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 活着：现实与意义 活着：现实与意义 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"地主少爷富贵嗜赌成性，终于赌光了家业一贫如洗，穷困之中的富贵因为母亲生病前去求医，没想到半路上被国民党部队抓了壮丁，后被解放军所俘虏，回到家乡他才知道母亲已经去世，妻子家珍含辛茹苦带大了一双儿女，但女儿不幸变成了聋哑人，儿子机灵活泼…… 然而，真正的悲剧从此才开始渐次上演，每读一页，都让我们止不住泪湿双眼，因为生命里难得的温情将被一次次死亡撕扯得粉碎，只剩得老了的富贵伴随着一头老牛在阳光下回忆 \"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3580750/\",\n                    \"image\": \"s8873145.jpg\",\n                    \"name\": \"潜规则\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"吴思\",\n                            \"href\": \"https://book.douban.com/author/4611117/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"复旦大学出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 潜规则：那些有的没的 潜规则：那些有的没的 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这部以历史为解读对象的著作中，作者以亦雅亦俗、亦庄亦谐的写作方式，叙述了历史上值得人们思考的大大小小的无数案例，在生动、有趣地讲述官场故事的同时，作者透过历史表象，揭示出隐藏在正式规则之下、实际上支配着社会运行的不成文的规矩，并将其名之日“潜规则”，进而指出潜规则的产生在于现实的利害计算与趋利避害。书中对于潜规则的定义、特征，潜规则阴影下皇帝、官员、百姓的不同处境与抉择，潜规则盛行的社会土壤，以及潜规则何时会萎缩，均有论述。潜规则现象产生、盛行于我国的封建社会，但它一时还难以消失，只有加强社会主义民主，健全社会主义法制，才能最后根除潜规则。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1799240/\",\n                    \"image\": \"s1739240.jpg\",\n                    \"name\": \"君主论\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"尼科洛·马基雅维里\",\n                            \"href\": \"https://book.douban.com/author/187971/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海三联书店\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李蒙\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 君主论：那些有的没的 君主论：那些有的没的 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"君主国是什么？它有什么种类，怎样获得，怎样维持？它为什么会丧失？……《君主论》是意大利政治家、思想家马基雅维里的代表作，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖。<br />《君主论》是一本毁誉参半、不可不读的奇书，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖，自1532年开始印行，迄今470多年，从西方到东方，本书在政界、宗教界、学术等领域引起巨大的反响，被西方评论界列为和《圣经》、《资本论》等相提并论的影响人类历史的十部著作之一。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/24744505/\",\n                    \"image\": \"s28470753.jpg\",\n                    \"name\": \"人间失格\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"太宰治\",\n                            \"href\": \"https://book.douban.com/author/4526460/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"武汉出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"烨伊\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 人间失格：丧 人间失格：丧 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人间失格，即丧失为人的资格。由序、第一手札、第二手札、第三手札、后记共五个部分构成，其中序和后记以作者口吻叙说，三个手札则以主人公叶藏的口吻叙述。主人公叶藏胆小懦弱，惧怕世间的情感，不了解人类复杂的思想，继而通过搞笑取乐别人，隐藏真实的自己。后来发现饮酒作乐似乎更能逃避这个世界，于是终日放浪形骸，通过酒精、药物、女人来麻痹自己，最终走向毁灭。他被身为人最真切的痛苦所折磨，终其一生都在自我厌倦下寻求爱，逃避爱，最后只能毁灭自己。<br />太宰治的内心独白，一个渴望爱又不懂爱的“胆小鬼”。他无法理清人类生活的头绪，只得以滑稽搞笑来伪装自己。他由恐惧到绝望，由绝望到渴望离开这个世界。这就是《人间失格》。在这里，人性的丑陋和虚伪，无可遁形。“如今的我，谈不上...\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/6082808/\",\n                    \"image\": \"s27237850.jpg\",\n                    \"name\": \"百年孤独\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[哥伦比亚] 加西亚·马尔克斯\",\n                            \"href\": \"https://book.douban.com/author/1039386/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"范晔\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 百年孤独：七代人的离奇故事 百年孤独：七代人的离奇故事 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《百年孤独》是魔幻现实主义文学的代表作，描写了布恩迪亚家族七代人的传奇故事，以及加勒比海沿岸小镇马孔多的百年兴衰，反映了拉丁美洲一个世纪以来风云变幻的历史。作品融入神话传说、民间故事、宗教典故等神秘因素，巧妙地糅合了现实与虚幻，展现出一个瑰丽的想象世界，成为20世纪最重要的经典文学巨著之一。1982年加西亚•马尔克斯获得诺贝尔文学奖，奠定世界级文学大师的地位，很大程度上乃是凭借《百年孤独》的巨大影响。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1068920/\",\n                    \"image\": \"s1078958.jpg\",\n                    \"name\": \"飘\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [美国] 玛格丽特·米切尔\",\n                            \"href\": \"https://book.douban.com/author/4587509/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李美华\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 飘：明天又是新的一天 飘：明天又是新的一天 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"小说中的故事发生在1861年美国南北战争前夕。生活在南方的少女郝思嘉从小深受南方文化传统的熏陶，可在她的血液里却流淌着野性的叛逆因素。随着战火的蔓廷和生活环境的恶化，郝思嘉的叛逆个性越来越丰满，越鲜明，在一系列的的挫折中她改造了自我，改变了个人甚至整个家族的命运，成为时代时势造就的新女性的形象。<br />作品在描绘人物生活与爱情的同时，勾勒出南北双方在政治，经济，文化各个层次的异同，具有浓厚的史诗风格，堪称美国历史转折时期的真实写照，同时也成为历久不衰的爱情经典。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26680378/\",\n                    \"image\": \"s33522285.jpg\",\n                    \"name\": \"脂砚斋批评本·红楼梦\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [清] 曹雪芹 著 / 脂砚斋 评点\",\n                            \"href\": \"https://book.douban.com/author/4508611/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"岳麓书社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 红楼梦：谁解其中味 红楼梦：谁解其中味 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"古典名著在中国文学史上地位的确立，首先当然是这些名著本身所具有的独特魅力所致，但是也与这些小说刊刻之后，一大批眼光独到的小说批评家们极力批点评说有极大的关系。像李卓吾、金圣叹、毛宗岗、脂砚斋等名字在人们的心目中，就是与《西游记》、《三国演义》、《水浒传》、《红楼梦》密切相连的。他们不仅开创了中国古典小说批评史的新局面，也使更多的读者通过他们的批评更深入地了解了这些古典名著的精髓和魅力。脂砚斋这个名字更是与《红楼梦》密不可分，从他的评语中可以看出，脂砚斋与曹雪芹关系密切，但他们究竟是什么关系，众说纷纭，莫衷一是。有的认为他们就是同一个人，有的认为脂砚斋是书中史湘云的原型，也有人认为他们只是一般的亲友。无论脂砚斋是什么人，他对《红楼梦》所作的批评，则的确是给本来已经精彩无比的大观园锦上添花，能让读者对《红楼梦》更加着迷；也让后人对八十回后书中人物的命运有了更多的猜测和想象。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3995526/\",\n                    \"image\": \"s3984108.jpg\",\n                    \"name\": \"目送\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"龙应台\",\n                            \"href\": \"https://book.douban.com/author/104782/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"生活·读书·新知三联书店\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 目送：不用追，不必追 目送：不用追，不必追 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"目送共由七十四篇散文组成，是为一本极具亲情、感人至深的文集。由父亲的逝世、母亲的苍老、儿子的离开、朋友的牵挂、兄弟的携手共行，写出失败和脆弱、失落和放手，写出缠绵不舍和绝然的虚无。正如作者所说：“我慢慢地、慢慢地了解到，所谓父女母子一场，只不过意味着，你和他的缘分就是今生今世不断地在目送他的背影渐行渐远。你站在小路的这一端，看着他逐渐消失在小路转弯的地方，而且，他用背影默默地告诉你，不用追。”\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33440205/\",\n                    \"image\": \"s33492346.jpg\",\n                    \"name\": \"你当像鸟飞往你的山\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 塔拉·韦斯特弗\",\n                            \"href\": \"https://book.douban.com/author/4609348/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '{% post_link 你当像鸟飞往你的山：大山里走出的孩子 你当像鸟飞往你的山：大山里走出的孩子 false %}'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人们只看到我的与众不同：一个十七岁前从未踏入教室的大山女孩，却戴上一顶学历的高帽，熠熠生辉。只有我知道自己的真面目：我来自一个极少有人能想象的家庭。我的童年由垃圾场的废铜烂铁铸成，那里没有读书声，只有起重机的轰鸣。不上学，不就医，是父亲要我们坚持的忠诚与真理。父亲不允许我们拥有自己的声音，我们的意志是他眼中的恶魔。哈佛大学，剑桥大学，哲学硕士，历史博士……我知道，像我这样从垃圾堆里爬出来的无知女孩，能取得如今的成就，应当感激涕零才对。但我丝毫提不起热情。我曾怯懦、崩溃、自我怀疑，内心里有什么东西腐烂了，恶臭熏天。直到我逃离大山，打开另一个世界。那是教育给我的新世界，那是我生命的无限可能。\"\n                        }\n                    ]\n                }\n            ],\n            \"to_read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/25887924/\",\n                    \"image\": \"s28383857.jpg\",\n                    \"name\": \"卡拉马佐夫兄弟\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"荣如德\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"本书系俄国大作家陀思妥耶夫斯基代表作之一。小说通过一桩真实的弑父案，描写老卡拉马佐夫同三个儿子即两代人之间的尖锐冲突。老卡拉马佐夫贪婪好色，独占妻子留给儿子们的遗产，并与长子德米特里为一个风流女子争风吃醋。一天黑夜，德米特里疑心自己的情人去跟老头儿幽会，便闯入家园，一怒之下，差点儿把老头儿砸死。他仓皇逃离后，躲在暗中装病的老卡拉马佐夫的私生子斯乜尔加科夫，悄然杀死老爷，造成了一桩震惊全俄的扑朔迷离的血案，从而引发了一连串惊心动魄的事件。作品展示一个错综复杂的社会家庭、道德和人性的悲剧主题，体现了作家一生的最高艺术成就。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1437488/\",\n                    \"image\": \"s1458949.jpg\",\n                    \"name\": \"群魔\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"臧仲伦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《群魔》是陀思妥耶夫斯基的代表作之一。他在这部作品中塑造了19世纪40年代的自由主义者及70年代初民主青年的群像。作者着重探索了恐怖分子的内心活动。《群魔》的主人公之一是自称为革命者的彼得·韦尔霍文斯基。他通过其领导的秘密组织进行恐吓、讹诈、纵火、暗杀等恐怖活动，企图动摇社会基础，以便发起暴动，夺取政权。作者以令人惊叹的洞察力和独特的心理描写拆穿了他的骗局；他是个阴谋家和恶棍。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26954760/\",\n                    \"image\": \"s29634528.jpg\",\n                    \"name\": \"月亮与六便士\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"威廉·萨默塞特·毛姆\",\n                            \"href\": \"https://book.douban.com/author/4576950/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"浙江文艺出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"徐淳刚\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"“满地都是六便士，他却抬头看见了月亮。”<br />银行家查尔斯，人到中年，事业有成，为了追求内心隐秘的绘画梦想，突然抛妻别子，弃家出走。他深知：人的每一种身份都是一种自我绑架，唯有失去是通向自由之途。<br />在异国他乡，他贫病交加，对梦想却愈发坚定执着。他说：我必须画画，就像溺水的人必须挣扎。<br />在经历种种离奇遭遇后，他来到南太平洋的一座孤岛，同当地一位姑娘结婚生子，成功创作出一系列惊世杰作。就在此时，他被绝症和双目失明击倒，临死之前，他做出了让所有人震惊的决定……<br />人世漫长得转瞬即逝，有人见尘埃，有人见星辰。查尔斯就是那个终其一生在追逐星辰的人。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/30192587/\",\n                    \"image\": \"s29737802.jpg\",\n                    \"name\": \"塑造世界经济的50项伟大发明\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"蒂姆·哈福德\",\n                            \"href\": \"https://book.douban.com/author/1151589/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这本书聚焦于世界经济运行中令人着迷的一些细节，为此挑选了50项具体发明——纸张、条形码、知识产权和书写本身等。在每一个案例中，我们会近距离观察，看看这些发明到底改变了什么。一路上，我们会发现一些令人惊讶的问题的答案。<br />•艾尔顿•约翰与无纸化办公室的承诺有何联系？<br />•美国哪项发明在日本被限制40年，这对日本女性就业有何影响？<br />•1803年，为什么警察认为要两次处决一位伦敦的凶手——这与便携式电子产品有何联系？<br />•货币创新如何破坏议会大厦？<br />•哪个产品于1976年推出，很快又失败，但诺贝尔奖获得者经济学家保罗·萨缪尔森（Paul Samuelson）却将其与葡萄酒、字母表和轮子一起加以称赞？<br />•美联储主席耶伦·尤伦与忽必烈有共同之处吗？<br />这50项发明中，有一些比如犁，简单实用。另外一些如时钟，已经变得很精密。其中一些是固体，比如混凝土；其他一些如有限责任公司，是抽象的发明，你根本无法触及。有些，比如苹果手机，已经疯狂获利。其他一些如柴油机，最初是商业灾难。但是，它们都有故事可讲，让我了解到这个世界如何运行，这有助于我们注意周围一些看似平常的奇迹。其中一些涉及巨大、无情的经济力量; 另一些则是关于人类或荣耀或悲剧的故事。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26593084/\",\n                    \"image\": \"s28277258.jpg\",\n                    \"name\": \"迷人的材料\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"马克·米奥多尼克\",\n                            \"href\": \"https://book.douban.com/author/461039/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"未读·探索家·北京联合出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"赖盈满\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"从茶杯、喷气发动机到家用电器、内裤，我们的生活充满了材料。但你想过没有，为什么玻璃是透明的？是什么让橡皮筋有弹性？为什么曲别针会弯曲？为什么不锈钢不生锈？水泥也能做成衣服？世界上最薄却最坚硬的东西是什么？为什么某一种材料做成的东西会长那样？材料如何塑造了我们的世界又对我们的生活产生了怎样的影响？<br />世界顶级材料学大师带你用材料科学家的眼睛，以全新的方式看待你身边的每一样东西：钢、纸、混凝土、巧克力、塑料、玻璃、瓷器……<br />本书以渊博的知识和极富感染力的文字写就。它不仅揭露了各种物质背后的神奇结构，还告诉我们隐藏在其背后的精采故事。每一章介绍一种材料，辅以照片和手绘图，极富可读性和趣味性\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26890863/\",\n                    \"image\": \"s30011804.jpg\",\n                    \"name\": \"我们如何走到今天\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 史蒂文·约翰逊\",\n                            \"href\": \"https://book.douban.com/author/145468/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"秦启越\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《我们如何走到今天：重塑世界的6项创新》这是一本以新颖的眼光重新看待世界本质的科普常识巨著。专注于人类文明史上6种里程碑式的创新发明，审视伟大创意的力量与回响。《纽约时报》畅销书作家史蒂文·约翰逊倾心之作。同名纪录片《我们是如何走到今天的》于英国广播公司（BBC）分辑播出，并取得良好收视。6项创新，6种颠覆世界的方式。这是一本现代器物史，透析人们日常使用的基本物品的起源；更是一本社会变迁史，通过日常用品的演变透视社会生活的演进。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33408247/\",\n                    \"image\": \"s32294606.jpg\",\n                    \"name\": \"病毒星球\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美]卡尔·齐默\",\n                            \"href\": \"https://book.douban.com/author/292557/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"广西师范大学出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"刘旸\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"早在人类出现之前，病毒就占领了这颗星球，历经高温、酷寒或干旱等极端条件，到现在病毒仍然无处不在，抗生素或感冒糖浆等最近用来对付它们的小玩意，更是无法伤及病毒毫发。<br />病毒在我们的DNA里留下了丰富的信息，人类DNA片段中8%来自病毒，说它们是我们亲缘有点远的祖先也不为过。但是要小心，这些休眠在人类DNA中的片段在特定条件下可以复苏，重新组织成活跃的病毒。<br />病毒并不总是面目可憎，人类吸入的氧气里，有1/10是病毒惠予的。被视为宫颈癌罪魁祸首的HPV，其实男女通吃且分布广泛，但绝大多数情况下它们都与人类和平共处。病毒在不同宿主间穿梭，有一定几率携带上一部分宿主的基因片段，然后插入到下一位宿主的基因里，在你感叹人类或其他物种多样性的时候，别忘了其中也有病毒的一份功劳。<br />不可否认，病毒也是自然创造的冷血杀手。甲流、埃博拉、SARS，这些病毒让人类措手不及，它们本来只攻击蝙蝠、老鼠或鸟类等，怎料自然演化无意之间将人类写进了病毒的黑名单。尽管疫苗不断更新，但演化的力量让病毒一次次地突破我们的防线。<br />这本书会让你重新理解病毒与人类的关系，认识人类在万物中的位置。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/34464674/\",\n                    \"image\": \"s33471187.jpg\",\n                    \"name\": \"万物发明指南\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[加] 瑞安·诺思\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"王乔琦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"如果你忽然发现自己穿越到了只在历史书中读到过的古代，你该怎么办？<br />面对陌生的原始社会，没有电、没有手机、没有网络……没有任何现代化的工具，你该如何生存下去？<br />别担心，这本书可以帮到你！<br />从钻木取火到发明蒸汽机、计算机，以你的名字命名元素周期表和物理定律，<br />从时空穿越到再造人类文明，你只需要这一本书。<br />这是一本时光机维修手册，更是你成为人类文明主宰的秘籍。<br />快开始新奇的文明创造游戏吧！<br />这是一部穿越人类发展时空、图文并茂的科普作品，<br />追溯了人类发展历程中的重大发明发现，带领读者重新感受了人类文明的发展进程。<br />本书编排精妙，切入点新颖有趣，是为一位不小心“被穿越”的旅行者而打造的生存指南，读者可以跟随作者的脑洞，搭乘时间机器返回那些曾经在传说中听过的时间、地点，根据具体的情境思考自己该如何生存。<br />书中有详细的操作步骤，交互式设计令读者获得全新的阅读体验，展开一场别具一格的时空旅行和文明创造游戏。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"影响力\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"怪诞行为学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"错误的行为\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无价\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"魔鬼经济学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"思考快与慢\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"经济学原理\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"小狗钱钱\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"穷查理宝典\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"恶意一\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"嫌疑人X的献身\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"白夜行\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"罗杰疑案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无人生还\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"东方快车谋杀案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"占星术杀人魔法\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"三体\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"海伯利安\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"神们自己\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"仿生人会梦见电子羊吗\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"围城\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死疲劳\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死晶黄\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"竹林中\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"动物农场\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"树上的男爵\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"一个女人一生中的二十四小时\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"变形记\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"城堡\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"老人与海\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"撒哈拉的故事\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"血酬定律\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"爱的博弈\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"洞穴奇案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"朝花夕拾\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"乌合之众\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"约翰克里斯朵夫\",\n                    \"info\": []\n                }\n            ]\n        }\n    $(document).ready(function () {\n        for (obj in books_data) {\n            html = \"\";\n            for (var i = 0; i < books_data[obj].length; i++) {\n                html += \"<div class=\\\"card\\\">\"\n                    + \"<div class=\\\"image\\\">\"\n                    + \"<a class=\\\"nbg\\\" target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].douban + \"\\\" title=\\\"\" + books_data[obj][i].name + \"\\\">\"\n                    + \"<img src=\\\"./\" + books_data[obj][i].image + \"\\\" title=\\\"点击看大图\\\" alt=\\\"\" + books_data[obj][i].name + \"\\\" rel=\\\"v:photo\\\" style=\\\"max-width: 135px;max-height: 200px;\\\" />\"\n                    + \"</a>\"\n                    + \"<span>\" + books_data[obj][i].name + \"</span>\"\n                    + \"</div>\"\n                    + \"<div id=\\\"info\\\" class=\\\"desc\\\">\"\n                for (var j = 0; j < books_data[obj][i].info.length; j++) {\n                    html += \"<span class=\\\"pl\\\">\" + books_data[obj][i].info[j].key + \": </span>\"\n                    if (books_data[obj][i].info[j].href !== \"\" && books_data[obj][i].info[j].href !== undefined) {\n                        html += \"<a target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].info[j].href + \"\\\">\"\n                        html += books_data[obj][i].info[j].value\n                        html += \"</a>\"\n                    } else {\n                        html += books_data[obj][i].info[j].value\n                    }\n                    html += \"<br />\"\n                }\n                html += \"</div></div>\"\n            }\n            var elementId = \"read\"\n            if (obj === \"reading\") {\n                elementId = \"books-1\"\n            } else if (obj === \"to_read\") {\n                elementId = \"books-2\"\n            } else {\n                elementId = \"books-3\"\n            }\n            document.getElementById(elementId).innerHTML = html;\n        }\n    })\n</script>\n\n\n\n{% tabs books %}\n<!-- tab 在读@fas fa-book-reader -->\n\n<!-- endtab -->\n\n<!-- tab 想读@fas fa-book -->\n\n<!-- endtab -->\n\n<!-- tab 已读@fas fa-book-open -->\n\n<!-- endtab -->\n\n{% endtabs %}","updated":"2022-01-01T14:32:15.519Z","path":"books/index.html","comments":1,"layout":"page","_id":"cl7r727vy0044hx894jj26ray","content":"<style>\n    .card {\n        position: relative;\n        overflow: hidden;\n        margin-top: 2rem;\n        padding: 1rem 1.2rem;\n        border-radius: 8px;\n        background: var(--tab-botton-bg);\n        -webkit-box-shadow: var(--card-box-shadow);\n        box-shadow: var(--card-box-shadow);\n        -webkit-transition: box-shadow 0.3s;\n        -moz-transition: box-shadow 0.3s;\n        -o-transition: box-shadow 0.3s;\n        -ms-transition: box-shadow 0.3s;\n        transition: box-shadow 0.3s;\n    }\n\n    .image {\n        margin: 3px 0 0 0;\n        float: left;\n        text-align: center;\n        margin: 3px 12px 0 0;\n        max-width: 155px;\n        overflow: hidden;\n    }\n    \n    .desc {\n    }\n</style>\n<script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-latest.js\"></script>\n<script type=\"text/javascript\">\n    var books_data = {\n            \"reading\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s33556519.jpg\",\n                    \"name\": \"西西弗神话\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"(法)阿尔贝·加缪\",\n                            \"href\": \"https://book.douban.com/author/4513690/\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"沈志明\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"/2021/09/07/%E8%A5%BF%E8%A5%BF%E5%BC%97%E7%A5%9E%E8%AF%9D%EF%BC%9A%E5%8E%BB%E6%B4%BB%E8%BF%98%E6%98%AF%E5%8E%BB%E6%AD%BB/\" title=\"西西弗神话：去活还是去死\">西西弗神话：去活还是去死</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"阿尔贝•加缪（1913—1960）是法国声名卓著的小说家、散文家和剧作家，“存在主义”文学的大师。1957年因“热情而冷静地阐明了当代向人类良知提出的种种问题”而获诺贝尔文学奖，是有史以来最年轻的诺奖获奖作家之一。加缪在他的小说、戏剧、随笔和论著中深刻地揭示出人在异己的世界中的孤独、个人与自身的日益异化，以及罪恶和死亡的不可避免，但他在揭示出世界的荒诞的同时却并不绝望和颓丧，他主张要在荒诞中奋起反抗，在绝望中坚持真理和正义，他为世人指出了一条基督教和马克思主义以外的自由人道主义道路。他直面惨淡人生的勇气，他“知其不可而为之”的大无畏精神使他在第二次世界大战之后不仅在法国，而且在欧洲并最终在全世界成为他那一代人的代言人和下一代人的精神导师。\"\n                        }\n                    ]\n                }\n            ],\n            \"read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s29621120.jpg\",\n                    \"name\": \"五魁\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"贾平凹\",\n                            \"href\": \"https://book.douban.com/author/4505931/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"海天出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"/2021/05/06/%E4%BA%94%E9%AD%81%EF%BC%9A%E4%BF%A1%E4%BB%80%E4%B9%88%E5%B0%B1%E4%BC%9A%E5%A4%B1%E5%8E%BB%E4%BB%80%E4%B9%88/\" title=\"五魁：信什么就会失去什么\">五魁：信什么就会失去什么</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"柳家大少爷娶亲，迎亲队伍在回家途中，遇到了土匪。为了保护美丽的新娘，驮夫五魁背着新娘逃跑，但最终没有逃过土匪的追击，新娘被抢走了。当夜五魁冒死深入匪寨，设计从土匪头领手中救出了新娘。两人千辛万苦回到柳家，柳家大少爷却因为猎枪走火，炸飞了双腿，成为了一个废人。新娘没有如五魁所愿，成为让人羡慕的柳家少奶奶，反而沦为了大少爷发泄的工具，五魁不忍女人所受非人的折磨和屈辱，带着女人逃进了深山老林。最终，女人因五魁杀死了与她亲昵的狗而羞愤自杀，而五魁则由一个坚持不碰女人一根手指的男人变成了一个拥有十一位压寨夫人的暴戾土匪。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1061118/\",\n                    \"image\": \"s1469173.jpg\",\n                    \"name\": \"活着\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"余华\",\n                            \"href\": \"https://book.douban.com/author/4503668/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海文艺出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"/2021/10/21/%E6%B4%BB%E7%9D%80%EF%BC%9A%E7%8E%B0%E5%AE%9E%E4%B8%8E%E6%84%8F%E4%B9%89/\" title=\"活着：现实与意义\">活着：现实与意义</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"地主少爷富贵嗜赌成性，终于赌光了家业一贫如洗，穷困之中的富贵因为母亲生病前去求医，没想到半路上被国民党部队抓了壮丁，后被解放军所俘虏，回到家乡他才知道母亲已经去世，妻子家珍含辛茹苦带大了一双儿女，但女儿不幸变成了聋哑人，儿子机灵活泼…… 然而，真正的悲剧从此才开始渐次上演，每读一页，都让我们止不住泪湿双眼，因为生命里难得的温情将被一次次死亡撕扯得粉碎，只剩得老了的富贵伴随着一头老牛在阳光下回忆 \"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3580750/\",\n                    \"image\": \"s8873145.jpg\",\n                    \"name\": \"潜规则\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"吴思\",\n                            \"href\": \"https://book.douban.com/author/4611117/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"复旦大学出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 潜规则：那些有的没的 潜规则：那些有的没的 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这部以历史为解读对象的著作中，作者以亦雅亦俗、亦庄亦谐的写作方式，叙述了历史上值得人们思考的大大小小的无数案例，在生动、有趣地讲述官场故事的同时，作者透过历史表象，揭示出隐藏在正式规则之下、实际上支配着社会运行的不成文的规矩，并将其名之日“潜规则”，进而指出潜规则的产生在于现实的利害计算与趋利避害。书中对于潜规则的定义、特征，潜规则阴影下皇帝、官员、百姓的不同处境与抉择，潜规则盛行的社会土壤，以及潜规则何时会萎缩，均有论述。潜规则现象产生、盛行于我国的封建社会，但它一时还难以消失，只有加强社会主义民主，健全社会主义法制，才能最后根除潜规则。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1799240/\",\n                    \"image\": \"s1739240.jpg\",\n                    \"name\": \"君主论\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"尼科洛·马基雅维里\",\n                            \"href\": \"https://book.douban.com/author/187971/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海三联书店\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李蒙\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 君主论：那些有的没的 君主论：那些有的没的 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"君主国是什么？它有什么种类，怎样获得，怎样维持？它为什么会丧失？……《君主论》是意大利政治家、思想家马基雅维里的代表作，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖。<br />《君主论》是一本毁誉参半、不可不读的奇书，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖，自1532年开始印行，迄今470多年，从西方到东方，本书在政界、宗教界、学术等领域引起巨大的反响，被西方评论界列为和《圣经》、《资本论》等相提并论的影响人类历史的十部著作之一。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/24744505/\",\n                    \"image\": \"s28470753.jpg\",\n                    \"name\": \"人间失格\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"太宰治\",\n                            \"href\": \"https://book.douban.com/author/4526460/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"武汉出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"烨伊\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 人间失格：丧 人间失格：丧 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人间失格，即丧失为人的资格。由序、第一手札、第二手札、第三手札、后记共五个部分构成，其中序和后记以作者口吻叙说，三个手札则以主人公叶藏的口吻叙述。主人公叶藏胆小懦弱，惧怕世间的情感，不了解人类复杂的思想，继而通过搞笑取乐别人，隐藏真实的自己。后来发现饮酒作乐似乎更能逃避这个世界，于是终日放浪形骸，通过酒精、药物、女人来麻痹自己，最终走向毁灭。他被身为人最真切的痛苦所折磨，终其一生都在自我厌倦下寻求爱，逃避爱，最后只能毁灭自己。<br />太宰治的内心独白，一个渴望爱又不懂爱的“胆小鬼”。他无法理清人类生活的头绪，只得以滑稽搞笑来伪装自己。他由恐惧到绝望，由绝望到渴望离开这个世界。这就是《人间失格》。在这里，人性的丑陋和虚伪，无可遁形。“如今的我，谈不上...\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/6082808/\",\n                    \"image\": \"s27237850.jpg\",\n                    \"name\": \"百年孤独\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[哥伦比亚] 加西亚·马尔克斯\",\n                            \"href\": \"https://book.douban.com/author/1039386/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"范晔\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 百年孤独：七代人的离奇故事 百年孤独：七代人的离奇故事 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《百年孤独》是魔幻现实主义文学的代表作，描写了布恩迪亚家族七代人的传奇故事，以及加勒比海沿岸小镇马孔多的百年兴衰，反映了拉丁美洲一个世纪以来风云变幻的历史。作品融入神话传说、民间故事、宗教典故等神秘因素，巧妙地糅合了现实与虚幻，展现出一个瑰丽的想象世界，成为20世纪最重要的经典文学巨著之一。1982年加西亚•马尔克斯获得诺贝尔文学奖，奠定世界级文学大师的地位，很大程度上乃是凭借《百年孤独》的巨大影响。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1068920/\",\n                    \"image\": \"s1078958.jpg\",\n                    \"name\": \"飘\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [美国] 玛格丽特·米切尔\",\n                            \"href\": \"https://book.douban.com/author/4587509/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李美华\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 飘：明天又是新的一天 飘：明天又是新的一天 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"小说中的故事发生在1861年美国南北战争前夕。生活在南方的少女郝思嘉从小深受南方文化传统的熏陶，可在她的血液里却流淌着野性的叛逆因素。随着战火的蔓廷和生活环境的恶化，郝思嘉的叛逆个性越来越丰满，越鲜明，在一系列的的挫折中她改造了自我，改变了个人甚至整个家族的命运，成为时代时势造就的新女性的形象。<br />作品在描绘人物生活与爱情的同时，勾勒出南北双方在政治，经济，文化各个层次的异同，具有浓厚的史诗风格，堪称美国历史转折时期的真实写照，同时也成为历久不衰的爱情经典。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26680378/\",\n                    \"image\": \"s33522285.jpg\",\n                    \"name\": \"脂砚斋批评本·红楼梦\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [清] 曹雪芹 著 / 脂砚斋 评点\",\n                            \"href\": \"https://book.douban.com/author/4508611/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"岳麓书社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 红楼梦：谁解其中味 红楼梦：谁解其中味 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"古典名著在中国文学史上地位的确立，首先当然是这些名著本身所具有的独特魅力所致，但是也与这些小说刊刻之后，一大批眼光独到的小说批评家们极力批点评说有极大的关系。像李卓吾、金圣叹、毛宗岗、脂砚斋等名字在人们的心目中，就是与《西游记》、《三国演义》、《水浒传》、《红楼梦》密切相连的。他们不仅开创了中国古典小说批评史的新局面，也使更多的读者通过他们的批评更深入地了解了这些古典名著的精髓和魅力。脂砚斋这个名字更是与《红楼梦》密不可分，从他的评语中可以看出，脂砚斋与曹雪芹关系密切，但他们究竟是什么关系，众说纷纭，莫衷一是。有的认为他们就是同一个人，有的认为脂砚斋是书中史湘云的原型，也有人认为他们只是一般的亲友。无论脂砚斋是什么人，他对《红楼梦》所作的批评，则的确是给本来已经精彩无比的大观园锦上添花，能让读者对《红楼梦》更加着迷；也让后人对八十回后书中人物的命运有了更多的猜测和想象。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3995526/\",\n                    \"image\": \"s3984108.jpg\",\n                    \"name\": \"目送\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"龙应台\",\n                            \"href\": \"https://book.douban.com/author/104782/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"生活·读书·新知三联书店\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 目送：不用追，不必追 目送：不用追，不必追 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"目送共由七十四篇散文组成，是为一本极具亲情、感人至深的文集。由父亲的逝世、母亲的苍老、儿子的离开、朋友的牵挂、兄弟的携手共行，写出失败和脆弱、失落和放手，写出缠绵不舍和绝然的虚无。正如作者所说：“我慢慢地、慢慢地了解到，所谓父女母子一场，只不过意味着，你和他的缘分就是今生今世不断地在目送他的背影渐行渐远。你站在小路的这一端，看着他逐渐消失在小路转弯的地方，而且，他用背影默默地告诉你，不用追。”\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33440205/\",\n                    \"image\": \"s33492346.jpg\",\n                    \"name\": \"你当像鸟飞往你的山\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 塔拉·韦斯特弗\",\n                            \"href\": \"https://book.douban.com/author/4609348/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 你当像鸟飞往你的山：大山里走出的孩子 你当像鸟飞往你的山：大山里走出的孩子 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人们只看到我的与众不同：一个十七岁前从未踏入教室的大山女孩，却戴上一顶学历的高帽，熠熠生辉。只有我知道自己的真面目：我来自一个极少有人能想象的家庭。我的童年由垃圾场的废铜烂铁铸成，那里没有读书声，只有起重机的轰鸣。不上学，不就医，是父亲要我们坚持的忠诚与真理。父亲不允许我们拥有自己的声音，我们的意志是他眼中的恶魔。哈佛大学，剑桥大学，哲学硕士，历史博士……我知道，像我这样从垃圾堆里爬出来的无知女孩，能取得如今的成就，应当感激涕零才对。但我丝毫提不起热情。我曾怯懦、崩溃、自我怀疑，内心里有什么东西腐烂了，恶臭熏天。直到我逃离大山，打开另一个世界。那是教育给我的新世界，那是我生命的无限可能。\"\n                        }\n                    ]\n                }\n            ],\n            \"to_read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/25887924/\",\n                    \"image\": \"s28383857.jpg\",\n                    \"name\": \"卡拉马佐夫兄弟\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"荣如德\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"本书系俄国大作家陀思妥耶夫斯基代表作之一。小说通过一桩真实的弑父案，描写老卡拉马佐夫同三个儿子即两代人之间的尖锐冲突。老卡拉马佐夫贪婪好色，独占妻子留给儿子们的遗产，并与长子德米特里为一个风流女子争风吃醋。一天黑夜，德米特里疑心自己的情人去跟老头儿幽会，便闯入家园，一怒之下，差点儿把老头儿砸死。他仓皇逃离后，躲在暗中装病的老卡拉马佐夫的私生子斯乜尔加科夫，悄然杀死老爷，造成了一桩震惊全俄的扑朔迷离的血案，从而引发了一连串惊心动魄的事件。作品展示一个错综复杂的社会家庭、道德和人性的悲剧主题，体现了作家一生的最高艺术成就。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1437488/\",\n                    \"image\": \"s1458949.jpg\",\n                    \"name\": \"群魔\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"臧仲伦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《群魔》是陀思妥耶夫斯基的代表作之一。他在这部作品中塑造了19世纪40年代的自由主义者及70年代初民主青年的群像。作者着重探索了恐怖分子的内心活动。《群魔》的主人公之一是自称为革命者的彼得·韦尔霍文斯基。他通过其领导的秘密组织进行恐吓、讹诈、纵火、暗杀等恐怖活动，企图动摇社会基础，以便发起暴动，夺取政权。作者以令人惊叹的洞察力和独特的心理描写拆穿了他的骗局；他是个阴谋家和恶棍。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26954760/\",\n                    \"image\": \"s29634528.jpg\",\n                    \"name\": \"月亮与六便士\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"威廉·萨默塞特·毛姆\",\n                            \"href\": \"https://book.douban.com/author/4576950/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"浙江文艺出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"徐淳刚\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"“满地都是六便士，他却抬头看见了月亮。”<br />银行家查尔斯，人到中年，事业有成，为了追求内心隐秘的绘画梦想，突然抛妻别子，弃家出走。他深知：人的每一种身份都是一种自我绑架，唯有失去是通向自由之途。<br />在异国他乡，他贫病交加，对梦想却愈发坚定执着。他说：我必须画画，就像溺水的人必须挣扎。<br />在经历种种离奇遭遇后，他来到南太平洋的一座孤岛，同当地一位姑娘结婚生子，成功创作出一系列惊世杰作。就在此时，他被绝症和双目失明击倒，临死之前，他做出了让所有人震惊的决定……<br />人世漫长得转瞬即逝，有人见尘埃，有人见星辰。查尔斯就是那个终其一生在追逐星辰的人。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/30192587/\",\n                    \"image\": \"s29737802.jpg\",\n                    \"name\": \"塑造世界经济的50项伟大发明\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"蒂姆·哈福德\",\n                            \"href\": \"https://book.douban.com/author/1151589/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这本书聚焦于世界经济运行中令人着迷的一些细节，为此挑选了50项具体发明——纸张、条形码、知识产权和书写本身等。在每一个案例中，我们会近距离观察，看看这些发明到底改变了什么。一路上，我们会发现一些令人惊讶的问题的答案。<br />•艾尔顿•约翰与无纸化办公室的承诺有何联系？<br />•美国哪项发明在日本被限制40年，这对日本女性就业有何影响？<br />•1803年，为什么警察认为要两次处决一位伦敦的凶手——这与便携式电子产品有何联系？<br />•货币创新如何破坏议会大厦？<br />•哪个产品于1976年推出，很快又失败，但诺贝尔奖获得者经济学家保罗·萨缪尔森（Paul Samuelson）却将其与葡萄酒、字母表和轮子一起加以称赞？<br />•美联储主席耶伦·尤伦与忽必烈有共同之处吗？<br />这50项发明中，有一些比如犁，简单实用。另外一些如时钟，已经变得很精密。其中一些是固体，比如混凝土；其他一些如有限责任公司，是抽象的发明，你根本无法触及。有些，比如苹果手机，已经疯狂获利。其他一些如柴油机，最初是商业灾难。但是，它们都有故事可讲，让我了解到这个世界如何运行，这有助于我们注意周围一些看似平常的奇迹。其中一些涉及巨大、无情的经济力量; 另一些则是关于人类或荣耀或悲剧的故事。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26593084/\",\n                    \"image\": \"s28277258.jpg\",\n                    \"name\": \"迷人的材料\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"马克·米奥多尼克\",\n                            \"href\": \"https://book.douban.com/author/461039/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"未读·探索家·北京联合出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"赖盈满\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"从茶杯、喷气发动机到家用电器、内裤，我们的生活充满了材料。但你想过没有，为什么玻璃是透明的？是什么让橡皮筋有弹性？为什么曲别针会弯曲？为什么不锈钢不生锈？水泥也能做成衣服？世界上最薄却最坚硬的东西是什么？为什么某一种材料做成的东西会长那样？材料如何塑造了我们的世界又对我们的生活产生了怎样的影响？<br />世界顶级材料学大师带你用材料科学家的眼睛，以全新的方式看待你身边的每一样东西：钢、纸、混凝土、巧克力、塑料、玻璃、瓷器……<br />本书以渊博的知识和极富感染力的文字写就。它不仅揭露了各种物质背后的神奇结构，还告诉我们隐藏在其背后的精采故事。每一章介绍一种材料，辅以照片和手绘图，极富可读性和趣味性\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26890863/\",\n                    \"image\": \"s30011804.jpg\",\n                    \"name\": \"我们如何走到今天\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 史蒂文·约翰逊\",\n                            \"href\": \"https://book.douban.com/author/145468/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"秦启越\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《我们如何走到今天：重塑世界的6项创新》这是一本以新颖的眼光重新看待世界本质的科普常识巨著。专注于人类文明史上6种里程碑式的创新发明，审视伟大创意的力量与回响。《纽约时报》畅销书作家史蒂文·约翰逊倾心之作。同名纪录片《我们是如何走到今天的》于英国广播公司（BBC）分辑播出，并取得良好收视。6项创新，6种颠覆世界的方式。这是一本现代器物史，透析人们日常使用的基本物品的起源；更是一本社会变迁史，通过日常用品的演变透视社会生活的演进。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33408247/\",\n                    \"image\": \"s32294606.jpg\",\n                    \"name\": \"病毒星球\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美]卡尔·齐默\",\n                            \"href\": \"https://book.douban.com/author/292557/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"广西师范大学出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"刘旸\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"早在人类出现之前，病毒就占领了这颗星球，历经高温、酷寒或干旱等极端条件，到现在病毒仍然无处不在，抗生素或感冒糖浆等最近用来对付它们的小玩意，更是无法伤及病毒毫发。<br />病毒在我们的DNA里留下了丰富的信息，人类DNA片段中8%来自病毒，说它们是我们亲缘有点远的祖先也不为过。但是要小心，这些休眠在人类DNA中的片段在特定条件下可以复苏，重新组织成活跃的病毒。<br />病毒并不总是面目可憎，人类吸入的氧气里，有1/10是病毒惠予的。被视为宫颈癌罪魁祸首的HPV，其实男女通吃且分布广泛，但绝大多数情况下它们都与人类和平共处。病毒在不同宿主间穿梭，有一定几率携带上一部分宿主的基因片段，然后插入到下一位宿主的基因里，在你感叹人类或其他物种多样性的时候，别忘了其中也有病毒的一份功劳。<br />不可否认，病毒也是自然创造的冷血杀手。甲流、埃博拉、SARS，这些病毒让人类措手不及，它们本来只攻击蝙蝠、老鼠或鸟类等，怎料自然演化无意之间将人类写进了病毒的黑名单。尽管疫苗不断更新，但演化的力量让病毒一次次地突破我们的防线。<br />这本书会让你重新理解病毒与人类的关系，认识人类在万物中的位置。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/34464674/\",\n                    \"image\": \"s33471187.jpg\",\n                    \"name\": \"万物发明指南\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[加] 瑞安·诺思\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"王乔琦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"如果你忽然发现自己穿越到了只在历史书中读到过的古代，你该怎么办？<br />面对陌生的原始社会，没有电、没有手机、没有网络……没有任何现代化的工具，你该如何生存下去？<br />别担心，这本书可以帮到你！<br />从钻木取火到发明蒸汽机、计算机，以你的名字命名元素周期表和物理定律，<br />从时空穿越到再造人类文明，你只需要这一本书。<br />这是一本时光机维修手册，更是你成为人类文明主宰的秘籍。<br />快开始新奇的文明创造游戏吧！<br />这是一部穿越人类发展时空、图文并茂的科普作品，<br />追溯了人类发展历程中的重大发明发现，带领读者重新感受了人类文明的发展进程。<br />本书编排精妙，切入点新颖有趣，是为一位不小心“被穿越”的旅行者而打造的生存指南，读者可以跟随作者的脑洞，搭乘时间机器返回那些曾经在传说中听过的时间、地点，根据具体的情境思考自己该如何生存。<br />书中有详细的操作步骤，交互式设计令读者获得全新的阅读体验，展开一场别具一格的时空旅行和文明创造游戏。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"影响力\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"怪诞行为学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"错误的行为\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无价\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"魔鬼经济学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"思考快与慢\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"经济学原理\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"小狗钱钱\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"穷查理宝典\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"恶意一\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"嫌疑人X的献身\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"白夜行\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"罗杰疑案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无人生还\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"东方快车谋杀案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"占星术杀人魔法\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"三体\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"海伯利安\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"神们自己\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"仿生人会梦见电子羊吗\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"围城\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死疲劳\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死晶黄\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"竹林中\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"动物农场\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"树上的男爵\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"一个女人一生中的二十四小时\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"变形记\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"城堡\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"老人与海\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"撒哈拉的故事\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"血酬定律\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"爱的博弈\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"洞穴奇案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"朝花夕拾\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"乌合之众\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"约翰克里斯朵夫\",\n                    \"info\": []\n                }\n            ]\n        }\n    $(document).ready(function () {\n        for (obj in books_data) {\n            html = \"\";\n            for (var i = 0; i < books_data[obj].length; i++) {\n                html += \"<div class=\\\"card\\\">\"\n                    + \"<div class=\\\"image\\\">\"\n                    + \"<a class=\\\"nbg\\\" target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].douban + \"\\\" title=\\\"\" + books_data[obj][i].name + \"\\\">\"\n                    + \"<img src=\\\"./\" + books_data[obj][i].image + \"\\\" title=\\\"点击看大图\\\" alt=\\\"\" + books_data[obj][i].name + \"\\\" rel=\\\"v:photo\\\" style=\\\"max-width: 135px;max-height: 200px;\\\" />\"\n                    + \"</a>\"\n                    + \"<span>\" + books_data[obj][i].name + \"</span>\"\n                    + \"</div>\"\n                    + \"<div id=\\\"info\\\" class=\\\"desc\\\">\"\n                for (var j = 0; j < books_data[obj][i].info.length; j++) {\n                    html += \"<span class=\\\"pl\\\">\" + books_data[obj][i].info[j].key + \": </span>\"\n                    if (books_data[obj][i].info[j].href !== \"\" && books_data[obj][i].info[j].href !== undefined) {\n                        html += \"<a target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].info[j].href + \"\\\">\"\n                        html += books_data[obj][i].info[j].value\n                        html += \"</a>\"\n                    } else {\n                        html += books_data[obj][i].info[j].value\n                    }\n                    html += \"<br />\"\n                }\n                html += \"</div></div>\"\n            }\n            var elementId = \"read\"\n            if (obj === \"reading\") {\n                elementId = \"books-1\"\n            } else if (obj === \"to_read\") {\n                elementId = \"books-2\"\n            } else {\n                elementId = \"books-3\"\n            }\n            document.getElementById(elementId).innerHTML = html;\n        }\n    })\n</script>\n\n\n\n<div class=\"tabs\" id=\"books\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#books-1\"><i class=\"fas fa-book-reader\"></i>在读</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-2\"><i class=\"fas fa-book\"></i>想读</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-3\"><i class=\"fas fa-book-open\"></i>已读</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"books-1\"><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-2\"><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-3\"><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<style>\n    .card {\n        position: relative;\n        overflow: hidden;\n        margin-top: 2rem;\n        padding: 1rem 1.2rem;\n        border-radius: 8px;\n        background: var(--tab-botton-bg);\n        -webkit-box-shadow: var(--card-box-shadow);\n        box-shadow: var(--card-box-shadow);\n        -webkit-transition: box-shadow 0.3s;\n        -moz-transition: box-shadow 0.3s;\n        -o-transition: box-shadow 0.3s;\n        -ms-transition: box-shadow 0.3s;\n        transition: box-shadow 0.3s;\n    }\n\n    .image {\n        margin: 3px 0 0 0;\n        float: left;\n        text-align: center;\n        margin: 3px 12px 0 0;\n        max-width: 155px;\n        overflow: hidden;\n    }\n    \n    .desc {\n    }\n</style>\n<script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-latest.js\"></script>\n<script type=\"text/javascript\">\n    var books_data = {\n            \"reading\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s33556519.jpg\",\n                    \"name\": \"西西弗神话\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"(法)阿尔贝·加缪\",\n                            \"href\": \"https://book.douban.com/author/4513690/\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"沈志明\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"/2021/09/07/%E8%A5%BF%E8%A5%BF%E5%BC%97%E7%A5%9E%E8%AF%9D%EF%BC%9A%E5%8E%BB%E6%B4%BB%E8%BF%98%E6%98%AF%E5%8E%BB%E6%AD%BB/\" title=\"西西弗神话：去活还是去死\">西西弗神话：去活还是去死</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"阿尔贝•加缪（1913—1960）是法国声名卓著的小说家、散文家和剧作家，“存在主义”文学的大师。1957年因“热情而冷静地阐明了当代向人类良知提出的种种问题”而获诺贝尔文学奖，是有史以来最年轻的诺奖获奖作家之一。加缪在他的小说、戏剧、随笔和论著中深刻地揭示出人在异己的世界中的孤独、个人与自身的日益异化，以及罪恶和死亡的不可避免，但他在揭示出世界的荒诞的同时却并不绝望和颓丧，他主张要在荒诞中奋起反抗，在绝望中坚持真理和正义，他为世人指出了一条基督教和马克思主义以外的自由人道主义道路。他直面惨淡人生的勇气，他“知其不可而为之”的大无畏精神使他在第二次世界大战之后不仅在法国，而且在欧洲并最终在全世界成为他那一代人的代言人和下一代人的精神导师。\"\n                        }\n                    ]\n                }\n            ],\n            \"read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/24257403/\",\n                    \"image\": \"s29621120.jpg\",\n                    \"name\": \"五魁\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"贾平凹\",\n                            \"href\": \"https://book.douban.com/author/4505931/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"海天出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"/2021/05/06/%E4%BA%94%E9%AD%81%EF%BC%9A%E4%BF%A1%E4%BB%80%E4%B9%88%E5%B0%B1%E4%BC%9A%E5%A4%B1%E5%8E%BB%E4%BB%80%E4%B9%88/\" title=\"五魁：信什么就会失去什么\">五魁：信什么就会失去什么</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"柳家大少爷娶亲，迎亲队伍在回家途中，遇到了土匪。为了保护美丽的新娘，驮夫五魁背着新娘逃跑，但最终没有逃过土匪的追击，新娘被抢走了。当夜五魁冒死深入匪寨，设计从土匪头领手中救出了新娘。两人千辛万苦回到柳家，柳家大少爷却因为猎枪走火，炸飞了双腿，成为了一个废人。新娘没有如五魁所愿，成为让人羡慕的柳家少奶奶，反而沦为了大少爷发泄的工具，五魁不忍女人所受非人的折磨和屈辱，带着女人逃进了深山老林。最终，女人因五魁杀死了与她亲昵的狗而羞愤自杀，而五魁则由一个坚持不碰女人一根手指的男人变成了一个拥有十一位压寨夫人的暴戾土匪。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1061118/\",\n                    \"image\": \"s1469173.jpg\",\n                    \"name\": \"活着\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"余华\",\n                            \"href\": \"https://book.douban.com/author/4503668/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海文艺出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"/2021/10/21/%E6%B4%BB%E7%9D%80%EF%BC%9A%E7%8E%B0%E5%AE%9E%E4%B8%8E%E6%84%8F%E4%B9%89/\" title=\"活着：现实与意义\">活着：现实与意义</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"地主少爷富贵嗜赌成性，终于赌光了家业一贫如洗，穷困之中的富贵因为母亲生病前去求医，没想到半路上被国民党部队抓了壮丁，后被解放军所俘虏，回到家乡他才知道母亲已经去世，妻子家珍含辛茹苦带大了一双儿女，但女儿不幸变成了聋哑人，儿子机灵活泼…… 然而，真正的悲剧从此才开始渐次上演，每读一页，都让我们止不住泪湿双眼，因为生命里难得的温情将被一次次死亡撕扯得粉碎，只剩得老了的富贵伴随着一头老牛在阳光下回忆 \"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3580750/\",\n                    \"image\": \"s8873145.jpg\",\n                    \"name\": \"潜规则\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"吴思\",\n                            \"href\": \"https://book.douban.com/author/4611117/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"复旦大学出版社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 潜规则：那些有的没的 潜规则：那些有的没的 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这部以历史为解读对象的著作中，作者以亦雅亦俗、亦庄亦谐的写作方式，叙述了历史上值得人们思考的大大小小的无数案例，在生动、有趣地讲述官场故事的同时，作者透过历史表象，揭示出隐藏在正式规则之下、实际上支配着社会运行的不成文的规矩，并将其名之日“潜规则”，进而指出潜规则的产生在于现实的利害计算与趋利避害。书中对于潜规则的定义、特征，潜规则阴影下皇帝、官员、百姓的不同处境与抉择，潜规则盛行的社会土壤，以及潜规则何时会萎缩，均有论述。潜规则现象产生、盛行于我国的封建社会，但它一时还难以消失，只有加强社会主义民主，健全社会主义法制，才能最后根除潜规则。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1799240/\",\n                    \"image\": \"s1739240.jpg\",\n                    \"name\": \"君主论\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"尼科洛·马基雅维里\",\n                            \"href\": \"https://book.douban.com/author/187971/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海三联书店\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李蒙\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 君主论：那些有的没的 君主论：那些有的没的 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"君主国是什么？它有什么种类，怎样获得，怎样维持？它为什么会丧失？……《君主论》是意大利政治家、思想家马基雅维里的代表作，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖。<br />《君主论》是一本毁誉参半、不可不读的奇书，一直被奉为欧洲历代君主的案头之书，政治家的最高指南，统治阶级巩固其统治的治国原则，和人类有史以来对政治斗争技巧最独到最精辟的解剖，自1532年开始印行，迄今470多年，从西方到东方，本书在政界、宗教界、学术等领域引起巨大的反响，被西方评论界列为和《圣经》、《资本论》等相提并论的影响人类历史的十部著作之一。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/24744505/\",\n                    \"image\": \"s28470753.jpg\",\n                    \"name\": \"人间失格\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"太宰治\",\n                            \"href\": \"https://book.douban.com/author/4526460/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"武汉出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"烨伊\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 人间失格：丧 人间失格：丧 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人间失格，即丧失为人的资格。由序、第一手札、第二手札、第三手札、后记共五个部分构成，其中序和后记以作者口吻叙说，三个手札则以主人公叶藏的口吻叙述。主人公叶藏胆小懦弱，惧怕世间的情感，不了解人类复杂的思想，继而通过搞笑取乐别人，隐藏真实的自己。后来发现饮酒作乐似乎更能逃避这个世界，于是终日放浪形骸，通过酒精、药物、女人来麻痹自己，最终走向毁灭。他被身为人最真切的痛苦所折磨，终其一生都在自我厌倦下寻求爱，逃避爱，最后只能毁灭自己。<br />太宰治的内心独白，一个渴望爱又不懂爱的“胆小鬼”。他无法理清人类生活的头绪，只得以滑稽搞笑来伪装自己。他由恐惧到绝望，由绝望到渴望离开这个世界。这就是《人间失格》。在这里，人性的丑陋和虚伪，无可遁形。“如今的我，谈不上...\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/6082808/\",\n                    \"image\": \"s27237850.jpg\",\n                    \"name\": \"百年孤独\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[哥伦比亚] 加西亚·马尔克斯\",\n                            \"href\": \"https://book.douban.com/author/1039386/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"范晔\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 百年孤独：七代人的离奇故事 百年孤独：七代人的离奇故事 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《百年孤独》是魔幻现实主义文学的代表作，描写了布恩迪亚家族七代人的传奇故事，以及加勒比海沿岸小镇马孔多的百年兴衰，反映了拉丁美洲一个世纪以来风云变幻的历史。作品融入神话传说、民间故事、宗教典故等神秘因素，巧妙地糅合了现实与虚幻，展现出一个瑰丽的想象世界，成为20世纪最重要的经典文学巨著之一。1982年加西亚•马尔克斯获得诺贝尔文学奖，奠定世界级文学大师的地位，很大程度上乃是凭借《百年孤独》的巨大影响。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1068920/\",\n                    \"image\": \"s1078958.jpg\",\n                    \"name\": \"飘\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [美国] 玛格丽特·米切尔\",\n                            \"href\": \"https://book.douban.com/author/4587509/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"李美华\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 飘：明天又是新的一天 飘：明天又是新的一天 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"小说中的故事发生在1861年美国南北战争前夕。生活在南方的少女郝思嘉从小深受南方文化传统的熏陶，可在她的血液里却流淌着野性的叛逆因素。随着战火的蔓廷和生活环境的恶化，郝思嘉的叛逆个性越来越丰满，越鲜明，在一系列的的挫折中她改造了自我，改变了个人甚至整个家族的命运，成为时代时势造就的新女性的形象。<br />作品在描绘人物生活与爱情的同时，勾勒出南北双方在政治，经济，文化各个层次的异同，具有浓厚的史诗风格，堪称美国历史转折时期的真实写照，同时也成为历久不衰的爱情经典。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26680378/\",\n                    \"image\": \"s33522285.jpg\",\n                    \"name\": \"脂砚斋批评本·红楼梦\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \" [清] 曹雪芹 著 / 脂砚斋 评点\",\n                            \"href\": \"https://book.douban.com/author/4508611/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"岳麓书社\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 红楼梦：谁解其中味 红楼梦：谁解其中味 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"古典名著在中国文学史上地位的确立，首先当然是这些名著本身所具有的独特魅力所致，但是也与这些小说刊刻之后，一大批眼光独到的小说批评家们极力批点评说有极大的关系。像李卓吾、金圣叹、毛宗岗、脂砚斋等名字在人们的心目中，就是与《西游记》、《三国演义》、《水浒传》、《红楼梦》密切相连的。他们不仅开创了中国古典小说批评史的新局面，也使更多的读者通过他们的批评更深入地了解了这些古典名著的精髓和魅力。脂砚斋这个名字更是与《红楼梦》密不可分，从他的评语中可以看出，脂砚斋与曹雪芹关系密切，但他们究竟是什么关系，众说纷纭，莫衷一是。有的认为他们就是同一个人，有的认为脂砚斋是书中史湘云的原型，也有人认为他们只是一般的亲友。无论脂砚斋是什么人，他对《红楼梦》所作的批评，则的确是给本来已经精彩无比的大观园锦上添花，能让读者对《红楼梦》更加着迷；也让后人对八十回后书中人物的命运有了更多的猜测和想象。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/3995526/\",\n                    \"image\": \"s3984108.jpg\",\n                    \"name\": \"目送\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"龙应台\",\n                            \"href\": \"https://book.douban.com/author/104782/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"生活·读书·新知三联书店\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 目送：不用追，不必追 目送：不用追，不必追 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"目送共由七十四篇散文组成，是为一本极具亲情、感人至深的文集。由父亲的逝世、母亲的苍老、儿子的离开、朋友的牵挂、兄弟的携手共行，写出失败和脆弱、失落和放手，写出缠绵不舍和绝然的虚无。正如作者所说：“我慢慢地、慢慢地了解到，所谓父女母子一场，只不过意味着，你和他的缘分就是今生今世不断地在目送他的背影渐行渐远。你站在小路的这一端，看着他逐渐消失在小路转弯的地方，而且，他用背影默默地告诉你，不用追。”\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33440205/\",\n                    \"image\": \"s33492346.jpg\",\n                    \"name\": \"你当像鸟飞往你的山\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 塔拉·韦斯特弗\",\n                            \"href\": \"https://book.douban.com/author/4609348/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"南海出版公司\"\n                        },\n                        {\n                            \"key\": \"读后感\",\n                            \"value\": '<a href=\"#\">Post not found: 你当像鸟飞往你的山：大山里走出的孩子 你当像鸟飞往你的山：大山里走出的孩子 false</a>'\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"人们只看到我的与众不同：一个十七岁前从未踏入教室的大山女孩，却戴上一顶学历的高帽，熠熠生辉。只有我知道自己的真面目：我来自一个极少有人能想象的家庭。我的童年由垃圾场的废铜烂铁铸成，那里没有读书声，只有起重机的轰鸣。不上学，不就医，是父亲要我们坚持的忠诚与真理。父亲不允许我们拥有自己的声音，我们的意志是他眼中的恶魔。哈佛大学，剑桥大学，哲学硕士，历史博士……我知道，像我这样从垃圾堆里爬出来的无知女孩，能取得如今的成就，应当感激涕零才对。但我丝毫提不起热情。我曾怯懦、崩溃、自我怀疑，内心里有什么东西腐烂了，恶臭熏天。直到我逃离大山，打开另一个世界。那是教育给我的新世界，那是我生命的无限可能。\"\n                        }\n                    ]\n                }\n            ],\n            \"to_read\": [\n                {\n                    \"douban\": \"https://book.douban.com/subject/25887924/\",\n                    \"image\": \"s28383857.jpg\",\n                    \"name\": \"卡拉马佐夫兄弟\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"上海译文出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"荣如德\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"本书系俄国大作家陀思妥耶夫斯基代表作之一。小说通过一桩真实的弑父案，描写老卡拉马佐夫同三个儿子即两代人之间的尖锐冲突。老卡拉马佐夫贪婪好色，独占妻子留给儿子们的遗产，并与长子德米特里为一个风流女子争风吃醋。一天黑夜，德米特里疑心自己的情人去跟老头儿幽会，便闯入家园，一怒之下，差点儿把老头儿砸死。他仓皇逃离后，躲在暗中装病的老卡拉马佐夫的私生子斯乜尔加科夫，悄然杀死老爷，造成了一桩震惊全俄的扑朔迷离的血案，从而引发了一连串惊心动魄的事件。作品展示一个错综复杂的社会家庭、道德和人性的悲剧主题，体现了作家一生的最高艺术成就。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/1437488/\",\n                    \"image\": \"s1458949.jpg\",\n                    \"name\": \"群魔\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"陀思妥耶夫斯基\",\n                            \"href\": \"https://book.douban.com/author/1070126/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"译林出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"臧仲伦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《群魔》是陀思妥耶夫斯基的代表作之一。他在这部作品中塑造了19世纪40年代的自由主义者及70年代初民主青年的群像。作者着重探索了恐怖分子的内心活动。《群魔》的主人公之一是自称为革命者的彼得·韦尔霍文斯基。他通过其领导的秘密组织进行恐吓、讹诈、纵火、暗杀等恐怖活动，企图动摇社会基础，以便发起暴动，夺取政权。作者以令人惊叹的洞察力和独特的心理描写拆穿了他的骗局；他是个阴谋家和恶棍。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26954760/\",\n                    \"image\": \"s29634528.jpg\",\n                    \"name\": \"月亮与六便士\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"威廉·萨默塞特·毛姆\",\n                            \"href\": \"https://book.douban.com/author/4576950/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"浙江文艺出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"徐淳刚\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"“满地都是六便士，他却抬头看见了月亮。”<br />银行家查尔斯，人到中年，事业有成，为了追求内心隐秘的绘画梦想，突然抛妻别子，弃家出走。他深知：人的每一种身份都是一种自我绑架，唯有失去是通向自由之途。<br />在异国他乡，他贫病交加，对梦想却愈发坚定执着。他说：我必须画画，就像溺水的人必须挣扎。<br />在经历种种离奇遭遇后，他来到南太平洋的一座孤岛，同当地一位姑娘结婚生子，成功创作出一系列惊世杰作。就在此时，他被绝症和双目失明击倒，临死之前，他做出了让所有人震惊的决定……<br />人世漫长得转瞬即逝，有人见尘埃，有人见星辰。查尔斯就是那个终其一生在追逐星辰的人。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/30192587/\",\n                    \"image\": \"s29737802.jpg\",\n                    \"name\": \"塑造世界经济的50项伟大发明\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"蒂姆·哈福德\",\n                            \"href\": \"https://book.douban.com/author/1151589/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"这本书聚焦于世界经济运行中令人着迷的一些细节，为此挑选了50项具体发明——纸张、条形码、知识产权和书写本身等。在每一个案例中，我们会近距离观察，看看这些发明到底改变了什么。一路上，我们会发现一些令人惊讶的问题的答案。<br />•艾尔顿•约翰与无纸化办公室的承诺有何联系？<br />•美国哪项发明在日本被限制40年，这对日本女性就业有何影响？<br />•1803年，为什么警察认为要两次处决一位伦敦的凶手——这与便携式电子产品有何联系？<br />•货币创新如何破坏议会大厦？<br />•哪个产品于1976年推出，很快又失败，但诺贝尔奖获得者经济学家保罗·萨缪尔森（Paul Samuelson）却将其与葡萄酒、字母表和轮子一起加以称赞？<br />•美联储主席耶伦·尤伦与忽必烈有共同之处吗？<br />这50项发明中，有一些比如犁，简单实用。另外一些如时钟，已经变得很精密。其中一些是固体，比如混凝土；其他一些如有限责任公司，是抽象的发明，你根本无法触及。有些，比如苹果手机，已经疯狂获利。其他一些如柴油机，最初是商业灾难。但是，它们都有故事可讲，让我了解到这个世界如何运行，这有助于我们注意周围一些看似平常的奇迹。其中一些涉及巨大、无情的经济力量; 另一些则是关于人类或荣耀或悲剧的故事。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26593084/\",\n                    \"image\": \"s28277258.jpg\",\n                    \"name\": \"迷人的材料\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"马克·米奥多尼克\",\n                            \"href\": \"https://book.douban.com/author/461039/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"未读·探索家·北京联合出版公司\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"赖盈满\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"从茶杯、喷气发动机到家用电器、内裤，我们的生活充满了材料。但你想过没有，为什么玻璃是透明的？是什么让橡皮筋有弹性？为什么曲别针会弯曲？为什么不锈钢不生锈？水泥也能做成衣服？世界上最薄却最坚硬的东西是什么？为什么某一种材料做成的东西会长那样？材料如何塑造了我们的世界又对我们的生活产生了怎样的影响？<br />世界顶级材料学大师带你用材料科学家的眼睛，以全新的方式看待你身边的每一样东西：钢、纸、混凝土、巧克力、塑料、玻璃、瓷器……<br />本书以渊博的知识和极富感染力的文字写就。它不仅揭露了各种物质背后的神奇结构，还告诉我们隐藏在其背后的精采故事。每一章介绍一种材料，辅以照片和手绘图，极富可读性和趣味性\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/26890863/\",\n                    \"image\": \"s30011804.jpg\",\n                    \"name\": \"我们如何走到今天\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美] 史蒂文·约翰逊\",\n                            \"href\": \"https://book.douban.com/author/145468/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"秦启越\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"《我们如何走到今天：重塑世界的6项创新》这是一本以新颖的眼光重新看待世界本质的科普常识巨著。专注于人类文明史上6种里程碑式的创新发明，审视伟大创意的力量与回响。《纽约时报》畅销书作家史蒂文·约翰逊倾心之作。同名纪录片《我们是如何走到今天的》于英国广播公司（BBC）分辑播出，并取得良好收视。6项创新，6种颠覆世界的方式。这是一本现代器物史，透析人们日常使用的基本物品的起源；更是一本社会变迁史，通过日常用品的演变透视社会生活的演进。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/33408247/\",\n                    \"image\": \"s32294606.jpg\",\n                    \"name\": \"病毒星球\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[美]卡尔·齐默\",\n                            \"href\": \"https://book.douban.com/author/292557/\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"广西师范大学出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"刘旸\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"早在人类出现之前，病毒就占领了这颗星球，历经高温、酷寒或干旱等极端条件，到现在病毒仍然无处不在，抗生素或感冒糖浆等最近用来对付它们的小玩意，更是无法伤及病毒毫发。<br />病毒在我们的DNA里留下了丰富的信息，人类DNA片段中8%来自病毒，说它们是我们亲缘有点远的祖先也不为过。但是要小心，这些休眠在人类DNA中的片段在特定条件下可以复苏，重新组织成活跃的病毒。<br />病毒并不总是面目可憎，人类吸入的氧气里，有1/10是病毒惠予的。被视为宫颈癌罪魁祸首的HPV，其实男女通吃且分布广泛，但绝大多数情况下它们都与人类和平共处。病毒在不同宿主间穿梭，有一定几率携带上一部分宿主的基因片段，然后插入到下一位宿主的基因里，在你感叹人类或其他物种多样性的时候，别忘了其中也有病毒的一份功劳。<br />不可否认，病毒也是自然创造的冷血杀手。甲流、埃博拉、SARS，这些病毒让人类措手不及，它们本来只攻击蝙蝠、老鼠或鸟类等，怎料自然演化无意之间将人类写进了病毒的黑名单。尽管疫苗不断更新，但演化的力量让病毒一次次地突破我们的防线。<br />这本书会让你重新理解病毒与人类的关系，认识人类在万物中的位置。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"https://book.douban.com/subject/34464674/\",\n                    \"image\": \"s33471187.jpg\",\n                    \"name\": \"万物发明指南\",\n                    \"info\": [\n                        {\n                            \"key\": \"作者\",\n                            \"value\": \"[加] 瑞安·诺思\"\n                        },\n                        {\n                            \"key\": \"出版社\",\n                            \"value\": \"中信出版社\"\n                        },\n                        {\n                            \"key\": \"译者\",\n                            \"value\": \"王乔琦\"\n                        },\n                        {\n                            \"key\": \"简介\",\n                            \"value\": \"如果你忽然发现自己穿越到了只在历史书中读到过的古代，你该怎么办？<br />面对陌生的原始社会，没有电、没有手机、没有网络……没有任何现代化的工具，你该如何生存下去？<br />别担心，这本书可以帮到你！<br />从钻木取火到发明蒸汽机、计算机，以你的名字命名元素周期表和物理定律，<br />从时空穿越到再造人类文明，你只需要这一本书。<br />这是一本时光机维修手册，更是你成为人类文明主宰的秘籍。<br />快开始新奇的文明创造游戏吧！<br />这是一部穿越人类发展时空、图文并茂的科普作品，<br />追溯了人类发展历程中的重大发明发现，带领读者重新感受了人类文明的发展进程。<br />本书编排精妙，切入点新颖有趣，是为一位不小心“被穿越”的旅行者而打造的生存指南，读者可以跟随作者的脑洞，搭乘时间机器返回那些曾经在传说中听过的时间、地点，根据具体的情境思考自己该如何生存。<br />书中有详细的操作步骤，交互式设计令读者获得全新的阅读体验，展开一场别具一格的时空旅行和文明创造游戏。\"\n                        }\n                    ]\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"影响力\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"怪诞行为学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"错误的行为\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无价\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"魔鬼经济学\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"思考快与慢\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"经济学原理\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"小狗钱钱\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"穷查理宝典\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"恶意一\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"嫌疑人X的献身\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"白夜行\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"罗杰疑案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"无人生还\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"东方快车谋杀案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"占星术杀人魔法\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"三体\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"海伯利安\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"神们自己\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"仿生人会梦见电子羊吗\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"围城\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死疲劳\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"生死晶黄\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"竹林中\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"动物农场\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"树上的男爵\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"一个女人一生中的二十四小时\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"变形记\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"城堡\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"老人与海\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"撒哈拉的故事\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"血酬定律\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"爱的博弈\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"洞穴奇案\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"朝花夕拾\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"乌合之众\",\n                    \"info\": []\n                },\n                {\n                    \"douban\": \"\",\n                    \"image\": \"\",\n                    \"name\": \"约翰克里斯朵夫\",\n                    \"info\": []\n                }\n            ]\n        }\n    $(document).ready(function () {\n        for (obj in books_data) {\n            html = \"\";\n            for (var i = 0; i < books_data[obj].length; i++) {\n                html += \"<div class=\\\"card\\\">\"\n                    + \"<div class=\\\"image\\\">\"\n                    + \"<a class=\\\"nbg\\\" target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].douban + \"\\\" title=\\\"\" + books_data[obj][i].name + \"\\\">\"\n                    + \"<img src=\\\"./\" + books_data[obj][i].image + \"\\\" title=\\\"点击看大图\\\" alt=\\\"\" + books_data[obj][i].name + \"\\\" rel=\\\"v:photo\\\" style=\\\"max-width: 135px;max-height: 200px;\\\" />\"\n                    + \"</a>\"\n                    + \"<span>\" + books_data[obj][i].name + \"</span>\"\n                    + \"</div>\"\n                    + \"<div id=\\\"info\\\" class=\\\"desc\\\">\"\n                for (var j = 0; j < books_data[obj][i].info.length; j++) {\n                    html += \"<span class=\\\"pl\\\">\" + books_data[obj][i].info[j].key + \": </span>\"\n                    if (books_data[obj][i].info[j].href !== \"\" && books_data[obj][i].info[j].href !== undefined) {\n                        html += \"<a target=\\\"_blank\\\" href=\\\"\" + books_data[obj][i].info[j].href + \"\\\">\"\n                        html += books_data[obj][i].info[j].value\n                        html += \"</a>\"\n                    } else {\n                        html += books_data[obj][i].info[j].value\n                    }\n                    html += \"<br />\"\n                }\n                html += \"</div></div>\"\n            }\n            var elementId = \"read\"\n            if (obj === \"reading\") {\n                elementId = \"books-1\"\n            } else if (obj === \"to_read\") {\n                elementId = \"books-2\"\n            } else {\n                elementId = \"books-3\"\n            }\n            document.getElementById(elementId).innerHTML = html;\n        }\n    })\n</script>\n\n\n\n<div class=\"tabs\" id=\"books\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#books-1\"><i class=\"fas fa-book-reader\"></i>在读</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-2\"><i class=\"fas fa-book\"></i>想读</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#books-3\"><i class=\"fas fa-book-open\"></i>已读</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"books-1\"><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-2\"><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"books-3\"><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>"}],"Post":[{"title":"MySQL出现Waiting for table metadata lock问题排查过程","date":"2021-09-08T02:04:21.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/MySQL出现Waiting-for-table-metadata-lock问题排查过程.md","raw":"---\ntitle: MySQL出现Waiting for table metadata lock问题排查过程\ndate: 2021-09-08 10:04:21\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"MySQL出现Waiting-for-table-metadata-lock问题排查过程","published":0,"updated":"2022-01-01T14:32:15.468Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727tz0001hx89daia3eg4","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python垃圾回收机制","date":"2021-09-08T02:05:07.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python垃圾回收机制.md","raw":"---\ntitle: Python垃圾回收机制\ndate: 2021-09-08 10:05:07\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python垃圾回收机制","published":0,"updated":"2022-01-01T14:32:15.468Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727u40003hx89girq5rhp","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python中heapq模块的使用","date":"2021-09-08T02:08:08.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python中heapq模块的使用.md","raw":"---\ntitle: Python中heapq模块的使用\ndate: 2021-09-08 10:08:08\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python中heapq模块的使用","published":0,"updated":"2022-01-01T14:32:15.468Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727u60005hx890fehc5yw","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python中timeit模块的使用","date":"2021-09-08T02:08:17.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python中timeit模块的使用.md","raw":"---\ntitle: Python中timeit模块的使用\ndate: 2021-09-08 10:08:17\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python中timeit模块的使用","published":0,"updated":"2022-01-01T14:32:15.468Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727u70007hx89ewh1gbiw","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python数据结构之单向循环链表","date":"2021-09-08T02:07:52.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python数据结构之单向循环链表.md","raw":"---\ntitle: Python数据结构之单向循环链表\ndate: 2021-09-08 10:07:52\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python数据结构之单向循环链表","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727u70009hx898vi26vnk","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python数据结构之双链表","date":"2021-09-08T02:08:00.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python数据结构之双链表.md","raw":"---\ntitle: Python数据结构之双链表\ndate: 2021-09-08 10:08:00\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python数据结构之双链表","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727u8000bhx899384f8q0","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python数据结构之队列","date":"2021-09-08T02:10:36.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python数据结构之队列.md","raw":"---\ntitle: Python数据结构之队列\ndate: 2021-09-08 10:10:36\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python数据结构之队列","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uc000dhx894d069l1q","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python数据结构之栈","date":"2021-09-08T02:10:28.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python数据结构之栈.md","raw":"---\ntitle: Python数据结构之栈\ndate: 2021-09-08 10:10:28\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python数据结构之栈","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ud000fhx89adp61bey","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python数据结构之单链表","date":"2021-09-08T02:07:44.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python数据结构之单链表.md","raw":"---\ntitle: Python数据结构之单链表\ndate: 2021-09-08 10:07:44\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python数据结构之单链表","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ud000hhx890hlg3j66","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python算法之希尔排序","date":"2021-09-08T02:11:59.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python算法之希尔排序.md","raw":"---\ntitle: Python算法之希尔排序\ndate: 2021-09-08 10:11:59\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python算法之希尔排序","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ue000jhx89ax5mdibt","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python算法之排序算法简介","date":"2021-09-08T02:11:11.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python算法之排序算法简介.md","raw":"---\ntitle: Python算法之排序算法简介\ndate: 2021-09-08 10:11:11\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python算法之排序算法简介","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ue000lhx899u0w183r","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python算法之插入排序","date":"2021-09-08T02:11:44.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python算法之插入排序.md","raw":"---\ntitle: Python算法之插入排序\ndate: 2021-09-08 10:11:44\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python算法之插入排序","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uf000nhx8950xofovv","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之代理模式","date":"2021-09-08T02:06:12.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之代理模式.md","raw":"---\ntitle: Python设计模式之代理模式\ndate: 2021-09-08 10:06:12\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之代理模式","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uf000phx89hc75a88o","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之建造者模式","date":"2021-09-08T02:06:45.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之建造者模式.md","raw":"---\ntitle: Python设计模式之建造者模式\ndate: 2021-09-08 10:06:45\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之建造者模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ug000qhx899uovcu01","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python算法之选择排序及其实现","date":"2021-09-08T02:11:33.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python算法之选择排序.md","raw":"---\ntitle: Python算法之选择排序及其实现\ndate: 2021-09-08 10:11:33\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python算法之选择排序","published":0,"updated":"2022-01-01T14:32:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ug000rhx896kuc7rhm","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之桥模式","date":"2021-09-08T02:07:01.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之桥模式.md","raw":"---\ntitle: Python设计模式之桥模式\ndate: 2021-09-08 10:07:01\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之桥模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uk000shx89eow70mjl","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之工厂模式","date":"2021-09-08T02:06:29.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之工厂模式.md","raw":"---\ntitle: Python设计模式之工厂模式\ndate: 2021-09-08 10:06:29\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之工厂模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ul000thx896dt5ae76","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之单例模式","date":"2021-09-08T02:06:20.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之单例模式.md","raw":"---\ntitle: Python设计模式之单例模式\ndate: 2021-09-08 10:06:20\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之单例模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ul000uhx899zjd37p1","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之策略模式","date":"2021-09-08T02:06:04.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之策略模式.md","raw":"---\ntitle: Python设计模式之策略模式\ndate: 2021-09-08 10:06:04\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之策略模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727um000vhx8976l8a4n4","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之组合模式","date":"2021-09-08T02:07:37.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之组合模式.md","raw":"---\ntitle: Python设计模式之组合模式\ndate: 2021-09-08 10:07:37\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之组合模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727um000whx89gphdhtmw","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之观察者模式","date":"2021-09-08T02:06:37.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之观察者模式.md","raw":"---\ntitle: Python设计模式之观察者模式\ndate: 2021-09-08 10:06:37\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之观察者模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727um000xhx892hbzbfdb","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之模板方法模式","date":"2021-09-08T02:06:52.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之模板方法模式.md","raw":"---\ntitle: Python设计模式之模板方法模式\ndate: 2021-09-08 10:06:52\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之模板方法模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727un000yhx896ndteyk7","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之适配器模式","date":"2021-09-08T02:07:22.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之适配器模式.md","raw":"---\ntitle: Python设计模式之适配器模式\ndate: 2021-09-08 10:07:22\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之适配器模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727un000zhx8924fu3vi0","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python面试问题整理","date":"2021-09-08T02:05:55.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python面试问题整理.md","raw":"---\ntitle: Python面试问题整理\ndate: 2021-09-08 10:05:55\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python面试问题整理","published":0,"updated":"2022-01-01T14:32:15.471Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727un0010hx89d65r13iw","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Python设计模式之责任链模式","date":"2021-09-08T02:07:30.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/Python设计模式之责任链模式.md","raw":"---\ntitle: Python设计模式之责任链模式\ndate: 2021-09-08 10:07:30\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"Python设计模式之责任链模式","published":0,"updated":"2022-01-01T14:32:15.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uo0011hx89dhqufdfv","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"且在人间：按自己的想法去生活","date":"2021-12-16T15:12:55.000Z","keywords":"且在人间","cover":"/img/top.jpg","top_img":null,"description":"一个残疾女人的婚姻史","_content":"\n人间是好的，我却把它用用坏\n最好的，是我在爱你。最坏的是我已经把你\n爱的不像样子\n                      ————-余秀华\n\n# 一、脑图\n\n\n# 二、摘要\n在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。\n“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”\n\n# 三、感想\n人活着是没有意义的，或者说人活着的意义就是活着本身。\n没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？\n人们每天都做着重复的事情# 二、摘要\n在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。\n“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”\n\n\n\n\n","source":"_drafts/且在人间：按自己的想法去生活.md","raw":"---\ntitle: 且在人间：按自己的想法去生活\ndate: 2021-12-16 23:12:55\ncategory: 读书笔记\ntags: \n  - 读书笔记\nkeywords: 且在人间\ncover: \ntop_img: \ndescription: 一个残疾女人的婚姻史\n---\n\n人间是好的，我却把它用用坏\n最好的，是我在爱你。最坏的是我已经把你\n爱的不像样子\n                      ————-余秀华\n\n# 一、脑图\n\n\n# 二、摘要\n在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。\n“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”\n\n# 三、感想\n人活着是没有意义的，或者说人活着的意义就是活着本身。\n没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？\n人们每天都做着重复的事情# 二、摘要\n在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。\n“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”\n\n\n\n\n","slug":"且在人间：按自己的想法去生活","published":0,"updated":"2022-01-01T14:32:15.471Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uq0012hx89ekboh8c6","content":"<p>人间是好的，我却把它用用坏<br>最好的，是我在爱你。最坏的是我已经把你<br>爱的不像样子<br>                      ————-余秀华</p>\n<h1 id=\"一、脑图\"><a href=\"#一、脑图\" class=\"headerlink\" title=\"一、脑图\"></a>一、脑图</h1><h1 id=\"二、摘要\"><a href=\"#二、摘要\" class=\"headerlink\" title=\"二、摘要\"></a>二、摘要</h1><p>在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。<br>“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”</p>\n<h1 id=\"三、感想\"><a href=\"#三、感想\" class=\"headerlink\" title=\"三、感想\"></a>三、感想</h1><p>人活着是没有意义的，或者说人活着的意义就是活着本身。<br>没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？<br>人们每天都做着重复的事情# 二、摘要<br>在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。<br>“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>人间是好的，我却把它用用坏<br>最好的，是我在爱你。最坏的是我已经把你<br>爱的不像样子<br>                      ————-余秀华</p>\n<h1 id=\"一、脑图\"><a href=\"#一、脑图\" class=\"headerlink\" title=\"一、脑图\"></a>一、脑图</h1><h1 id=\"二、摘要\"><a href=\"#二、摘要\" class=\"headerlink\" title=\"二、摘要\"></a>二、摘要</h1><p>在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。<br>“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”</p>\n<h1 id=\"三、感想\"><a href=\"#三、感想\" class=\"headerlink\" title=\"三、感想\"></a>三、感想</h1><p>人活着是没有意义的，或者说人活着的意义就是活着本身。<br>没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？<br>人们每天都做着重复的事情# 二、摘要<br>在所有人都没有错的时候，问题就好解决了：按照自己的想法生活。<br>“每个人都是有尊严的。”“尊严？你能够吃饱穿暖，不就是尊严吗？”</p>\n"},{"title":"CentOS7下如何设置MySQL开机自启","date":"2020-12-28T16:00:00.000Z","cover":"2020/12/29/CentOS7下如何设置MySQL开机自启/1611856804.jpg","top_img":"2020/12/29/CentOS7下如何设置MySQL开机自启/1611770404.jpg","description":"一般在部署完MySQL的时候都需要设置开机启动，本文讲解CentOS7下如何配置MySQL开机自启。","_content":"\n一般在部署完MySQL的时候都需要设置开机启动，本文讲解CentOS7下如何配置MySQL开机自启。\n\nCentOS7和6及以前的版本不一样，下面推荐使用systemctl命令来管理服务而不是以前的service(虽然service还能用)，废话不多说，直接看怎么做吧\n\n### 创建服务文件\n\n```shell\ntouch /usr/lib/systemd/system/mysqld.service\n```\n\nmysqld是服务的名字，可自定义，不过必须以.service结尾。\n\n服务文件内容如下：\n\n```shell\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=https://dev.mysql.com/doc/refman/5.7/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf\nLimitNOFILE = 5000\n```\n\n内容还是通俗易懂的，就不细说啦，需要注意的是ExecStart是启动MySQL的脚本，这里需要使用mysqld文件来启动，而不是使用service命令时的support-files/mysql.server，这里有个好处就是，在多实例又不想使用MySQL官方自带的mysqlmulti的时候，就很方便。\n\n### 配置开机自启\n\n创建好服务文件之后，开机自启就简单了，一条命令即可：\n\n```shell\nsystemctl enable mysqld\n```\n\n同时还可以使用systemctl命令启停MySQL实例，是不是很方便呀，赶紧试试吧！","source":"_posts/CentOS7下如何设置MySQL开机自启.md","raw":"---\ntitle: CentOS7下如何设置MySQL开机自启\ncategory: MySQL \ntags:\n\t- MySQL  \ndate: 2020-12-29\ncover: 1611856804.jpg\ntop_img: 1611770404.jpg\ndescription: 一般在部署完MySQL的时候都需要设置开机启动，本文讲解CentOS7下如何配置MySQL开机自启。\n---\n\n一般在部署完MySQL的时候都需要设置开机启动，本文讲解CentOS7下如何配置MySQL开机自启。\n\nCentOS7和6及以前的版本不一样，下面推荐使用systemctl命令来管理服务而不是以前的service(虽然service还能用)，废话不多说，直接看怎么做吧\n\n### 创建服务文件\n\n```shell\ntouch /usr/lib/systemd/system/mysqld.service\n```\n\nmysqld是服务的名字，可自定义，不过必须以.service结尾。\n\n服务文件内容如下：\n\n```shell\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=https://dev.mysql.com/doc/refman/5.7/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf\nLimitNOFILE = 5000\n```\n\n内容还是通俗易懂的，就不细说啦，需要注意的是ExecStart是启动MySQL的脚本，这里需要使用mysqld文件来启动，而不是使用service命令时的support-files/mysql.server，这里有个好处就是，在多实例又不想使用MySQL官方自带的mysqlmulti的时候，就很方便。\n\n### 配置开机自启\n\n创建好服务文件之后，开机自启就简单了，一条命令即可：\n\n```shell\nsystemctl enable mysqld\n```\n\n同时还可以使用systemctl命令启停MySQL实例，是不是很方便呀，赶紧试试吧！","slug":"CentOS7下如何设置MySQL开机自启","published":1,"updated":"2022-01-01T14:32:15.473Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727us0013hx891i9x22d1","content":"<p>一般在部署完MySQL的时候都需要设置开机启动，本文讲解CentOS7下如何配置MySQL开机自启。</p>\n<p>CentOS7和6及以前的版本不一样，下面推荐使用systemctl命令来管理服务而不是以前的service(虽然service还能用)，废话不多说，直接看怎么做吧</p>\n<h3 id=\"创建服务文件\"><a href=\"#创建服务文件\" class=\"headerlink\" title=\"创建服务文件\"></a>创建服务文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch /usr/lib/systemd/system/mysqld.service</span><br></pre></td></tr></table></figure>\n\n<p>mysqld是服务的名字，可自定义，不过必须以.service结尾。</p>\n<p>服务文件内容如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=MySQL Server</span><br><span class=\"line\">Documentation=man:mysqld(8)</span><br><span class=\"line\">Documentation=https://dev.mysql.com/doc/refman/5.7/en/using-systemd.html</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\">After=syslog.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=mysql</span><br><span class=\"line\">Group=mysql</span><br><span class=\"line\">ExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf</span><br><span class=\"line\">LimitNOFILE = 5000</span><br></pre></td></tr></table></figure>\n\n<p>内容还是通俗易懂的，就不细说啦，需要注意的是ExecStart是启动MySQL的脚本，这里需要使用mysqld文件来启动，而不是使用service命令时的support-files/mysql.server，这里有个好处就是，在多实例又不想使用MySQL官方自带的mysqlmulti的时候，就很方便。</p>\n<h3 id=\"配置开机自启\"><a href=\"#配置开机自启\" class=\"headerlink\" title=\"配置开机自启\"></a>配置开机自启</h3><p>创建好服务文件之后，开机自启就简单了，一条命令即可：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable mysqld</span><br></pre></td></tr></table></figure>\n\n<p>同时还可以使用systemctl命令启停MySQL实例，是不是很方便呀，赶紧试试吧！</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>一般在部署完MySQL的时候都需要设置开机启动，本文讲解CentOS7下如何配置MySQL开机自启。</p>\n<p>CentOS7和6及以前的版本不一样，下面推荐使用systemctl命令来管理服务而不是以前的service(虽然service还能用)，废话不多说，直接看怎么做吧</p>\n<h3 id=\"创建服务文件\"><a href=\"#创建服务文件\" class=\"headerlink\" title=\"创建服务文件\"></a>创建服务文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch /usr/lib/systemd/system/mysqld.service</span><br></pre></td></tr></table></figure>\n\n<p>mysqld是服务的名字，可自定义，不过必须以.service结尾。</p>\n<p>服务文件内容如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=MySQL Server</span><br><span class=\"line\">Documentation=man:mysqld(8)</span><br><span class=\"line\">Documentation=https://dev.mysql.com/doc/refman/5.7/en/using-systemd.html</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\">After=syslog.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=mysql</span><br><span class=\"line\">Group=mysql</span><br><span class=\"line\">ExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf</span><br><span class=\"line\">LimitNOFILE = 5000</span><br></pre></td></tr></table></figure>\n\n<p>内容还是通俗易懂的，就不细说啦，需要注意的是ExecStart是启动MySQL的脚本，这里需要使用mysqld文件来启动，而不是使用service命令时的support-files/mysql.server，这里有个好处就是，在多实例又不想使用MySQL官方自带的mysqlmulti的时候，就很方便。</p>\n<h3 id=\"配置开机自启\"><a href=\"#配置开机自启\" class=\"headerlink\" title=\"配置开机自启\"></a>配置开机自启</h3><p>创建好服务文件之后，开机自启就简单了，一条命令即可：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable mysqld</span><br></pre></td></tr></table></figure>\n\n<p>同时还可以使用systemctl命令启停MySQL实例，是不是很方便呀，赶紧试试吧！</p>\n"},{"title":"随笔：《五魁》有感","keywords":"五魁","cover":"2021/05/06/五魁：信什么就会失去什么/1600020006.jpg","top_img":"2021/05/06/五魁：信什么就会失去什么/1600020006.jpg","date":"2021-05-06T09:14:15.000Z","description":"这本小书已经读了很久了，有很多感慨的地方，但是一直没有去写，一直没有，直到今天，这个平常的日子，却也是让我瑟瑟发抖的日子。","_content":"\n这本小书已经读了很久了，有很多感慨的地方，但是一直没有去写，一直没有，直到今天，这个平常的日子，却也是让我瑟瑟发抖的日子。\n\n<!--今天上，我照常去跟家吉问个好，并把我早上阅读的吴思先生的《潜规则》推荐给她，等来的是她告诉我她结束了短暂的恋情。在我印象中五一前，也就是5天前，她还没有恋爱，这短短的5天竟经历了从恋爱到失恋，她告诉我，对方有很多缺点，但是自己刚下定决心好好在一起，就结束了。我无法想象，对于一个长期处于想恋爱，却不敢，或者说自卑于自己的过去，封锁自我内心的人来说，这是何种打击。家吉告诉我她全身都在发抖。此刻我也在发抖，我也在发抖。-->\n\n<!--下午五点左右，一个好朋友告诉我他和我的一个好朋友发生了关系，然后之后就再也没有联系过。我发抖了，因为对方是我一直真心用心对待的人，而如今却是这样，或许我也曾喜欢过这个人，或许我也曾幻想过和她在一起的事。然而，现在距离这事过去已经三年了，我才知道。快十年了，我也心想过与她有过什么，但是并没有，而如今却发现她竟与我一好友，而且是因为我他们才认识的，发生了....。 心里久久不能平息，颤颤发抖。-->\n\n<!--这让我想起了前不久看过的贾凹平先生的《五魁》，何其相似啊，也把这篇迟迟没有落笔的读后感记录下来。-->\n\n《五魁》里的主人公五魁是个专门给结婚的人驼新娘的，从十五六岁起，做了十多年了。书中讲述了这样一个故事：五魁驼柳家媳妇（一个年轻漂亮，菩萨一样圣洁的女人）路遇山贼，五魁拼命保护着女人，最后也难逃被抢走的命运，五魁想方设法将女人从山寨里救出来，并送回了柳家，五魁也因此在柳家有了分安定的工作。但是女人在柳家过得却不幸福，尝尝被欺负打骂。五魁因将女人夺回在柳家获得一个安定的工作，而女人的丈夫，却因得知女人被抢后取炸药去救人时突然爆炸成了下半身残废的人，女人成了发泄的工具。五魁可以因可以常常看到女人高兴。女人日日夜夜受折磨，知道柳家人发现五魁抱着哭泣的女人，将五魁赶出了柳家。五魁最后将女人带出了柳家，并躲到了深山里，搭建了房子，并一起生活，在五魁眼里，女人是那样的美，幻想着那是他的女人，然而并没有实际的行动。即使女人貌似有些暗示也不为所动的样子。为了怕女人孤独，五魁买了一条狗来陪女人，却不想女人却爱上了那条狗，在阳光明媚的日志里，五魁发现女人光着身子和狗睡在了一起。女人是那么的美丽，五魁是那么的爱她。五魁将狗杀死了，女人也跳下了山崖。最后，五魁成了一个拥有十一位压寨夫人的山贼。\n\n一个人要经历过多少，才会对这世间的众生百态，无所动摇。要经历过什么，才会放弃哪些原有的坚持，走向他的极端。\n\n<!--家吉是个温柔可爱的人儿，因为小时候经历了一些事情，父母的离异，以及母亲的尝试自杀等等，对这周围的一切，都害怕着，害怕失去，也害怕得到。正如太宰治《人间失格》所说：胆小鬼连幸福也会害怕。是的，我们害怕幸福，害怕着短暂的时光随时都有可能失去。从此封锁自己，不得到便不会失去，将孤独留给自己，将痛苦留给自己。越是如此，就越渴望。越是渴望，当幸福来临是越是想要抓住。最后还是抓不住，在自己打开心扉去接受这幸福的哪一瞬间，梦幻就破灭了，幸福不在了。这一刻，生的意义是什么？而死貌似也没啥意义！所以如今这不生不死的状态，意义在哪？-->\n\n<!--从最初的认识，到相谈甚欢的大学时光，以及最后毕业后的各奔东西，到后来你我皆有了各自的家庭。我都保持着最初的幻想，今日却得知，在我婚后第二年，你婚前，与我朋友有了关系，这或许没什么大不了，而于我而言，我多年的幻梦，这一刻却变成了朋友的现实（我知道的这一刻），有些难以接受，难以消化，或许我不该如此，或许我不该对人以真心，也或许我应该更加的主动，更加的强势，那样的话，结局应该会有所不同。往日的时光历历在目，如今却也过眼烟云，让这一切随风，也让我重新拾起曾经的那份自信，努力变成一个强势的人，一个主动的人，拿去自己想要的。-->\n\n<!--曾今无所不谈的朋友到前两年少有联系，而如今却得知此事。人生多变啊。。。曾今的幻想，到如今，缺失想付诸现实，想摧毁，想想这些失去，以及哪些付出。终有一日，幻想会成为现实，而你我终将如何，且不可知。。。。。。-->\n\n<!--写于20210506与王家林和杨敏联系，从王家林口中得知，在18年他在大方的时候曾与杨敏发生过关系，为此震惊，想起刚看完不就的《五魁》联系自身，觉得相似，写下此文。。。另附一首：-->\n\n<!--十年念卿性一朝，\n一朝醒来梦一场。\n一场梦境又如何？\n如何性友却非我？-->\n\n","source":"_drafts/五魁：信什么就会失去什么.md","raw":"---\ntitle: 随笔：《五魁》有感\ntags:\n  - 读书笔记\ncategory: 读书笔记\nkeywords: '五魁'\ncover: 1600020006.jpg\ntop_img: 1600020006.jpg\ndate: 2021-05-06 17:14:15\ndescription: 这本小书已经读了很久了，有很多感慨的地方，但是一直没有去写，一直没有，直到今天，这个平常的日子，却也是让我瑟瑟发抖的日子。\n---\n\n这本小书已经读了很久了，有很多感慨的地方，但是一直没有去写，一直没有，直到今天，这个平常的日子，却也是让我瑟瑟发抖的日子。\n\n<!--今天上，我照常去跟家吉问个好，并把我早上阅读的吴思先生的《潜规则》推荐给她，等来的是她告诉我她结束了短暂的恋情。在我印象中五一前，也就是5天前，她还没有恋爱，这短短的5天竟经历了从恋爱到失恋，她告诉我，对方有很多缺点，但是自己刚下定决心好好在一起，就结束了。我无法想象，对于一个长期处于想恋爱，却不敢，或者说自卑于自己的过去，封锁自我内心的人来说，这是何种打击。家吉告诉我她全身都在发抖。此刻我也在发抖，我也在发抖。-->\n\n<!--下午五点左右，一个好朋友告诉我他和我的一个好朋友发生了关系，然后之后就再也没有联系过。我发抖了，因为对方是我一直真心用心对待的人，而如今却是这样，或许我也曾喜欢过这个人，或许我也曾幻想过和她在一起的事。然而，现在距离这事过去已经三年了，我才知道。快十年了，我也心想过与她有过什么，但是并没有，而如今却发现她竟与我一好友，而且是因为我他们才认识的，发生了....。 心里久久不能平息，颤颤发抖。-->\n\n<!--这让我想起了前不久看过的贾凹平先生的《五魁》，何其相似啊，也把这篇迟迟没有落笔的读后感记录下来。-->\n\n《五魁》里的主人公五魁是个专门给结婚的人驼新娘的，从十五六岁起，做了十多年了。书中讲述了这样一个故事：五魁驼柳家媳妇（一个年轻漂亮，菩萨一样圣洁的女人）路遇山贼，五魁拼命保护着女人，最后也难逃被抢走的命运，五魁想方设法将女人从山寨里救出来，并送回了柳家，五魁也因此在柳家有了分安定的工作。但是女人在柳家过得却不幸福，尝尝被欺负打骂。五魁因将女人夺回在柳家获得一个安定的工作，而女人的丈夫，却因得知女人被抢后取炸药去救人时突然爆炸成了下半身残废的人，女人成了发泄的工具。五魁可以因可以常常看到女人高兴。女人日日夜夜受折磨，知道柳家人发现五魁抱着哭泣的女人，将五魁赶出了柳家。五魁最后将女人带出了柳家，并躲到了深山里，搭建了房子，并一起生活，在五魁眼里，女人是那样的美，幻想着那是他的女人，然而并没有实际的行动。即使女人貌似有些暗示也不为所动的样子。为了怕女人孤独，五魁买了一条狗来陪女人，却不想女人却爱上了那条狗，在阳光明媚的日志里，五魁发现女人光着身子和狗睡在了一起。女人是那么的美丽，五魁是那么的爱她。五魁将狗杀死了，女人也跳下了山崖。最后，五魁成了一个拥有十一位压寨夫人的山贼。\n\n一个人要经历过多少，才会对这世间的众生百态，无所动摇。要经历过什么，才会放弃哪些原有的坚持，走向他的极端。\n\n<!--家吉是个温柔可爱的人儿，因为小时候经历了一些事情，父母的离异，以及母亲的尝试自杀等等，对这周围的一切，都害怕着，害怕失去，也害怕得到。正如太宰治《人间失格》所说：胆小鬼连幸福也会害怕。是的，我们害怕幸福，害怕着短暂的时光随时都有可能失去。从此封锁自己，不得到便不会失去，将孤独留给自己，将痛苦留给自己。越是如此，就越渴望。越是渴望，当幸福来临是越是想要抓住。最后还是抓不住，在自己打开心扉去接受这幸福的哪一瞬间，梦幻就破灭了，幸福不在了。这一刻，生的意义是什么？而死貌似也没啥意义！所以如今这不生不死的状态，意义在哪？-->\n\n<!--从最初的认识，到相谈甚欢的大学时光，以及最后毕业后的各奔东西，到后来你我皆有了各自的家庭。我都保持着最初的幻想，今日却得知，在我婚后第二年，你婚前，与我朋友有了关系，这或许没什么大不了，而于我而言，我多年的幻梦，这一刻却变成了朋友的现实（我知道的这一刻），有些难以接受，难以消化，或许我不该如此，或许我不该对人以真心，也或许我应该更加的主动，更加的强势，那样的话，结局应该会有所不同。往日的时光历历在目，如今却也过眼烟云，让这一切随风，也让我重新拾起曾经的那份自信，努力变成一个强势的人，一个主动的人，拿去自己想要的。-->\n\n<!--曾今无所不谈的朋友到前两年少有联系，而如今却得知此事。人生多变啊。。。曾今的幻想，到如今，缺失想付诸现实，想摧毁，想想这些失去，以及哪些付出。终有一日，幻想会成为现实，而你我终将如何，且不可知。。。。。。-->\n\n<!--写于20210506与王家林和杨敏联系，从王家林口中得知，在18年他在大方的时候曾与杨敏发生过关系，为此震惊，想起刚看完不就的《五魁》联系自身，觉得相似，写下此文。。。另附一首：-->\n\n<!--十年念卿性一朝，\n一朝醒来梦一场。\n一场梦境又如何？\n如何性友却非我？-->\n\n","slug":"五魁：信什么就会失去什么","published":0,"updated":"2022-01-01T14:32:15.471Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uv0016hx89a2a9ardo","content":"<p>这本小书已经读了很久了，有很多感慨的地方，但是一直没有去写，一直没有，直到今天，这个平常的日子，却也是让我瑟瑟发抖的日子。</p>\n<!--今天上，我照常去跟家吉问个好，并把我早上阅读的吴思先生的《潜规则》推荐给她，等来的是她告诉我她结束了短暂的恋情。在我印象中五一前，也就是5天前，她还没有恋爱，这短短的5天竟经历了从恋爱到失恋，她告诉我，对方有很多缺点，但是自己刚下定决心好好在一起，就结束了。我无法想象，对于一个长期处于想恋爱，却不敢，或者说自卑于自己的过去，封锁自我内心的人来说，这是何种打击。家吉告诉我她全身都在发抖。此刻我也在发抖，我也在发抖。-->\n\n<!--下午五点左右，一个好朋友告诉我他和我的一个好朋友发生了关系，然后之后就再也没有联系过。我发抖了，因为对方是我一直真心用心对待的人，而如今却是这样，或许我也曾喜欢过这个人，或许我也曾幻想过和她在一起的事。然而，现在距离这事过去已经三年了，我才知道。快十年了，我也心想过与她有过什么，但是并没有，而如今却发现她竟与我一好友，而且是因为我他们才认识的，发生了....。 心里久久不能平息，颤颤发抖。-->\n\n<!--这让我想起了前不久看过的贾凹平先生的《五魁》，何其相似啊，也把这篇迟迟没有落笔的读后感记录下来。-->\n\n<p>《五魁》里的主人公五魁是个专门给结婚的人驼新娘的，从十五六岁起，做了十多年了。书中讲述了这样一个故事：五魁驼柳家媳妇（一个年轻漂亮，菩萨一样圣洁的女人）路遇山贼，五魁拼命保护着女人，最后也难逃被抢走的命运，五魁想方设法将女人从山寨里救出来，并送回了柳家，五魁也因此在柳家有了分安定的工作。但是女人在柳家过得却不幸福，尝尝被欺负打骂。五魁因将女人夺回在柳家获得一个安定的工作，而女人的丈夫，却因得知女人被抢后取炸药去救人时突然爆炸成了下半身残废的人，女人成了发泄的工具。五魁可以因可以常常看到女人高兴。女人日日夜夜受折磨，知道柳家人发现五魁抱着哭泣的女人，将五魁赶出了柳家。五魁最后将女人带出了柳家，并躲到了深山里，搭建了房子，并一起生活，在五魁眼里，女人是那样的美，幻想着那是他的女人，然而并没有实际的行动。即使女人貌似有些暗示也不为所动的样子。为了怕女人孤独，五魁买了一条狗来陪女人，却不想女人却爱上了那条狗，在阳光明媚的日志里，五魁发现女人光着身子和狗睡在了一起。女人是那么的美丽，五魁是那么的爱她。五魁将狗杀死了，女人也跳下了山崖。最后，五魁成了一个拥有十一位压寨夫人的山贼。</p>\n<p>一个人要经历过多少，才会对这世间的众生百态，无所动摇。要经历过什么，才会放弃哪些原有的坚持，走向他的极端。</p>\n<!--家吉是个温柔可爱的人儿，因为小时候经历了一些事情，父母的离异，以及母亲的尝试自杀等等，对这周围的一切，都害怕着，害怕失去，也害怕得到。正如太宰治《人间失格》所说：胆小鬼连幸福也会害怕。是的，我们害怕幸福，害怕着短暂的时光随时都有可能失去。从此封锁自己，不得到便不会失去，将孤独留给自己，将痛苦留给自己。越是如此，就越渴望。越是渴望，当幸福来临是越是想要抓住。最后还是抓不住，在自己打开心扉去接受这幸福的哪一瞬间，梦幻就破灭了，幸福不在了。这一刻，生的意义是什么？而死貌似也没啥意义！所以如今这不生不死的状态，意义在哪？-->\n\n<!--从最初的认识，到相谈甚欢的大学时光，以及最后毕业后的各奔东西，到后来你我皆有了各自的家庭。我都保持着最初的幻想，今日却得知，在我婚后第二年，你婚前，与我朋友有了关系，这或许没什么大不了，而于我而言，我多年的幻梦，这一刻却变成了朋友的现实（我知道的这一刻），有些难以接受，难以消化，或许我不该如此，或许我不该对人以真心，也或许我应该更加的主动，更加的强势，那样的话，结局应该会有所不同。往日的时光历历在目，如今却也过眼烟云，让这一切随风，也让我重新拾起曾经的那份自信，努力变成一个强势的人，一个主动的人，拿去自己想要的。-->\n\n<!--曾今无所不谈的朋友到前两年少有联系，而如今却得知此事。人生多变啊。。。曾今的幻想，到如今，缺失想付诸现实，想摧毁，想想这些失去，以及哪些付出。终有一日，幻想会成为现实，而你我终将如何，且不可知。。。。。。-->\n\n<!--写于20210506与王家林和杨敏联系，从王家林口中得知，在18年他在大方的时候曾与杨敏发生过关系，为此震惊，想起刚看完不就的《五魁》联系自身，觉得相似，写下此文。。。另附一首：-->\n\n<!--十年念卿性一朝，\n一朝醒来梦一场。\n一场梦境又如何？\n如何性友却非我？-->\n\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>这本小书已经读了很久了，有很多感慨的地方，但是一直没有去写，一直没有，直到今天，这个平常的日子，却也是让我瑟瑟发抖的日子。</p>\n<!--今天上，我照常去跟家吉问个好，并把我早上阅读的吴思先生的《潜规则》推荐给她，等来的是她告诉我她结束了短暂的恋情。在我印象中五一前，也就是5天前，她还没有恋爱，这短短的5天竟经历了从恋爱到失恋，她告诉我，对方有很多缺点，但是自己刚下定决心好好在一起，就结束了。我无法想象，对于一个长期处于想恋爱，却不敢，或者说自卑于自己的过去，封锁自我内心的人来说，这是何种打击。家吉告诉我她全身都在发抖。此刻我也在发抖，我也在发抖。-->\n\n<!--下午五点左右，一个好朋友告诉我他和我的一个好朋友发生了关系，然后之后就再也没有联系过。我发抖了，因为对方是我一直真心用心对待的人，而如今却是这样，或许我也曾喜欢过这个人，或许我也曾幻想过和她在一起的事。然而，现在距离这事过去已经三年了，我才知道。快十年了，我也心想过与她有过什么，但是并没有，而如今却发现她竟与我一好友，而且是因为我他们才认识的，发生了....。 心里久久不能平息，颤颤发抖。-->\n\n<!--这让我想起了前不久看过的贾凹平先生的《五魁》，何其相似啊，也把这篇迟迟没有落笔的读后感记录下来。-->\n\n<p>《五魁》里的主人公五魁是个专门给结婚的人驼新娘的，从十五六岁起，做了十多年了。书中讲述了这样一个故事：五魁驼柳家媳妇（一个年轻漂亮，菩萨一样圣洁的女人）路遇山贼，五魁拼命保护着女人，最后也难逃被抢走的命运，五魁想方设法将女人从山寨里救出来，并送回了柳家，五魁也因此在柳家有了分安定的工作。但是女人在柳家过得却不幸福，尝尝被欺负打骂。五魁因将女人夺回在柳家获得一个安定的工作，而女人的丈夫，却因得知女人被抢后取炸药去救人时突然爆炸成了下半身残废的人，女人成了发泄的工具。五魁可以因可以常常看到女人高兴。女人日日夜夜受折磨，知道柳家人发现五魁抱着哭泣的女人，将五魁赶出了柳家。五魁最后将女人带出了柳家，并躲到了深山里，搭建了房子，并一起生活，在五魁眼里，女人是那样的美，幻想着那是他的女人，然而并没有实际的行动。即使女人貌似有些暗示也不为所动的样子。为了怕女人孤独，五魁买了一条狗来陪女人，却不想女人却爱上了那条狗，在阳光明媚的日志里，五魁发现女人光着身子和狗睡在了一起。女人是那么的美丽，五魁是那么的爱她。五魁将狗杀死了，女人也跳下了山崖。最后，五魁成了一个拥有十一位压寨夫人的山贼。</p>\n<p>一个人要经历过多少，才会对这世间的众生百态，无所动摇。要经历过什么，才会放弃哪些原有的坚持，走向他的极端。</p>\n<!--家吉是个温柔可爱的人儿，因为小时候经历了一些事情，父母的离异，以及母亲的尝试自杀等等，对这周围的一切，都害怕着，害怕失去，也害怕得到。正如太宰治《人间失格》所说：胆小鬼连幸福也会害怕。是的，我们害怕幸福，害怕着短暂的时光随时都有可能失去。从此封锁自己，不得到便不会失去，将孤独留给自己，将痛苦留给自己。越是如此，就越渴望。越是渴望，当幸福来临是越是想要抓住。最后还是抓不住，在自己打开心扉去接受这幸福的哪一瞬间，梦幻就破灭了，幸福不在了。这一刻，生的意义是什么？而死貌似也没啥意义！所以如今这不生不死的状态，意义在哪？-->\n\n<!--从最初的认识，到相谈甚欢的大学时光，以及最后毕业后的各奔东西，到后来你我皆有了各自的家庭。我都保持着最初的幻想，今日却得知，在我婚后第二年，你婚前，与我朋友有了关系，这或许没什么大不了，而于我而言，我多年的幻梦，这一刻却变成了朋友的现实（我知道的这一刻），有些难以接受，难以消化，或许我不该如此，或许我不该对人以真心，也或许我应该更加的主动，更加的强势，那样的话，结局应该会有所不同。往日的时光历历在目，如今却也过眼烟云，让这一切随风，也让我重新拾起曾经的那份自信，努力变成一个强势的人，一个主动的人，拿去自己想要的。-->\n\n<!--曾今无所不谈的朋友到前两年少有联系，而如今却得知此事。人生多变啊。。。曾今的幻想，到如今，缺失想付诸现实，想摧毁，想想这些失去，以及哪些付出。终有一日，幻想会成为现实，而你我终将如何，且不可知。。。。。。-->\n\n<!--写于20210506与王家林和杨敏联系，从王家林口中得知，在18年他在大方的时候曾与杨敏发生过关系，为此震惊，想起刚看完不就的《五魁》联系自身，觉得相似，写下此文。。。另附一首：-->\n\n<!--十年念卿性一朝，\n一朝醒来梦一场。\n一场梦境又如何？\n如何性友却非我？-->\n\n"},{"title":"使用Travis-CI搭建持续集成和持续部署","date":"2021-09-08T02:08:26.000Z","category":null,"keywords":null,"cover":"/img/top.jpg","top_img":null,"description":null,"_content":"\n\n\n","source":"_drafts/使用Travis-CI搭建持续集成和持续部署.md","raw":"---\ntitle: 使用Travis-CI搭建持续集成和持续部署\ndate: 2021-09-08 10:08:26\ncategory:\ntags:\nkeywords:\ncover:\ntop_img:\ndescription:\n---\n\n\n\n","slug":"使用Travis-CI搭建持续集成和持续部署","published":0,"updated":"2022-01-01T14:32:15.472Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ux0017hx89epql3ot5","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":""},{"title":"Django多表关联查询时数据错误","cover":"2021/06/08/Django多表关联查询时数据错误/1588096803.jpg","top_img":"2021/06/08/Django多表关联查询时数据错误/1588096803.jpg","date":"2021-06-08T12:23:24.000Z","description":"三张及以上表关联时使用filter导致数据不正确","_content":"\n## 背景及需求\n\n- 表：配置集、配置集版本、配置项\n- 关系：一个配置集有多个版本，一个配置集版本有多个配置项\n\n![image-20211112184343393](Django多表关联查询时数据错误/image-20211112184343393.png)\n\n## 原始写法\n\n### 原始代码\n\n~~~python\nquery = ConfigSet.objects.filter(moduletoconfigset__module=module_id).order_by(\"-id\")\nif not User.objects.filter(bk_username=request.user.username, is_super=True).exists():\n\tquery = query.filter(create_by=request.user.username)\n\n# 标识符is_current_config，代表在当前配置上操作\nif is_current_config:\n\tquery = query.filter(configsetversion__state=\"has\")\n\n# 按搜索条件筛选\nif content:\n\tquery = query.filter(\n\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)\n\t).distinct()\n\npaginator = Paginator(query, page_size)\ncount = paginator.count\nres = paginator.get_page(page).object_list.values()\nfor i in res:\n    if is_current_config:\n        last_ver = ConfigSetVersion.objects.filter(config_set_id=i[\"id\"], state=\"has\").last()\n    else:\n        last_ver = ConfigSetVersion.objects.filter(config_set_id=i[\"id\"]).last()\n    i[\"now_version\"] = last_ver.version\n    i[\"scope\"] = \",\".join(\n        [i.module_name for i in ModuleToConfigSet.objects.filter(config_set_id=i[\"id\"])]\n    )\n~~~\n\n### 查询得到的结果\n\n当输入'2'查询的时候，查询的结果里面不符合需求：查询配置集ID或版本中包含'2'数据\n\n![image-20211112181443714](Django多表关联查询时数据错误/image-20211112181443714.png)\n\n### 生成的SQL\n\n生成的SQL语句中，出现了同一张表关联了多次进行链表查询，以及where条件的判断，导致数据出错。\n\n~~~sql\nSELECT DISTINCT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \nFROM\n\t`cw_config_configset`\n\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` )\n\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\tINNER JOIN `cw_config_configsetversion` T4 ON ( `cw_config_configset`.`id` = T4.`config_set_id` )\n\tINNER JOIN `cw_config_configsetversion` T5 ON ( `cw_config_configset`.`id` = T5.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T6 ON ( `cw_config_configset`.`id` = T6.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T7 ON ( `cw_config_configset`.`id` = T7.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T8 ON ( `cw_config_configset`.`id` = T8.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T9 ON ( `cw_config_configset`.`id` = T9.`config_set_id` ) \nWHERE\n\t(\n\t\t`cw_config_moduletoconfigset`.`module` = 117 \n\t\tAND `cw_config_configsetversion`.`state` = 'has' \n\t\tAND T4.`version` LIKE BINARY '%2%' \n\t\tAND T5.`version` LIKE BINARY '%2%' \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T6.`version` LIKE BINARY '%2%' ) \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T7.`version` LIKE BINARY '%2%' ) \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T8.`version` LIKE BINARY '%2%' ) \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T9.`version` LIKE BINARY '%2%' ) \n\t) \nORDER BY\n\t`cw_config_configset`.`id` DESC;\n~~~\n\n### SQL查询结果\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |\n|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n4 rows in set (0.18 sec)\n```\n\n## 预期\n\n### 预期结果SQL\n\n根据需求，编写相应的SQL如下\n\n```sql\nSELECT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configsetversion`.`version`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \nFROM\n\t`cw_config_configset`\n\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` ) \nWHERE\n\t`cw_config_configsetversion`.`state` = 'has' \n\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR `cw_config_configsetversion`.`version` LIKE BINARY '%2%' ) \n\tAND `cw_config_moduletoconfigset`.`module` = 117 \nORDER BY\n\t`cw_config_configset`.`id` DESC;\n```\n\n### 预期结果\n\n编写的SQL查询的数据和预期的结果一致。\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | version | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | 2       | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | 26      | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+\n2 rows in set (0.11 sec)\n```\n\n\n\n## 第一次优化\n\n从上面的Django代码出发，尝试减少Django中使用queryset.filter的次数，特别是其中出钱外键关联的情况，这种情况会导致代码中增加关联的表数量。\n\n### Django代码\n\n~~~python\nquery = ConfigSet.objects.all()\nquery_dict = {\"moduletoconfigset__module\": module_id}\nif not User.objects.filter(bk_username=request.user.username, is_super=True).exists():\n\tquery_dict['create_by'] = request.user.username\n\t\nif is_current_config:\n\tquery_dict['configsetversion__state'] = \"has\"\nquery = query.filter(**query_dict)\n\nif content:\n\tquery = query.filter(\n\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)\n\t).distinct()\nquery = query.order_by(\"-id\")\n~~~\n\n### 生成的SQL\n\n~~~sql\nSELECT DISTINCT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \nFROM\n\t`cw_config_configset`\n\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T4 ON ( `cw_config_configset`.`id` = T4.`config_set_id` ) \nWHERE\n\t(\n\t\t`cw_config_configsetversion`.`state` = 'has' \n\t\tAND `cw_config_moduletoconfigset`.`module` = 117 \n\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T4.`version` LIKE BINARY '%2%' )) \nORDER BY\n\t`cw_config_configset`.`id` DESC;\n~~~\n\n### SQL查询结果\n\n生成的SQL中关联的表少了，然而数据还是错误的。\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |\n|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n4 rows in set (0.09 sec)\n```\n\n\n\n## 最终优化\n\n如何去优化？从语气的SQL以及第一次优化的情况来看，减少queryset.filter，但是最后使用Q的貌似无法只写将查询条件写到query_dict里面。\n\n在SQL语句中，OR条件的查询可以修改为使用UNION以提高性能，这里也可以使用这种方式，将Q这种方式的或查询修改为使用UNION的方式来进行查询。\n\n### Django代码\n\n~~~python\nquery = ConfigSet.objects.all()\nquery_dict = {\"moduletoconfigset__module\": module_id}\n\nif not User.objects.filter(bk_username=request.user.username, is_super=True).exists():\n\tquery_dict[\"create_by\"] = request.user.username\n\t\nif is_current_config:\n\tquery_dict[\"configsetversion__state\"] = \"has\"\n\t\nquery_dict2 = {}\nif content:\n\tquery_dict2 = copy.deepcopy(query_dict)\n\tquery_dict[\"data_id__contains\"] = content\n\tquery_dict2[\"configsetversion__version__contains\"] = content\nif not query_dict2:\n\tquery = query.filter(**query_dict).order_by(\"-id\").distinct()\nelse:\n\tquery = query.filter(**query_dict).union(query.filter(**query_dict2)).order_by(\"-id\").distinct()\n~~~\n\n### 生成的SQL\n\n生成的SQL和预期的SQL不一致，但是与将预期SQL中的OR条件改用UNION的方式查询是一样的\n\n~~~sql\n( SELECT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \n\tFROM\n\t\t`cw_config_configset`\n\t\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\t\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` ) \n\tWHERE\n\t\t( `cw_config_configsetversion`.`state` = 'has' AND `cw_config_configset`.`data_id` LIKE BINARY '%2%' AND `cw_config_moduletoconfigset`.`module` = 117 ) \n\tORDER BY\n\t\t`cw_config_configset`.`id` ASC \n\t) UNION\n\t(\n\tSELECT\n\t\t`cw_config_configset`.`id`,\n\t\t`cw_config_configset`.`create_by`,\n\t\t`cw_config_configset`.`create_time`,\n\t\t`cw_config_configset`.`update_time`,\n\t\t`cw_config_configset`.`update_by`,\n\t\t`cw_config_configset`.`data_id`,\n\t\t`cw_config_configset`.`storage_path`,\n\t\t`cw_config_configset`.`type`,\n\t\t`cw_config_configset`.`dis`,\n\t\t`cw_config_configset`.`dis_version` \n\tFROM\n\t\t`cw_config_configset`\n\t\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\t\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` ) \n\tWHERE\n\t\t( `cw_config_configsetversion`.`state` = 'has' AND `cw_config_configsetversion`.`version` LIKE BINARY '%2%' AND `cw_config_moduletoconfigset`.`module` = 117 ) \n\tORDER BY\n\t\t`cw_config_configset`.`id` ASC \n\t) \nORDER BY\n\t( 1 ) DESC\n~~~\n\n### SQL查询结果\n\n执行可以得到正确的结果\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n2 rows in set (0.11 sec)\n```\n\n### 最终结果\n\n![image-20211112182409956](Django多表关联查询时数据错误/image-20211112182409956.png)\n\n## 总结\n\n在Django中使用ORM查询数据时，尽量将查询条件都组装成一个字典的形式去查询，而不是使用queryset.filter的方式。使用queryset.filter可能带来数据不正确的风险（三张及以上表的情况），当出现多表关联的时候性能相对于关联少量表的情况差。\n\n上面问题的另一中解决方法就是直接使用ORM中的raw方法，直接去执行SQL语句，这样不仅能够得到正确的数据，而且性能还比使用ORM的性能好！\n\n","source":"_posts/Django多表关联查询时数据错误.md","raw":"---\ntitle: Django多表关联查询时数据错误\ntags:\n  - Python\n  - Django\ncategory: Python\ncover: 1588096803.jpg\ntop_img: 1588096803.jpg\ndate: 2021-06-08 20:23:24\ndescription: 三张及以上表关联时使用filter导致数据不正确\n---\n\n## 背景及需求\n\n- 表：配置集、配置集版本、配置项\n- 关系：一个配置集有多个版本，一个配置集版本有多个配置项\n\n![image-20211112184343393](Django多表关联查询时数据错误/image-20211112184343393.png)\n\n## 原始写法\n\n### 原始代码\n\n~~~python\nquery = ConfigSet.objects.filter(moduletoconfigset__module=module_id).order_by(\"-id\")\nif not User.objects.filter(bk_username=request.user.username, is_super=True).exists():\n\tquery = query.filter(create_by=request.user.username)\n\n# 标识符is_current_config，代表在当前配置上操作\nif is_current_config:\n\tquery = query.filter(configsetversion__state=\"has\")\n\n# 按搜索条件筛选\nif content:\n\tquery = query.filter(\n\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)\n\t).distinct()\n\npaginator = Paginator(query, page_size)\ncount = paginator.count\nres = paginator.get_page(page).object_list.values()\nfor i in res:\n    if is_current_config:\n        last_ver = ConfigSetVersion.objects.filter(config_set_id=i[\"id\"], state=\"has\").last()\n    else:\n        last_ver = ConfigSetVersion.objects.filter(config_set_id=i[\"id\"]).last()\n    i[\"now_version\"] = last_ver.version\n    i[\"scope\"] = \",\".join(\n        [i.module_name for i in ModuleToConfigSet.objects.filter(config_set_id=i[\"id\"])]\n    )\n~~~\n\n### 查询得到的结果\n\n当输入'2'查询的时候，查询的结果里面不符合需求：查询配置集ID或版本中包含'2'数据\n\n![image-20211112181443714](Django多表关联查询时数据错误/image-20211112181443714.png)\n\n### 生成的SQL\n\n生成的SQL语句中，出现了同一张表关联了多次进行链表查询，以及where条件的判断，导致数据出错。\n\n~~~sql\nSELECT DISTINCT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \nFROM\n\t`cw_config_configset`\n\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` )\n\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\tINNER JOIN `cw_config_configsetversion` T4 ON ( `cw_config_configset`.`id` = T4.`config_set_id` )\n\tINNER JOIN `cw_config_configsetversion` T5 ON ( `cw_config_configset`.`id` = T5.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T6 ON ( `cw_config_configset`.`id` = T6.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T7 ON ( `cw_config_configset`.`id` = T7.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T8 ON ( `cw_config_configset`.`id` = T8.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T9 ON ( `cw_config_configset`.`id` = T9.`config_set_id` ) \nWHERE\n\t(\n\t\t`cw_config_moduletoconfigset`.`module` = 117 \n\t\tAND `cw_config_configsetversion`.`state` = 'has' \n\t\tAND T4.`version` LIKE BINARY '%2%' \n\t\tAND T5.`version` LIKE BINARY '%2%' \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T6.`version` LIKE BINARY '%2%' ) \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T7.`version` LIKE BINARY '%2%' ) \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T8.`version` LIKE BINARY '%2%' ) \n\t\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T9.`version` LIKE BINARY '%2%' ) \n\t) \nORDER BY\n\t`cw_config_configset`.`id` DESC;\n~~~\n\n### SQL查询结果\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |\n|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n4 rows in set (0.18 sec)\n```\n\n## 预期\n\n### 预期结果SQL\n\n根据需求，编写相应的SQL如下\n\n```sql\nSELECT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configsetversion`.`version`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \nFROM\n\t`cw_config_configset`\n\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` ) \nWHERE\n\t`cw_config_configsetversion`.`state` = 'has' \n\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR `cw_config_configsetversion`.`version` LIKE BINARY '%2%' ) \n\tAND `cw_config_moduletoconfigset`.`module` = 117 \nORDER BY\n\t`cw_config_configset`.`id` DESC;\n```\n\n### 预期结果\n\n编写的SQL查询的数据和预期的结果一致。\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | version | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | 2       | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | 26      | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+\n2 rows in set (0.11 sec)\n```\n\n\n\n## 第一次优化\n\n从上面的Django代码出发，尝试减少Django中使用queryset.filter的次数，特别是其中出钱外键关联的情况，这种情况会导致代码中增加关联的表数量。\n\n### Django代码\n\n~~~python\nquery = ConfigSet.objects.all()\nquery_dict = {\"moduletoconfigset__module\": module_id}\nif not User.objects.filter(bk_username=request.user.username, is_super=True).exists():\n\tquery_dict['create_by'] = request.user.username\n\t\nif is_current_config:\n\tquery_dict['configsetversion__state'] = \"has\"\nquery = query.filter(**query_dict)\n\nif content:\n\tquery = query.filter(\n\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)\n\t).distinct()\nquery = query.order_by(\"-id\")\n~~~\n\n### 生成的SQL\n\n~~~sql\nSELECT DISTINCT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \nFROM\n\t`cw_config_configset`\n\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` )\n\tLEFT OUTER JOIN `cw_config_configsetversion` T4 ON ( `cw_config_configset`.`id` = T4.`config_set_id` ) \nWHERE\n\t(\n\t\t`cw_config_configsetversion`.`state` = 'has' \n\t\tAND `cw_config_moduletoconfigset`.`module` = 117 \n\tAND ( `cw_config_configset`.`data_id` LIKE BINARY '%2%' OR T4.`version` LIKE BINARY '%2%' )) \nORDER BY\n\t`cw_config_configset`.`id` DESC;\n~~~\n\n### SQL查询结果\n\n生成的SQL中关联的表少了，然而数据还是错误的。\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |\n|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n4 rows in set (0.09 sec)\n```\n\n\n\n## 最终优化\n\n如何去优化？从语气的SQL以及第一次优化的情况来看，减少queryset.filter，但是最后使用Q的貌似无法只写将查询条件写到query_dict里面。\n\n在SQL语句中，OR条件的查询可以修改为使用UNION以提高性能，这里也可以使用这种方式，将Q这种方式的或查询修改为使用UNION的方式来进行查询。\n\n### Django代码\n\n~~~python\nquery = ConfigSet.objects.all()\nquery_dict = {\"moduletoconfigset__module\": module_id}\n\nif not User.objects.filter(bk_username=request.user.username, is_super=True).exists():\n\tquery_dict[\"create_by\"] = request.user.username\n\t\nif is_current_config:\n\tquery_dict[\"configsetversion__state\"] = \"has\"\n\t\nquery_dict2 = {}\nif content:\n\tquery_dict2 = copy.deepcopy(query_dict)\n\tquery_dict[\"data_id__contains\"] = content\n\tquery_dict2[\"configsetversion__version__contains\"] = content\nif not query_dict2:\n\tquery = query.filter(**query_dict).order_by(\"-id\").distinct()\nelse:\n\tquery = query.filter(**query_dict).union(query.filter(**query_dict2)).order_by(\"-id\").distinct()\n~~~\n\n### 生成的SQL\n\n生成的SQL和预期的SQL不一致，但是与将预期SQL中的OR条件改用UNION的方式查询是一样的\n\n~~~sql\n( SELECT\n\t`cw_config_configset`.`id`,\n\t`cw_config_configset`.`create_by`,\n\t`cw_config_configset`.`create_time`,\n\t`cw_config_configset`.`update_time`,\n\t`cw_config_configset`.`update_by`,\n\t`cw_config_configset`.`data_id`,\n\t`cw_config_configset`.`storage_path`,\n\t`cw_config_configset`.`type`,\n\t`cw_config_configset`.`dis`,\n\t`cw_config_configset`.`dis_version` \n\tFROM\n\t\t`cw_config_configset`\n\t\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\t\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` ) \n\tWHERE\n\t\t( `cw_config_configsetversion`.`state` = 'has' AND `cw_config_configset`.`data_id` LIKE BINARY '%2%' AND `cw_config_moduletoconfigset`.`module` = 117 ) \n\tORDER BY\n\t\t`cw_config_configset`.`id` ASC \n\t) UNION\n\t(\n\tSELECT\n\t\t`cw_config_configset`.`id`,\n\t\t`cw_config_configset`.`create_by`,\n\t\t`cw_config_configset`.`create_time`,\n\t\t`cw_config_configset`.`update_time`,\n\t\t`cw_config_configset`.`update_by`,\n\t\t`cw_config_configset`.`data_id`,\n\t\t`cw_config_configset`.`storage_path`,\n\t\t`cw_config_configset`.`type`,\n\t\t`cw_config_configset`.`dis`,\n\t\t`cw_config_configset`.`dis_version` \n\tFROM\n\t\t`cw_config_configset`\n\t\tINNER JOIN `cw_config_configsetversion` ON ( `cw_config_configset`.`id` = `cw_config_configsetversion`.`config_set_id` )\n\t\tINNER JOIN `cw_config_moduletoconfigset` ON ( `cw_config_configset`.`id` = `cw_config_moduletoconfigset`.`config_set_id` ) \n\tWHERE\n\t\t( `cw_config_configsetversion`.`state` = 'has' AND `cw_config_configsetversion`.`version` LIKE BINARY '%2%' AND `cw_config_moduletoconfigset`.`module` = 117 ) \n\tORDER BY\n\t\t`cw_config_configset`.`id` ASC \n\t) \nORDER BY\n\t( 1 ) DESC\n~~~\n\n### SQL查询结果\n\n执行可以得到正确的结果\n\n```\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | /desktop/newfile | 服务器 | 测试YAPI |             |\n|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | /log/test1       | 服务器 |          |             |\n+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+\n2 rows in set (0.11 sec)\n```\n\n### 最终结果\n\n![image-20211112182409956](Django多表关联查询时数据错误/image-20211112182409956.png)\n\n## 总结\n\n在Django中使用ORM查询数据时，尽量将查询条件都组装成一个字典的形式去查询，而不是使用queryset.filter的方式。使用queryset.filter可能带来数据不正确的风险（三张及以上表的情况），当出现多表关联的时候性能相对于关联少量表的情况差。\n\n上面问题的另一中解决方法就是直接使用ORM中的raw方法，直接去执行SQL语句，这样不仅能够得到正确的数据，而且性能还比使用ORM的性能好！\n\n","slug":"Django多表关联查询时数据错误","published":1,"updated":"2022-01-01T14:32:15.477Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727ux0018hx89heokhqr9","content":"<h2 id=\"背景及需求\"><a href=\"#背景及需求\" class=\"headerlink\" title=\"背景及需求\"></a>背景及需求</h2><ul>\n<li>表：配置集、配置集版本、配置项</li>\n<li>关系：一个配置集有多个版本，一个配置集版本有多个配置项</li>\n</ul>\n<p><img src=\"Django%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E6%97%B6%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF/image-20211112184343393.png\" alt=\"image-20211112184343393\"></p>\n<h2 id=\"原始写法\"><a href=\"#原始写法\" class=\"headerlink\" title=\"原始写法\"></a>原始写法</h2><h3 id=\"原始代码\"><a href=\"#原始代码\" class=\"headerlink\" title=\"原始代码\"></a>原始代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query = ConfigSet.objects.<span class=\"built_in\">filter</span>(moduletoconfigset__module=module_id).order_by(<span class=\"string\">&quot;-id&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> User.objects.<span class=\"built_in\">filter</span>(bk_username=request.user.username, is_super=<span class=\"literal\">True</span>).exists():</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(create_by=request.user.username)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 标识符is_current_config，代表在当前配置上操作</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(configsetversion__state=<span class=\"string\">&quot;has&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 按搜索条件筛选</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> content:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(</span><br><span class=\"line\">\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)</span><br><span class=\"line\">\t).distinct()</span><br><span class=\"line\"></span><br><span class=\"line\">paginator = Paginator(query, page_size)</span><br><span class=\"line\">count = paginator.count</span><br><span class=\"line\">res = paginator.get_page(page).object_list.values()</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> res:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">        last_ver = ConfigSetVersion.objects.<span class=\"built_in\">filter</span>(config_set_id=i[<span class=\"string\">&quot;id&quot;</span>], state=<span class=\"string\">&quot;has&quot;</span>).last()</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        last_ver = ConfigSetVersion.objects.<span class=\"built_in\">filter</span>(config_set_id=i[<span class=\"string\">&quot;id&quot;</span>]).last()</span><br><span class=\"line\">    i[<span class=\"string\">&quot;now_version&quot;</span>] = last_ver.version</span><br><span class=\"line\">    i[<span class=\"string\">&quot;scope&quot;</span>] = <span class=\"string\">&quot;,&quot;</span>.join(</span><br><span class=\"line\">        [i.module_name <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> ModuleToConfigSet.objects.<span class=\"built_in\">filter</span>(config_set_id=i[<span class=\"string\">&quot;id&quot;</span>])]</span><br><span class=\"line\">    )</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查询得到的结果\"><a href=\"#查询得到的结果\" class=\"headerlink\" title=\"查询得到的结果\"></a>查询得到的结果</h3><p>当输入’2’查询的时候，查询的结果里面不符合需求：查询配置集ID或版本中包含’2’数据</p>\n<p><img src=\"Django%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E6%97%B6%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF/image-20211112181443714.png\" alt=\"image-20211112181443714\"></p>\n<h3 id=\"生成的SQL\"><a href=\"#生成的SQL\" class=\"headerlink\" title=\"生成的SQL\"></a>生成的SQL</h3><p>生成的SQL语句中，出现了同一张表关联了多次进行链表查询，以及where条件的判断，导致数据出错。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`cw_config_configset`</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T4 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T4.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T5 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T5.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T6 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T6.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T7 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T7.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T8 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T8.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T9 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T9.`config_set_id` ) </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t\t`cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> `cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> T4.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> T5.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T6.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T7.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T8.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T9.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t) </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t`cw_config_configset`.`id` <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SQL查询结果\"><a href=\"#SQL查询结果\" class=\"headerlink\" title=\"SQL查询结果\"></a>SQL查询结果</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |</span><br><span class=\"line\">|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">4 rows in set (0.18 sec)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"预期\"><a href=\"#预期\" class=\"headerlink\" title=\"预期\"></a>预期</h2><h3 id=\"预期结果SQL\"><a href=\"#预期结果SQL\" class=\"headerlink\" title=\"预期结果SQL\"></a>预期结果SQL</h3><p>根据需求，编写相应的SQL如下</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configsetversion`.`version`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`cw_config_configset`</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` ) </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t`cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> `cw_config_configsetversion`.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t`cw_config_configset`.`id` <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"预期结果\"><a href=\"#预期结果\" class=\"headerlink\" title=\"预期结果\"></a>预期结果</h3><p>编写的SQL查询的数据和预期的结果一致。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | version | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | 2       | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | 26      | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+</span><br><span class=\"line\">2 rows in set (0.11 sec)</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"第一次优化\"><a href=\"#第一次优化\" class=\"headerlink\" title=\"第一次优化\"></a>第一次优化</h2><p>从上面的Django代码出发，尝试减少Django中使用queryset.filter的次数，特别是其中出钱外键关联的情况，这种情况会导致代码中增加关联的表数量。</p>\n<h3 id=\"Django代码\"><a href=\"#Django代码\" class=\"headerlink\" title=\"Django代码\"></a>Django代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query = ConfigSet.objects.<span class=\"built_in\">all</span>()</span><br><span class=\"line\">query_dict = &#123;<span class=\"string\">&quot;moduletoconfigset__module&quot;</span>: module_id&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> User.objects.<span class=\"built_in\">filter</span>(bk_username=request.user.username, is_super=<span class=\"literal\">True</span>).exists():</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&#x27;create_by&#x27;</span>] = request.user.username</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&#x27;configsetversion__state&#x27;</span>] = <span class=\"string\">&quot;has&quot;</span></span><br><span class=\"line\">query = query.<span class=\"built_in\">filter</span>(**query_dict)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> content:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(</span><br><span class=\"line\">\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)</span><br><span class=\"line\">\t).distinct()</span><br><span class=\"line\">query = query.order_by(<span class=\"string\">&quot;-id&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"生成的SQL-1\"><a href=\"#生成的SQL-1\" class=\"headerlink\" title=\"生成的SQL\"></a>生成的SQL</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`cw_config_configset`</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T4 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T4.`config_set_id` ) </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t\t`cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T4.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> )) </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t`cw_config_configset`.`id` <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SQL查询结果-1\"><a href=\"#SQL查询结果-1\" class=\"headerlink\" title=\"SQL查询结果\"></a>SQL查询结果</h3><p>生成的SQL中关联的表少了，然而数据还是错误的。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |</span><br><span class=\"line\">|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">4 rows in set (0.09 sec)</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"最终优化\"><a href=\"#最终优化\" class=\"headerlink\" title=\"最终优化\"></a>最终优化</h2><p>如何去优化？从语气的SQL以及第一次优化的情况来看，减少queryset.filter，但是最后使用Q的貌似无法只写将查询条件写到query_dict里面。</p>\n<p>在SQL语句中，OR条件的查询可以修改为使用UNION以提高性能，这里也可以使用这种方式，将Q这种方式的或查询修改为使用UNION的方式来进行查询。</p>\n<h3 id=\"Django代码-1\"><a href=\"#Django代码-1\" class=\"headerlink\" title=\"Django代码\"></a>Django代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query = ConfigSet.objects.<span class=\"built_in\">all</span>()</span><br><span class=\"line\">query_dict = &#123;<span class=\"string\">&quot;moduletoconfigset__module&quot;</span>: module_id&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> User.objects.<span class=\"built_in\">filter</span>(bk_username=request.user.username, is_super=<span class=\"literal\">True</span>).exists():</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&quot;create_by&quot;</span>] = request.user.username</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&quot;configsetversion__state&quot;</span>] = <span class=\"string\">&quot;has&quot;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">query_dict2 = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> content:</span><br><span class=\"line\">\tquery_dict2 = copy.deepcopy(query_dict)</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&quot;data_id__contains&quot;</span>] = content</span><br><span class=\"line\">\tquery_dict2[<span class=\"string\">&quot;configsetversion__version__contains&quot;</span>] = content</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> query_dict2:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(**query_dict).order_by(<span class=\"string\">&quot;-id&quot;</span>).distinct()</span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(**query_dict).union(query.<span class=\"built_in\">filter</span>(**query_dict2)).order_by(<span class=\"string\">&quot;-id&quot;</span>).distinct()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"生成的SQL-2\"><a href=\"#生成的SQL-2\" class=\"headerlink\" title=\"生成的SQL\"></a>生成的SQL</h3><p>生成的SQL和预期的SQL不一致，但是与将预期SQL中的OR条件改用UNION的方式查询是一样的</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">( <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\">\t<span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t\t`cw_config_configset`</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` ) </span><br><span class=\"line\">\t<span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t\t( `cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> ) </span><br><span class=\"line\">\t<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t\t`cw_config_configset`.`id` <span class=\"keyword\">ASC</span> </span><br><span class=\"line\">\t) <span class=\"keyword\">UNION</span></span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t<span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\">\t<span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t\t`cw_config_configset`</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` ) </span><br><span class=\"line\">\t<span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t\t( `cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_configsetversion`.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> ) </span><br><span class=\"line\">\t<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t\t`cw_config_configset`.`id` <span class=\"keyword\">ASC</span> </span><br><span class=\"line\">\t) </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t( <span class=\"number\">1</span> ) <span class=\"keyword\">DESC</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SQL查询结果-2\"><a href=\"#SQL查询结果-2\" class=\"headerlink\" title=\"SQL查询结果\"></a>SQL查询结果</h3><p>执行可以得到正确的结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">2 rows in set (0.11 sec)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"最终结果\"><a href=\"#最终结果\" class=\"headerlink\" title=\"最终结果\"></a>最终结果</h3><p><img src=\"Django%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E6%97%B6%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF/image-20211112182409956.png\" alt=\"image-20211112182409956\"></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>在Django中使用ORM查询数据时，尽量将查询条件都组装成一个字典的形式去查询，而不是使用queryset.filter的方式。使用queryset.filter可能带来数据不正确的风险（三张及以上表的情况），当出现多表关联的时候性能相对于关联少量表的情况差。</p>\n<p>上面问题的另一中解决方法就是直接使用ORM中的raw方法，直接去执行SQL语句，这样不仅能够得到正确的数据，而且性能还比使用ORM的性能好！</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<h2 id=\"背景及需求\"><a href=\"#背景及需求\" class=\"headerlink\" title=\"背景及需求\"></a>背景及需求</h2><ul>\n<li>表：配置集、配置集版本、配置项</li>\n<li>关系：一个配置集有多个版本，一个配置集版本有多个配置项</li>\n</ul>\n<p><img src=\"Django%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E6%97%B6%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF/image-20211112184343393.png\" alt=\"image-20211112184343393\"></p>\n<h2 id=\"原始写法\"><a href=\"#原始写法\" class=\"headerlink\" title=\"原始写法\"></a>原始写法</h2><h3 id=\"原始代码\"><a href=\"#原始代码\" class=\"headerlink\" title=\"原始代码\"></a>原始代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query = ConfigSet.objects.<span class=\"built_in\">filter</span>(moduletoconfigset__module=module_id).order_by(<span class=\"string\">&quot;-id&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> User.objects.<span class=\"built_in\">filter</span>(bk_username=request.user.username, is_super=<span class=\"literal\">True</span>).exists():</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(create_by=request.user.username)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 标识符is_current_config，代表在当前配置上操作</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(configsetversion__state=<span class=\"string\">&quot;has&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 按搜索条件筛选</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> content:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(</span><br><span class=\"line\">\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)</span><br><span class=\"line\">\t).distinct()</span><br><span class=\"line\"></span><br><span class=\"line\">paginator = Paginator(query, page_size)</span><br><span class=\"line\">count = paginator.count</span><br><span class=\"line\">res = paginator.get_page(page).object_list.values()</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> res:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">        last_ver = ConfigSetVersion.objects.<span class=\"built_in\">filter</span>(config_set_id=i[<span class=\"string\">&quot;id&quot;</span>], state=<span class=\"string\">&quot;has&quot;</span>).last()</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        last_ver = ConfigSetVersion.objects.<span class=\"built_in\">filter</span>(config_set_id=i[<span class=\"string\">&quot;id&quot;</span>]).last()</span><br><span class=\"line\">    i[<span class=\"string\">&quot;now_version&quot;</span>] = last_ver.version</span><br><span class=\"line\">    i[<span class=\"string\">&quot;scope&quot;</span>] = <span class=\"string\">&quot;,&quot;</span>.join(</span><br><span class=\"line\">        [i.module_name <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> ModuleToConfigSet.objects.<span class=\"built_in\">filter</span>(config_set_id=i[<span class=\"string\">&quot;id&quot;</span>])]</span><br><span class=\"line\">    )</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查询得到的结果\"><a href=\"#查询得到的结果\" class=\"headerlink\" title=\"查询得到的结果\"></a>查询得到的结果</h3><p>当输入’2’查询的时候，查询的结果里面不符合需求：查询配置集ID或版本中包含’2’数据</p>\n<p><img src=\"Django%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E6%97%B6%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF/image-20211112181443714.png\" alt=\"image-20211112181443714\"></p>\n<h3 id=\"生成的SQL\"><a href=\"#生成的SQL\" class=\"headerlink\" title=\"生成的SQL\"></a>生成的SQL</h3><p>生成的SQL语句中，出现了同一张表关联了多次进行链表查询，以及where条件的判断，导致数据出错。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`cw_config_configset`</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T4 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T4.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T5 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T5.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T6 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T6.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T7 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T7.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T8 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T8.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T9 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T9.`config_set_id` ) </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t\t`cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> `cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> T4.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> T5.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T6.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T7.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T8.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T9.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t) </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t`cw_config_configset`.`id` <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SQL查询结果\"><a href=\"#SQL查询结果\" class=\"headerlink\" title=\"SQL查询结果\"></a>SQL查询结果</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |</span><br><span class=\"line\">|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">4 rows in set (0.18 sec)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"预期\"><a href=\"#预期\" class=\"headerlink\" title=\"预期\"></a>预期</h2><h3 id=\"预期结果SQL\"><a href=\"#预期结果SQL\" class=\"headerlink\" title=\"预期结果SQL\"></a>预期结果SQL</h3><p>根据需求，编写相应的SQL如下</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configsetversion`.`version`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`cw_config_configset`</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` ) </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t`cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> `cw_config_configsetversion`.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> ) </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t`cw_config_configset`.`id` <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"预期结果\"><a href=\"#预期结果\" class=\"headerlink\" title=\"预期结果\"></a>预期结果</h3><p>编写的SQL查询的数据和预期的结果一致。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | version | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | 2       | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | 26      | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+---------+------------------+--------+----------+-------------+</span><br><span class=\"line\">2 rows in set (0.11 sec)</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"第一次优化\"><a href=\"#第一次优化\" class=\"headerlink\" title=\"第一次优化\"></a>第一次优化</h2><p>从上面的Django代码出发，尝试减少Django中使用queryset.filter的次数，特别是其中出钱外键关联的情况，这种情况会导致代码中增加关联的表数量。</p>\n<h3 id=\"Django代码\"><a href=\"#Django代码\" class=\"headerlink\" title=\"Django代码\"></a>Django代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query = ConfigSet.objects.<span class=\"built_in\">all</span>()</span><br><span class=\"line\">query_dict = &#123;<span class=\"string\">&quot;moduletoconfigset__module&quot;</span>: module_id&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> User.objects.<span class=\"built_in\">filter</span>(bk_username=request.user.username, is_super=<span class=\"literal\">True</span>).exists():</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&#x27;create_by&#x27;</span>] = request.user.username</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&#x27;configsetversion__state&#x27;</span>] = <span class=\"string\">&quot;has&quot;</span></span><br><span class=\"line\">query = query.<span class=\"built_in\">filter</span>(**query_dict)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> content:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(</span><br><span class=\"line\">\t\tQ(data_id__contains=content) | Q(configsetversion__version__contains=content)</span><br><span class=\"line\">\t).distinct()</span><br><span class=\"line\">query = query.order_by(<span class=\"string\">&quot;-id&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"生成的SQL-1\"><a href=\"#生成的SQL-1\" class=\"headerlink\" title=\"生成的SQL\"></a>生成的SQL</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`cw_config_configset`</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` )</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">OUTER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` T4 <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> T4.`config_set_id` ) </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t\t`cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> ( `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">OR</span> T4.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> )) </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t`cw_config_configset`.`id` <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SQL查询结果-1\"><a href=\"#SQL查询结果-1\" class=\"headerlink\" title=\"SQL查询结果\"></a>SQL查询结果</h3><p>生成的SQL中关联的表少了，然而数据还是错误的。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| 29 | product   | 2021-10-27 14:52:48 | 2021-11-10 10:03:16 | product   | sfdas       |                  | sfa    |          |             |</span><br><span class=\"line\">|  8 | product   | 2021-10-26 15:56:52 | 2021-10-27 14:25:12 | product   | 31ff        | 13               | 13     | 13       | 13          |</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">4 rows in set (0.09 sec)</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"最终优化\"><a href=\"#最终优化\" class=\"headerlink\" title=\"最终优化\"></a>最终优化</h2><p>如何去优化？从语气的SQL以及第一次优化的情况来看，减少queryset.filter，但是最后使用Q的貌似无法只写将查询条件写到query_dict里面。</p>\n<p>在SQL语句中，OR条件的查询可以修改为使用UNION以提高性能，这里也可以使用这种方式，将Q这种方式的或查询修改为使用UNION的方式来进行查询。</p>\n<h3 id=\"Django代码-1\"><a href=\"#Django代码-1\" class=\"headerlink\" title=\"Django代码\"></a>Django代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query = ConfigSet.objects.<span class=\"built_in\">all</span>()</span><br><span class=\"line\">query_dict = &#123;<span class=\"string\">&quot;moduletoconfigset__module&quot;</span>: module_id&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> User.objects.<span class=\"built_in\">filter</span>(bk_username=request.user.username, is_super=<span class=\"literal\">True</span>).exists():</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&quot;create_by&quot;</span>] = request.user.username</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">if</span> is_current_config:</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&quot;configsetversion__state&quot;</span>] = <span class=\"string\">&quot;has&quot;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">query_dict2 = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> content:</span><br><span class=\"line\">\tquery_dict2 = copy.deepcopy(query_dict)</span><br><span class=\"line\">\tquery_dict[<span class=\"string\">&quot;data_id__contains&quot;</span>] = content</span><br><span class=\"line\">\tquery_dict2[<span class=\"string\">&quot;configsetversion__version__contains&quot;</span>] = content</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> query_dict2:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(**query_dict).order_by(<span class=\"string\">&quot;-id&quot;</span>).distinct()</span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">\tquery = query.<span class=\"built_in\">filter</span>(**query_dict).union(query.<span class=\"built_in\">filter</span>(**query_dict2)).order_by(<span class=\"string\">&quot;-id&quot;</span>).distinct()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"生成的SQL-2\"><a href=\"#生成的SQL-2\" class=\"headerlink\" title=\"生成的SQL\"></a>生成的SQL</h3><p>生成的SQL和预期的SQL不一致，但是与将预期SQL中的OR条件改用UNION的方式查询是一样的</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">( <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\">\t<span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t\t`cw_config_configset`</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` ) </span><br><span class=\"line\">\t<span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t\t( `cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_configset`.`data_id` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> ) </span><br><span class=\"line\">\t<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t\t`cw_config_configset`.`id` <span class=\"keyword\">ASC</span> </span><br><span class=\"line\">\t) <span class=\"keyword\">UNION</span></span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t<span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t\t`cw_config_configset`.`id`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`create_by`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`create_time`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`update_time`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`update_by`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`data_id`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`storage_path`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`type`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`dis`,</span><br><span class=\"line\">\t\t`cw_config_configset`.`dis_version` </span><br><span class=\"line\">\t<span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t\t`cw_config_configset`</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_configsetversion` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_configsetversion`.`config_set_id` )</span><br><span class=\"line\">\t\t<span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `cw_config_moduletoconfigset` <span class=\"keyword\">ON</span> ( `cw_config_configset`.`id` <span class=\"operator\">=</span> `cw_config_moduletoconfigset`.`config_set_id` ) </span><br><span class=\"line\">\t<span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\t\t( `cw_config_configsetversion`.`state` <span class=\"operator\">=</span> <span class=\"string\">&#x27;has&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_configsetversion`.`version` <span class=\"keyword\">LIKE</span> <span class=\"type\">BINARY</span> <span class=\"string\">&#x27;%2%&#x27;</span> <span class=\"keyword\">AND</span> `cw_config_moduletoconfigset`.`<span class=\"keyword\">module</span>` <span class=\"operator\">=</span> <span class=\"number\">117</span> ) </span><br><span class=\"line\">\t<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t\t`cw_config_configset`.`id` <span class=\"keyword\">ASC</span> </span><br><span class=\"line\">\t) </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t( <span class=\"number\">1</span> ) <span class=\"keyword\">DESC</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SQL查询结果-2\"><a href=\"#SQL查询结果-2\" class=\"headerlink\" title=\"SQL查询结果\"></a>SQL查询结果</h3><p>执行可以得到正确的结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">| id | create_by | create_time         | update_time         | update_by | data_id     | storage_path     | type   | dis      | dis_version |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">|  3 | product   | 2021-10-22 14:47:04 | NULL                | NULL      | test1022    | &#x2F;desktop&#x2F;newfile | 服务器 | 测试YAPI |             |</span><br><span class=\"line\">|  1 | product   | 2021-10-21 17:18:42 | 2021-10-28 20:51:19 | product   | publish1021 | &#x2F;log&#x2F;test1       | 服务器 |          |             |</span><br><span class=\"line\">+----+-----------+---------------------+---------------------+-----------+-------------+------------------+--------+----------+-------------+</span><br><span class=\"line\">2 rows in set (0.11 sec)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"最终结果\"><a href=\"#最终结果\" class=\"headerlink\" title=\"最终结果\"></a>最终结果</h3><p><img src=\"Django%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E6%97%B6%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF/image-20211112182409956.png\" alt=\"image-20211112182409956\"></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>在Django中使用ORM查询数据时，尽量将查询条件都组装成一个字典的形式去查询，而不是使用queryset.filter的方式。使用queryset.filter可能带来数据不正确的风险（三张及以上表的情况），当出现多表关联的时候性能相对于关联少量表的情况差。</p>\n<p>上面问题的另一中解决方法就是直接使用ORM中的raw方法，直接去执行SQL语句，这样不仅能够得到正确的数据，而且性能还比使用ORM的性能好！</p>\n"},{"title":"Django常见问题","cover":"2021/06/08/Django常见问题/bg.jpg","top_img":"2021/06/08/Django常见问题/bg.jpg","date":"2021-06-08T12:23:24.000Z","description":"本文是一张从https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html  总结而来的脑图。","_content":"\n本文是一张从https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html  总结而来的脑图。\n\n<!-- more -->\n\n![Django常见问题](Django.png)\n\n[下载Xmind脑图](Django.xmind)","source":"_posts/Django常见问题.md","raw":"---\ntitle: Django常见问题\ntags:\n  - Python\n  - Django\ncategory: Python\ncover: bg.jpg\ntop_img: bg.jpg\ndate: 2021-06-08 20:23:24\ndescription: 本文是一张从https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html  总结而来的脑图。\n---\n\n本文是一张从https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html  总结而来的脑图。\n\n<!-- more -->\n\n![Django常见问题](Django.png)\n\n[下载Xmind脑图](Django.xmind)","slug":"Django常见问题","published":1,"updated":"2022-01-01T14:32:15.480Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uy001chx89hwvihi2w","content":"<p>本文是一张从<a href=\"https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html\">https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html</a>  总结而来的脑图。</p>\n<span id=\"more\"></span>\n\n<p><img src=\"Django.png\" alt=\"Django常见问题\"></p>\n<p><a href=\"Django.xmind\">下载Xmind脑图</a></p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"<p>本文是一张从<a href=\"https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html\">https://django-orm-cookbook-zh-cn.readthedocs.io/zh_CN/latest/introduction.html</a>  总结而来的脑图。</p>","more":"<p><img src=\"Django.png\" alt=\"Django常见问题\"></p>\n<p><a href=\"Django.xmind\">下载Xmind脑图</a></p>"},{"title":"MySQL忘记root密码怎么办","date":"2020-10-22T16:00:00.000Z","description":"使用MySQL过程中我们偶尔会遇到忘记密码的情况，怎么办呢？能不能吧密码找回来或者重新设置密码呢？","_content":"\n使用MySQL过程中我们偶尔会遇到忘记密码的情况，怎么办呢？能不能吧密码找回来或者重新设置密码呢？\n\nMySQL忘记root密码之后，可以重新设置一个新的密码，怎么做呢？\n\n1. 修改配置文件my.cnf，在[mysqld]下面增加参数：skip-grant-tables（启动 MySQL 服务的时候跳过权限表认证。启动后，连接到 MySQL 的 root 将不需要口令。），重启MySQL服务，免密码登录。\n\n   ```\n   [root@ocp11g~]# vi /etc/my.cnf    \n   [root@ocp11g~]# service mysql restart\n   Shuttingdown MySQL.... SUCCESS!\n   StartingMySQL.. SUCCESS!\n   [root@ocp11g~]# mysql -uroot\n   Welcometo the MySQL monitor. Commands end with; or \\g.\n   YourMySQL connection id is 2\n   Serverversion: 5.7.26-log MySQL Community Server (GPL)\n   Copyright(c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.\n   Oracleis a registered trademark of Oracle Corporation and/or its\n   affiliates.Other names may be trademarks of their respective\n   owners.\n   Type'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n   mysql>\n   ```\n\n2. 修改root用户密码为空\n\n   ```\n   mysql>alter user root@localhost identified by '123456';\n   ERROR1290 (HY000): The MySQL server is running with the --skip-grant-tables optionso it cannot execute this statement\n   mysql>update user set authentication_string = NULL where user = 'root';\n   ERROR1046 (3D000): No database selected\n   mysql>use mysql\n   Readingtable information for completion of table and column names\n   Youcan turn off this feature to get a quicker startup with -A\n   Databasechanged\n   mysql>update user set authentication_string = NULL where user = 'root';\n   QueryOK, 1 row affected (0.01 sec)\n   Rowsmatched: 1 Changed: 1 Warnings: 0\n   mysql>\n   ```\n\n3. 修该配置文件删除skip-grant-tables参数，重启MySQL服务，使用空密码登录，修改root密码\n\n   ```\n   [root@ocp11g~]# vi /etc/my.cnf    \n   [root@ocp11g~]# service mysql restart\n   Shuttingdown MySQL.. SUCCESS!\n   StartingMySQL. SUCCESS!\n   [root@ocp11g~]# mysql -uroot\n   Welcometo the MySQL monitor. Commands end with; or \\g.\n   YourMySQL connection id is 3\n   Serverversion: 5.7.26-log MySQL Community Server (GPL)\n   Copyright(c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.\n   Oracleis a registered trademark of Oracle Corporation and/or its\n   affiliates.Other names may be trademarks of their respective\n   owners.\n   Type'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n   mysql>alter user root@localhost identified by '123456';\n   QueryOK, 0 rows affected (0.00 sec)\n   mysql>\n   ```\n\n4. 密码修改完成，MySQL root密码已修改，MySQL正常使用\n\n   ```\n   [root@ocp11g~]# mysql -uroot\n   ERROR1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)\n   [root@ocp11g~]# mysql -uroot -p\n   Enterpassword:\n   Welcometo the MySQL monitor. Commands end with; or \\g.\n   YourMySQL connection id is 5\n   Serverversion: 5.7.26-log MySQL Community Server (GPL)\n   Copyright(c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.\n   Oracleis a registered trademark of Oracle Corporation and/or its\n   affiliates.Other names may be trademarks of their respective\n   owners.\n   Type'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n   mysql>exit\n   Bye\n   ```\n\n   ","source":"_posts/MySQL忘记root密码怎么办.md","raw":"---\ntitle: MySQL忘记root密码怎么办\ndate: 2020-10-23\ntags:\n\t- MySQL\ncategory: MySQL\ndescription: 使用MySQL过程中我们偶尔会遇到忘记密码的情况，怎么办呢？能不能吧密码找回来或者重新设置密码呢？\n---\n\n使用MySQL过程中我们偶尔会遇到忘记密码的情况，怎么办呢？能不能吧密码找回来或者重新设置密码呢？\n\nMySQL忘记root密码之后，可以重新设置一个新的密码，怎么做呢？\n\n1. 修改配置文件my.cnf，在[mysqld]下面增加参数：skip-grant-tables（启动 MySQL 服务的时候跳过权限表认证。启动后，连接到 MySQL 的 root 将不需要口令。），重启MySQL服务，免密码登录。\n\n   ```\n   [root@ocp11g~]# vi /etc/my.cnf    \n   [root@ocp11g~]# service mysql restart\n   Shuttingdown MySQL.... SUCCESS!\n   StartingMySQL.. SUCCESS!\n   [root@ocp11g~]# mysql -uroot\n   Welcometo the MySQL monitor. Commands end with; or \\g.\n   YourMySQL connection id is 2\n   Serverversion: 5.7.26-log MySQL Community Server (GPL)\n   Copyright(c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.\n   Oracleis a registered trademark of Oracle Corporation and/or its\n   affiliates.Other names may be trademarks of their respective\n   owners.\n   Type'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n   mysql>\n   ```\n\n2. 修改root用户密码为空\n\n   ```\n   mysql>alter user root@localhost identified by '123456';\n   ERROR1290 (HY000): The MySQL server is running with the --skip-grant-tables optionso it cannot execute this statement\n   mysql>update user set authentication_string = NULL where user = 'root';\n   ERROR1046 (3D000): No database selected\n   mysql>use mysql\n   Readingtable information for completion of table and column names\n   Youcan turn off this feature to get a quicker startup with -A\n   Databasechanged\n   mysql>update user set authentication_string = NULL where user = 'root';\n   QueryOK, 1 row affected (0.01 sec)\n   Rowsmatched: 1 Changed: 1 Warnings: 0\n   mysql>\n   ```\n\n3. 修该配置文件删除skip-grant-tables参数，重启MySQL服务，使用空密码登录，修改root密码\n\n   ```\n   [root@ocp11g~]# vi /etc/my.cnf    \n   [root@ocp11g~]# service mysql restart\n   Shuttingdown MySQL.. SUCCESS!\n   StartingMySQL. SUCCESS!\n   [root@ocp11g~]# mysql -uroot\n   Welcometo the MySQL monitor. Commands end with; or \\g.\n   YourMySQL connection id is 3\n   Serverversion: 5.7.26-log MySQL Community Server (GPL)\n   Copyright(c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.\n   Oracleis a registered trademark of Oracle Corporation and/or its\n   affiliates.Other names may be trademarks of their respective\n   owners.\n   Type'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n   mysql>alter user root@localhost identified by '123456';\n   QueryOK, 0 rows affected (0.00 sec)\n   mysql>\n   ```\n\n4. 密码修改完成，MySQL root密码已修改，MySQL正常使用\n\n   ```\n   [root@ocp11g~]# mysql -uroot\n   ERROR1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)\n   [root@ocp11g~]# mysql -uroot -p\n   Enterpassword:\n   Welcometo the MySQL monitor. Commands end with; or \\g.\n   YourMySQL connection id is 5\n   Serverversion: 5.7.26-log MySQL Community Server (GPL)\n   Copyright(c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.\n   Oracleis a registered trademark of Oracle Corporation and/or its\n   affiliates.Other names may be trademarks of their respective\n   owners.\n   Type'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n   mysql>exit\n   Bye\n   ```\n\n   ","slug":"MySQL忘记root密码怎么办","published":1,"updated":"2022-01-01T14:32:15.493Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727uy001dhx89dzwmh6of","content":"<p>使用MySQL过程中我们偶尔会遇到忘记密码的情况，怎么办呢？能不能吧密码找回来或者重新设置密码呢？</p>\n<p>MySQL忘记root密码之后，可以重新设置一个新的密码，怎么做呢？</p>\n<ol>\n<li><p>修改配置文件my.cnf，在[mysqld]下面增加参数：skip-grant-tables（启动 MySQL 服务的时候跳过权限表认证。启动后，连接到 MySQL 的 root 将不需要口令。），重启MySQL服务，免密码登录。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@ocp11g~]# vi &#x2F;etc&#x2F;my.cnf    </span><br><span class=\"line\">[root@ocp11g~]# service mysql restart</span><br><span class=\"line\">Shuttingdown MySQL.... SUCCESS!</span><br><span class=\"line\">StartingMySQL.. SUCCESS!</span><br><span class=\"line\">[root@ocp11g~]# mysql -uroot</span><br><span class=\"line\">Welcometo the MySQL monitor. Commands end with; or \\g.</span><br><span class=\"line\">YourMySQL connection id is 2</span><br><span class=\"line\">Serverversion: 5.7.26-log MySQL Community Server (GPL)</span><br><span class=\"line\">Copyright(c) 2000, 2019, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\">Oracleis a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates.Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\">Type&#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>修改root用户密码为空</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;alter user root@localhost identified by &#39;123456&#39;;</span><br><span class=\"line\">ERROR1290 (HY000): The MySQL server is running with the --skip-grant-tables optionso it cannot execute this statement</span><br><span class=\"line\">mysql&gt;update user set authentication_string &#x3D; NULL where user &#x3D; &#39;root&#39;;</span><br><span class=\"line\">ERROR1046 (3D000): No database selected</span><br><span class=\"line\">mysql&gt;use mysql</span><br><span class=\"line\">Readingtable information for completion of table and column names</span><br><span class=\"line\">Youcan turn off this feature to get a quicker startup with -A</span><br><span class=\"line\">Databasechanged</span><br><span class=\"line\">mysql&gt;update user set authentication_string &#x3D; NULL where user &#x3D; &#39;root&#39;;</span><br><span class=\"line\">QueryOK, 1 row affected (0.01 sec)</span><br><span class=\"line\">Rowsmatched: 1 Changed: 1 Warnings: 0</span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>修该配置文件删除skip-grant-tables参数，重启MySQL服务，使用空密码登录，修改root密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@ocp11g~]# vi &#x2F;etc&#x2F;my.cnf    </span><br><span class=\"line\">[root@ocp11g~]# service mysql restart</span><br><span class=\"line\">Shuttingdown MySQL.. SUCCESS!</span><br><span class=\"line\">StartingMySQL. SUCCESS!</span><br><span class=\"line\">[root@ocp11g~]# mysql -uroot</span><br><span class=\"line\">Welcometo the MySQL monitor. Commands end with; or \\g.</span><br><span class=\"line\">YourMySQL connection id is 3</span><br><span class=\"line\">Serverversion: 5.7.26-log MySQL Community Server (GPL)</span><br><span class=\"line\">Copyright(c) 2000, 2019, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\">Oracleis a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates.Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\">Type&#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\">mysql&gt;alter user root@localhost identified by &#39;123456&#39;;</span><br><span class=\"line\">QueryOK, 0 rows affected (0.00 sec)</span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>密码修改完成，MySQL root密码已修改，MySQL正常使用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@ocp11g~]# mysql -uroot</span><br><span class=\"line\">ERROR1045 (28000): Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO)</span><br><span class=\"line\">[root@ocp11g~]# mysql -uroot -p</span><br><span class=\"line\">Enterpassword:</span><br><span class=\"line\">Welcometo the MySQL monitor. Commands end with; or \\g.</span><br><span class=\"line\">YourMySQL connection id is 5</span><br><span class=\"line\">Serverversion: 5.7.26-log MySQL Community Server (GPL)</span><br><span class=\"line\">Copyright(c) 2000, 2019, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\">Oracleis a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates.Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\">Type&#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\">mysql&gt;exit</span><br><span class=\"line\">Bye</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<p>使用MySQL过程中我们偶尔会遇到忘记密码的情况，怎么办呢？能不能吧密码找回来或者重新设置密码呢？</p>\n<p>MySQL忘记root密码之后，可以重新设置一个新的密码，怎么做呢？</p>\n<ol>\n<li><p>修改配置文件my.cnf，在[mysqld]下面增加参数：skip-grant-tables（启动 MySQL 服务的时候跳过权限表认证。启动后，连接到 MySQL 的 root 将不需要口令。），重启MySQL服务，免密码登录。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@ocp11g~]# vi &#x2F;etc&#x2F;my.cnf    </span><br><span class=\"line\">[root@ocp11g~]# service mysql restart</span><br><span class=\"line\">Shuttingdown MySQL.... SUCCESS!</span><br><span class=\"line\">StartingMySQL.. SUCCESS!</span><br><span class=\"line\">[root@ocp11g~]# mysql -uroot</span><br><span class=\"line\">Welcometo the MySQL monitor. Commands end with; or \\g.</span><br><span class=\"line\">YourMySQL connection id is 2</span><br><span class=\"line\">Serverversion: 5.7.26-log MySQL Community Server (GPL)</span><br><span class=\"line\">Copyright(c) 2000, 2019, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\">Oracleis a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates.Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\">Type&#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>修改root用户密码为空</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;alter user root@localhost identified by &#39;123456&#39;;</span><br><span class=\"line\">ERROR1290 (HY000): The MySQL server is running with the --skip-grant-tables optionso it cannot execute this statement</span><br><span class=\"line\">mysql&gt;update user set authentication_string &#x3D; NULL where user &#x3D; &#39;root&#39;;</span><br><span class=\"line\">ERROR1046 (3D000): No database selected</span><br><span class=\"line\">mysql&gt;use mysql</span><br><span class=\"line\">Readingtable information for completion of table and column names</span><br><span class=\"line\">Youcan turn off this feature to get a quicker startup with -A</span><br><span class=\"line\">Databasechanged</span><br><span class=\"line\">mysql&gt;update user set authentication_string &#x3D; NULL where user &#x3D; &#39;root&#39;;</span><br><span class=\"line\">QueryOK, 1 row affected (0.01 sec)</span><br><span class=\"line\">Rowsmatched: 1 Changed: 1 Warnings: 0</span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>修该配置文件删除skip-grant-tables参数，重启MySQL服务，使用空密码登录，修改root密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@ocp11g~]# vi &#x2F;etc&#x2F;my.cnf    </span><br><span class=\"line\">[root@ocp11g~]# service mysql restart</span><br><span class=\"line\">Shuttingdown MySQL.. SUCCESS!</span><br><span class=\"line\">StartingMySQL. SUCCESS!</span><br><span class=\"line\">[root@ocp11g~]# mysql -uroot</span><br><span class=\"line\">Welcometo the MySQL monitor. Commands end with; or \\g.</span><br><span class=\"line\">YourMySQL connection id is 3</span><br><span class=\"line\">Serverversion: 5.7.26-log MySQL Community Server (GPL)</span><br><span class=\"line\">Copyright(c) 2000, 2019, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\">Oracleis a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates.Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\">Type&#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\">mysql&gt;alter user root@localhost identified by &#39;123456&#39;;</span><br><span class=\"line\">QueryOK, 0 rows affected (0.00 sec)</span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>密码修改完成，MySQL root密码已修改，MySQL正常使用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@ocp11g~]# mysql -uroot</span><br><span class=\"line\">ERROR1045 (28000): Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO)</span><br><span class=\"line\">[root@ocp11g~]# mysql -uroot -p</span><br><span class=\"line\">Enterpassword:</span><br><span class=\"line\">Welcometo the MySQL monitor. Commands end with; or \\g.</span><br><span class=\"line\">YourMySQL connection id is 5</span><br><span class=\"line\">Serverversion: 5.7.26-log MySQL Community Server (GPL)</span><br><span class=\"line\">Copyright(c) 2000, 2019, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\">Oracleis a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates.Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\">Type&#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\">mysql&gt;exit</span><br><span class=\"line\">Bye</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"MySQL8.0 OCP大纲","cover":"2021/03/06/MySQL8-0-OCP大纲/1603562403.jpg","top_img":"2021/03/06/MySQL8-0-OCP大纲/1603562403.jpg","date":"2021-03-06T03:14:15.000Z","description":"本文主要列举MySQL8.0 OCP考点","_content":"\n本文主要列举MySQL8.0 OCP考点\n\n### 体系结构\n\n- 配置客户端到服务器的连接\n- 了解MySQL如何存储数据\n- 了解InnoDB如何存储数据和日志\n- 配置缓冲区和缓存\n- 了解和使用数据字典\n\n### 服务器安装和配置\n\n安装和使用MySQL服务器和客户端程序\n识别在安装过程中创建的文件和文件夹\n启动和停止MySQL\n升级MySQL\n使用选项和选项文件配置MySQL\n配置MySQL变量\n在同一主机上启动多个MySQL服务器\n\n### 安全\n\n- 创建用户帐户和角色\n- 使用身份验证插件\n- 控制用户和角色权限\n- 认识常见的安全风险\n- 安全的MySQL服务器连接\n- 提供密码和登录安全性\n- 保护MySQL主机环境\n- 防止SQL注入攻击\n- 加密MySQL资料\n- 配置MySQL企业防火墙\n\n### 监控与维护\n\n- 配置和查看MySQL日志文件\n- 监控MySQL进程和状态\n- 配置MySQL企业审核\n- 使用MySQL Enterprise Monitor查看MySQL中的活动\n- 监控数据库增长并解释容量计划\n- 解决资源锁定问题\n\n### 查询优化\n\n- 检查MySQL如何优化查询\n- 使用MySQL Enterprise Monitor分析查询\n- 创建索引以提高服务器性能\n- 监视和了解索引统计信息\n\n### 备份与恢复\n\n区分不同类型的备份\n实施备份策略\n使用MySQL Enterprise Backup备份和还原数据\n使用mysqldump和mysqlpump执行逻辑备份\n说明何时以及如何使用原始文件备份\n备份二进制日志\n\n### 高可用性技术\n\n说明复制如何提供高可用性和可伸缩性\n配置复制\n解释二进制日志在复制中的作用\n配置多源复制\n解释复制线程的作用\n监控复制并排除故障\n描述MySQL InnoDB集群和组复制\n配置一个MySQL InnoDB集群\n执行InnoDB集群恢复","source":"_posts/MySQL8-0-OCP大纲.md","raw":"---\ntitle: MySQL8.0 OCP大纲\ntags:\n  - MySQL\n  - OCP\ncategory: MySQL\ncover: 1603562403.jpg\ntop_img: 1603562403.jpg\ndate: 2021-03-06 11:14:15\ndescription: 本文主要列举MySQL8.0 OCP考点\n---\n\n本文主要列举MySQL8.0 OCP考点\n\n### 体系结构\n\n- 配置客户端到服务器的连接\n- 了解MySQL如何存储数据\n- 了解InnoDB如何存储数据和日志\n- 配置缓冲区和缓存\n- 了解和使用数据字典\n\n### 服务器安装和配置\n\n安装和使用MySQL服务器和客户端程序\n识别在安装过程中创建的文件和文件夹\n启动和停止MySQL\n升级MySQL\n使用选项和选项文件配置MySQL\n配置MySQL变量\n在同一主机上启动多个MySQL服务器\n\n### 安全\n\n- 创建用户帐户和角色\n- 使用身份验证插件\n- 控制用户和角色权限\n- 认识常见的安全风险\n- 安全的MySQL服务器连接\n- 提供密码和登录安全性\n- 保护MySQL主机环境\n- 防止SQL注入攻击\n- 加密MySQL资料\n- 配置MySQL企业防火墙\n\n### 监控与维护\n\n- 配置和查看MySQL日志文件\n- 监控MySQL进程和状态\n- 配置MySQL企业审核\n- 使用MySQL Enterprise Monitor查看MySQL中的活动\n- 监控数据库增长并解释容量计划\n- 解决资源锁定问题\n\n### 查询优化\n\n- 检查MySQL如何优化查询\n- 使用MySQL Enterprise Monitor分析查询\n- 创建索引以提高服务器性能\n- 监视和了解索引统计信息\n\n### 备份与恢复\n\n区分不同类型的备份\n实施备份策略\n使用MySQL Enterprise Backup备份和还原数据\n使用mysqldump和mysqlpump执行逻辑备份\n说明何时以及如何使用原始文件备份\n备份二进制日志\n\n### 高可用性技术\n\n说明复制如何提供高可用性和可伸缩性\n配置复制\n解释二进制日志在复制中的作用\n配置多源复制\n解释复制线程的作用\n监控复制并排除故障\n描述MySQL InnoDB集群和组复制\n配置一个MySQL InnoDB集群\n执行InnoDB集群恢复","slug":"MySQL8-0-OCP大纲","published":1,"updated":"2022-01-01T14:32:15.490Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727v3001hhx891ccte5i6","content":"<p>本文主要列举MySQL8.0 OCP考点</p>\n<h3 id=\"体系结构\"><a href=\"#体系结构\" class=\"headerlink\" title=\"体系结构\"></a>体系结构</h3><ul>\n<li>配置客户端到服务器的连接</li>\n<li>了解MySQL如何存储数据</li>\n<li>了解InnoDB如何存储数据和日志</li>\n<li>配置缓冲区和缓存</li>\n<li>了解和使用数据字典</li>\n</ul>\n<h3 id=\"服务器安装和配置\"><a href=\"#服务器安装和配置\" class=\"headerlink\" title=\"服务器安装和配置\"></a>服务器安装和配置</h3><p>安装和使用MySQL服务器和客户端程序<br>识别在安装过程中创建的文件和文件夹<br>启动和停止MySQL<br>升级MySQL<br>使用选项和选项文件配置MySQL<br>配置MySQL变量<br>在同一主机上启动多个MySQL服务器</p>\n<h3 id=\"安全\"><a href=\"#安全\" class=\"headerlink\" title=\"安全\"></a>安全</h3><ul>\n<li>创建用户帐户和角色</li>\n<li>使用身份验证插件</li>\n<li>控制用户和角色权限</li>\n<li>认识常见的安全风险</li>\n<li>安全的MySQL服务器连接</li>\n<li>提供密码和登录安全性</li>\n<li>保护MySQL主机环境</li>\n<li>防止SQL注入攻击</li>\n<li>加密MySQL资料</li>\n<li>配置MySQL企业防火墙</li>\n</ul>\n<h3 id=\"监控与维护\"><a href=\"#监控与维护\" class=\"headerlink\" title=\"监控与维护\"></a>监控与维护</h3><ul>\n<li>配置和查看MySQL日志文件</li>\n<li>监控MySQL进程和状态</li>\n<li>配置MySQL企业审核</li>\n<li>使用MySQL Enterprise Monitor查看MySQL中的活动</li>\n<li>监控数据库增长并解释容量计划</li>\n<li>解决资源锁定问题</li>\n</ul>\n<h3 id=\"查询优化\"><a href=\"#查询优化\" class=\"headerlink\" title=\"查询优化\"></a>查询优化</h3><ul>\n<li>检查MySQL如何优化查询</li>\n<li>使用MySQL Enterprise Monitor分析查询</li>\n<li>创建索引以提高服务器性能</li>\n<li>监视和了解索引统计信息</li>\n</ul>\n<h3 id=\"备份与恢复\"><a href=\"#备份与恢复\" class=\"headerlink\" title=\"备份与恢复\"></a>备份与恢复</h3><p>区分不同类型的备份<br>实施备份策略<br>使用MySQL Enterprise Backup备份和还原数据<br>使用mysqldump和mysqlpump执行逻辑备份<br>说明何时以及如何使用原始文件备份<br>备份二进制日志</p>\n<h3 id=\"高可用性技术\"><a href=\"#高可用性技术\" class=\"headerlink\" title=\"高可用性技术\"></a>高可用性技术</h3><p>说明复制如何提供高可用性和可伸缩性<br>配置复制<br>解释二进制日志在复制中的作用<br>配置多源复制<br>解释复制线程的作用<br>监控复制并排除故障<br>描述MySQL InnoDB集群和组复制<br>配置一个MySQL InnoDB集群<br>执行InnoDB集群恢复</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>本文主要列举MySQL8.0 OCP考点</p>\n<h3 id=\"体系结构\"><a href=\"#体系结构\" class=\"headerlink\" title=\"体系结构\"></a>体系结构</h3><ul>\n<li>配置客户端到服务器的连接</li>\n<li>了解MySQL如何存储数据</li>\n<li>了解InnoDB如何存储数据和日志</li>\n<li>配置缓冲区和缓存</li>\n<li>了解和使用数据字典</li>\n</ul>\n<h3 id=\"服务器安装和配置\"><a href=\"#服务器安装和配置\" class=\"headerlink\" title=\"服务器安装和配置\"></a>服务器安装和配置</h3><p>安装和使用MySQL服务器和客户端程序<br>识别在安装过程中创建的文件和文件夹<br>启动和停止MySQL<br>升级MySQL<br>使用选项和选项文件配置MySQL<br>配置MySQL变量<br>在同一主机上启动多个MySQL服务器</p>\n<h3 id=\"安全\"><a href=\"#安全\" class=\"headerlink\" title=\"安全\"></a>安全</h3><ul>\n<li>创建用户帐户和角色</li>\n<li>使用身份验证插件</li>\n<li>控制用户和角色权限</li>\n<li>认识常见的安全风险</li>\n<li>安全的MySQL服务器连接</li>\n<li>提供密码和登录安全性</li>\n<li>保护MySQL主机环境</li>\n<li>防止SQL注入攻击</li>\n<li>加密MySQL资料</li>\n<li>配置MySQL企业防火墙</li>\n</ul>\n<h3 id=\"监控与维护\"><a href=\"#监控与维护\" class=\"headerlink\" title=\"监控与维护\"></a>监控与维护</h3><ul>\n<li>配置和查看MySQL日志文件</li>\n<li>监控MySQL进程和状态</li>\n<li>配置MySQL企业审核</li>\n<li>使用MySQL Enterprise Monitor查看MySQL中的活动</li>\n<li>监控数据库增长并解释容量计划</li>\n<li>解决资源锁定问题</li>\n</ul>\n<h3 id=\"查询优化\"><a href=\"#查询优化\" class=\"headerlink\" title=\"查询优化\"></a>查询优化</h3><ul>\n<li>检查MySQL如何优化查询</li>\n<li>使用MySQL Enterprise Monitor分析查询</li>\n<li>创建索引以提高服务器性能</li>\n<li>监视和了解索引统计信息</li>\n</ul>\n<h3 id=\"备份与恢复\"><a href=\"#备份与恢复\" class=\"headerlink\" title=\"备份与恢复\"></a>备份与恢复</h3><p>区分不同类型的备份<br>实施备份策略<br>使用MySQL Enterprise Backup备份和还原数据<br>使用mysqldump和mysqlpump执行逻辑备份<br>说明何时以及如何使用原始文件备份<br>备份二进制日志</p>\n<h3 id=\"高可用性技术\"><a href=\"#高可用性技术\" class=\"headerlink\" title=\"高可用性技术\"></a>高可用性技术</h3><p>说明复制如何提供高可用性和可伸缩性<br>配置复制<br>解释二进制日志在复制中的作用<br>配置多源复制<br>解释复制线程的作用<br>监控复制并排除故障<br>描述MySQL InnoDB集群和组复制<br>配置一个MySQL InnoDB集群<br>执行InnoDB集群恢复</p>\n"},{"title":"MySQL性能优化：回表、覆盖索引及索引下推优化","cover":"2021/07/15/MySQL性能优化：回表、覆盖索引及索引下推优化/1618855205.jpg","top_img":"2021/07/15/MySQL性能优化：回表、覆盖索引及索引下推优化/1618855205.jpg","date":"2021-07-15T01:29:29.000Z","description":"索引就像书的目录一样，可以帮助数据库快速定位到数据所在的位置。","_content":"\n索引就像书的目录一样，可以帮助数据库快速定位到数据所在的位置。\n\n## 索引\n\nMySQL中，InnoDB存储引擎的索引使用B+数数据结构实现，具体结构如下：\n\n![InnoDB索引结构](InnoDB索引结构.png)\n\n有以下特点：\n\n- 数据文件本身就是索引文件\n- 数据按照主键顺序组织和存储，因此InnoDB要求表必须有主键，如果没有指定主键或唯一键，则自动生成一个长度为6个字节的隐式长整型字段来作为主键，主键索引称聚簇索引\n- 所以非主键索引的数据域都会存储主键ID，除了联合索引外，其他的耳机索引的数据域存储的就是主键ID\n- 使用主键搜索数据非常高效，但是使用其他索引有可能会需要回表\n\n## 回表\n\n在使用主键查询的时候，由于主键索引上的数据域存储了该条数据的完整内容，所以能够直接将数据取出来。但是当使用非主键索引，如二级索引查询数据时，索引上数据域只存储了该条数据对应的主键，为了拿到完整的数据，还需要使用主键的值回到表中去查询数据，这个过程就称为回表。在InnoDB中，除非索引上已经包含了查询所需要的完整数据，否则都会使用ID进行回表查询。\n\n## 覆盖索引\n\n在InnoDB中，创建索引可以包含多个字段，比如（name, age），这种索引叫做联合索引。联合索引中，当索引的字段中已经完全包含需要的字段时，就叫做覆盖索引。覆盖索引在查询的时候，因为数据域的字段已经满足查询要求，因此不会回表，减少了一般索引的回表操作，提高查询的性能。不过索引所占用的空间就变大了，属于是以空间换时间的类型。\n\n## 索引下推优化\n\n索引下推，英文Index condition pushdown，简称ICP，是在MySQL5.6退出的特性，和覆盖索引一样，也是用来优化查询的。且索引下推优化只对联合索引才会有效。\n\n考虑这样一个场景：\n\n```sql\nselect * from tb_test where name like 'J%' and age > 10;\n```\n\n假设在表上存在(name, age)这样一个联合索引，在5.6之前，存储引擎根据索引查找到name以J开头的数据后将数据返回给MySQL服务器，服务器判断数据是否符合条件。在5.6之后，因为使用了索引下推优化，MySQL服务器将查询数据的条件发送给InnoDB存储引擎，存储引擎会判断数据是否符合条件，然后检索出数据，将符合条件的数据返回给MySQL服务器。也就是说在判断了name以J开头的数据之后，还会在继续判断age是否大于10，最后再将符合条件的数据返回给MySQL服务器。索引下推减少了回表的次数，也减少了MySQL服务器从存储引擎接收数据的次数或者大小。\n\n","source":"_posts/MySQL性能优化：回表、覆盖索引及索引下推优化.md","raw":"---\ntitle: MySQL性能优化：回表、覆盖索引及索引下推优化\ntags:\n  - MySQL\n  - 索引\n  - 性能优化\ncategory: MySQL\ncover: 1618855205.jpg\ntop_img: 1618855205.jpg\ndate: 2021-07-15 09:29:29\ndescription: 索引就像书的目录一样，可以帮助数据库快速定位到数据所在的位置。\n---\n\n索引就像书的目录一样，可以帮助数据库快速定位到数据所在的位置。\n\n## 索引\n\nMySQL中，InnoDB存储引擎的索引使用B+数数据结构实现，具体结构如下：\n\n![InnoDB索引结构](InnoDB索引结构.png)\n\n有以下特点：\n\n- 数据文件本身就是索引文件\n- 数据按照主键顺序组织和存储，因此InnoDB要求表必须有主键，如果没有指定主键或唯一键，则自动生成一个长度为6个字节的隐式长整型字段来作为主键，主键索引称聚簇索引\n- 所以非主键索引的数据域都会存储主键ID，除了联合索引外，其他的耳机索引的数据域存储的就是主键ID\n- 使用主键搜索数据非常高效，但是使用其他索引有可能会需要回表\n\n## 回表\n\n在使用主键查询的时候，由于主键索引上的数据域存储了该条数据的完整内容，所以能够直接将数据取出来。但是当使用非主键索引，如二级索引查询数据时，索引上数据域只存储了该条数据对应的主键，为了拿到完整的数据，还需要使用主键的值回到表中去查询数据，这个过程就称为回表。在InnoDB中，除非索引上已经包含了查询所需要的完整数据，否则都会使用ID进行回表查询。\n\n## 覆盖索引\n\n在InnoDB中，创建索引可以包含多个字段，比如（name, age），这种索引叫做联合索引。联合索引中，当索引的字段中已经完全包含需要的字段时，就叫做覆盖索引。覆盖索引在查询的时候，因为数据域的字段已经满足查询要求，因此不会回表，减少了一般索引的回表操作，提高查询的性能。不过索引所占用的空间就变大了，属于是以空间换时间的类型。\n\n## 索引下推优化\n\n索引下推，英文Index condition pushdown，简称ICP，是在MySQL5.6退出的特性，和覆盖索引一样，也是用来优化查询的。且索引下推优化只对联合索引才会有效。\n\n考虑这样一个场景：\n\n```sql\nselect * from tb_test where name like 'J%' and age > 10;\n```\n\n假设在表上存在(name, age)这样一个联合索引，在5.6之前，存储引擎根据索引查找到name以J开头的数据后将数据返回给MySQL服务器，服务器判断数据是否符合条件。在5.6之后，因为使用了索引下推优化，MySQL服务器将查询数据的条件发送给InnoDB存储引擎，存储引擎会判断数据是否符合条件，然后检索出数据，将符合条件的数据返回给MySQL服务器。也就是说在判断了name以J开头的数据之后，还会在继续判断age是否大于10，最后再将符合条件的数据返回给MySQL服务器。索引下推减少了回表的次数，也减少了MySQL服务器从存储引擎接收数据的次数或者大小。\n\n","slug":"MySQL性能优化：回表、覆盖索引及索引下推优化","published":1,"updated":"2022-01-01T14:32:15.493Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727v7001jhx89drp99jhd","content":"<p>索引就像书的目录一样，可以帮助数据库快速定位到数据所在的位置。</p>\n<h2 id=\"索引\"><a href=\"#索引\" class=\"headerlink\" title=\"索引\"></a>索引</h2><p>MySQL中，InnoDB存储引擎的索引使用B+数数据结构实现，具体结构如下：</p>\n<p><img src=\"InnoDB%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84.png\" alt=\"InnoDB索引结构\"></p>\n<p>有以下特点：</p>\n<ul>\n<li>数据文件本身就是索引文件</li>\n<li>数据按照主键顺序组织和存储，因此InnoDB要求表必须有主键，如果没有指定主键或唯一键，则自动生成一个长度为6个字节的隐式长整型字段来作为主键，主键索引称聚簇索引</li>\n<li>所以非主键索引的数据域都会存储主键ID，除了联合索引外，其他的耳机索引的数据域存储的就是主键ID</li>\n<li>使用主键搜索数据非常高效，但是使用其他索引有可能会需要回表</li>\n</ul>\n<h2 id=\"回表\"><a href=\"#回表\" class=\"headerlink\" title=\"回表\"></a>回表</h2><p>在使用主键查询的时候，由于主键索引上的数据域存储了该条数据的完整内容，所以能够直接将数据取出来。但是当使用非主键索引，如二级索引查询数据时，索引上数据域只存储了该条数据对应的主键，为了拿到完整的数据，还需要使用主键的值回到表中去查询数据，这个过程就称为回表。在InnoDB中，除非索引上已经包含了查询所需要的完整数据，否则都会使用ID进行回表查询。</p>\n<h2 id=\"覆盖索引\"><a href=\"#覆盖索引\" class=\"headerlink\" title=\"覆盖索引\"></a>覆盖索引</h2><p>在InnoDB中，创建索引可以包含多个字段，比如（name, age），这种索引叫做联合索引。联合索引中，当索引的字段中已经完全包含需要的字段时，就叫做覆盖索引。覆盖索引在查询的时候，因为数据域的字段已经满足查询要求，因此不会回表，减少了一般索引的回表操作，提高查询的性能。不过索引所占用的空间就变大了，属于是以空间换时间的类型。</p>\n<h2 id=\"索引下推优化\"><a href=\"#索引下推优化\" class=\"headerlink\" title=\"索引下推优化\"></a>索引下推优化</h2><p>索引下推，英文Index condition pushdown，简称ICP，是在MySQL5.6退出的特性，和覆盖索引一样，也是用来优化查询的。且索引下推优化只对联合索引才会有效。</p>\n<p>考虑这样一个场景：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;J%&#x27;</span> <span class=\"keyword\">and</span> age <span class=\"operator\">&gt;</span> <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<p>假设在表上存在(name, age)这样一个联合索引，在5.6之前，存储引擎根据索引查找到name以J开头的数据后将数据返回给MySQL服务器，服务器判断数据是否符合条件。在5.6之后，因为使用了索引下推优化，MySQL服务器将查询数据的条件发送给InnoDB存储引擎，存储引擎会判断数据是否符合条件，然后检索出数据，将符合条件的数据返回给MySQL服务器。也就是说在判断了name以J开头的数据之后，还会在继续判断age是否大于10，最后再将符合条件的数据返回给MySQL服务器。索引下推减少了回表的次数，也减少了MySQL服务器从存储引擎接收数据的次数或者大小。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>索引就像书的目录一样，可以帮助数据库快速定位到数据所在的位置。</p>\n<h2 id=\"索引\"><a href=\"#索引\" class=\"headerlink\" title=\"索引\"></a>索引</h2><p>MySQL中，InnoDB存储引擎的索引使用B+数数据结构实现，具体结构如下：</p>\n<p><img src=\"InnoDB%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84.png\" alt=\"InnoDB索引结构\"></p>\n<p>有以下特点：</p>\n<ul>\n<li>数据文件本身就是索引文件</li>\n<li>数据按照主键顺序组织和存储，因此InnoDB要求表必须有主键，如果没有指定主键或唯一键，则自动生成一个长度为6个字节的隐式长整型字段来作为主键，主键索引称聚簇索引</li>\n<li>所以非主键索引的数据域都会存储主键ID，除了联合索引外，其他的耳机索引的数据域存储的就是主键ID</li>\n<li>使用主键搜索数据非常高效，但是使用其他索引有可能会需要回表</li>\n</ul>\n<h2 id=\"回表\"><a href=\"#回表\" class=\"headerlink\" title=\"回表\"></a>回表</h2><p>在使用主键查询的时候，由于主键索引上的数据域存储了该条数据的完整内容，所以能够直接将数据取出来。但是当使用非主键索引，如二级索引查询数据时，索引上数据域只存储了该条数据对应的主键，为了拿到完整的数据，还需要使用主键的值回到表中去查询数据，这个过程就称为回表。在InnoDB中，除非索引上已经包含了查询所需要的完整数据，否则都会使用ID进行回表查询。</p>\n<h2 id=\"覆盖索引\"><a href=\"#覆盖索引\" class=\"headerlink\" title=\"覆盖索引\"></a>覆盖索引</h2><p>在InnoDB中，创建索引可以包含多个字段，比如（name, age），这种索引叫做联合索引。联合索引中，当索引的字段中已经完全包含需要的字段时，就叫做覆盖索引。覆盖索引在查询的时候，因为数据域的字段已经满足查询要求，因此不会回表，减少了一般索引的回表操作，提高查询的性能。不过索引所占用的空间就变大了，属于是以空间换时间的类型。</p>\n<h2 id=\"索引下推优化\"><a href=\"#索引下推优化\" class=\"headerlink\" title=\"索引下推优化\"></a>索引下推优化</h2><p>索引下推，英文Index condition pushdown，简称ICP，是在MySQL5.6退出的特性，和覆盖索引一样，也是用来优化查询的。且索引下推优化只对联合索引才会有效。</p>\n<p>考虑这样一个场景：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;J%&#x27;</span> <span class=\"keyword\">and</span> age <span class=\"operator\">&gt;</span> <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<p>假设在表上存在(name, age)这样一个联合索引，在5.6之前，存储引擎根据索引查找到name以J开头的数据后将数据返回给MySQL服务器，服务器判断数据是否符合条件。在5.6之后，因为使用了索引下推优化，MySQL服务器将查询数据的条件发送给InnoDB存储引擎，存储引擎会判断数据是否符合条件，然后检索出数据，将符合条件的数据返回给MySQL服务器。也就是说在判断了name以J开头的数据之后，还会在继续判断age是否大于10，最后再将符合条件的数据返回给MySQL服务器。索引下推减少了回表的次数，也减少了MySQL服务器从存储引擎接收数据的次数或者大小。</p>\n"},{"title":"MySQL主从复制原理","cover":"2021/04/06/MySQL主从复制原理/1600279205.jpg","top_img":"2021/04/06/MySQL主从复制原理/1600279205.jpg","date":"2021-04-06T07:53:34.000Z","description":"本文主要尝试说明MySQL主从复制的原理。","_content":"\n本文主要尝试说明MySQL主从复制的原理。\n\n## 什么是主从复制？\n\n主从复制指的是数据库在运行过程中，将数据从主库复制到从库的过程，可以从一主复制到一个或多个从库。可以采用异步复制、半同步复制方式。有基于日志点的复制和基于GTID（global transaction id：全局事务ID）的复制两种形式。将数据复制到从库，以达到高可用、高性能的目的。\n\n## 为什么要用主从复制？\n\n1. 高可用\n\n   当主库宕机或者主库需要做升级的时候，可以将主库切换到从库上，新的主库对外提供服务，保证服务可用，同时也可以对主库完成运维操作。\n\n2. 高性能\n\n   大多数互联网业务读数据操作较多，可以采用多个从库，将读操作由从库进行，每个从库进行不同类型的读操作，而主库只进行写操作，从而提升数据库的整体性能。\n\n3. 数据备份\n\n   可以使用从库的方式对数据库进行备份\n\n## 主从复制有什么优缺点\n\n### 优点\n\n- 可扩展：在读压力大的情况下，可以增加多个读节点，将读数据操作分发到不同的节点减轻读压力\n- 高性能：因为数据分发到不同的节点执行，每个服务器上的压力减小，性能得到提升\n\n### 缺点\n\n- 一致性问题：主要有主从延迟导致的数据不一致和双写导致的数据不一致两种。一致性问题有很多解决方案，如全局唯一ID生成器、双主情况下的间隔ID自增策略\n- 延时问题：从库监听主库数据变化再复制到从库执行这个过程是需要时间的，因此从库一般和主库之间都会存在延时问题，且随着从库数量的增加，复制压力增加，主从复制的延时也会增加\n\n## MySQL主从复制原理\n\nMySQL主从复制的基础是binlog（二进制日志），binlog记录了数据库中数据的变化，只有启用了binlog才能配置主从复制。\n\n1. 业务端在对主库操作时将会将操作的内容写入到binlog中\n2. 主库为每个从库创建一个log dump线程，读取和发送binlog中的内容\n3. 当从库建立和主库的连接之后，从节点会创建一个IO线程，用来请求主库中更新了的binlog，在接收了主节点中log dump线程发送的更新之后，将更新写入到从节点的relay log（中继日志）中\n4. 在接收到主库的变更之后，从库SQL线程读取relay log中的记录，解析为数据库的操作，并将操作应用到数据库，保证主库和从库的一致性。\n\n![MySQL主从复制原理](MySQL主从复制原理.png)\n\n## 总结\n\n本文主要描述了MySQL数据库主从复制优缺点及原理。MySQL数据库在互联网行业使用广泛，且具有高性能可扩展等特点，在近些年来发展相当迅速。虽然和Oracle RAC实时集群相比，做到双写双活有一定限制，但是对于大多数场景也足够使用了。","source":"_posts/MySQL主从复制原理.md","raw":"---\ntitle: MySQL主从复制原理\ntags: MySQL\ncategory: MySQL\ncover: 1600279205.jpg\ntop_img: 1600279205.jpg\ndate: 2021-04-06 15:53:34\ndescription:  本文主要尝试说明MySQL主从复制的原理。\n---\n\n本文主要尝试说明MySQL主从复制的原理。\n\n## 什么是主从复制？\n\n主从复制指的是数据库在运行过程中，将数据从主库复制到从库的过程，可以从一主复制到一个或多个从库。可以采用异步复制、半同步复制方式。有基于日志点的复制和基于GTID（global transaction id：全局事务ID）的复制两种形式。将数据复制到从库，以达到高可用、高性能的目的。\n\n## 为什么要用主从复制？\n\n1. 高可用\n\n   当主库宕机或者主库需要做升级的时候，可以将主库切换到从库上，新的主库对外提供服务，保证服务可用，同时也可以对主库完成运维操作。\n\n2. 高性能\n\n   大多数互联网业务读数据操作较多，可以采用多个从库，将读操作由从库进行，每个从库进行不同类型的读操作，而主库只进行写操作，从而提升数据库的整体性能。\n\n3. 数据备份\n\n   可以使用从库的方式对数据库进行备份\n\n## 主从复制有什么优缺点\n\n### 优点\n\n- 可扩展：在读压力大的情况下，可以增加多个读节点，将读数据操作分发到不同的节点减轻读压力\n- 高性能：因为数据分发到不同的节点执行，每个服务器上的压力减小，性能得到提升\n\n### 缺点\n\n- 一致性问题：主要有主从延迟导致的数据不一致和双写导致的数据不一致两种。一致性问题有很多解决方案，如全局唯一ID生成器、双主情况下的间隔ID自增策略\n- 延时问题：从库监听主库数据变化再复制到从库执行这个过程是需要时间的，因此从库一般和主库之间都会存在延时问题，且随着从库数量的增加，复制压力增加，主从复制的延时也会增加\n\n## MySQL主从复制原理\n\nMySQL主从复制的基础是binlog（二进制日志），binlog记录了数据库中数据的变化，只有启用了binlog才能配置主从复制。\n\n1. 业务端在对主库操作时将会将操作的内容写入到binlog中\n2. 主库为每个从库创建一个log dump线程，读取和发送binlog中的内容\n3. 当从库建立和主库的连接之后，从节点会创建一个IO线程，用来请求主库中更新了的binlog，在接收了主节点中log dump线程发送的更新之后，将更新写入到从节点的relay log（中继日志）中\n4. 在接收到主库的变更之后，从库SQL线程读取relay log中的记录，解析为数据库的操作，并将操作应用到数据库，保证主库和从库的一致性。\n\n![MySQL主从复制原理](MySQL主从复制原理.png)\n\n## 总结\n\n本文主要描述了MySQL数据库主从复制优缺点及原理。MySQL数据库在互联网行业使用广泛，且具有高性能可扩展等特点，在近些年来发展相当迅速。虽然和Oracle RAC实时集群相比，做到双写双活有一定限制，但是对于大多数场景也足够使用了。","slug":"MySQL主从复制原理","published":1,"updated":"2022-01-01T14:32:15.491Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727va001ohx895pek834q","content":"<p>本文主要尝试说明MySQL主从复制的原理。</p>\n<h2 id=\"什么是主从复制？\"><a href=\"#什么是主从复制？\" class=\"headerlink\" title=\"什么是主从复制？\"></a>什么是主从复制？</h2><p>主从复制指的是数据库在运行过程中，将数据从主库复制到从库的过程，可以从一主复制到一个或多个从库。可以采用异步复制、半同步复制方式。有基于日志点的复制和基于GTID（global transaction id：全局事务ID）的复制两种形式。将数据复制到从库，以达到高可用、高性能的目的。</p>\n<h2 id=\"为什么要用主从复制？\"><a href=\"#为什么要用主从复制？\" class=\"headerlink\" title=\"为什么要用主从复制？\"></a>为什么要用主从复制？</h2><ol>\n<li><p>高可用</p>\n<p>当主库宕机或者主库需要做升级的时候，可以将主库切换到从库上，新的主库对外提供服务，保证服务可用，同时也可以对主库完成运维操作。</p>\n</li>\n<li><p>高性能</p>\n<p>大多数互联网业务读数据操作较多，可以采用多个从库，将读操作由从库进行，每个从库进行不同类型的读操作，而主库只进行写操作，从而提升数据库的整体性能。</p>\n</li>\n<li><p>数据备份</p>\n<p>可以使用从库的方式对数据库进行备份</p>\n</li>\n</ol>\n<h2 id=\"主从复制有什么优缺点\"><a href=\"#主从复制有什么优缺点\" class=\"headerlink\" title=\"主从复制有什么优缺点\"></a>主从复制有什么优缺点</h2><h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><ul>\n<li>可扩展：在读压力大的情况下，可以增加多个读节点，将读数据操作分发到不同的节点减轻读压力</li>\n<li>高性能：因为数据分发到不同的节点执行，每个服务器上的压力减小，性能得到提升</li>\n</ul>\n<h3 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h3><ul>\n<li>一致性问题：主要有主从延迟导致的数据不一致和双写导致的数据不一致两种。一致性问题有很多解决方案，如全局唯一ID生成器、双主情况下的间隔ID自增策略</li>\n<li>延时问题：从库监听主库数据变化再复制到从库执行这个过程是需要时间的，因此从库一般和主库之间都会存在延时问题，且随着从库数量的增加，复制压力增加，主从复制的延时也会增加</li>\n</ul>\n<h2 id=\"MySQL主从复制原理\"><a href=\"#MySQL主从复制原理\" class=\"headerlink\" title=\"MySQL主从复制原理\"></a>MySQL主从复制原理</h2><p>MySQL主从复制的基础是binlog（二进制日志），binlog记录了数据库中数据的变化，只有启用了binlog才能配置主从复制。</p>\n<ol>\n<li>业务端在对主库操作时将会将操作的内容写入到binlog中</li>\n<li>主库为每个从库创建一个log dump线程，读取和发送binlog中的内容</li>\n<li>当从库建立和主库的连接之后，从节点会创建一个IO线程，用来请求主库中更新了的binlog，在接收了主节点中log dump线程发送的更新之后，将更新写入到从节点的relay log（中继日志）中</li>\n<li>在接收到主库的变更之后，从库SQL线程读取relay log中的记录，解析为数据库的操作，并将操作应用到数据库，保证主库和从库的一致性。</li>\n</ol>\n<p><img src=\"MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"MySQL主从复制原理\"></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本文主要描述了MySQL数据库主从复制优缺点及原理。MySQL数据库在互联网行业使用广泛，且具有高性能可扩展等特点，在近些年来发展相当迅速。虽然和Oracle RAC实时集群相比，做到双写双活有一定限制，但是对于大多数场景也足够使用了。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>本文主要尝试说明MySQL主从复制的原理。</p>\n<h2 id=\"什么是主从复制？\"><a href=\"#什么是主从复制？\" class=\"headerlink\" title=\"什么是主从复制？\"></a>什么是主从复制？</h2><p>主从复制指的是数据库在运行过程中，将数据从主库复制到从库的过程，可以从一主复制到一个或多个从库。可以采用异步复制、半同步复制方式。有基于日志点的复制和基于GTID（global transaction id：全局事务ID）的复制两种形式。将数据复制到从库，以达到高可用、高性能的目的。</p>\n<h2 id=\"为什么要用主从复制？\"><a href=\"#为什么要用主从复制？\" class=\"headerlink\" title=\"为什么要用主从复制？\"></a>为什么要用主从复制？</h2><ol>\n<li><p>高可用</p>\n<p>当主库宕机或者主库需要做升级的时候，可以将主库切换到从库上，新的主库对外提供服务，保证服务可用，同时也可以对主库完成运维操作。</p>\n</li>\n<li><p>高性能</p>\n<p>大多数互联网业务读数据操作较多，可以采用多个从库，将读操作由从库进行，每个从库进行不同类型的读操作，而主库只进行写操作，从而提升数据库的整体性能。</p>\n</li>\n<li><p>数据备份</p>\n<p>可以使用从库的方式对数据库进行备份</p>\n</li>\n</ol>\n<h2 id=\"主从复制有什么优缺点\"><a href=\"#主从复制有什么优缺点\" class=\"headerlink\" title=\"主从复制有什么优缺点\"></a>主从复制有什么优缺点</h2><h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><ul>\n<li>可扩展：在读压力大的情况下，可以增加多个读节点，将读数据操作分发到不同的节点减轻读压力</li>\n<li>高性能：因为数据分发到不同的节点执行，每个服务器上的压力减小，性能得到提升</li>\n</ul>\n<h3 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h3><ul>\n<li>一致性问题：主要有主从延迟导致的数据不一致和双写导致的数据不一致两种。一致性问题有很多解决方案，如全局唯一ID生成器、双主情况下的间隔ID自增策略</li>\n<li>延时问题：从库监听主库数据变化再复制到从库执行这个过程是需要时间的，因此从库一般和主库之间都会存在延时问题，且随着从库数量的增加，复制压力增加，主从复制的延时也会增加</li>\n</ul>\n<h2 id=\"MySQL主从复制原理\"><a href=\"#MySQL主从复制原理\" class=\"headerlink\" title=\"MySQL主从复制原理\"></a>MySQL主从复制原理</h2><p>MySQL主从复制的基础是binlog（二进制日志），binlog记录了数据库中数据的变化，只有启用了binlog才能配置主从复制。</p>\n<ol>\n<li>业务端在对主库操作时将会将操作的内容写入到binlog中</li>\n<li>主库为每个从库创建一个log dump线程，读取和发送binlog中的内容</li>\n<li>当从库建立和主库的连接之后，从节点会创建一个IO线程，用来请求主库中更新了的binlog，在接收了主节点中log dump线程发送的更新之后，将更新写入到从节点的relay log（中继日志）中</li>\n<li>在接收到主库的变更之后，从库SQL线程读取relay log中的记录，解析为数据库的操作，并将操作应用到数据库，保证主库和从库的一致性。</li>\n</ol>\n<p><img src=\"MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"MySQL主从复制原理\"></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本文主要描述了MySQL数据库主从复制优缺点及原理。MySQL数据库在互联网行业使用广泛，且具有高性能可扩展等特点，在近些年来发展相当迅速。虽然和Oracle RAC实时集群相比，做到双写双活有一定限制，但是对于大多数场景也足够使用了。</p>\n"},{"title":"MySQL组复制介绍","cover":"2021/05/07/MySQL组复制介绍/46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg","top_img":"2021/05/07/MySQL组复制介绍/46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg","date":"2021-05-07T07:39:13.000Z","description":"本文主要介绍MySQL组复制相关知识，包括原理及相关的服务。","_content":"\n本文主要介绍MySQL组复制相关知识，包括原理及相关的服务。\n\n# 什么是MySQL组复制\n\nMySQL Group Replication（MGR）是MySQL 5.7.17引入的服务器插件，可用来创建弹性的、高可用的、容错的复制集群，保证数据库服务持续可用。MGR提供节点之间抢协调性的分布式状态复制，节点间可以自动协调。 MGR可以是单主模式（同一时间只有一个节点接受写操作，且主节点有系统自动选择），多主模式（所有的节点都可接受写操作，即使是同时发送的）两种模式。\n\nMGR内置的组员服务会保持组内所有节点之间的视图的一致性及可用性供所有节点使用，节点加入或者退出时，视图会相应更新，当某个节点故障时，故障检测机制会检测到并通知组其视图已经发生变更，这些都是自动完成的。\n\n对于要提交的事务，组内大多数成员需按照全局事务ID的事务顺序达成一致才能提交，提交或者回滚的事务均有每个节点单独完成，但是所有的节点必须做出相同的决定。如果存在网络分区，导致成员无法达成一致，则系统在问题解决前不会继续执行。这是系统内置的自动保护脑裂的机制。\n\nMGR是基于Group Communication System（GCS）协议的，该协议提供了故障检测机制，组员服务以及安全完整的消息传递服务，这些服务确保了数据在组内复制中的一致性，是创建复制系统的关键，而核心的技术是基于Paxos算法的实现，是组通信的引擎。\n\n# MySQL复制技术\n\n## 主从复制\n\n传统MySQL复制提供的是基于一个源数据库即主节点并复制到一个或多个从节点的复制，主节点应用事务并提交，然后将对数据库的更改发送到从节点上去执行（基于语句的复制）或者是应用（基于行的复制）。默认情况下，所有的节点都包含了一个与主库完全相同的数据，属于shared-nothing的方案。\n\n如下是MySQL异步复制原理\n\n![异步复制原理](异步复制原理.png)\n\n如下是MySQL半同步复制原理\n\n![半同步复制原理](半同步复制原理.png)\n\n其中，在各个实例之间的箭头表示实例之间的数据交换以及实例和客户端应用程序之间的数据交换。异步复制和半同步复制的区别在于，半同步复制需要等待至少一个从库复制并应用了中继日志收到回应（有一个等待时间，超过这个时间没有收到回应则退化为异步复制）之后再提交，提高主从数据一致性。而异步复制无需等待从库确认，最大化性能。\n\n## 组复制\n\n组复制是可以用来实现容错系统的技术。复制组是一个服务组，其中的每个服务拥有整个数据的副本，每个服务之间通过消息交流。通信层保证院子消息的传递以及顺序。MGR在此基础上构建并实现了多主更新协议。组内的每个服务独立执行事务，但是每个读写事务均是在组同意后提交，也就是有组来决定是否提交每个读写事务，因此提交操作并非原始服务单方面决定的。读事务不需要组内同意就可以立即提交。\n\n当读写事务在原始服务上准备提交时，服务会先自动将修改的行以及相应的主键广播。由于事务是按照原子广播的，所有的服务，要么都收到事务要么都没有收到。如果接受到，那都是以同样的顺序接受到并且为这个事务建立起一个全局的顺序。在不同服务上同时执行的事务可能会发生冲突，如两个服务上同时对同一行数据进行修改。解决冲突的方法是顺序在前的事务先提交，顺序在后的事务在原始服务上回滚并从组内其他服务中删除。\n\n![组复制原理](组复制原理.png)\n\n组复制也是一种shared-nothing的方案，其中每个成员都有自己完整的数据副本。\n\n# 组复制应用场景\n\n- 弹性复制：服务的数量可以动态添加和减少且尽可能的减少对原服务的影响，如云数据库服务\n- 高可用分片：分片是写扩展的流行解决方案，使用MGR来实现高可用分片，每个分片映射到一个复制组。\n- 主从复制替代方案：某些情况下，使用单主服务可能会使其成为连接热点，使用多主会更具扩展性。\n\n# 组复制相关服务\n\n## 组员服务\n\n在MGR中，一组服务组成一个复制组。有组名，组时动态的，服务可以在任何时候加入或者离开，组会自动调整。如果有服务加入组，则会从已有的服务中将丢失的状态同步至最新。如果有服务离开，则其余的服务会重新配置组。组员服务定义了哪些服务是在线的并参与到组的，在线的服务列表通常是一个视图。组内的每个服务都有一个一致性视图，说明哪些服务是此刻参与到组复制的成员。组成员不仅仅要统一提交事务，还要统一当前的视图是哪一个如果已有的成员同意新的服务加入称为组的一部分，则组会重新配置，引发视图变更。如果服务离开（自愿与否），组会动态重新配置并引发视图变更。当组员自动离开时，不需要经过大多数成员的同意即可进行重新配置。如果是被动离开如宕机、断网，组复制故障检测机制检测到之后，需要组内成员协商，大部分成员同意之后才能重新配置。\n\n## 故障检测服务\n\n组复制包含了故障检测机制，能够发现并报告那个服务是已经不可用了。当服务A在一段时间内无法接收到服务B的消息并引发超时，会怀疑服务B异常，如果组内其他成员也同意此怀疑，则会将服务B认为是异常的并将该服务排除在组外。当一个服务与所有其他组都无法通信时，会怀疑自己异常，但是因为无法通过协商与组达成一致，因此该怀疑不会产生结果。\n\n## 容错\n\nMGR是建立在Paxos分布式算法的实现上，用来在服务之间进行分布式协商决策，因此需要大多数服务处于活动状态达到法定票数才能做决策。这直接影响了系统中能够出错而不影响整体功能的服务个数，设能够允许出错的服务个数为f，则总服务n=2*f+1. 在实际应用中，允许一个服务故障则需要有3个服务，当一个服务故障时，仍然有两个服务来组成大多数票数并允许系统继续自动决策，但是如果有两个服务故障，则复制组阻塞，一个服务无法组成大多数的票数来做决策。\n\n# 总结\n\n作为MySQL众多高可用集群中的一种，MGR不需要额外的安装其他插件即可提供高可用、可扩展等特性，但是，当故障转移时，应用程序需要修改IP到新的主所在的服务器。MGR从5.7退出以来备受关注，如今发展到8.0版本，功能不断完善，市场上也有部分企业开始使用MGR上生产，这是未来的一个趋势。\n\n","source":"_posts/MySQL组复制介绍.md","raw":"---\ntitle: MySQL组复制介绍\ntags:\n  - MySQL\n  - 组复制\ncategory:\n  - MySQL\ncover: 46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg\ntop_img: 46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg\ndate: 2021-05-07 15:39:13\ndescription: 本文主要介绍MySQL组复制相关知识，包括原理及相关的服务。\n---\n\n本文主要介绍MySQL组复制相关知识，包括原理及相关的服务。\n\n# 什么是MySQL组复制\n\nMySQL Group Replication（MGR）是MySQL 5.7.17引入的服务器插件，可用来创建弹性的、高可用的、容错的复制集群，保证数据库服务持续可用。MGR提供节点之间抢协调性的分布式状态复制，节点间可以自动协调。 MGR可以是单主模式（同一时间只有一个节点接受写操作，且主节点有系统自动选择），多主模式（所有的节点都可接受写操作，即使是同时发送的）两种模式。\n\nMGR内置的组员服务会保持组内所有节点之间的视图的一致性及可用性供所有节点使用，节点加入或者退出时，视图会相应更新，当某个节点故障时，故障检测机制会检测到并通知组其视图已经发生变更，这些都是自动完成的。\n\n对于要提交的事务，组内大多数成员需按照全局事务ID的事务顺序达成一致才能提交，提交或者回滚的事务均有每个节点单独完成，但是所有的节点必须做出相同的决定。如果存在网络分区，导致成员无法达成一致，则系统在问题解决前不会继续执行。这是系统内置的自动保护脑裂的机制。\n\nMGR是基于Group Communication System（GCS）协议的，该协议提供了故障检测机制，组员服务以及安全完整的消息传递服务，这些服务确保了数据在组内复制中的一致性，是创建复制系统的关键，而核心的技术是基于Paxos算法的实现，是组通信的引擎。\n\n# MySQL复制技术\n\n## 主从复制\n\n传统MySQL复制提供的是基于一个源数据库即主节点并复制到一个或多个从节点的复制，主节点应用事务并提交，然后将对数据库的更改发送到从节点上去执行（基于语句的复制）或者是应用（基于行的复制）。默认情况下，所有的节点都包含了一个与主库完全相同的数据，属于shared-nothing的方案。\n\n如下是MySQL异步复制原理\n\n![异步复制原理](异步复制原理.png)\n\n如下是MySQL半同步复制原理\n\n![半同步复制原理](半同步复制原理.png)\n\n其中，在各个实例之间的箭头表示实例之间的数据交换以及实例和客户端应用程序之间的数据交换。异步复制和半同步复制的区别在于，半同步复制需要等待至少一个从库复制并应用了中继日志收到回应（有一个等待时间，超过这个时间没有收到回应则退化为异步复制）之后再提交，提高主从数据一致性。而异步复制无需等待从库确认，最大化性能。\n\n## 组复制\n\n组复制是可以用来实现容错系统的技术。复制组是一个服务组，其中的每个服务拥有整个数据的副本，每个服务之间通过消息交流。通信层保证院子消息的传递以及顺序。MGR在此基础上构建并实现了多主更新协议。组内的每个服务独立执行事务，但是每个读写事务均是在组同意后提交，也就是有组来决定是否提交每个读写事务，因此提交操作并非原始服务单方面决定的。读事务不需要组内同意就可以立即提交。\n\n当读写事务在原始服务上准备提交时，服务会先自动将修改的行以及相应的主键广播。由于事务是按照原子广播的，所有的服务，要么都收到事务要么都没有收到。如果接受到，那都是以同样的顺序接受到并且为这个事务建立起一个全局的顺序。在不同服务上同时执行的事务可能会发生冲突，如两个服务上同时对同一行数据进行修改。解决冲突的方法是顺序在前的事务先提交，顺序在后的事务在原始服务上回滚并从组内其他服务中删除。\n\n![组复制原理](组复制原理.png)\n\n组复制也是一种shared-nothing的方案，其中每个成员都有自己完整的数据副本。\n\n# 组复制应用场景\n\n- 弹性复制：服务的数量可以动态添加和减少且尽可能的减少对原服务的影响，如云数据库服务\n- 高可用分片：分片是写扩展的流行解决方案，使用MGR来实现高可用分片，每个分片映射到一个复制组。\n- 主从复制替代方案：某些情况下，使用单主服务可能会使其成为连接热点，使用多主会更具扩展性。\n\n# 组复制相关服务\n\n## 组员服务\n\n在MGR中，一组服务组成一个复制组。有组名，组时动态的，服务可以在任何时候加入或者离开，组会自动调整。如果有服务加入组，则会从已有的服务中将丢失的状态同步至最新。如果有服务离开，则其余的服务会重新配置组。组员服务定义了哪些服务是在线的并参与到组的，在线的服务列表通常是一个视图。组内的每个服务都有一个一致性视图，说明哪些服务是此刻参与到组复制的成员。组成员不仅仅要统一提交事务，还要统一当前的视图是哪一个如果已有的成员同意新的服务加入称为组的一部分，则组会重新配置，引发视图变更。如果服务离开（自愿与否），组会动态重新配置并引发视图变更。当组员自动离开时，不需要经过大多数成员的同意即可进行重新配置。如果是被动离开如宕机、断网，组复制故障检测机制检测到之后，需要组内成员协商，大部分成员同意之后才能重新配置。\n\n## 故障检测服务\n\n组复制包含了故障检测机制，能够发现并报告那个服务是已经不可用了。当服务A在一段时间内无法接收到服务B的消息并引发超时，会怀疑服务B异常，如果组内其他成员也同意此怀疑，则会将服务B认为是异常的并将该服务排除在组外。当一个服务与所有其他组都无法通信时，会怀疑自己异常，但是因为无法通过协商与组达成一致，因此该怀疑不会产生结果。\n\n## 容错\n\nMGR是建立在Paxos分布式算法的实现上，用来在服务之间进行分布式协商决策，因此需要大多数服务处于活动状态达到法定票数才能做决策。这直接影响了系统中能够出错而不影响整体功能的服务个数，设能够允许出错的服务个数为f，则总服务n=2*f+1. 在实际应用中，允许一个服务故障则需要有3个服务，当一个服务故障时，仍然有两个服务来组成大多数票数并允许系统继续自动决策，但是如果有两个服务故障，则复制组阻塞，一个服务无法组成大多数的票数来做决策。\n\n# 总结\n\n作为MySQL众多高可用集群中的一种，MGR不需要额外的安装其他插件即可提供高可用、可扩展等特性，但是，当故障转移时，应用程序需要修改IP到新的主所在的服务器。MGR从5.7退出以来备受关注，如今发展到8.0版本，功能不断完善，市场上也有部分企业开始使用MGR上生产，这是未来的一个趋势。\n\n","slug":"MySQL组复制介绍","published":1,"updated":"2022-01-01T14:32:15.496Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vb001rhx896gj7dvkb","content":"<p>本文主要介绍MySQL组复制相关知识，包括原理及相关的服务。</p>\n<h1 id=\"什么是MySQL组复制\"><a href=\"#什么是MySQL组复制\" class=\"headerlink\" title=\"什么是MySQL组复制\"></a>什么是MySQL组复制</h1><p>MySQL Group Replication（MGR）是MySQL 5.7.17引入的服务器插件，可用来创建弹性的、高可用的、容错的复制集群，保证数据库服务持续可用。MGR提供节点之间抢协调性的分布式状态复制，节点间可以自动协调。 MGR可以是单主模式（同一时间只有一个节点接受写操作，且主节点有系统自动选择），多主模式（所有的节点都可接受写操作，即使是同时发送的）两种模式。</p>\n<p>MGR内置的组员服务会保持组内所有节点之间的视图的一致性及可用性供所有节点使用，节点加入或者退出时，视图会相应更新，当某个节点故障时，故障检测机制会检测到并通知组其视图已经发生变更，这些都是自动完成的。</p>\n<p>对于要提交的事务，组内大多数成员需按照全局事务ID的事务顺序达成一致才能提交，提交或者回滚的事务均有每个节点单独完成，但是所有的节点必须做出相同的决定。如果存在网络分区，导致成员无法达成一致，则系统在问题解决前不会继续执行。这是系统内置的自动保护脑裂的机制。</p>\n<p>MGR是基于Group Communication System（GCS）协议的，该协议提供了故障检测机制，组员服务以及安全完整的消息传递服务，这些服务确保了数据在组内复制中的一致性，是创建复制系统的关键，而核心的技术是基于Paxos算法的实现，是组通信的引擎。</p>\n<h1 id=\"MySQL复制技术\"><a href=\"#MySQL复制技术\" class=\"headerlink\" title=\"MySQL复制技术\"></a>MySQL复制技术</h1><h2 id=\"主从复制\"><a href=\"#主从复制\" class=\"headerlink\" title=\"主从复制\"></a>主从复制</h2><p>传统MySQL复制提供的是基于一个源数据库即主节点并复制到一个或多个从节点的复制，主节点应用事务并提交，然后将对数据库的更改发送到从节点上去执行（基于语句的复制）或者是应用（基于行的复制）。默认情况下，所有的节点都包含了一个与主库完全相同的数据，属于shared-nothing的方案。</p>\n<p>如下是MySQL异步复制原理</p>\n<p><img src=\"%E5%BC%82%E6%AD%A5%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"异步复制原理\"></p>\n<p>如下是MySQL半同步复制原理</p>\n<p><img src=\"%E5%8D%8A%E5%90%8C%E6%AD%A5%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"半同步复制原理\"></p>\n<p>其中，在各个实例之间的箭头表示实例之间的数据交换以及实例和客户端应用程序之间的数据交换。异步复制和半同步复制的区别在于，半同步复制需要等待至少一个从库复制并应用了中继日志收到回应（有一个等待时间，超过这个时间没有收到回应则退化为异步复制）之后再提交，提高主从数据一致性。而异步复制无需等待从库确认，最大化性能。</p>\n<h2 id=\"组复制\"><a href=\"#组复制\" class=\"headerlink\" title=\"组复制\"></a>组复制</h2><p>组复制是可以用来实现容错系统的技术。复制组是一个服务组，其中的每个服务拥有整个数据的副本，每个服务之间通过消息交流。通信层保证院子消息的传递以及顺序。MGR在此基础上构建并实现了多主更新协议。组内的每个服务独立执行事务，但是每个读写事务均是在组同意后提交，也就是有组来决定是否提交每个读写事务，因此提交操作并非原始服务单方面决定的。读事务不需要组内同意就可以立即提交。</p>\n<p>当读写事务在原始服务上准备提交时，服务会先自动将修改的行以及相应的主键广播。由于事务是按照原子广播的，所有的服务，要么都收到事务要么都没有收到。如果接受到，那都是以同样的顺序接受到并且为这个事务建立起一个全局的顺序。在不同服务上同时执行的事务可能会发生冲突，如两个服务上同时对同一行数据进行修改。解决冲突的方法是顺序在前的事务先提交，顺序在后的事务在原始服务上回滚并从组内其他服务中删除。</p>\n<p><img src=\"%E7%BB%84%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"组复制原理\"></p>\n<p>组复制也是一种shared-nothing的方案，其中每个成员都有自己完整的数据副本。</p>\n<h1 id=\"组复制应用场景\"><a href=\"#组复制应用场景\" class=\"headerlink\" title=\"组复制应用场景\"></a>组复制应用场景</h1><ul>\n<li>弹性复制：服务的数量可以动态添加和减少且尽可能的减少对原服务的影响，如云数据库服务</li>\n<li>高可用分片：分片是写扩展的流行解决方案，使用MGR来实现高可用分片，每个分片映射到一个复制组。</li>\n<li>主从复制替代方案：某些情况下，使用单主服务可能会使其成为连接热点，使用多主会更具扩展性。</li>\n</ul>\n<h1 id=\"组复制相关服务\"><a href=\"#组复制相关服务\" class=\"headerlink\" title=\"组复制相关服务\"></a>组复制相关服务</h1><h2 id=\"组员服务\"><a href=\"#组员服务\" class=\"headerlink\" title=\"组员服务\"></a>组员服务</h2><p>在MGR中，一组服务组成一个复制组。有组名，组时动态的，服务可以在任何时候加入或者离开，组会自动调整。如果有服务加入组，则会从已有的服务中将丢失的状态同步至最新。如果有服务离开，则其余的服务会重新配置组。组员服务定义了哪些服务是在线的并参与到组的，在线的服务列表通常是一个视图。组内的每个服务都有一个一致性视图，说明哪些服务是此刻参与到组复制的成员。组成员不仅仅要统一提交事务，还要统一当前的视图是哪一个如果已有的成员同意新的服务加入称为组的一部分，则组会重新配置，引发视图变更。如果服务离开（自愿与否），组会动态重新配置并引发视图变更。当组员自动离开时，不需要经过大多数成员的同意即可进行重新配置。如果是被动离开如宕机、断网，组复制故障检测机制检测到之后，需要组内成员协商，大部分成员同意之后才能重新配置。</p>\n<h2 id=\"故障检测服务\"><a href=\"#故障检测服务\" class=\"headerlink\" title=\"故障检测服务\"></a>故障检测服务</h2><p>组复制包含了故障检测机制，能够发现并报告那个服务是已经不可用了。当服务A在一段时间内无法接收到服务B的消息并引发超时，会怀疑服务B异常，如果组内其他成员也同意此怀疑，则会将服务B认为是异常的并将该服务排除在组外。当一个服务与所有其他组都无法通信时，会怀疑自己异常，但是因为无法通过协商与组达成一致，因此该怀疑不会产生结果。</p>\n<h2 id=\"容错\"><a href=\"#容错\" class=\"headerlink\" title=\"容错\"></a>容错</h2><p>MGR是建立在Paxos分布式算法的实现上，用来在服务之间进行分布式协商决策，因此需要大多数服务处于活动状态达到法定票数才能做决策。这直接影响了系统中能够出错而不影响整体功能的服务个数，设能够允许出错的服务个数为f，则总服务n=2*f+1. 在实际应用中，允许一个服务故障则需要有3个服务，当一个服务故障时，仍然有两个服务来组成大多数票数并允许系统继续自动决策，但是如果有两个服务故障，则复制组阻塞，一个服务无法组成大多数的票数来做决策。</p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>作为MySQL众多高可用集群中的一种，MGR不需要额外的安装其他插件即可提供高可用、可扩展等特性，但是，当故障转移时，应用程序需要修改IP到新的主所在的服务器。MGR从5.7退出以来备受关注，如今发展到8.0版本，功能不断完善，市场上也有部分企业开始使用MGR上生产，这是未来的一个趋势。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>本文主要介绍MySQL组复制相关知识，包括原理及相关的服务。</p>\n<h1 id=\"什么是MySQL组复制\"><a href=\"#什么是MySQL组复制\" class=\"headerlink\" title=\"什么是MySQL组复制\"></a>什么是MySQL组复制</h1><p>MySQL Group Replication（MGR）是MySQL 5.7.17引入的服务器插件，可用来创建弹性的、高可用的、容错的复制集群，保证数据库服务持续可用。MGR提供节点之间抢协调性的分布式状态复制，节点间可以自动协调。 MGR可以是单主模式（同一时间只有一个节点接受写操作，且主节点有系统自动选择），多主模式（所有的节点都可接受写操作，即使是同时发送的）两种模式。</p>\n<p>MGR内置的组员服务会保持组内所有节点之间的视图的一致性及可用性供所有节点使用，节点加入或者退出时，视图会相应更新，当某个节点故障时，故障检测机制会检测到并通知组其视图已经发生变更，这些都是自动完成的。</p>\n<p>对于要提交的事务，组内大多数成员需按照全局事务ID的事务顺序达成一致才能提交，提交或者回滚的事务均有每个节点单独完成，但是所有的节点必须做出相同的决定。如果存在网络分区，导致成员无法达成一致，则系统在问题解决前不会继续执行。这是系统内置的自动保护脑裂的机制。</p>\n<p>MGR是基于Group Communication System（GCS）协议的，该协议提供了故障检测机制，组员服务以及安全完整的消息传递服务，这些服务确保了数据在组内复制中的一致性，是创建复制系统的关键，而核心的技术是基于Paxos算法的实现，是组通信的引擎。</p>\n<h1 id=\"MySQL复制技术\"><a href=\"#MySQL复制技术\" class=\"headerlink\" title=\"MySQL复制技术\"></a>MySQL复制技术</h1><h2 id=\"主从复制\"><a href=\"#主从复制\" class=\"headerlink\" title=\"主从复制\"></a>主从复制</h2><p>传统MySQL复制提供的是基于一个源数据库即主节点并复制到一个或多个从节点的复制，主节点应用事务并提交，然后将对数据库的更改发送到从节点上去执行（基于语句的复制）或者是应用（基于行的复制）。默认情况下，所有的节点都包含了一个与主库完全相同的数据，属于shared-nothing的方案。</p>\n<p>如下是MySQL异步复制原理</p>\n<p><img src=\"%E5%BC%82%E6%AD%A5%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"异步复制原理\"></p>\n<p>如下是MySQL半同步复制原理</p>\n<p><img src=\"%E5%8D%8A%E5%90%8C%E6%AD%A5%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"半同步复制原理\"></p>\n<p>其中，在各个实例之间的箭头表示实例之间的数据交换以及实例和客户端应用程序之间的数据交换。异步复制和半同步复制的区别在于，半同步复制需要等待至少一个从库复制并应用了中继日志收到回应（有一个等待时间，超过这个时间没有收到回应则退化为异步复制）之后再提交，提高主从数据一致性。而异步复制无需等待从库确认，最大化性能。</p>\n<h2 id=\"组复制\"><a href=\"#组复制\" class=\"headerlink\" title=\"组复制\"></a>组复制</h2><p>组复制是可以用来实现容错系统的技术。复制组是一个服务组，其中的每个服务拥有整个数据的副本，每个服务之间通过消息交流。通信层保证院子消息的传递以及顺序。MGR在此基础上构建并实现了多主更新协议。组内的每个服务独立执行事务，但是每个读写事务均是在组同意后提交，也就是有组来决定是否提交每个读写事务，因此提交操作并非原始服务单方面决定的。读事务不需要组内同意就可以立即提交。</p>\n<p>当读写事务在原始服务上准备提交时，服务会先自动将修改的行以及相应的主键广播。由于事务是按照原子广播的，所有的服务，要么都收到事务要么都没有收到。如果接受到，那都是以同样的顺序接受到并且为这个事务建立起一个全局的顺序。在不同服务上同时执行的事务可能会发生冲突，如两个服务上同时对同一行数据进行修改。解决冲突的方法是顺序在前的事务先提交，顺序在后的事务在原始服务上回滚并从组内其他服务中删除。</p>\n<p><img src=\"%E7%BB%84%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png\" alt=\"组复制原理\"></p>\n<p>组复制也是一种shared-nothing的方案，其中每个成员都有自己完整的数据副本。</p>\n<h1 id=\"组复制应用场景\"><a href=\"#组复制应用场景\" class=\"headerlink\" title=\"组复制应用场景\"></a>组复制应用场景</h1><ul>\n<li>弹性复制：服务的数量可以动态添加和减少且尽可能的减少对原服务的影响，如云数据库服务</li>\n<li>高可用分片：分片是写扩展的流行解决方案，使用MGR来实现高可用分片，每个分片映射到一个复制组。</li>\n<li>主从复制替代方案：某些情况下，使用单主服务可能会使其成为连接热点，使用多主会更具扩展性。</li>\n</ul>\n<h1 id=\"组复制相关服务\"><a href=\"#组复制相关服务\" class=\"headerlink\" title=\"组复制相关服务\"></a>组复制相关服务</h1><h2 id=\"组员服务\"><a href=\"#组员服务\" class=\"headerlink\" title=\"组员服务\"></a>组员服务</h2><p>在MGR中，一组服务组成一个复制组。有组名，组时动态的，服务可以在任何时候加入或者离开，组会自动调整。如果有服务加入组，则会从已有的服务中将丢失的状态同步至最新。如果有服务离开，则其余的服务会重新配置组。组员服务定义了哪些服务是在线的并参与到组的，在线的服务列表通常是一个视图。组内的每个服务都有一个一致性视图，说明哪些服务是此刻参与到组复制的成员。组成员不仅仅要统一提交事务，还要统一当前的视图是哪一个如果已有的成员同意新的服务加入称为组的一部分，则组会重新配置，引发视图变更。如果服务离开（自愿与否），组会动态重新配置并引发视图变更。当组员自动离开时，不需要经过大多数成员的同意即可进行重新配置。如果是被动离开如宕机、断网，组复制故障检测机制检测到之后，需要组内成员协商，大部分成员同意之后才能重新配置。</p>\n<h2 id=\"故障检测服务\"><a href=\"#故障检测服务\" class=\"headerlink\" title=\"故障检测服务\"></a>故障检测服务</h2><p>组复制包含了故障检测机制，能够发现并报告那个服务是已经不可用了。当服务A在一段时间内无法接收到服务B的消息并引发超时，会怀疑服务B异常，如果组内其他成员也同意此怀疑，则会将服务B认为是异常的并将该服务排除在组外。当一个服务与所有其他组都无法通信时，会怀疑自己异常，但是因为无法通过协商与组达成一致，因此该怀疑不会产生结果。</p>\n<h2 id=\"容错\"><a href=\"#容错\" class=\"headerlink\" title=\"容错\"></a>容错</h2><p>MGR是建立在Paxos分布式算法的实现上，用来在服务之间进行分布式协商决策，因此需要大多数服务处于活动状态达到法定票数才能做决策。这直接影响了系统中能够出错而不影响整体功能的服务个数，设能够允许出错的服务个数为f，则总服务n=2*f+1. 在实际应用中，允许一个服务故障则需要有3个服务，当一个服务故障时，仍然有两个服务来组成大多数票数并允许系统继续自动决策，但是如果有两个服务故障，则复制组阻塞，一个服务无法组成大多数的票数来做决策。</p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>作为MySQL众多高可用集群中的一种，MGR不需要额外的安装其他插件即可提供高可用、可扩展等特性，但是，当故障转移时，应用程序需要修改IP到新的主所在的服务器。MGR从5.7退出以来备受关注，如今发展到8.0版本，功能不断完善，市场上也有部分企业开始使用MGR上生产，这是未来的一个趋势。</p>\n"},{"title":"MySQL查询未区分大小写","top_img":"2021/07/05/MySQL查询未区分大小写/1606845605.jpg","cover":"2021/07/05/MySQL查询未区分大小写/1606845605.jpg","date":"2021-07-05T09:45:23.000Z","description":"MySQL中，查询条件匹配的时候是否区分大小写？什么情况下区分？什么情况下不区分？遇到需要区分但是没有区分的场景该如何处理？","_content":"\nMySQL中，查询条件匹配的时候是否区分大小写？什么情况下区分？什么情况下不区分？遇到需要区分但是没有区分的场景该如何处理？\n\n## 场景\n\n考虑如下场景：\n\n```sql\nmysql> use test_0705;\nDatabase changed\nmysql> select * from tb_test where name = 'CodingCat';\n+----+-----------+\n| id | name      |\n+----+-----------+\n|  1 | CodingCat |\n|  2 | CODINGCAT |\n|  3 | codingcat |\n+----+-----------+\n3 rows in set (0.02 sec)\n\nmysql> \n```\n\n从上图我们看到，查询条件中指定要查询的是`name='CodingCat'`，但是结果把`CODINGCAT`和`codingcat`一起给查询出来了，可见此查询结果并未区分大小写。\n\n## 探究\n\n我们知道，在MySQL中有排序规则这个概念，排序规则表示在规定的存储的数据编码格式下的比较规则，如是否区分大小写等。针对上面的场景，查看表结构如下：\n\n```plsql\nmysql> show create table tb_test;\n+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table   | Create Table                                                                                                                                                                |\n+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| tb_test | CREATE TABLE `tb_test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 |\n+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.04 sec)\n\nmysql> \n```\n\n该表继承了数据库的排序规则，数据库建表语句如下：\n\n```sql\nmysql> show create database test_0705;\n+-----------+--------------------------------------------------------------------+\n| Database  | Create Database                                                    |\n+-----------+--------------------------------------------------------------------+\n| test_0705 | CREATE DATABASE `test_0705` /*!40100 DEFAULT CHARACTER SET utf8 */ |\n+-----------+--------------------------------------------------------------------+\n1 row in set (0.03 sec)\n\nmysql> \n```\n\n从数据库建表语句来看，并没有指定排序规则，则该数据库继承了全局的排序规则，查看数据库的排序规则如下：\n\n```sql\nmysql> show variables like 'collation%';\n+----------------------+--------------------+\n| Variable_name        | Value              |\n+----------------------+--------------------+\n| collation_connection | utf8mb4_general_ci |\n| collation_database   | utf8_general_ci    |\n| collation_server     | utf8mb4_general_ci |\n+----------------------+--------------------+\n3 rows in set (0.38 sec)\n\nmysql> \n```\n\n从全局的配置来看，数据库服务器使用的是`utf8mb4_general_ci`排序规则，后缀有ci，意思是case insensitive，即大小写不敏感，所以查询出来的结果不区分大小写。\n\n在MySQL中，排序规则常见有带后缀ci和不带ci两种，如utf8_bin和utf8_genera_ci，带ci表示区分大小写，否则不区分。\n\n## 解决\n\n对于上面的问题，如果在设置了字符排序规则是带ci后缀的，但是又想要查询结果是区分大小写，怎么做？有两种解决方法。\n\n- 查询时在需要区分大小写的字段条件上使用binary关键字\n\n  ```sql\n  mysql> select * from tb_test where binary name = 'CodingCat';\n  +----+-----------+\n  | id | name      |\n  +----+-----------+\n  |  1 | CodingCat |\n  +----+-----------+\n  1 row in set (0.04 sec)\n  \n  mysql> \n  ```\n\n- 修改表中字段的排序规则\n\n  ```sql\n  mysql> ALTER TABLE tb_test MODIFY COLUMN name VARCHAR(255) BINARY CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL;\n  Query OK, 3 rows affected (0.08 sec)\n  Records: 3  Duplicates: 0  Warnings: 0\n  \n  mysql> show create table tb_test;\n  +---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n  | Table   | Create Table                                                                                                                                                                                                    |\n  +---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n  | tb_test | CREATE TABLE `tb_test` (\n    `id` int(11) NOT NULL AUTO_INCREMENT,\n    `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,\n    PRIMARY KEY (`id`)\n  ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 |\n  +---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n  1 row in set (0.05 sec)\n  \n  mysql> select * from tb_test where binary name = 'CodingCat';\n  +----+-----------+\n  | id | name      |\n  +----+-----------+\n  |  1 | CodingCat |\n  +----+-----------+\n  1 row in set (0.05 sec)\n  \n  mysql> \n  ```\n\n  \n\n\n\n\n\n","source":"_posts/MySQL查询未区分大小写.md","raw":"---\ntitle: MySQL查询未区分大小写\ntags:\n  - MySQL\ncategory: MySQL\ntop_img: 1606845605.jpg\ncover: 1606845605.jpg\ndate: 2021-07-05 17:45:23\ndescription: MySQL中，查询条件匹配的时候是否区分大小写？什么情况下区分？什么情况下不区分？遇到需要区分但是没有区分的场景该如何处理？\n---\n\nMySQL中，查询条件匹配的时候是否区分大小写？什么情况下区分？什么情况下不区分？遇到需要区分但是没有区分的场景该如何处理？\n\n## 场景\n\n考虑如下场景：\n\n```sql\nmysql> use test_0705;\nDatabase changed\nmysql> select * from tb_test where name = 'CodingCat';\n+----+-----------+\n| id | name      |\n+----+-----------+\n|  1 | CodingCat |\n|  2 | CODINGCAT |\n|  3 | codingcat |\n+----+-----------+\n3 rows in set (0.02 sec)\n\nmysql> \n```\n\n从上图我们看到，查询条件中指定要查询的是`name='CodingCat'`，但是结果把`CODINGCAT`和`codingcat`一起给查询出来了，可见此查询结果并未区分大小写。\n\n## 探究\n\n我们知道，在MySQL中有排序规则这个概念，排序规则表示在规定的存储的数据编码格式下的比较规则，如是否区分大小写等。针对上面的场景，查看表结构如下：\n\n```plsql\nmysql> show create table tb_test;\n+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table   | Create Table                                                                                                                                                                |\n+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| tb_test | CREATE TABLE `tb_test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 |\n+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.04 sec)\n\nmysql> \n```\n\n该表继承了数据库的排序规则，数据库建表语句如下：\n\n```sql\nmysql> show create database test_0705;\n+-----------+--------------------------------------------------------------------+\n| Database  | Create Database                                                    |\n+-----------+--------------------------------------------------------------------+\n| test_0705 | CREATE DATABASE `test_0705` /*!40100 DEFAULT CHARACTER SET utf8 */ |\n+-----------+--------------------------------------------------------------------+\n1 row in set (0.03 sec)\n\nmysql> \n```\n\n从数据库建表语句来看，并没有指定排序规则，则该数据库继承了全局的排序规则，查看数据库的排序规则如下：\n\n```sql\nmysql> show variables like 'collation%';\n+----------------------+--------------------+\n| Variable_name        | Value              |\n+----------------------+--------------------+\n| collation_connection | utf8mb4_general_ci |\n| collation_database   | utf8_general_ci    |\n| collation_server     | utf8mb4_general_ci |\n+----------------------+--------------------+\n3 rows in set (0.38 sec)\n\nmysql> \n```\n\n从全局的配置来看，数据库服务器使用的是`utf8mb4_general_ci`排序规则，后缀有ci，意思是case insensitive，即大小写不敏感，所以查询出来的结果不区分大小写。\n\n在MySQL中，排序规则常见有带后缀ci和不带ci两种，如utf8_bin和utf8_genera_ci，带ci表示区分大小写，否则不区分。\n\n## 解决\n\n对于上面的问题，如果在设置了字符排序规则是带ci后缀的，但是又想要查询结果是区分大小写，怎么做？有两种解决方法。\n\n- 查询时在需要区分大小写的字段条件上使用binary关键字\n\n  ```sql\n  mysql> select * from tb_test where binary name = 'CodingCat';\n  +----+-----------+\n  | id | name      |\n  +----+-----------+\n  |  1 | CodingCat |\n  +----+-----------+\n  1 row in set (0.04 sec)\n  \n  mysql> \n  ```\n\n- 修改表中字段的排序规则\n\n  ```sql\n  mysql> ALTER TABLE tb_test MODIFY COLUMN name VARCHAR(255) BINARY CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL;\n  Query OK, 3 rows affected (0.08 sec)\n  Records: 3  Duplicates: 0  Warnings: 0\n  \n  mysql> show create table tb_test;\n  +---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n  | Table   | Create Table                                                                                                                                                                                                    |\n  +---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n  | tb_test | CREATE TABLE `tb_test` (\n    `id` int(11) NOT NULL AUTO_INCREMENT,\n    `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,\n    PRIMARY KEY (`id`)\n  ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 |\n  +---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n  1 row in set (0.05 sec)\n  \n  mysql> select * from tb_test where binary name = 'CodingCat';\n  +----+-----------+\n  | id | name      |\n  +----+-----------+\n  |  1 | CodingCat |\n  +----+-----------+\n  1 row in set (0.05 sec)\n  \n  mysql> \n  ```\n\n  \n\n\n\n\n\n","slug":"MySQL查询未区分大小写","published":1,"updated":"2022-01-01T14:32:15.494Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vd001whx890rn2h5qo","content":"<p>MySQL中，查询条件匹配的时候是否区分大小写？什么情况下区分？什么情况下不区分？遇到需要区分但是没有区分的场景该如何处理？</p>\n<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h2><p>考虑如下场景：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> use test_0705;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;CodingCat&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id <span class=\"operator\">|</span> name      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">1</span> <span class=\"operator\">|</span> CodingCat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">2</span> <span class=\"operator\">|</span> CODINGCAT <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">3</span> <span class=\"operator\">|</span> codingcat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"number\">3</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.02</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>从上图我们看到，查询条件中指定要查询的是<code>name=&#39;CodingCat&#39;</code>，但是结果把<code>CODINGCAT</code>和<code>codingcat</code>一起给查询出来了，可见此查询结果并未区分大小写。</p>\n<h2 id=\"探究\"><a href=\"#探究\" class=\"headerlink\" title=\"探究\"></a>探究</h2><p>我们知道，在MySQL中有排序规则这个概念，排序规则表示在规定的存储的数据编码格式下的比较规则，如是否区分大小写等。针对上面的场景，查看表结构如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show create table tb_test;</span><br><span class=\"line\">+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| Table   | Create Table                                                                                                                                                                |</span><br><span class=\"line\">+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| tb_test | CREATE TABLE &#96;tb_test&#96; (</span><br><span class=\"line\">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  &#96;name&#96; varchar(255) DEFAULT NULL,</span><br><span class=\"line\">  PRIMARY KEY (&#96;id&#96;)</span><br><span class=\"line\">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;4 DEFAULT CHARSET&#x3D;utf8 |</span><br><span class=\"line\">+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">1 row in set (0.04 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>该表继承了数据库的排序规则，数据库建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> <span class=\"keyword\">create</span> database test_0705;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Database  <span class=\"operator\">|</span> <span class=\"keyword\">Create</span> Database                                                    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> test_0705 <span class=\"operator\">|</span> <span class=\"keyword\">CREATE</span> DATABASE `test_0705` <span class=\"comment\">/*!40100 DEFAULT CHARACTER SET utf8 */</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.03</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>从数据库建表语句来看，并没有指定排序规则，则该数据库继承了全局的排序规则，查看数据库的排序规则如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;collation%&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------------------+--------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Variable_name        <span class=\"operator\">|</span> <span class=\"keyword\">Value</span>              <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------------------+--------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> collation_connection <span class=\"operator\">|</span> utf8mb4_general_ci <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> collation_database   <span class=\"operator\">|</span> utf8_general_ci    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> collation_server     <span class=\"operator\">|</span> utf8mb4_general_ci <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------------------+--------------------+</span></span><br><span class=\"line\"><span class=\"number\">3</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.38</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>从全局的配置来看，数据库服务器使用的是<code>utf8mb4_general_ci</code>排序规则，后缀有ci，意思是case insensitive，即大小写不敏感，所以查询出来的结果不区分大小写。</p>\n<p>在MySQL中，排序规则常见有带后缀ci和不带ci两种，如utf8_bin和utf8_genera_ci，带ci表示区分大小写，否则不区分。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>对于上面的问题，如果在设置了字符排序规则是带ci后缀的，但是又想要查询结果是区分大小写，怎么做？有两种解决方法。</p>\n<ul>\n<li><p>查询时在需要区分大小写的字段条件上使用binary关键字</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> <span class=\"type\">binary</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;CodingCat&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id <span class=\"operator\">|</span> name      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">1</span> <span class=\"operator\">|</span> CodingCat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.04</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure></li>\n<li><p>修改表中字段的排序规则</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> tb_test MODIFY <span class=\"keyword\">COLUMN</span> name <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>) <span class=\"type\">BINARY</span> <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_bin <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">3</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.08</span> sec)</span><br><span class=\"line\">Records: <span class=\"number\">3</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_test;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"keyword\">Table</span>   <span class=\"operator\">|</span> <span class=\"keyword\">Create</span> <span class=\"keyword\">Table</span>                                                                                                                                                                                                    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> tb_test <span class=\"operator\">|</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `tb_test` (</span><br><span class=\"line\">  `id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  `name` <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_bin <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB AUTO_INCREMENT<span class=\"operator\">=</span><span class=\"number\">4</span> <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8 <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.05</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> <span class=\"type\">binary</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;CodingCat&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id <span class=\"operator\">|</span> name      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">1</span> <span class=\"operator\">|</span> CodingCat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.05</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>MySQL中，查询条件匹配的时候是否区分大小写？什么情况下区分？什么情况下不区分？遇到需要区分但是没有区分的场景该如何处理？</p>\n<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h2><p>考虑如下场景：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> use test_0705;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;CodingCat&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id <span class=\"operator\">|</span> name      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">1</span> <span class=\"operator\">|</span> CodingCat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">2</span> <span class=\"operator\">|</span> CODINGCAT <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">3</span> <span class=\"operator\">|</span> codingcat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"number\">3</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.02</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>从上图我们看到，查询条件中指定要查询的是<code>name=&#39;CodingCat&#39;</code>，但是结果把<code>CODINGCAT</code>和<code>codingcat</code>一起给查询出来了，可见此查询结果并未区分大小写。</p>\n<h2 id=\"探究\"><a href=\"#探究\" class=\"headerlink\" title=\"探究\"></a>探究</h2><p>我们知道，在MySQL中有排序规则这个概念，排序规则表示在规定的存储的数据编码格式下的比较规则，如是否区分大小写等。针对上面的场景，查看表结构如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show create table tb_test;</span><br><span class=\"line\">+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| Table   | Create Table                                                                                                                                                                |</span><br><span class=\"line\">+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| tb_test | CREATE TABLE &#96;tb_test&#96; (</span><br><span class=\"line\">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  &#96;name&#96; varchar(255) DEFAULT NULL,</span><br><span class=\"line\">  PRIMARY KEY (&#96;id&#96;)</span><br><span class=\"line\">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;4 DEFAULT CHARSET&#x3D;utf8 |</span><br><span class=\"line\">+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">1 row in set (0.04 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>该表继承了数据库的排序规则，数据库建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> <span class=\"keyword\">create</span> database test_0705;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Database  <span class=\"operator\">|</span> <span class=\"keyword\">Create</span> Database                                                    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> test_0705 <span class=\"operator\">|</span> <span class=\"keyword\">CREATE</span> DATABASE `test_0705` <span class=\"comment\">/*!40100 DEFAULT CHARACTER SET utf8 */</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.03</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>从数据库建表语句来看，并没有指定排序规则，则该数据库继承了全局的排序规则，查看数据库的排序规则如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;collation%&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------------------+--------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Variable_name        <span class=\"operator\">|</span> <span class=\"keyword\">Value</span>              <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------------------+--------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> collation_connection <span class=\"operator\">|</span> utf8mb4_general_ci <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> collation_database   <span class=\"operator\">|</span> utf8_general_ci    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> collation_server     <span class=\"operator\">|</span> utf8mb4_general_ci <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------------------+--------------------+</span></span><br><span class=\"line\"><span class=\"number\">3</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.38</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>从全局的配置来看，数据库服务器使用的是<code>utf8mb4_general_ci</code>排序规则，后缀有ci，意思是case insensitive，即大小写不敏感，所以查询出来的结果不区分大小写。</p>\n<p>在MySQL中，排序规则常见有带后缀ci和不带ci两种，如utf8_bin和utf8_genera_ci，带ci表示区分大小写，否则不区分。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>对于上面的问题，如果在设置了字符排序规则是带ci后缀的，但是又想要查询结果是区分大小写，怎么做？有两种解决方法。</p>\n<ul>\n<li><p>查询时在需要区分大小写的字段条件上使用binary关键字</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> <span class=\"type\">binary</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;CodingCat&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id <span class=\"operator\">|</span> name      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">1</span> <span class=\"operator\">|</span> CodingCat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.04</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure></li>\n<li><p>修改表中字段的排序规则</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> tb_test MODIFY <span class=\"keyword\">COLUMN</span> name <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>) <span class=\"type\">BINARY</span> <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_bin <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">3</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.08</span> sec)</span><br><span class=\"line\">Records: <span class=\"number\">3</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_test;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"keyword\">Table</span>   <span class=\"operator\">|</span> <span class=\"keyword\">Create</span> <span class=\"keyword\">Table</span>                                                                                                                                                                                                    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> tb_test <span class=\"operator\">|</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `tb_test` (</span><br><span class=\"line\">  `id` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  `name` <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_bin <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB AUTO_INCREMENT<span class=\"operator\">=</span><span class=\"number\">4</span> <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8 <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.05</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_test <span class=\"keyword\">where</span> <span class=\"type\">binary</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;CodingCat&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id <span class=\"operator\">|</span> name      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>  <span class=\"number\">1</span> <span class=\"operator\">|</span> CodingCat <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----+-----------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.05</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"MySQL性能优化之key_buffer_size","date":"2020-09-22T16:00:00.000Z","description":"MyISAM表中的索引块在所有线程之间缓存和共享，key_buffer_size用来设置索引块使用的缓冲大小，key buffer也称key cache，key buffer用来缓存MyISAM表经常使用的索引。","_content":"\nMyISAM表中的索引块在所有线程之间缓存和共享，key_buffer_size用来设置索引块使用的缓冲大小，key buffer也称key cache，key buffer用来缓存MyISAM表经常使用的索引。\n\n在32位平台上key_buffer_size最大可设置为4294967295B，即4G，64位平台更大。根据操作系统和硬件平台实际可用的RAM，实际生效的值比设置的值偏小。该值的大小即为MySQL申请的内存大小，内部会为该变量尽可能分配内存以达到该值，实际上分配的可能会偏小。\n\n该参数大小决定索引处理的速度，尤其是索引读的速度，在只使用MyISAM存储引擎的数据库中，可以将该值设置为机器总内存的25%，不宜设置过大（大于及其总内存的50% ），这样的话系统会频繁切换内存块（MySQL依赖操作系统缓存来缓存数据，因此需要留点空间给操作系统），导致系统变慢，如果有使用其他的存储引擎，也需要将其他存储引擎的内存使用考虑进去。\n\nkey_buffer_size是个全局参数，只对MyISAM表有作用，因为MySQL中磁盘临时表使用的是MyISAM引擎，因此也需要使用到该值，对于1G内存的机器，如果不使用MyISAM表，推荐值是16M（8-64M）。\n\n可以通过show status，检查Key_read_requests, Key_reads, Key_write_requests, 以及Key_writes 状态变量的值来检查key buffer的性能，正常情况下，Key_reads/Key_read_requests的值应该小于0.01。Key_reads是从磁盘读取索引块到key cache的次数，Key_read_requests是请求读取索引块的次数，Key_reads较大，即Key_reads/Key_read_requests大于0.01时，可以增加key_buffer_size的值使其小于0.01来提升查询性能。更新多的时候Key_writes/Key_write_requests的值接近1，如果更新影响很多行或者使用DELAY_KEY_WRITE表选项时，Key_writes/Key_write_requests的值会更小。\n\n通过公式1 - ((Key_blocks_unused * key_cache_block_size) / key_buffer_size)可以计算出索引块使用率，其中Key_blocks_unused 表示未使用的索引块数key_cache_block_size表示索引块大小。","source":"_posts/MySQL性能优化之key_buffer_size.md","raw":"---\ntitle: MySQL性能优化之key_buffer_size\ncategory: MySQL\ntags:\n- MySQL\ndate: 2020-9-23\ndescription: MyISAM表中的索引块在所有线程之间缓存和共享，key_buffer_size用来设置索引块使用的缓冲大小，key buffer也称key cache，key buffer用来缓存MyISAM表经常使用的索引。\n---\n\nMyISAM表中的索引块在所有线程之间缓存和共享，key_buffer_size用来设置索引块使用的缓冲大小，key buffer也称key cache，key buffer用来缓存MyISAM表经常使用的索引。\n\n在32位平台上key_buffer_size最大可设置为4294967295B，即4G，64位平台更大。根据操作系统和硬件平台实际可用的RAM，实际生效的值比设置的值偏小。该值的大小即为MySQL申请的内存大小，内部会为该变量尽可能分配内存以达到该值，实际上分配的可能会偏小。\n\n该参数大小决定索引处理的速度，尤其是索引读的速度，在只使用MyISAM存储引擎的数据库中，可以将该值设置为机器总内存的25%，不宜设置过大（大于及其总内存的50% ），这样的话系统会频繁切换内存块（MySQL依赖操作系统缓存来缓存数据，因此需要留点空间给操作系统），导致系统变慢，如果有使用其他的存储引擎，也需要将其他存储引擎的内存使用考虑进去。\n\nkey_buffer_size是个全局参数，只对MyISAM表有作用，因为MySQL中磁盘临时表使用的是MyISAM引擎，因此也需要使用到该值，对于1G内存的机器，如果不使用MyISAM表，推荐值是16M（8-64M）。\n\n可以通过show status，检查Key_read_requests, Key_reads, Key_write_requests, 以及Key_writes 状态变量的值来检查key buffer的性能，正常情况下，Key_reads/Key_read_requests的值应该小于0.01。Key_reads是从磁盘读取索引块到key cache的次数，Key_read_requests是请求读取索引块的次数，Key_reads较大，即Key_reads/Key_read_requests大于0.01时，可以增加key_buffer_size的值使其小于0.01来提升查询性能。更新多的时候Key_writes/Key_write_requests的值接近1，如果更新影响很多行或者使用DELAY_KEY_WRITE表选项时，Key_writes/Key_write_requests的值会更小。\n\n通过公式1 - ((Key_blocks_unused * key_cache_block_size) / key_buffer_size)可以计算出索引块使用率，其中Key_blocks_unused 表示未使用的索引块数key_cache_block_size表示索引块大小。","slug":"MySQL性能优化之key_buffer_size","published":1,"updated":"2022-01-01T14:32:15.493Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vg001yhx89hxjob5z6","content":"<p>MyISAM表中的索引块在所有线程之间缓存和共享，key_buffer_size用来设置索引块使用的缓冲大小，key buffer也称key cache，key buffer用来缓存MyISAM表经常使用的索引。</p>\n<p>在32位平台上key_buffer_size最大可设置为4294967295B，即4G，64位平台更大。根据操作系统和硬件平台实际可用的RAM，实际生效的值比设置的值偏小。该值的大小即为MySQL申请的内存大小，内部会为该变量尽可能分配内存以达到该值，实际上分配的可能会偏小。</p>\n<p>该参数大小决定索引处理的速度，尤其是索引读的速度，在只使用MyISAM存储引擎的数据库中，可以将该值设置为机器总内存的25%，不宜设置过大（大于及其总内存的50% ），这样的话系统会频繁切换内存块（MySQL依赖操作系统缓存来缓存数据，因此需要留点空间给操作系统），导致系统变慢，如果有使用其他的存储引擎，也需要将其他存储引擎的内存使用考虑进去。</p>\n<p>key_buffer_size是个全局参数，只对MyISAM表有作用，因为MySQL中磁盘临时表使用的是MyISAM引擎，因此也需要使用到该值，对于1G内存的机器，如果不使用MyISAM表，推荐值是16M（8-64M）。</p>\n<p>可以通过show status，检查Key_read_requests, Key_reads, Key_write_requests, 以及Key_writes 状态变量的值来检查key buffer的性能，正常情况下，Key_reads/Key_read_requests的值应该小于0.01。Key_reads是从磁盘读取索引块到key cache的次数，Key_read_requests是请求读取索引块的次数，Key_reads较大，即Key_reads/Key_read_requests大于0.01时，可以增加key_buffer_size的值使其小于0.01来提升查询性能。更新多的时候Key_writes/Key_write_requests的值接近1，如果更新影响很多行或者使用DELAY_KEY_WRITE表选项时，Key_writes/Key_write_requests的值会更小。</p>\n<p>通过公式1 - ((Key_blocks_unused * key_cache_block_size) / key_buffer_size)可以计算出索引块使用率，其中Key_blocks_unused 表示未使用的索引块数key_cache_block_size表示索引块大小。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<p>MyISAM表中的索引块在所有线程之间缓存和共享，key_buffer_size用来设置索引块使用的缓冲大小，key buffer也称key cache，key buffer用来缓存MyISAM表经常使用的索引。</p>\n<p>在32位平台上key_buffer_size最大可设置为4294967295B，即4G，64位平台更大。根据操作系统和硬件平台实际可用的RAM，实际生效的值比设置的值偏小。该值的大小即为MySQL申请的内存大小，内部会为该变量尽可能分配内存以达到该值，实际上分配的可能会偏小。</p>\n<p>该参数大小决定索引处理的速度，尤其是索引读的速度，在只使用MyISAM存储引擎的数据库中，可以将该值设置为机器总内存的25%，不宜设置过大（大于及其总内存的50% ），这样的话系统会频繁切换内存块（MySQL依赖操作系统缓存来缓存数据，因此需要留点空间给操作系统），导致系统变慢，如果有使用其他的存储引擎，也需要将其他存储引擎的内存使用考虑进去。</p>\n<p>key_buffer_size是个全局参数，只对MyISAM表有作用，因为MySQL中磁盘临时表使用的是MyISAM引擎，因此也需要使用到该值，对于1G内存的机器，如果不使用MyISAM表，推荐值是16M（8-64M）。</p>\n<p>可以通过show status，检查Key_read_requests, Key_reads, Key_write_requests, 以及Key_writes 状态变量的值来检查key buffer的性能，正常情况下，Key_reads/Key_read_requests的值应该小于0.01。Key_reads是从磁盘读取索引块到key cache的次数，Key_read_requests是请求读取索引块的次数，Key_reads较大，即Key_reads/Key_read_requests大于0.01时，可以增加key_buffer_size的值使其小于0.01来提升查询性能。更新多的时候Key_writes/Key_write_requests的值接近1，如果更新影响很多行或者使用DELAY_KEY_WRITE表选项时，Key_writes/Key_write_requests的值会更小。</p>\n<p>通过公式1 - ((Key_blocks_unused * key_cache_block_size) / key_buffer_size)可以计算出索引块使用率，其中Key_blocks_unused 表示未使用的索引块数key_cache_block_size表示索引块大小。</p>\n"},{"title":"Oracle数据库关闭的情况下如何修改参数","date":"2020-10-19T16:00:00.000Z","description":"很多时候由于误操作，修改了某些参数后，重启数据库发现无法启动，需要将参数修改回来或者其他操作后才能正常启动，但是在数据库关闭的情况下，无法使用alter system等命令来修改参数，到底需要怎么做呢？","_content":"\n很多时候由于误操作，修改了某些参数后，重启数据库发现无法启动，需要将参数修改回来或者其他操作后才能正常启动，但是在数据库关闭的情况下，无法使用alter system等命令来修改参数，到底需要怎么做呢？\n\n## 场景\n\n在Oracle中很多参数在修改的时候都有一定的规定，如在设置快速恢复区时，db_recovery_file_dest和db_recovery_file_dest_size需修改后重启数据库，如果只修改了db_recovery_file_dest，db_recovery_file_dest_size并不设定值，则无法重启数据库，启动时报错如下：\n\n```\nSQL> startup \nORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE\n```\n\n由于数据库已关闭，这时候也无法修改参数db_recovery_file_dest_size：\n\n```\nSQL> alter system set db_recovery_file_dest_size=4G scope=spfile;\nalter system set db_recovery_file_dest_size=4G scope=spfile\n*\nERROR at line 1:\nORA-01034: ORACLE not available\nProcess ID: 0\nSession ID: 0 Serial number: 0\n```\n\n## 解决方法\n\n遇到上面类似修改参数之后无法启动数据库的情况，可以通过修改参数文件来解决。在Oracle中，有spfile和pfile两种参数文件，spfile是不可编辑的，正常情况下数据库使用的是spfile，pfile可以编辑，Oracle中可以通过spfile和pfile来相互创建，因此可以通过这个方法来解决此问题。\n\n首先，使用已有的pfile来启动数据库，如果没有，可以根据其他数据库的内容来手动创建：startup pfile=''\n\n启动后，使用create pfile='新的pfile文件' from spfile='原来的spfile文件'，此时的数据库状态不一定非得OPEN。\n\n然后修改新建的pfile文件，确保参数都正确修改，如上面的例子，删除db_recovery_file_dest所在的行\n\n关闭数据库并使用新的pfile文件启动数据库：startup pfile='新的pfile';\n\n创建spfile文件：create spfile='spfile文件' from pfile='新的pfile文件';\n\n关闭数据库，正常启动：startup\n\n## 实战\n\n```\nSQL> show parameter db_recovery            \n\nNAME                                 TYPE        VALUE\n------------------------------------ ----------- ------------------------------\ndb_recovery_file_dest                string\ndb_recovery_file_dest_size           big integer 0\nSQL> alter system set db_recovery_file_dest='/u01/app/oracle/fast_recovery_area' scope=spfile;\n\nSystem altered.\nSQL> shutdown immediate\nDatabase closed.\nDatabase dismounted.\nORACLE instance shut down.\nSQL> startup \nORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE\nSQL> alter system set db_recovery_file_dest_size=4G scope=spfile;\nalter system set db_recovery_file_dest_size=4G scope=spfile\n*\nERROR at line 1:\nORA-01034: ORACLE not available\nProcess ID: 0\nSession ID: 0 Serial number: 0\n\n\nSQL> startup pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init.ora'\nORACLE instance started.\n\nTotal System Global Area 1073737800 bytes\nFixed Size                  8904776 bytes\nVariable Size             616562688 bytes\nDatabase Buffers          440401920 bytes\nRedo Buffers                7868416 bytes\nORA-00205: error in identifying control file, check alert log for more info\n\n\nSQL> select status from v$instance;\n\nSTATUS\n------------\nSTARTED\n\nSQL> create pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora' from spfile='/u01/app/oracle/product/19.3.0/db_1/dbs/spfileorcl.ora';\n\nFile created.\n\nSQL> shutdown immediate \nORA-01507: database not mounted\n\n\nORACLE instance shut down.\nSQL> \n```\n\n修改文件/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora，删除db_recovery_file_dest所在的行。\n\n```\nSQL> startup pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora'\nORACLE instance started.\n\nTotal System Global Area 1593832624 bytes\nFixed Size                  9135280 bytes\nVariable Size             973078528 bytes\nDatabase Buffers          603979776 bytes\nRedo Buffers                7639040 bytes\nDatabase mounted.\nDatabase opened.\n\nSQL> create spfile='/u01/app/oracle/product/19.3.0/db_1/dbs/spfileorcl.ora' from pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora';\n\nFile created.\n\nSQL> \nSQL> shutdown immediate \nDatabase closed.\nDatabase dismounted.\nORACLE instance shut down.\nSQL> startup \nORACLE instance started.\n\nTotal System Global Area 1593832624 bytes\nFixed Size                  9135280 bytes\nVariable Size             973078528 bytes\nDatabase Buffers          603979776 bytes\nRedo Buffers                7639040 bytes\nDatabase mounted.\nDatabase opened.\n```\n\n","source":"_posts/Oracle关闭的情况下如何修改参数.md","raw":"---\ntitle: Oracle数据库关闭的情况下如何修改参数\ncategory: Oracle\ntags:\n\t- Oracle\ndate: 2020-10-20\ndescription: 很多时候由于误操作，修改了某些参数后，重启数据库发现无法启动，需要将参数修改回来或者其他操作后才能正常启动，但是在数据库关闭的情况下，无法使用alter system等命令来修改参数，到底需要怎么做呢？\n---\n\n很多时候由于误操作，修改了某些参数后，重启数据库发现无法启动，需要将参数修改回来或者其他操作后才能正常启动，但是在数据库关闭的情况下，无法使用alter system等命令来修改参数，到底需要怎么做呢？\n\n## 场景\n\n在Oracle中很多参数在修改的时候都有一定的规定，如在设置快速恢复区时，db_recovery_file_dest和db_recovery_file_dest_size需修改后重启数据库，如果只修改了db_recovery_file_dest，db_recovery_file_dest_size并不设定值，则无法重启数据库，启动时报错如下：\n\n```\nSQL> startup \nORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE\n```\n\n由于数据库已关闭，这时候也无法修改参数db_recovery_file_dest_size：\n\n```\nSQL> alter system set db_recovery_file_dest_size=4G scope=spfile;\nalter system set db_recovery_file_dest_size=4G scope=spfile\n*\nERROR at line 1:\nORA-01034: ORACLE not available\nProcess ID: 0\nSession ID: 0 Serial number: 0\n```\n\n## 解决方法\n\n遇到上面类似修改参数之后无法启动数据库的情况，可以通过修改参数文件来解决。在Oracle中，有spfile和pfile两种参数文件，spfile是不可编辑的，正常情况下数据库使用的是spfile，pfile可以编辑，Oracle中可以通过spfile和pfile来相互创建，因此可以通过这个方法来解决此问题。\n\n首先，使用已有的pfile来启动数据库，如果没有，可以根据其他数据库的内容来手动创建：startup pfile=''\n\n启动后，使用create pfile='新的pfile文件' from spfile='原来的spfile文件'，此时的数据库状态不一定非得OPEN。\n\n然后修改新建的pfile文件，确保参数都正确修改，如上面的例子，删除db_recovery_file_dest所在的行\n\n关闭数据库并使用新的pfile文件启动数据库：startup pfile='新的pfile';\n\n创建spfile文件：create spfile='spfile文件' from pfile='新的pfile文件';\n\n关闭数据库，正常启动：startup\n\n## 实战\n\n```\nSQL> show parameter db_recovery            \n\nNAME                                 TYPE        VALUE\n------------------------------------ ----------- ------------------------------\ndb_recovery_file_dest                string\ndb_recovery_file_dest_size           big integer 0\nSQL> alter system set db_recovery_file_dest='/u01/app/oracle/fast_recovery_area' scope=spfile;\n\nSystem altered.\nSQL> shutdown immediate\nDatabase closed.\nDatabase dismounted.\nORACLE instance shut down.\nSQL> startup \nORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE\nSQL> alter system set db_recovery_file_dest_size=4G scope=spfile;\nalter system set db_recovery_file_dest_size=4G scope=spfile\n*\nERROR at line 1:\nORA-01034: ORACLE not available\nProcess ID: 0\nSession ID: 0 Serial number: 0\n\n\nSQL> startup pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init.ora'\nORACLE instance started.\n\nTotal System Global Area 1073737800 bytes\nFixed Size                  8904776 bytes\nVariable Size             616562688 bytes\nDatabase Buffers          440401920 bytes\nRedo Buffers                7868416 bytes\nORA-00205: error in identifying control file, check alert log for more info\n\n\nSQL> select status from v$instance;\n\nSTATUS\n------------\nSTARTED\n\nSQL> create pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora' from spfile='/u01/app/oracle/product/19.3.0/db_1/dbs/spfileorcl.ora';\n\nFile created.\n\nSQL> shutdown immediate \nORA-01507: database not mounted\n\n\nORACLE instance shut down.\nSQL> \n```\n\n修改文件/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora，删除db_recovery_file_dest所在的行。\n\n```\nSQL> startup pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora'\nORACLE instance started.\n\nTotal System Global Area 1593832624 bytes\nFixed Size                  9135280 bytes\nVariable Size             973078528 bytes\nDatabase Buffers          603979776 bytes\nRedo Buffers                7639040 bytes\nDatabase mounted.\nDatabase opened.\n\nSQL> create spfile='/u01/app/oracle/product/19.3.0/db_1/dbs/spfileorcl.ora' from pfile='/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora';\n\nFile created.\n\nSQL> \nSQL> shutdown immediate \nDatabase closed.\nDatabase dismounted.\nORACLE instance shut down.\nSQL> startup \nORACLE instance started.\n\nTotal System Global Area 1593832624 bytes\nFixed Size                  9135280 bytes\nVariable Size             973078528 bytes\nDatabase Buffers          603979776 bytes\nRedo Buffers                7639040 bytes\nDatabase mounted.\nDatabase opened.\n```\n\n","slug":"Oracle关闭的情况下如何修改参数","published":1,"updated":"2022-01-01T14:32:15.498Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vg0022hx89eb83hi95","content":"<p>很多时候由于误操作，修改了某些参数后，重启数据库发现无法启动，需要将参数修改回来或者其他操作后才能正常启动，但是在数据库关闭的情况下，无法使用alter system等命令来修改参数，到底需要怎么做呢？</p>\n<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h2><p>在Oracle中很多参数在修改的时候都有一定的规定，如在设置快速恢复区时，db_recovery_file_dest和db_recovery_file_dest_size需修改后重启数据库，如果只修改了db_recovery_file_dest，db_recovery_file_dest_size并不设定值，则无法重启数据库，启动时报错如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; startup </span><br><span class=\"line\">ORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE</span><br></pre></td></tr></table></figure>\n\n<p>由于数据库已关闭，这时候也无法修改参数db_recovery_file_dest_size：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile;</span><br><span class=\"line\">alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile</span><br><span class=\"line\">*</span><br><span class=\"line\">ERROR at line 1:</span><br><span class=\"line\">ORA-01034: ORACLE not available</span><br><span class=\"line\">Process ID: 0</span><br><span class=\"line\">Session ID: 0 Serial number: 0</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><p>遇到上面类似修改参数之后无法启动数据库的情况，可以通过修改参数文件来解决。在Oracle中，有spfile和pfile两种参数文件，spfile是不可编辑的，正常情况下数据库使用的是spfile，pfile可以编辑，Oracle中可以通过spfile和pfile来相互创建，因此可以通过这个方法来解决此问题。</p>\n<p>首先，使用已有的pfile来启动数据库，如果没有，可以根据其他数据库的内容来手动创建：startup pfile=’’</p>\n<p>启动后，使用create pfile=’新的pfile文件’ from spfile=’原来的spfile文件’，此时的数据库状态不一定非得OPEN。</p>\n<p>然后修改新建的pfile文件，确保参数都正确修改，如上面的例子，删除db_recovery_file_dest所在的行</p>\n<p>关闭数据库并使用新的pfile文件启动数据库：startup pfile=’新的pfile’;</p>\n<p>创建spfile文件：create spfile=’spfile文件’ from pfile=’新的pfile文件’;</p>\n<p>关闭数据库，正常启动：startup</p>\n<h2 id=\"实战\"><a href=\"#实战\" class=\"headerlink\" title=\"实战\"></a>实战</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; show parameter db_recovery            </span><br><span class=\"line\"></span><br><span class=\"line\">NAME                                 TYPE        VALUE</span><br><span class=\"line\">------------------------------------ ----------- ------------------------------</span><br><span class=\"line\">db_recovery_file_dest                string</span><br><span class=\"line\">db_recovery_file_dest_size           big integer 0</span><br><span class=\"line\">SQL&gt; alter system set db_recovery_file_dest&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;fast_recovery_area&#39; scope&#x3D;spfile;</span><br><span class=\"line\"></span><br><span class=\"line\">System altered.</span><br><span class=\"line\">SQL&gt; shutdown immediate</span><br><span class=\"line\">Database closed.</span><br><span class=\"line\">Database dismounted.</span><br><span class=\"line\">ORACLE instance shut down.</span><br><span class=\"line\">SQL&gt; startup </span><br><span class=\"line\">ORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE</span><br><span class=\"line\">SQL&gt; alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile;</span><br><span class=\"line\">alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile</span><br><span class=\"line\">*</span><br><span class=\"line\">ERROR at line 1:</span><br><span class=\"line\">ORA-01034: ORACLE not available</span><br><span class=\"line\">Process ID: 0</span><br><span class=\"line\">Session ID: 0 Serial number: 0</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; startup pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init.ora&#39;</span><br><span class=\"line\">ORACLE instance started.</span><br><span class=\"line\"></span><br><span class=\"line\">Total System Global Area 1073737800 bytes</span><br><span class=\"line\">Fixed Size                  8904776 bytes</span><br><span class=\"line\">Variable Size             616562688 bytes</span><br><span class=\"line\">Database Buffers          440401920 bytes</span><br><span class=\"line\">Redo Buffers                7868416 bytes</span><br><span class=\"line\">ORA-00205: error in identifying control file, check alert log for more info</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; select status from v$instance;</span><br><span class=\"line\"></span><br><span class=\"line\">STATUS</span><br><span class=\"line\">------------</span><br><span class=\"line\">STARTED</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; create pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init-20201020.ora&#39; from spfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;spfileorcl.ora&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">File created.</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; shutdown immediate </span><br><span class=\"line\">ORA-01507: database not mounted</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ORACLE instance shut down.</span><br><span class=\"line\">SQL&gt; </span><br></pre></td></tr></table></figure>\n\n<p>修改文件/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora，删除db_recovery_file_dest所在的行。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; startup pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init-20201020.ora&#39;</span><br><span class=\"line\">ORACLE instance started.</span><br><span class=\"line\"></span><br><span class=\"line\">Total System Global Area 1593832624 bytes</span><br><span class=\"line\">Fixed Size                  9135280 bytes</span><br><span class=\"line\">Variable Size             973078528 bytes</span><br><span class=\"line\">Database Buffers          603979776 bytes</span><br><span class=\"line\">Redo Buffers                7639040 bytes</span><br><span class=\"line\">Database mounted.</span><br><span class=\"line\">Database opened.</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; create spfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;spfileorcl.ora&#39; from pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init-20201020.ora&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">File created.</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; </span><br><span class=\"line\">SQL&gt; shutdown immediate </span><br><span class=\"line\">Database closed.</span><br><span class=\"line\">Database dismounted.</span><br><span class=\"line\">ORACLE instance shut down.</span><br><span class=\"line\">SQL&gt; startup </span><br><span class=\"line\">ORACLE instance started.</span><br><span class=\"line\"></span><br><span class=\"line\">Total System Global Area 1593832624 bytes</span><br><span class=\"line\">Fixed Size                  9135280 bytes</span><br><span class=\"line\">Variable Size             973078528 bytes</span><br><span class=\"line\">Database Buffers          603979776 bytes</span><br><span class=\"line\">Redo Buffers                7639040 bytes</span><br><span class=\"line\">Database mounted.</span><br><span class=\"line\">Database opened.</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<p>很多时候由于误操作，修改了某些参数后，重启数据库发现无法启动，需要将参数修改回来或者其他操作后才能正常启动，但是在数据库关闭的情况下，无法使用alter system等命令来修改参数，到底需要怎么做呢？</p>\n<h2 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h2><p>在Oracle中很多参数在修改的时候都有一定的规定，如在设置快速恢复区时，db_recovery_file_dest和db_recovery_file_dest_size需修改后重启数据库，如果只修改了db_recovery_file_dest，db_recovery_file_dest_size并不设定值，则无法重启数据库，启动时报错如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; startup </span><br><span class=\"line\">ORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE</span><br></pre></td></tr></table></figure>\n\n<p>由于数据库已关闭，这时候也无法修改参数db_recovery_file_dest_size：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile;</span><br><span class=\"line\">alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile</span><br><span class=\"line\">*</span><br><span class=\"line\">ERROR at line 1:</span><br><span class=\"line\">ORA-01034: ORACLE not available</span><br><span class=\"line\">Process ID: 0</span><br><span class=\"line\">Session ID: 0 Serial number: 0</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><p>遇到上面类似修改参数之后无法启动数据库的情况，可以通过修改参数文件来解决。在Oracle中，有spfile和pfile两种参数文件，spfile是不可编辑的，正常情况下数据库使用的是spfile，pfile可以编辑，Oracle中可以通过spfile和pfile来相互创建，因此可以通过这个方法来解决此问题。</p>\n<p>首先，使用已有的pfile来启动数据库，如果没有，可以根据其他数据库的内容来手动创建：startup pfile=’’</p>\n<p>启动后，使用create pfile=’新的pfile文件’ from spfile=’原来的spfile文件’，此时的数据库状态不一定非得OPEN。</p>\n<p>然后修改新建的pfile文件，确保参数都正确修改，如上面的例子，删除db_recovery_file_dest所在的行</p>\n<p>关闭数据库并使用新的pfile文件启动数据库：startup pfile=’新的pfile’;</p>\n<p>创建spfile文件：create spfile=’spfile文件’ from pfile=’新的pfile文件’;</p>\n<p>关闭数据库，正常启动：startup</p>\n<h2 id=\"实战\"><a href=\"#实战\" class=\"headerlink\" title=\"实战\"></a>实战</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; show parameter db_recovery            </span><br><span class=\"line\"></span><br><span class=\"line\">NAME                                 TYPE        VALUE</span><br><span class=\"line\">------------------------------------ ----------- ------------------------------</span><br><span class=\"line\">db_recovery_file_dest                string</span><br><span class=\"line\">db_recovery_file_dest_size           big integer 0</span><br><span class=\"line\">SQL&gt; alter system set db_recovery_file_dest&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;fast_recovery_area&#39; scope&#x3D;spfile;</span><br><span class=\"line\"></span><br><span class=\"line\">System altered.</span><br><span class=\"line\">SQL&gt; shutdown immediate</span><br><span class=\"line\">Database closed.</span><br><span class=\"line\">Database dismounted.</span><br><span class=\"line\">ORACLE instance shut down.</span><br><span class=\"line\">SQL&gt; startup </span><br><span class=\"line\">ORA-19802: cannot use DB_RECOVERY_FILE_DEST without DB_RECOVERY_FILE_DEST_SIZE</span><br><span class=\"line\">SQL&gt; alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile;</span><br><span class=\"line\">alter system set db_recovery_file_dest_size&#x3D;4G scope&#x3D;spfile</span><br><span class=\"line\">*</span><br><span class=\"line\">ERROR at line 1:</span><br><span class=\"line\">ORA-01034: ORACLE not available</span><br><span class=\"line\">Process ID: 0</span><br><span class=\"line\">Session ID: 0 Serial number: 0</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; startup pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init.ora&#39;</span><br><span class=\"line\">ORACLE instance started.</span><br><span class=\"line\"></span><br><span class=\"line\">Total System Global Area 1073737800 bytes</span><br><span class=\"line\">Fixed Size                  8904776 bytes</span><br><span class=\"line\">Variable Size             616562688 bytes</span><br><span class=\"line\">Database Buffers          440401920 bytes</span><br><span class=\"line\">Redo Buffers                7868416 bytes</span><br><span class=\"line\">ORA-00205: error in identifying control file, check alert log for more info</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; select status from v$instance;</span><br><span class=\"line\"></span><br><span class=\"line\">STATUS</span><br><span class=\"line\">------------</span><br><span class=\"line\">STARTED</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; create pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init-20201020.ora&#39; from spfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;spfileorcl.ora&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">File created.</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; shutdown immediate </span><br><span class=\"line\">ORA-01507: database not mounted</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ORACLE instance shut down.</span><br><span class=\"line\">SQL&gt; </span><br></pre></td></tr></table></figure>\n\n<p>修改文件/u01/app/oracle/product/19.3.0/db_1/dbs/init-20201020.ora，删除db_recovery_file_dest所在的行。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; startup pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init-20201020.ora&#39;</span><br><span class=\"line\">ORACLE instance started.</span><br><span class=\"line\"></span><br><span class=\"line\">Total System Global Area 1593832624 bytes</span><br><span class=\"line\">Fixed Size                  9135280 bytes</span><br><span class=\"line\">Variable Size             973078528 bytes</span><br><span class=\"line\">Database Buffers          603979776 bytes</span><br><span class=\"line\">Redo Buffers                7639040 bytes</span><br><span class=\"line\">Database mounted.</span><br><span class=\"line\">Database opened.</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; create spfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;spfileorcl.ora&#39; from pfile&#x3D;&#39;&#x2F;u01&#x2F;app&#x2F;oracle&#x2F;product&#x2F;19.3.0&#x2F;db_1&#x2F;dbs&#x2F;init-20201020.ora&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">File created.</span><br><span class=\"line\"></span><br><span class=\"line\">SQL&gt; </span><br><span class=\"line\">SQL&gt; shutdown immediate </span><br><span class=\"line\">Database closed.</span><br><span class=\"line\">Database dismounted.</span><br><span class=\"line\">ORACLE instance shut down.</span><br><span class=\"line\">SQL&gt; startup </span><br><span class=\"line\">ORACLE instance started.</span><br><span class=\"line\"></span><br><span class=\"line\">Total System Global Area 1593832624 bytes</span><br><span class=\"line\">Fixed Size                  9135280 bytes</span><br><span class=\"line\">Variable Size             973078528 bytes</span><br><span class=\"line\">Database Buffers          603979776 bytes</span><br><span class=\"line\">Redo Buffers                7639040 bytes</span><br><span class=\"line\">Database mounted.</span><br><span class=\"line\">Database opened.</span><br></pre></td></tr></table></figure>\n\n"},{"title":"冒泡算法的Python实现","date":"2021-07-01T07:33:59.000Z","top_img":"2021/07/01/Python算法之冒泡排序/1604599205.jpg","cover":"2021/07/01/Python算法之冒泡排序/1604599205.jpg","description":"算法是程序设计的基础，在诸多算法之中，排序算法是我们接触比较多的算法。冒泡算法是十大排序算法之一，比较常见，在面试中经常会被问到。","_content":"\n算法是程序设计的基础，在诸多算法之中，排序算法是我们接触比较多的算法。冒泡算法是十大排序算法之一，比较常见，在面试中经常会被问到。\n\n## 原理\n\n冒泡算法原理是十大排序算法之一，比较常见。其原理是重复地走访要排序的数列，一次比较相邻两个元素，如果元素位置错误，则交换位置，直到没有数据需要交换为止。\n\n冒泡排序中，最大的元素在每一次排序后都会跑到数列右端，就像开水中的水泡网上冒一样，最大的泡先冒出来。\n\n冒泡排序也叫下沉排序，此时是将小的元素往右移，即每趟排序都将数组内的最小元素移到数组最左端。\n\n## 步骤\n\n1. 遍历数组，比较相邻两个元素，如果第一个大于第二个，则交换位置；\n2. 对每一对相邻的元素做同样的动作，从开始第一对到最后一对，完成后，最大的元素将跑到数组的最右端，完成第一趟排序；\n3. 对所有元素重复上面的步骤，除了最后一个；\n4. 重复上面的步骤，每次排序的元素将越来越少，直到没有元素需要比较为止。\n\n## 图解\n\n![冒泡排序](冒泡排序.gif)\n\n## 实现\n\n冒泡排序使用Python实现如下:\n\n```python\ndef bubble_sort(array):\n    length = len(array)\n    for index in range(length):\n        for i in range(1, length-index):\n            if array[i-1] > array[i]:\n                array[i-1], array[i] = array[i], array[i - 1]\n    return array\n\n\nl = [16, 5, 8, 15, 7, 9, 19, 18, 3, 6, 49]\nprint(bubble_sort(l))\n```\n\n对于上面的代码，如果要排序的数组本身是有序的，也会老老实实的跑完n趟（n为数组中元素个数），但是这种情况下，是不必要的，因此可加一个标志，如果已经是有序的，即没有元素交换，则结束排序过程：\n\n```python\ndef bubble_sort(array):\n    length = len(array)\n    for index in range(length):\n        flag = True\n        for i in range(1, length-index):\n            if array[i-1] > array[i]:\n                array[i-1], array[i] = array[i], array[i - 1]\n                flag = False\n        if flag:\n            return array\n    return array\n\n\nl = [16, 5, 8, 15, 7, 9, 19, 18, 3, 6, 49]\nprint(bubble_sort(l))\n```\n\n","source":"_posts/Python算法之冒泡排序.md","raw":"---\ntitle: 冒泡算法的Python实现\ndate: 2021-07-01 15:33:59\ntags:\n  - 排序算法\n  - 冒泡排序\ncategory: 算法\ntop_img: 1604599205.jpg\ncover: 1604599205.jpg\ndescription: 算法是程序设计的基础，在诸多算法之中，排序算法是我们接触比较多的算法。冒泡算法是十大排序算法之一，比较常见，在面试中经常会被问到。\n---\n\n算法是程序设计的基础，在诸多算法之中，排序算法是我们接触比较多的算法。冒泡算法是十大排序算法之一，比较常见，在面试中经常会被问到。\n\n## 原理\n\n冒泡算法原理是十大排序算法之一，比较常见。其原理是重复地走访要排序的数列，一次比较相邻两个元素，如果元素位置错误，则交换位置，直到没有数据需要交换为止。\n\n冒泡排序中，最大的元素在每一次排序后都会跑到数列右端，就像开水中的水泡网上冒一样，最大的泡先冒出来。\n\n冒泡排序也叫下沉排序，此时是将小的元素往右移，即每趟排序都将数组内的最小元素移到数组最左端。\n\n## 步骤\n\n1. 遍历数组，比较相邻两个元素，如果第一个大于第二个，则交换位置；\n2. 对每一对相邻的元素做同样的动作，从开始第一对到最后一对，完成后，最大的元素将跑到数组的最右端，完成第一趟排序；\n3. 对所有元素重复上面的步骤，除了最后一个；\n4. 重复上面的步骤，每次排序的元素将越来越少，直到没有元素需要比较为止。\n\n## 图解\n\n![冒泡排序](冒泡排序.gif)\n\n## 实现\n\n冒泡排序使用Python实现如下:\n\n```python\ndef bubble_sort(array):\n    length = len(array)\n    for index in range(length):\n        for i in range(1, length-index):\n            if array[i-1] > array[i]:\n                array[i-1], array[i] = array[i], array[i - 1]\n    return array\n\n\nl = [16, 5, 8, 15, 7, 9, 19, 18, 3, 6, 49]\nprint(bubble_sort(l))\n```\n\n对于上面的代码，如果要排序的数组本身是有序的，也会老老实实的跑完n趟（n为数组中元素个数），但是这种情况下，是不必要的，因此可加一个标志，如果已经是有序的，即没有元素交换，则结束排序过程：\n\n```python\ndef bubble_sort(array):\n    length = len(array)\n    for index in range(length):\n        flag = True\n        for i in range(1, length-index):\n            if array[i-1] > array[i]:\n                array[i-1], array[i] = array[i], array[i - 1]\n                flag = False\n        if flag:\n            return array\n    return array\n\n\nl = [16, 5, 8, 15, 7, 9, 19, 18, 3, 6, 49]\nprint(bubble_sort(l))\n```\n\n","slug":"Python算法之冒泡排序","published":1,"updated":"2022-01-01T14:32:15.499Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vh0025hx895d9mekql","content":"<p>算法是程序设计的基础，在诸多算法之中，排序算法是我们接触比较多的算法。冒泡算法是十大排序算法之一，比较常见，在面试中经常会被问到。</p>\n<h2 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h2><p>冒泡算法原理是十大排序算法之一，比较常见。其原理是重复地走访要排序的数列，一次比较相邻两个元素，如果元素位置错误，则交换位置，直到没有数据需要交换为止。</p>\n<p>冒泡排序中，最大的元素在每一次排序后都会跑到数列右端，就像开水中的水泡网上冒一样，最大的泡先冒出来。</p>\n<p>冒泡排序也叫下沉排序，此时是将小的元素往右移，即每趟排序都将数组内的最小元素移到数组最左端。</p>\n<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2><ol>\n<li>遍历数组，比较相邻两个元素，如果第一个大于第二个，则交换位置；</li>\n<li>对每一对相邻的元素做同样的动作，从开始第一对到最后一对，完成后，最大的元素将跑到数组的最右端，完成第一趟排序；</li>\n<li>对所有元素重复上面的步骤，除了最后一个；</li>\n<li>重复上面的步骤，每次排序的元素将越来越少，直到没有元素需要比较为止。</li>\n</ol>\n<h2 id=\"图解\"><a href=\"#图解\" class=\"headerlink\" title=\"图解\"></a>图解</h2><p><img src=\"%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.gif\" alt=\"冒泡排序\"></p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><p>冒泡排序使用Python实现如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bubble_sort</span>(<span class=\"params\">array</span>):</span></span><br><span class=\"line\">    length = <span class=\"built_in\">len</span>(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(length):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, length-index):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> array[i-<span class=\"number\">1</span>] &gt; array[i]:</span><br><span class=\"line\">                array[i-<span class=\"number\">1</span>], array[i] = array[i], array[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">l = [<span class=\"number\">16</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">15</span>, <span class=\"number\">7</span>, <span class=\"number\">9</span>, <span class=\"number\">19</span>, <span class=\"number\">18</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">49</span>]</span><br><span class=\"line\">print(bubble_sort(l))</span><br></pre></td></tr></table></figure>\n\n<p>对于上面的代码，如果要排序的数组本身是有序的，也会老老实实的跑完n趟（n为数组中元素个数），但是这种情况下，是不必要的，因此可加一个标志，如果已经是有序的，即没有元素交换，则结束排序过程：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bubble_sort</span>(<span class=\"params\">array</span>):</span></span><br><span class=\"line\">    length = <span class=\"built_in\">len</span>(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(length):</span><br><span class=\"line\">        flag = <span class=\"literal\">True</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, length-index):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> array[i-<span class=\"number\">1</span>] &gt; array[i]:</span><br><span class=\"line\">                array[i-<span class=\"number\">1</span>], array[i] = array[i], array[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">                flag = <span class=\"literal\">False</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> flag:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> array</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">l = [<span class=\"number\">16</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">15</span>, <span class=\"number\">7</span>, <span class=\"number\">9</span>, <span class=\"number\">19</span>, <span class=\"number\">18</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">49</span>]</span><br><span class=\"line\">print(bubble_sort(l))</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>算法是程序设计的基础，在诸多算法之中，排序算法是我们接触比较多的算法。冒泡算法是十大排序算法之一，比较常见，在面试中经常会被问到。</p>\n<h2 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h2><p>冒泡算法原理是十大排序算法之一，比较常见。其原理是重复地走访要排序的数列，一次比较相邻两个元素，如果元素位置错误，则交换位置，直到没有数据需要交换为止。</p>\n<p>冒泡排序中，最大的元素在每一次排序后都会跑到数列右端，就像开水中的水泡网上冒一样，最大的泡先冒出来。</p>\n<p>冒泡排序也叫下沉排序，此时是将小的元素往右移，即每趟排序都将数组内的最小元素移到数组最左端。</p>\n<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2><ol>\n<li>遍历数组，比较相邻两个元素，如果第一个大于第二个，则交换位置；</li>\n<li>对每一对相邻的元素做同样的动作，从开始第一对到最后一对，完成后，最大的元素将跑到数组的最右端，完成第一趟排序；</li>\n<li>对所有元素重复上面的步骤，除了最后一个；</li>\n<li>重复上面的步骤，每次排序的元素将越来越少，直到没有元素需要比较为止。</li>\n</ol>\n<h2 id=\"图解\"><a href=\"#图解\" class=\"headerlink\" title=\"图解\"></a>图解</h2><p><img src=\"%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.gif\" alt=\"冒泡排序\"></p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><p>冒泡排序使用Python实现如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bubble_sort</span>(<span class=\"params\">array</span>):</span></span><br><span class=\"line\">    length = <span class=\"built_in\">len</span>(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(length):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, length-index):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> array[i-<span class=\"number\">1</span>] &gt; array[i]:</span><br><span class=\"line\">                array[i-<span class=\"number\">1</span>], array[i] = array[i], array[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">l = [<span class=\"number\">16</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">15</span>, <span class=\"number\">7</span>, <span class=\"number\">9</span>, <span class=\"number\">19</span>, <span class=\"number\">18</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">49</span>]</span><br><span class=\"line\">print(bubble_sort(l))</span><br></pre></td></tr></table></figure>\n\n<p>对于上面的代码，如果要排序的数组本身是有序的，也会老老实实的跑完n趟（n为数组中元素个数），但是这种情况下，是不必要的，因此可加一个标志，如果已经是有序的，即没有元素交换，则结束排序过程：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bubble_sort</span>(<span class=\"params\">array</span>):</span></span><br><span class=\"line\">    length = <span class=\"built_in\">len</span>(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(length):</span><br><span class=\"line\">        flag = <span class=\"literal\">True</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, length-index):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> array[i-<span class=\"number\">1</span>] &gt; array[i]:</span><br><span class=\"line\">                array[i-<span class=\"number\">1</span>], array[i] = array[i], array[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">                flag = <span class=\"literal\">False</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> flag:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> array</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">l = [<span class=\"number\">16</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">15</span>, <span class=\"number\">7</span>, <span class=\"number\">9</span>, <span class=\"number\">19</span>, <span class=\"number\">18</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">49</span>]</span><br><span class=\"line\">print(bubble_sort(l))</span><br></pre></td></tr></table></figure>\n\n"},{"title":"MySQL索引介绍","date":"2020-10-09T07:14:32.000Z","description":"一般情况下，数据库做了两件事情：存储数据和检索数据。检索数据是数据库中使用最多的一个功能。本篇文主要讨论MySQL数据库中InnoDB存储引擎下的索引的原理和使用。","_content":"\n一般情况下，数据库做了两件事情：存储数据和检索数据。检索数据是数据库中使用最多的一个功能。本篇文主要讨论MySQL数据库中InnoDB存储引擎下的索引的原理和使用。本文主要从以下几个方面展开：\n\n{% asset_img 文章大纲.png 文章大纲 %}\n\n## 索引的概念\n\nMySQL官方对索引的解释是这样的，原文如下：\n\nIndexes are used to find rows with specific column values quickly. Without an index, MySQL must begin with the first row and then read through the entire table to find the relevant rows. The larger the table, the more this costs. If the table has an index for the columns in question, MySQL can quickly determine the position to seek to in the middle of the data file without having to look at all the data. This is much faster than reading every row sequentially.\n\n翻译如下：\n\n索引是用来快速查找特定列为具体的值的行的。没有索引，MySQL必须从头到尾扫描整张表来找打相关的行。表越大，消耗越大。如果查询列上有索引，MySQL能够快速的确定要查找数据所在数据文件的具体位置而不用扫描所有数据，这比按顺序读取每一行数据快很多。\n\n简单的来说，索引就像书本的目录，通过目录可以快速的确定要查找内容的具体位置。通过索引，加快查询速度，降低查询消耗。\n\nMySQL中的索引是存储引擎实现的，每种存储引擎使用的索引不同。以下只讨论InnoDB中的索引。\n\n## InnoDB索引原理\n\nInnoDB 使用了 B+ 树索引模型，所以数据都是存储在 B+树中的。每一个索引在 InnoDB 里面对应一棵 B+ 树。数据存储在叶子节点上。详细结构如下：\n\n![B+树索引结构](B+树索引结构.jpg)\n\n## 索引的分类\n\n索引可以有很多类型，如聚簇索引、非聚簇索引、唯一索引、复合索引、全文索引、空间索引等，在此只讨论聚簇索引和非聚簇索引。\n\n### 聚簇索引\n\n在InnoDB表中，数据是按照主键索引的顺序来组织的，这种表称为索引组织表，而主键索引称为聚簇索引。创建表后，如果表上有主键，则聚簇索引就是主键索引，否则使用非空唯一索引来创建聚簇索引，没有主键也没有非空唯一索引，InnoDB会创建一个隐藏的自增ID来作为聚簇索引的字段。一张表只能有一个聚簇索引。\n\n聚簇索引的非叶子节点存放每一个键的值，叶子节点存放每一行的数据。\n\n### 辅助索引\n\n除了聚簇索引之外的索引都可以称为辅助索引，辅助索引和聚簇索引的区别在于，辅助索引的叶子节点存储的是主键的键值，一张表可以有多个辅助索引。使用辅助索引来查找数据时，一般需要经过两个过程：一是通过辅助索引查找到对应的主键值，二是通过主键值去查找到需要的数据，这个过程称为回表。当创建的索引上包含多个字段，覆盖了要查找的字段时，查询不需要回表就可以查询到需要的数据，这种索引称为覆盖索引。\n\n## 索引的优缺点\n\n### 优点\n\n- 提高数据检索的效率,降低数据库的IO成本\n\n  在数据库查询的过程中，本质上是尽量减少查找的数据量，降低磁盘IO来提高查询的效率。\n\n- 通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗。\n\n  当对数据进行排序时，如果排序字段没有索引，将消耗大量的CPU来进行排序操作。数据库较大的情况下甚至会使用磁盘来进行排序，查询效率低下。\n\n### 缺点\n\n- 索引会占用磁盘空间\n\n  索引也是一张表，表中保存了主键和索引字段，\n\n- 降低更新效率\n\n  在对表做更新操作的时候，MySQL不仅要保存数据，还需要保存索引，每次更新有索引的字段，都会因为更新的键值改变索引的信息。\n\n## 如何利用索引来优化查询\n\n既然索引可以提高查询效率，那是否在所有列上都建立索引就可以了？答案是不一定。并不是所有的索引都能够提高查询效率。那如何建立合适的索引来提高查询效率？\n\n索引的建立需要符合以下原则：\n\n- 查询频次较高，且数据量较大的表\n- 尽量使用唯一索引\n- 选择区分度较高的列建立索引\n- 对于建立索引的表，更新不应频繁\n- 选择索引列时应选择where条件或者on子句中使用的字段\n- 可以使用覆盖索引，避免回表操作\n- 表记录较少（如配置表）或者字段区分度较低（如性别）时不应建立索引\n- 字段值较长时不建议建立索引（可以考虑建立前缀索引）\n- 查询中的排序字段应该创建索引\n\n\n\n\n\n\n\n","source":"_posts/MySQL索引介绍.md","raw":"---\ntitle: MySQL索引介绍\ndate: 2020-10-09 15:14:32\ntags:\n\t- MySQL\ncategory: MySQL\ndescription: 一般情况下，数据库做了两件事情：存储数据和检索数据。检索数据是数据库中使用最多的一个功能。本篇文主要讨论MySQL数据库中InnoDB存储引擎下的索引的原理和使用。\n---\n\n一般情况下，数据库做了两件事情：存储数据和检索数据。检索数据是数据库中使用最多的一个功能。本篇文主要讨论MySQL数据库中InnoDB存储引擎下的索引的原理和使用。本文主要从以下几个方面展开：\n\n{% asset_img 文章大纲.png 文章大纲 %}\n\n## 索引的概念\n\nMySQL官方对索引的解释是这样的，原文如下：\n\nIndexes are used to find rows with specific column values quickly. Without an index, MySQL must begin with the first row and then read through the entire table to find the relevant rows. The larger the table, the more this costs. If the table has an index for the columns in question, MySQL can quickly determine the position to seek to in the middle of the data file without having to look at all the data. This is much faster than reading every row sequentially.\n\n翻译如下：\n\n索引是用来快速查找特定列为具体的值的行的。没有索引，MySQL必须从头到尾扫描整张表来找打相关的行。表越大，消耗越大。如果查询列上有索引，MySQL能够快速的确定要查找数据所在数据文件的具体位置而不用扫描所有数据，这比按顺序读取每一行数据快很多。\n\n简单的来说，索引就像书本的目录，通过目录可以快速的确定要查找内容的具体位置。通过索引，加快查询速度，降低查询消耗。\n\nMySQL中的索引是存储引擎实现的，每种存储引擎使用的索引不同。以下只讨论InnoDB中的索引。\n\n## InnoDB索引原理\n\nInnoDB 使用了 B+ 树索引模型，所以数据都是存储在 B+树中的。每一个索引在 InnoDB 里面对应一棵 B+ 树。数据存储在叶子节点上。详细结构如下：\n\n![B+树索引结构](B+树索引结构.jpg)\n\n## 索引的分类\n\n索引可以有很多类型，如聚簇索引、非聚簇索引、唯一索引、复合索引、全文索引、空间索引等，在此只讨论聚簇索引和非聚簇索引。\n\n### 聚簇索引\n\n在InnoDB表中，数据是按照主键索引的顺序来组织的，这种表称为索引组织表，而主键索引称为聚簇索引。创建表后，如果表上有主键，则聚簇索引就是主键索引，否则使用非空唯一索引来创建聚簇索引，没有主键也没有非空唯一索引，InnoDB会创建一个隐藏的自增ID来作为聚簇索引的字段。一张表只能有一个聚簇索引。\n\n聚簇索引的非叶子节点存放每一个键的值，叶子节点存放每一行的数据。\n\n### 辅助索引\n\n除了聚簇索引之外的索引都可以称为辅助索引，辅助索引和聚簇索引的区别在于，辅助索引的叶子节点存储的是主键的键值，一张表可以有多个辅助索引。使用辅助索引来查找数据时，一般需要经过两个过程：一是通过辅助索引查找到对应的主键值，二是通过主键值去查找到需要的数据，这个过程称为回表。当创建的索引上包含多个字段，覆盖了要查找的字段时，查询不需要回表就可以查询到需要的数据，这种索引称为覆盖索引。\n\n## 索引的优缺点\n\n### 优点\n\n- 提高数据检索的效率,降低数据库的IO成本\n\n  在数据库查询的过程中，本质上是尽量减少查找的数据量，降低磁盘IO来提高查询的效率。\n\n- 通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗。\n\n  当对数据进行排序时，如果排序字段没有索引，将消耗大量的CPU来进行排序操作。数据库较大的情况下甚至会使用磁盘来进行排序，查询效率低下。\n\n### 缺点\n\n- 索引会占用磁盘空间\n\n  索引也是一张表，表中保存了主键和索引字段，\n\n- 降低更新效率\n\n  在对表做更新操作的时候，MySQL不仅要保存数据，还需要保存索引，每次更新有索引的字段，都会因为更新的键值改变索引的信息。\n\n## 如何利用索引来优化查询\n\n既然索引可以提高查询效率，那是否在所有列上都建立索引就可以了？答案是不一定。并不是所有的索引都能够提高查询效率。那如何建立合适的索引来提高查询效率？\n\n索引的建立需要符合以下原则：\n\n- 查询频次较高，且数据量较大的表\n- 尽量使用唯一索引\n- 选择区分度较高的列建立索引\n- 对于建立索引的表，更新不应频繁\n- 选择索引列时应选择where条件或者on子句中使用的字段\n- 可以使用覆盖索引，避免回表操作\n- 表记录较少（如配置表）或者字段区分度较低（如性别）时不应建立索引\n- 字段值较长时不建议建立索引（可以考虑建立前缀索引）\n- 查询中的排序字段应该创建索引\n\n\n\n\n\n\n\n","slug":"MySQL索引介绍","published":1,"updated":"2022-01-01T14:32:15.495Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vi002ahx89232j1d68","content":"<p>一般情况下，数据库做了两件事情：存储数据和检索数据。检索数据是数据库中使用最多的一个功能。本篇文主要讨论MySQL数据库中InnoDB存储引擎下的索引的原理和使用。本文主要从以下几个方面展开：</p>\n<img src=\"/2020/10/09/MySQL%E7%B4%A2%E5%BC%95%E4%BB%8B%E7%BB%8D/%E6%96%87%E7%AB%A0%E5%A4%A7%E7%BA%B2.png\" class=\"\" title=\"文章大纲\">\n\n<h2 id=\"索引的概念\"><a href=\"#索引的概念\" class=\"headerlink\" title=\"索引的概念\"></a>索引的概念</h2><p>MySQL官方对索引的解释是这样的，原文如下：</p>\n<p>Indexes are used to find rows with specific column values quickly. Without an index, MySQL must begin with the first row and then read through the entire table to find the relevant rows. The larger the table, the more this costs. If the table has an index for the columns in question, MySQL can quickly determine the position to seek to in the middle of the data file without having to look at all the data. This is much faster than reading every row sequentially.</p>\n<p>翻译如下：</p>\n<p>索引是用来快速查找特定列为具体的值的行的。没有索引，MySQL必须从头到尾扫描整张表来找打相关的行。表越大，消耗越大。如果查询列上有索引，MySQL能够快速的确定要查找数据所在数据文件的具体位置而不用扫描所有数据，这比按顺序读取每一行数据快很多。</p>\n<p>简单的来说，索引就像书本的目录，通过目录可以快速的确定要查找内容的具体位置。通过索引，加快查询速度，降低查询消耗。</p>\n<p>MySQL中的索引是存储引擎实现的，每种存储引擎使用的索引不同。以下只讨论InnoDB中的索引。</p>\n<h2 id=\"InnoDB索引原理\"><a href=\"#InnoDB索引原理\" class=\"headerlink\" title=\"InnoDB索引原理\"></a>InnoDB索引原理</h2><p>InnoDB 使用了 B+ 树索引模型，所以数据都是存储在 B+树中的。每一个索引在 InnoDB 里面对应一棵 B+ 树。数据存储在叶子节点上。详细结构如下：</p>\n<p><img src=\"B+%E6%A0%91%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84.jpg\" alt=\"B+树索引结构\"></p>\n<h2 id=\"索引的分类\"><a href=\"#索引的分类\" class=\"headerlink\" title=\"索引的分类\"></a>索引的分类</h2><p>索引可以有很多类型，如聚簇索引、非聚簇索引、唯一索引、复合索引、全文索引、空间索引等，在此只讨论聚簇索引和非聚簇索引。</p>\n<h3 id=\"聚簇索引\"><a href=\"#聚簇索引\" class=\"headerlink\" title=\"聚簇索引\"></a>聚簇索引</h3><p>在InnoDB表中，数据是按照主键索引的顺序来组织的，这种表称为索引组织表，而主键索引称为聚簇索引。创建表后，如果表上有主键，则聚簇索引就是主键索引，否则使用非空唯一索引来创建聚簇索引，没有主键也没有非空唯一索引，InnoDB会创建一个隐藏的自增ID来作为聚簇索引的字段。一张表只能有一个聚簇索引。</p>\n<p>聚簇索引的非叶子节点存放每一个键的值，叶子节点存放每一行的数据。</p>\n<h3 id=\"辅助索引\"><a href=\"#辅助索引\" class=\"headerlink\" title=\"辅助索引\"></a>辅助索引</h3><p>除了聚簇索引之外的索引都可以称为辅助索引，辅助索引和聚簇索引的区别在于，辅助索引的叶子节点存储的是主键的键值，一张表可以有多个辅助索引。使用辅助索引来查找数据时，一般需要经过两个过程：一是通过辅助索引查找到对应的主键值，二是通过主键值去查找到需要的数据，这个过程称为回表。当创建的索引上包含多个字段，覆盖了要查找的字段时，查询不需要回表就可以查询到需要的数据，这种索引称为覆盖索引。</p>\n<h2 id=\"索引的优缺点\"><a href=\"#索引的优缺点\" class=\"headerlink\" title=\"索引的优缺点\"></a>索引的优缺点</h2><h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><ul>\n<li><p>提高数据检索的效率,降低数据库的IO成本</p>\n<p>在数据库查询的过程中，本质上是尽量减少查找的数据量，降低磁盘IO来提高查询的效率。</p>\n</li>\n<li><p>通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗。</p>\n<p>当对数据进行排序时，如果排序字段没有索引，将消耗大量的CPU来进行排序操作。数据库较大的情况下甚至会使用磁盘来进行排序，查询效率低下。</p>\n</li>\n</ul>\n<h3 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h3><ul>\n<li><p>索引会占用磁盘空间</p>\n<p>索引也是一张表，表中保存了主键和索引字段，</p>\n</li>\n<li><p>降低更新效率</p>\n<p>在对表做更新操作的时候，MySQL不仅要保存数据，还需要保存索引，每次更新有索引的字段，都会因为更新的键值改变索引的信息。</p>\n</li>\n</ul>\n<h2 id=\"如何利用索引来优化查询\"><a href=\"#如何利用索引来优化查询\" class=\"headerlink\" title=\"如何利用索引来优化查询\"></a>如何利用索引来优化查询</h2><p>既然索引可以提高查询效率，那是否在所有列上都建立索引就可以了？答案是不一定。并不是所有的索引都能够提高查询效率。那如何建立合适的索引来提高查询效率？</p>\n<p>索引的建立需要符合以下原则：</p>\n<ul>\n<li>查询频次较高，且数据量较大的表</li>\n<li>尽量使用唯一索引</li>\n<li>选择区分度较高的列建立索引</li>\n<li>对于建立索引的表，更新不应频繁</li>\n<li>选择索引列时应选择where条件或者on子句中使用的字段</li>\n<li>可以使用覆盖索引，避免回表操作</li>\n<li>表记录较少（如配置表）或者字段区分度较低（如性别）时不应建立索引</li>\n<li>字段值较长时不建议建立索引（可以考虑建立前缀索引）</li>\n<li>查询中的排序字段应该创建索引</li>\n</ul>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<p>一般情况下，数据库做了两件事情：存储数据和检索数据。检索数据是数据库中使用最多的一个功能。本篇文主要讨论MySQL数据库中InnoDB存储引擎下的索引的原理和使用。本文主要从以下几个方面展开：</p>\n<img src=\"/2020/10/09/MySQL%E7%B4%A2%E5%BC%95%E4%BB%8B%E7%BB%8D/%E6%96%87%E7%AB%A0%E5%A4%A7%E7%BA%B2.png\" class=\"\" title=\"文章大纲\">\n\n<h2 id=\"索引的概念\"><a href=\"#索引的概念\" class=\"headerlink\" title=\"索引的概念\"></a>索引的概念</h2><p>MySQL官方对索引的解释是这样的，原文如下：</p>\n<p>Indexes are used to find rows with specific column values quickly. Without an index, MySQL must begin with the first row and then read through the entire table to find the relevant rows. The larger the table, the more this costs. If the table has an index for the columns in question, MySQL can quickly determine the position to seek to in the middle of the data file without having to look at all the data. This is much faster than reading every row sequentially.</p>\n<p>翻译如下：</p>\n<p>索引是用来快速查找特定列为具体的值的行的。没有索引，MySQL必须从头到尾扫描整张表来找打相关的行。表越大，消耗越大。如果查询列上有索引，MySQL能够快速的确定要查找数据所在数据文件的具体位置而不用扫描所有数据，这比按顺序读取每一行数据快很多。</p>\n<p>简单的来说，索引就像书本的目录，通过目录可以快速的确定要查找内容的具体位置。通过索引，加快查询速度，降低查询消耗。</p>\n<p>MySQL中的索引是存储引擎实现的，每种存储引擎使用的索引不同。以下只讨论InnoDB中的索引。</p>\n<h2 id=\"InnoDB索引原理\"><a href=\"#InnoDB索引原理\" class=\"headerlink\" title=\"InnoDB索引原理\"></a>InnoDB索引原理</h2><p>InnoDB 使用了 B+ 树索引模型，所以数据都是存储在 B+树中的。每一个索引在 InnoDB 里面对应一棵 B+ 树。数据存储在叶子节点上。详细结构如下：</p>\n<p><img src=\"B+%E6%A0%91%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84.jpg\" alt=\"B+树索引结构\"></p>\n<h2 id=\"索引的分类\"><a href=\"#索引的分类\" class=\"headerlink\" title=\"索引的分类\"></a>索引的分类</h2><p>索引可以有很多类型，如聚簇索引、非聚簇索引、唯一索引、复合索引、全文索引、空间索引等，在此只讨论聚簇索引和非聚簇索引。</p>\n<h3 id=\"聚簇索引\"><a href=\"#聚簇索引\" class=\"headerlink\" title=\"聚簇索引\"></a>聚簇索引</h3><p>在InnoDB表中，数据是按照主键索引的顺序来组织的，这种表称为索引组织表，而主键索引称为聚簇索引。创建表后，如果表上有主键，则聚簇索引就是主键索引，否则使用非空唯一索引来创建聚簇索引，没有主键也没有非空唯一索引，InnoDB会创建一个隐藏的自增ID来作为聚簇索引的字段。一张表只能有一个聚簇索引。</p>\n<p>聚簇索引的非叶子节点存放每一个键的值，叶子节点存放每一行的数据。</p>\n<h3 id=\"辅助索引\"><a href=\"#辅助索引\" class=\"headerlink\" title=\"辅助索引\"></a>辅助索引</h3><p>除了聚簇索引之外的索引都可以称为辅助索引，辅助索引和聚簇索引的区别在于，辅助索引的叶子节点存储的是主键的键值，一张表可以有多个辅助索引。使用辅助索引来查找数据时，一般需要经过两个过程：一是通过辅助索引查找到对应的主键值，二是通过主键值去查找到需要的数据，这个过程称为回表。当创建的索引上包含多个字段，覆盖了要查找的字段时，查询不需要回表就可以查询到需要的数据，这种索引称为覆盖索引。</p>\n<h2 id=\"索引的优缺点\"><a href=\"#索引的优缺点\" class=\"headerlink\" title=\"索引的优缺点\"></a>索引的优缺点</h2><h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><ul>\n<li><p>提高数据检索的效率,降低数据库的IO成本</p>\n<p>在数据库查询的过程中，本质上是尽量减少查找的数据量，降低磁盘IO来提高查询的效率。</p>\n</li>\n<li><p>通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗。</p>\n<p>当对数据进行排序时，如果排序字段没有索引，将消耗大量的CPU来进行排序操作。数据库较大的情况下甚至会使用磁盘来进行排序，查询效率低下。</p>\n</li>\n</ul>\n<h3 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h3><ul>\n<li><p>索引会占用磁盘空间</p>\n<p>索引也是一张表，表中保存了主键和索引字段，</p>\n</li>\n<li><p>降低更新效率</p>\n<p>在对表做更新操作的时候，MySQL不仅要保存数据，还需要保存索引，每次更新有索引的字段，都会因为更新的键值改变索引的信息。</p>\n</li>\n</ul>\n<h2 id=\"如何利用索引来优化查询\"><a href=\"#如何利用索引来优化查询\" class=\"headerlink\" title=\"如何利用索引来优化查询\"></a>如何利用索引来优化查询</h2><p>既然索引可以提高查询效率，那是否在所有列上都建立索引就可以了？答案是不一定。并不是所有的索引都能够提高查询效率。那如何建立合适的索引来提高查询效率？</p>\n<p>索引的建立需要符合以下原则：</p>\n<ul>\n<li>查询频次较高，且数据量较大的表</li>\n<li>尽量使用唯一索引</li>\n<li>选择区分度较高的列建立索引</li>\n<li>对于建立索引的表，更新不应频繁</li>\n<li>选择索引列时应选择where条件或者on子句中使用的字段</li>\n<li>可以使用覆盖索引，避免回表操作</li>\n<li>表记录较少（如配置表）或者字段区分度较低（如性别）时不应建立索引</li>\n<li>字段值较长时不建议建立索引（可以考虑建立前缀索引）</li>\n<li>查询中的排序字段应该创建索引</li>\n</ul>\n"},{"title":"Python生成公共包（SDK）","keywords":"SDK","cover":"2021/12/28/Python生成公共包（SDK）/1590516004.jpg","top_img":"2021/12/28/Python生成公共包（SDK）/1590516004.jpg","date":"2021-12-28T12:28:17.000Z","description":"很多时候我们希望将开发的模块代码弄成公用的模块，方便各个开发人员使用，那应该怎么做呢？","_content":"\n\n很多时候我们希望将开发的模块代码弄成公用的模块，方便各个开发人员使用，那应该怎么做呢？\n\n## 项目结构\n\n使用如下项目演示\n\n```\npython-sdk\n    │  README.md\n    │  setup.py\n    │\n    └─Demo\n            __init__.py\n```\n\n其中Demo中只有一个方法，写在\\_\\_init\\_\\_.py模块中，如下:\n\n```python\ndef say_hello():\n    print(\"hello!\")\n\n```\n\nsetup.py用于安装Demo包，代码如下：\n\n```python\nfrom setuptools import setup, find_packages\n \nsetup(\n\tname = \"demo\",\n\tversion = \"0.1\",\n\turl = '',\n\tlong_description = open('README.md').read(),\n\tpackages = find_packages(),\n)\n```\n\n各参数含义如下：\n\n| 参数             | 解释                                                      |\n| ---------------- | --------------------------------------------------------- |\n| name             | 包的名字                                                  |\n| version          | 版本号，对保持适当的依赖关系很重要                        |\n| packages         | 需要包含的子包列表，用find_packages()查找                 |\n| url              | 包的链接，通常为 Github 上的链接，或者是 readthedocs 链接 |\n| long_description | 将说明文件设置为README.md                                 |\n\n## 创建包\n\n执行`python setup.py bdist_egg`即可将Demo打包的一个SKD包，如下：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>python setup.py bdist_egg\nrunning bdist_egg\nrunning egg_info\ncreating demo.egg-info\nwriting demo.egg-info\\PKG-INFO\nwriting dependency_links to demo.egg-info\\dependency_links.txt\nwriting top-level names to demo.egg-info\\top_level.txt\nwriting manifest file 'demo.egg-info\\SOURCES.txt'\nreading manifest file 'demo.egg-info\\SOURCES.txt'\nwriting manifest file 'demo.egg-info\\SOURCES.txt'\ninstalling library code to build\\bdist.win-amd64\\egg\nrunning install_lib\nrunning build_py\ncreating build\ncreating build\\lib\ncreating build\\lib\\Demo\ncopying Demo\\__init__.py -> build\\lib\\Demo\ncreating build\\bdist.win-amd64\ncreating build\\bdist.win-amd64\\egg\ncreating build\\bdist.win-amd64\\egg\\Demo\ncopying build\\lib\\Demo\\__init__.py -> build\\bdist.win-amd64\\egg\\Demo\nbyte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc\ncreating build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\PKG-INFO -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\SOURCES.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\dependency_links.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\top_level.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\nzip_safe flag not set; analyzing archive contents...\ncreating dist\ncreating 'dist\\demo-0.1-py3.7.egg' and adding 'build\\bdist.win-amd64\\egg' to it\nremoving 'build\\bdist.win-amd64\\egg' (and everything under it)\n```\n\n执行后，python-sdk目录下多了build、dist、demo.egg-info三个文件夹，目录结构如下：\n\n```\n─python-sdk\n    │  README.md\n    │  setup.py\n    │\n    ├─build\n    │  ├─bdist.win-amd64\n    │  └─lib\n    │      └─Demo\n    │              __init__.py\n    │\n    ├─Demo\n    │      __init__.py\n    │\n    ├─demo.egg-info\n    │      dependency_links.txt\n    │      PKG-INFO\n    │      SOURCES.txt\n    │      top_level.txt\n    │\n    └─dist\n            demo-0.1-py3.7.egg\n```\n\n将python-sdk下面的文件都打包到一个压缩包里面，就可以发给其他人使用了\n\n## 使用\n\n将受到的压缩包解压，并进入到包含setup.py所在的目录，执行如下命令安装包：\n\n```\npython setup.py install\n```\n\n安装过程如下：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>python setup.py install\nrunning install\nrunning bdist_egg\nrunning egg_info\nwriting demo.egg-info\\PKG-INFO\nwriting dependency_links to demo.egg-info\\dependency_links.txt\nwriting top-level names to demo.egg-info\\top_level.txt\nreading manifest file 'demo.egg-info\\SOURCES.txt'\nwriting manifest file 'demo.egg-info\\SOURCES.txt'\ninstalling library code to build\\bdist.win-amd64\\egg\nrunning install_lib\nrunning build_py\ncreating build\\bdist.win-amd64\\egg\ncreating build\\bdist.win-amd64\\egg\\Demo\ncopying build\\lib\\Demo\\__init__.py -> build\\bdist.win-amd64\\egg\\Demo\nbyte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc\ncreating build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\PKG-INFO -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\SOURCES.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\dependency_links.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\top_level.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\nzip_safe flag not set; analyzing archive contents...\ncreating 'dist\\demo-0.1-py3.7.egg' and adding 'build\\bdist.win-amd64\\egg' to it\nremoving 'build\\bdist.win-amd64\\egg' (and everything under it)\nProcessing demo-0.1-py3.7.egg\nRemoving e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg\nCopying demo-0.1-py3.7.egg to e:\\app\\python\\python37\\lib\\site-packages\ndemo 0.1 is already the active version in easy-install.pth\n\nInstalled e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg\nProcessing dependencies for demo==0.1\nFinished processing dependencies for demo==0.1\n\n```\n\n进入到Python解释器并执行包中的函数如下：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>python\nPython 3.7.5 (tags/v3.7.5:5c02a39a0b, Oct 15 2019, 00:11:34) [MSC v.1916 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import Demo\n>>> Demo.say_hello()\nhello!\n>>>\n```\n\n卸载包使用`pip uninstall`命令即可：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>pip uninstall Demo\nFound existing installation: Demo 0.1\nUninstalling demo-0.1:\n  Would remove:\n    e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg\nProceed (y/n)? y\n  Successfully uninstalled bscp-config-0.1\n```\n\n\n\n","source":"_posts/Python生成公共包（SDK）.md","raw":"---\ntitle: Python生成公共包（SDK）\ncategory: Python\ntags:\n  - Python\nkeywords: SDK\ncover: 1590516004.jpg\ntop_img: 1590516004.jpg\ndate: 2021-12-28 20:28:17\ndescription: 很多时候我们希望将开发的模块代码弄成公用的模块，方便各个开发人员使用，那应该怎么做呢？\n---\n\n\n很多时候我们希望将开发的模块代码弄成公用的模块，方便各个开发人员使用，那应该怎么做呢？\n\n## 项目结构\n\n使用如下项目演示\n\n```\npython-sdk\n    │  README.md\n    │  setup.py\n    │\n    └─Demo\n            __init__.py\n```\n\n其中Demo中只有一个方法，写在\\_\\_init\\_\\_.py模块中，如下:\n\n```python\ndef say_hello():\n    print(\"hello!\")\n\n```\n\nsetup.py用于安装Demo包，代码如下：\n\n```python\nfrom setuptools import setup, find_packages\n \nsetup(\n\tname = \"demo\",\n\tversion = \"0.1\",\n\turl = '',\n\tlong_description = open('README.md').read(),\n\tpackages = find_packages(),\n)\n```\n\n各参数含义如下：\n\n| 参数             | 解释                                                      |\n| ---------------- | --------------------------------------------------------- |\n| name             | 包的名字                                                  |\n| version          | 版本号，对保持适当的依赖关系很重要                        |\n| packages         | 需要包含的子包列表，用find_packages()查找                 |\n| url              | 包的链接，通常为 Github 上的链接，或者是 readthedocs 链接 |\n| long_description | 将说明文件设置为README.md                                 |\n\n## 创建包\n\n执行`python setup.py bdist_egg`即可将Demo打包的一个SKD包，如下：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>python setup.py bdist_egg\nrunning bdist_egg\nrunning egg_info\ncreating demo.egg-info\nwriting demo.egg-info\\PKG-INFO\nwriting dependency_links to demo.egg-info\\dependency_links.txt\nwriting top-level names to demo.egg-info\\top_level.txt\nwriting manifest file 'demo.egg-info\\SOURCES.txt'\nreading manifest file 'demo.egg-info\\SOURCES.txt'\nwriting manifest file 'demo.egg-info\\SOURCES.txt'\ninstalling library code to build\\bdist.win-amd64\\egg\nrunning install_lib\nrunning build_py\ncreating build\ncreating build\\lib\ncreating build\\lib\\Demo\ncopying Demo\\__init__.py -> build\\lib\\Demo\ncreating build\\bdist.win-amd64\ncreating build\\bdist.win-amd64\\egg\ncreating build\\bdist.win-amd64\\egg\\Demo\ncopying build\\lib\\Demo\\__init__.py -> build\\bdist.win-amd64\\egg\\Demo\nbyte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc\ncreating build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\PKG-INFO -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\SOURCES.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\dependency_links.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\top_level.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\nzip_safe flag not set; analyzing archive contents...\ncreating dist\ncreating 'dist\\demo-0.1-py3.7.egg' and adding 'build\\bdist.win-amd64\\egg' to it\nremoving 'build\\bdist.win-amd64\\egg' (and everything under it)\n```\n\n执行后，python-sdk目录下多了build、dist、demo.egg-info三个文件夹，目录结构如下：\n\n```\n─python-sdk\n    │  README.md\n    │  setup.py\n    │\n    ├─build\n    │  ├─bdist.win-amd64\n    │  └─lib\n    │      └─Demo\n    │              __init__.py\n    │\n    ├─Demo\n    │      __init__.py\n    │\n    ├─demo.egg-info\n    │      dependency_links.txt\n    │      PKG-INFO\n    │      SOURCES.txt\n    │      top_level.txt\n    │\n    └─dist\n            demo-0.1-py3.7.egg\n```\n\n将python-sdk下面的文件都打包到一个压缩包里面，就可以发给其他人使用了\n\n## 使用\n\n将受到的压缩包解压，并进入到包含setup.py所在的目录，执行如下命令安装包：\n\n```\npython setup.py install\n```\n\n安装过程如下：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>python setup.py install\nrunning install\nrunning bdist_egg\nrunning egg_info\nwriting demo.egg-info\\PKG-INFO\nwriting dependency_links to demo.egg-info\\dependency_links.txt\nwriting top-level names to demo.egg-info\\top_level.txt\nreading manifest file 'demo.egg-info\\SOURCES.txt'\nwriting manifest file 'demo.egg-info\\SOURCES.txt'\ninstalling library code to build\\bdist.win-amd64\\egg\nrunning install_lib\nrunning build_py\ncreating build\\bdist.win-amd64\\egg\ncreating build\\bdist.win-amd64\\egg\\Demo\ncopying build\\lib\\Demo\\__init__.py -> build\\bdist.win-amd64\\egg\\Demo\nbyte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc\ncreating build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\PKG-INFO -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\SOURCES.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\dependency_links.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\ncopying demo.egg-info\\top_level.txt -> build\\bdist.win-amd64\\egg\\EGG-INFO\nzip_safe flag not set; analyzing archive contents...\ncreating 'dist\\demo-0.1-py3.7.egg' and adding 'build\\bdist.win-amd64\\egg' to it\nremoving 'build\\bdist.win-amd64\\egg' (and everything under it)\nProcessing demo-0.1-py3.7.egg\nRemoving e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg\nCopying demo-0.1-py3.7.egg to e:\\app\\python\\python37\\lib\\site-packages\ndemo 0.1 is already the active version in easy-install.pth\n\nInstalled e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg\nProcessing dependencies for demo==0.1\nFinished processing dependencies for demo==0.1\n\n```\n\n进入到Python解释器并执行包中的函数如下：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>python\nPython 3.7.5 (tags/v3.7.5:5c02a39a0b, Oct 15 2019, 00:11:34) [MSC v.1916 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import Demo\n>>> Demo.say_hello()\nhello!\n>>>\n```\n\n卸载包使用`pip uninstall`命令即可：\n\n```\nC:\\Users\\xxx\\Desktop\\python-sdk>pip uninstall Demo\nFound existing installation: Demo 0.1\nUninstalling demo-0.1:\n  Would remove:\n    e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg\nProceed (y/n)? y\n  Successfully uninstalled bscp-config-0.1\n```\n\n\n\n","slug":"Python生成公共包（SDK）","published":1,"updated":"2022-01-01T14:32:15.498Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vi002dhx894t1r7omk","content":"<p>很多时候我们希望将开发的模块代码弄成公用的模块，方便各个开发人员使用，那应该怎么做呢？</p>\n<h2 id=\"项目结构\"><a href=\"#项目结构\" class=\"headerlink\" title=\"项目结构\"></a>项目结构</h2><p>使用如下项目演示</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python-sdk</span><br><span class=\"line\">    │  README.md</span><br><span class=\"line\">    │  setup.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    └─Demo</span><br><span class=\"line\">            __init__.py</span><br></pre></td></tr></table></figure>\n\n<p>其中Demo中只有一个方法，写在__init__.py模块中，如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">say_hello</span>():</span></span><br><span class=\"line\">    print(<span class=\"string\">&quot;hello!&quot;</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>setup.py用于安装Demo包，代码如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> setuptools <span class=\"keyword\">import</span> setup, find_packages</span><br><span class=\"line\"> </span><br><span class=\"line\">setup(</span><br><span class=\"line\">\tname = <span class=\"string\">&quot;demo&quot;</span>,</span><br><span class=\"line\">\tversion = <span class=\"string\">&quot;0.1&quot;</span>,</span><br><span class=\"line\">\turl = <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">\tlong_description = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;README.md&#x27;</span>).read(),</span><br><span class=\"line\">\tpackages = find_packages(),</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>各参数含义如下：</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>name</td>\n<td>包的名字</td>\n</tr>\n<tr>\n<td>version</td>\n<td>版本号，对保持适当的依赖关系很重要</td>\n</tr>\n<tr>\n<td>packages</td>\n<td>需要包含的子包列表，用find_packages()查找</td>\n</tr>\n<tr>\n<td>url</td>\n<td>包的链接，通常为 Github 上的链接，或者是 readthedocs 链接</td>\n</tr>\n<tr>\n<td>long_description</td>\n<td>将说明文件设置为README.md</td>\n</tr>\n</tbody></table>\n<h2 id=\"创建包\"><a href=\"#创建包\" class=\"headerlink\" title=\"创建包\"></a>创建包</h2><p>执行<code>python setup.py bdist_egg</code>即可将Demo打包的一个SKD包，如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;python setup.py bdist_egg</span><br><span class=\"line\">running bdist_egg</span><br><span class=\"line\">running egg_info</span><br><span class=\"line\">creating demo.egg-info</span><br><span class=\"line\">writing demo.egg-info\\PKG-INFO</span><br><span class=\"line\">writing dependency_links to demo.egg-info\\dependency_links.txt</span><br><span class=\"line\">writing top-level names to demo.egg-info\\top_level.txt</span><br><span class=\"line\">writing manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">reading manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">writing manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">installing library code to build\\bdist.win-amd64\\egg</span><br><span class=\"line\">running install_lib</span><br><span class=\"line\">running build_py</span><br><span class=\"line\">creating build</span><br><span class=\"line\">creating build\\lib</span><br><span class=\"line\">creating build\\lib\\Demo</span><br><span class=\"line\">copying Demo\\__init__.py -&gt; build\\lib\\Demo</span><br><span class=\"line\">creating build\\bdist.win-amd64</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">copying build\\lib\\Demo\\__init__.py -&gt; build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">byte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\PKG-INFO -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\SOURCES.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\dependency_links.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\top_level.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">zip_safe flag not set; analyzing archive contents...</span><br><span class=\"line\">creating dist</span><br><span class=\"line\">creating &#39;dist\\demo-0.1-py3.7.egg&#39; and adding &#39;build\\bdist.win-amd64\\egg&#39; to it</span><br><span class=\"line\">removing &#39;build\\bdist.win-amd64\\egg&#39; (and everything under it)</span><br></pre></td></tr></table></figure>\n\n<p>执行后，python-sdk目录下多了build、dist、demo.egg-info三个文件夹，目录结构如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">─python-sdk</span><br><span class=\"line\">    │  README.md</span><br><span class=\"line\">    │  setup.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    ├─build</span><br><span class=\"line\">    │  ├─bdist.win-amd64</span><br><span class=\"line\">    │  └─lib</span><br><span class=\"line\">    │      └─Demo</span><br><span class=\"line\">    │              __init__.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    ├─Demo</span><br><span class=\"line\">    │      __init__.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    ├─demo.egg-info</span><br><span class=\"line\">    │      dependency_links.txt</span><br><span class=\"line\">    │      PKG-INFO</span><br><span class=\"line\">    │      SOURCES.txt</span><br><span class=\"line\">    │      top_level.txt</span><br><span class=\"line\">    │</span><br><span class=\"line\">    └─dist</span><br><span class=\"line\">            demo-0.1-py3.7.egg</span><br></pre></td></tr></table></figure>\n\n<p>将python-sdk下面的文件都打包到一个压缩包里面，就可以发给其他人使用了</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>将受到的压缩包解压，并进入到包含setup.py所在的目录，执行如下命令安装包：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python setup.py install</span><br></pre></td></tr></table></figure>\n\n<p>安装过程如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;python setup.py install</span><br><span class=\"line\">running install</span><br><span class=\"line\">running bdist_egg</span><br><span class=\"line\">running egg_info</span><br><span class=\"line\">writing demo.egg-info\\PKG-INFO</span><br><span class=\"line\">writing dependency_links to demo.egg-info\\dependency_links.txt</span><br><span class=\"line\">writing top-level names to demo.egg-info\\top_level.txt</span><br><span class=\"line\">reading manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">writing manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">installing library code to build\\bdist.win-amd64\\egg</span><br><span class=\"line\">running install_lib</span><br><span class=\"line\">running build_py</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">copying build\\lib\\Demo\\__init__.py -&gt; build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">byte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\PKG-INFO -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\SOURCES.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\dependency_links.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\top_level.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">zip_safe flag not set; analyzing archive contents...</span><br><span class=\"line\">creating &#39;dist\\demo-0.1-py3.7.egg&#39; and adding &#39;build\\bdist.win-amd64\\egg&#39; to it</span><br><span class=\"line\">removing &#39;build\\bdist.win-amd64\\egg&#39; (and everything under it)</span><br><span class=\"line\">Processing demo-0.1-py3.7.egg</span><br><span class=\"line\">Removing e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg</span><br><span class=\"line\">Copying demo-0.1-py3.7.egg to e:\\app\\python\\python37\\lib\\site-packages</span><br><span class=\"line\">demo 0.1 is already the active version in easy-install.pth</span><br><span class=\"line\"></span><br><span class=\"line\">Installed e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg</span><br><span class=\"line\">Processing dependencies for demo&#x3D;&#x3D;0.1</span><br><span class=\"line\">Finished processing dependencies for demo&#x3D;&#x3D;0.1</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>进入到Python解释器并执行包中的函数如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;python</span><br><span class=\"line\">Python 3.7.5 (tags&#x2F;v3.7.5:5c02a39a0b, Oct 15 2019, 00:11:34) [MSC v.1916 64 bit (AMD64)] on win32</span><br><span class=\"line\">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class=\"line\">&gt;&gt;&gt; import Demo</span><br><span class=\"line\">&gt;&gt;&gt; Demo.say_hello()</span><br><span class=\"line\">hello!</span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>卸载包使用<code>pip uninstall</code>命令即可：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;pip uninstall Demo</span><br><span class=\"line\">Found existing installation: Demo 0.1</span><br><span class=\"line\">Uninstalling demo-0.1:</span><br><span class=\"line\">  Would remove:</span><br><span class=\"line\">    e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg</span><br><span class=\"line\">Proceed (y&#x2F;n)? y</span><br><span class=\"line\">  Successfully uninstalled bscp-config-0.1</span><br></pre></td></tr></table></figure>\n\n\n\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>很多时候我们希望将开发的模块代码弄成公用的模块，方便各个开发人员使用，那应该怎么做呢？</p>\n<h2 id=\"项目结构\"><a href=\"#项目结构\" class=\"headerlink\" title=\"项目结构\"></a>项目结构</h2><p>使用如下项目演示</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python-sdk</span><br><span class=\"line\">    │  README.md</span><br><span class=\"line\">    │  setup.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    └─Demo</span><br><span class=\"line\">            __init__.py</span><br></pre></td></tr></table></figure>\n\n<p>其中Demo中只有一个方法，写在__init__.py模块中，如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">say_hello</span>():</span></span><br><span class=\"line\">    print(<span class=\"string\">&quot;hello!&quot;</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>setup.py用于安装Demo包，代码如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> setuptools <span class=\"keyword\">import</span> setup, find_packages</span><br><span class=\"line\"> </span><br><span class=\"line\">setup(</span><br><span class=\"line\">\tname = <span class=\"string\">&quot;demo&quot;</span>,</span><br><span class=\"line\">\tversion = <span class=\"string\">&quot;0.1&quot;</span>,</span><br><span class=\"line\">\turl = <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">\tlong_description = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;README.md&#x27;</span>).read(),</span><br><span class=\"line\">\tpackages = find_packages(),</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>各参数含义如下：</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>name</td>\n<td>包的名字</td>\n</tr>\n<tr>\n<td>version</td>\n<td>版本号，对保持适当的依赖关系很重要</td>\n</tr>\n<tr>\n<td>packages</td>\n<td>需要包含的子包列表，用find_packages()查找</td>\n</tr>\n<tr>\n<td>url</td>\n<td>包的链接，通常为 Github 上的链接，或者是 readthedocs 链接</td>\n</tr>\n<tr>\n<td>long_description</td>\n<td>将说明文件设置为README.md</td>\n</tr>\n</tbody></table>\n<h2 id=\"创建包\"><a href=\"#创建包\" class=\"headerlink\" title=\"创建包\"></a>创建包</h2><p>执行<code>python setup.py bdist_egg</code>即可将Demo打包的一个SKD包，如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;python setup.py bdist_egg</span><br><span class=\"line\">running bdist_egg</span><br><span class=\"line\">running egg_info</span><br><span class=\"line\">creating demo.egg-info</span><br><span class=\"line\">writing demo.egg-info\\PKG-INFO</span><br><span class=\"line\">writing dependency_links to demo.egg-info\\dependency_links.txt</span><br><span class=\"line\">writing top-level names to demo.egg-info\\top_level.txt</span><br><span class=\"line\">writing manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">reading manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">writing manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">installing library code to build\\bdist.win-amd64\\egg</span><br><span class=\"line\">running install_lib</span><br><span class=\"line\">running build_py</span><br><span class=\"line\">creating build</span><br><span class=\"line\">creating build\\lib</span><br><span class=\"line\">creating build\\lib\\Demo</span><br><span class=\"line\">copying Demo\\__init__.py -&gt; build\\lib\\Demo</span><br><span class=\"line\">creating build\\bdist.win-amd64</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">copying build\\lib\\Demo\\__init__.py -&gt; build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">byte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\PKG-INFO -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\SOURCES.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\dependency_links.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\top_level.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">zip_safe flag not set; analyzing archive contents...</span><br><span class=\"line\">creating dist</span><br><span class=\"line\">creating &#39;dist\\demo-0.1-py3.7.egg&#39; and adding &#39;build\\bdist.win-amd64\\egg&#39; to it</span><br><span class=\"line\">removing &#39;build\\bdist.win-amd64\\egg&#39; (and everything under it)</span><br></pre></td></tr></table></figure>\n\n<p>执行后，python-sdk目录下多了build、dist、demo.egg-info三个文件夹，目录结构如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">─python-sdk</span><br><span class=\"line\">    │  README.md</span><br><span class=\"line\">    │  setup.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    ├─build</span><br><span class=\"line\">    │  ├─bdist.win-amd64</span><br><span class=\"line\">    │  └─lib</span><br><span class=\"line\">    │      └─Demo</span><br><span class=\"line\">    │              __init__.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    ├─Demo</span><br><span class=\"line\">    │      __init__.py</span><br><span class=\"line\">    │</span><br><span class=\"line\">    ├─demo.egg-info</span><br><span class=\"line\">    │      dependency_links.txt</span><br><span class=\"line\">    │      PKG-INFO</span><br><span class=\"line\">    │      SOURCES.txt</span><br><span class=\"line\">    │      top_level.txt</span><br><span class=\"line\">    │</span><br><span class=\"line\">    └─dist</span><br><span class=\"line\">            demo-0.1-py3.7.egg</span><br></pre></td></tr></table></figure>\n\n<p>将python-sdk下面的文件都打包到一个压缩包里面，就可以发给其他人使用了</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>将受到的压缩包解压，并进入到包含setup.py所在的目录，执行如下命令安装包：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python setup.py install</span><br></pre></td></tr></table></figure>\n\n<p>安装过程如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;python setup.py install</span><br><span class=\"line\">running install</span><br><span class=\"line\">running bdist_egg</span><br><span class=\"line\">running egg_info</span><br><span class=\"line\">writing demo.egg-info\\PKG-INFO</span><br><span class=\"line\">writing dependency_links to demo.egg-info\\dependency_links.txt</span><br><span class=\"line\">writing top-level names to demo.egg-info\\top_level.txt</span><br><span class=\"line\">reading manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">writing manifest file &#39;demo.egg-info\\SOURCES.txt&#39;</span><br><span class=\"line\">installing library code to build\\bdist.win-amd64\\egg</span><br><span class=\"line\">running install_lib</span><br><span class=\"line\">running build_py</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">copying build\\lib\\Demo\\__init__.py -&gt; build\\bdist.win-amd64\\egg\\Demo</span><br><span class=\"line\">byte-compiling build\\bdist.win-amd64\\egg\\Demo\\__init__.py to __init__.cpython-37.pyc</span><br><span class=\"line\">creating build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\PKG-INFO -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\SOURCES.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\dependency_links.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">copying demo.egg-info\\top_level.txt -&gt; build\\bdist.win-amd64\\egg\\EGG-INFO</span><br><span class=\"line\">zip_safe flag not set; analyzing archive contents...</span><br><span class=\"line\">creating &#39;dist\\demo-0.1-py3.7.egg&#39; and adding &#39;build\\bdist.win-amd64\\egg&#39; to it</span><br><span class=\"line\">removing &#39;build\\bdist.win-amd64\\egg&#39; (and everything under it)</span><br><span class=\"line\">Processing demo-0.1-py3.7.egg</span><br><span class=\"line\">Removing e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg</span><br><span class=\"line\">Copying demo-0.1-py3.7.egg to e:\\app\\python\\python37\\lib\\site-packages</span><br><span class=\"line\">demo 0.1 is already the active version in easy-install.pth</span><br><span class=\"line\"></span><br><span class=\"line\">Installed e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg</span><br><span class=\"line\">Processing dependencies for demo&#x3D;&#x3D;0.1</span><br><span class=\"line\">Finished processing dependencies for demo&#x3D;&#x3D;0.1</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>进入到Python解释器并执行包中的函数如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;python</span><br><span class=\"line\">Python 3.7.5 (tags&#x2F;v3.7.5:5c02a39a0b, Oct 15 2019, 00:11:34) [MSC v.1916 64 bit (AMD64)] on win32</span><br><span class=\"line\">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class=\"line\">&gt;&gt;&gt; import Demo</span><br><span class=\"line\">&gt;&gt;&gt; Demo.say_hello()</span><br><span class=\"line\">hello!</span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>卸载包使用<code>pip uninstall</code>命令即可：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\xxx\\Desktop\\python-sdk&gt;pip uninstall Demo</span><br><span class=\"line\">Found existing installation: Demo 0.1</span><br><span class=\"line\">Uninstalling demo-0.1:</span><br><span class=\"line\">  Would remove:</span><br><span class=\"line\">    e:\\app\\python\\python37\\lib\\site-packages\\demo-0.1-py3.7.egg</span><br><span class=\"line\">Proceed (y&#x2F;n)? y</span><br><span class=\"line\">  Successfully uninstalled bscp-config-0.1</span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"SQL注入介绍","date":"2020-12-04T16:00:00.000Z","description":"SQL 注入攻击是通过将恶意的SQL语句如添加、删除等插入到应用的输入参数中，经过后台解析后发送到数据库服务器上解析执行进行的攻击。本文以mysql为例，讨论SQL注入以及在Django中如何防止SQL注入。","_content":"\nSQL 注入攻击是通过将恶意的SQL语句如添加、删除等插入到应用的输入参数中，经过后台解析后发送到数据库服务器上解析执行进行的攻击。本文以mysql为例，讨论SQL注入以及在Django中如何防止SQL注入。\n\n## SQL注入介绍\n\n在Web程序中，一般都会有后台根据用户输入内容查找或者执行相关动作的场景，如登录时查询用户是否存在。后台在处理的时候可能是根据用户输入的用户名，拼接SQL之后到数据库查询来判断，这时，如果用户恶意输入不正确内容或内容本身存在问题，会导致应用程序崩溃，甚至是丢失数据等导致相关损失。即通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。这种场景就称为SQL注入。\n\n### 一个SQL注入的简单例子\n\n如执行一条SQL语句:\n\n```sql\nselect * \n  from tb_user \n where username = 'jacobzhou';\n```\n\n其中jacobzhou是用户输入的值，此时可以得到正确的值：\n\n```sql\nmysql> select * \n    ->   from tb_user \n    ->  where username = 'jacobzhou';\n+------+-----------+----------+------+\n| id   | username  | password | age  |\n+------+-----------+----------+------+\n|    1 | jacobzhou | 123456   |   29 |\n+------+-----------+----------+------+\n1 row in set (0.00 sec)\n```\n\n但是，当用户输入错误的值，如jacobzhou';drop table  tb_test;，如果使用的是字符串拼接的方式去执行，SQL语句就变成了：\n\n```mysql\nselect * \n  from tb_user \n where username = 'jacobzhou';drop table tb_test;';\n```\n\n执行结果为：\n\n```sql\nmysql> select * \n    ->   from tb_user \n    ->  where username = 'jacobzhou';drop table tb_test;';\n+------+-----------+----------+------+\n| id   | username  | password | age  |\n+------+-----------+----------+------+\n|    1 | jacobzhou | 123456   |   29 |\n+------+-----------+----------+------+\n1 row in set (0.00 sec)\n\nERROR 1051 (42S02): Unknown table 'db-platform.tb_test'\n    '> \n```\n\n以上就是一个SQL注入的例子，可以看到，如果db-platform.tb_test表存在，那就会被恶意删除。例子相对较极端，对于Django自带的connection来说，使用execute函数执行SQL语句的时候，每次只执行一条语句，后一条语句不会执行。因此上面的例子在Django中是不成立的，但是足以说明SQL注入所带来的安全风险。那SQL注入都有哪些方式，如何才能防止SQL注入呢？\n\n## SQL注入原理\n\nWeb应用程序对于用户输入的数据和合法性没有严谨的判断，前端用户的输入直接传输给后端，攻击者通过构造不同的参数，形成不同的SQL语句来实现对数据库的任意操作。\nSQL注入产生需要满足两个条件：\n\n- 参数用户可控：前端传给后端的参数内容是用户可以控制的\n- 参数带入数据库查询：传入的参数直接拼接到SQL语句，且带入数据库查询\n\n## SQL注入类型\n\nSQL注入的分类有很多，如POST注入、Cookie注入、延时注入、搜索注入等，但是归根结底也是数字型和字符型注入的不同展现形式或者是注入的位置不同。\n\n### 数字型\n\n用户输入为整数，假设SQL语句为：\n\n```sql\nselect * from home_application_database where id = 3; \n```\n\n其中3为数字，是用户正常输入。\n\n当满足如下条件，则可能存在数字型注入：\n\n- 输入3' 页面报错（SQL语法错误）\n- 输入3 and 1 = 1 页面正常返回结果\n- 输入3 and 1=2 页面返回错误（SQL语句返回空数据）\n\n如果后台使用的是`select * from home_application_database where id = `和未经验证的用户输入做拼接后去数据库查询，就满足了上面的三个条件，存在数字型注入。\n\n这里可以看到用户输入必须是整数，后端验证用户输入必须是整数才会继续执行即可解决。\n\n### 字符型\n\n用户输入是字符串，如SQL语句：\n\n```sql\nselect * from home_application_database where name = '154'\n```\n\n其中154是字符串，是用户正常输入。\n\n当满足如下条件时，则可能存在字符型注入：\n\n- 输入154'，页面异常（SQL语句语法错误）\n- 输入154' and 1 = 1 -- ，页面正常返回\n- 输入154' and 1 = 2 -- ，页面错误（查询结果为空）\n\n同数字型，如果后台直接使用拼接语句的形式去数据库执行，则就满足了上面单个条件，存在字符型注入。攻击者使用单引号的方式提前结束前一个单引号，并使用and来添加其他操作。\n\n## 如何防止SQL注入\n\n在开发时应该秉持一种**外部参数皆不可信**的原则来进行开发。\n\n- 加强参数验证\n\n  开发时，验证所有来自前端的输入，必须是符合要求的数据类型，符合指定规则的数据才允许继续往下执行。\n\n- SQL语句参数化处理\n\n  减少使用或不使用字符串拼接的方式执行SQL，而是将用户输入当着参数传给执行SQL的方法，如Django中的cursor.execute()函数就支持在SQL语句中使用占位符，将输入作为参数传递给方法执行。\n\n- 存储过程\n\n  使用存储过程也可以有效防止SQL注入，不过在存储过程中，需使用占位符，并且使用输入参数来预编译SQL语句后再执行。\n\n## Django中防止SQL注入\n\nDjango中使用ORM可以有效防止SQL注入，所以应该尽可能使用ORM。但是ORM对于复杂查询就无能为力了，这时就需要执行原生SQL时，可以使用如下方式：\n\n1. 使用extra（不建议使用这种方式执行SQL）\n2. 使用raw\n3. 使用django.db执行自定义SQL\n4. 直接使用pymysql\n\n在使用原生SQL语句时，应避免直接使用用户输入拼接SQL语句，上面三种执行原生SQL的方式均提供了占位符来进行参数替换，防止SQL注入。我们比较常用的是3、和4，两种方法都是使用cursor.execue()方法，具体如下：\n\n- django.db\n\n  ```python\n  from django.db import connection\n  cursor = connection.cursor()\n  cursor.execute(sql)\n  result = cursor.fetchall()\n  ```\n\n- pymysql\n\n  ```python\n  connection = pymysql.connect(**mysql_server)\n  cursor = connection.cursor()\n  cursor.execute(sql)\n  result = cursor.fetchall()\n  ```\n\n  execute中的sql语句使用占位符，并传入相应参数即可防止SQL注入：\n\n  ```\n  sql=\"select * from home_application_database where id = %s\" \n  cursor.execute(sql,3)\n  1\n  cursor.execute(sql,\"3'\")\n  1\n  E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: '3''\n    self._do_get_result()\n  cursor.execute(sql,\"3 and 1 = 1 \")\n  E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: '3 and 1 = 1 '\n  1\n    self._do_get_result()\n  cursor.execute(sql,\"3 and 1 = 2 \")\n  E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: '3 and 1 = 2 '\n    self._do_get_result()\n  1\n  ```\n\n  从上面执行结果看出，对于整数型注入，使用execute中带参数执行的方式，并不满足注入条件，当使用3'，3 and 1 = 1 ，3 and 1 = 2 作为输入传给execute执行时，程序报错。\n\n  同理对于字符型注入也一样。\n\n  > 注意：在使用execute函数执行时，SQL语句中的占位符，不管是字符还是整型，都使用%s，且对于字符型的数据，在SQL语句里面不能使用'%s'，否则会报错。使用参数替换本质上是对输入的参数进行转义处理，防止输入中的引号。\n\n","source":"_posts/SQL注入介绍及预防.md","raw":"---\ntitle: SQL注入介绍\ncategory: MySQL\ntags:\n\t- MySQL\n\t- SQL注入\ndate: 2020-12-5\ndescription: SQL 注入攻击是通过将恶意的SQL语句如添加、删除等插入到应用的输入参数中，经过后台解析后发送到数据库服务器上解析执行进行的攻击。本文以mysql为例，讨论SQL注入以及在Django中如何防止SQL注入。\n---\n\nSQL 注入攻击是通过将恶意的SQL语句如添加、删除等插入到应用的输入参数中，经过后台解析后发送到数据库服务器上解析执行进行的攻击。本文以mysql为例，讨论SQL注入以及在Django中如何防止SQL注入。\n\n## SQL注入介绍\n\n在Web程序中，一般都会有后台根据用户输入内容查找或者执行相关动作的场景，如登录时查询用户是否存在。后台在处理的时候可能是根据用户输入的用户名，拼接SQL之后到数据库查询来判断，这时，如果用户恶意输入不正确内容或内容本身存在问题，会导致应用程序崩溃，甚至是丢失数据等导致相关损失。即通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。这种场景就称为SQL注入。\n\n### 一个SQL注入的简单例子\n\n如执行一条SQL语句:\n\n```sql\nselect * \n  from tb_user \n where username = 'jacobzhou';\n```\n\n其中jacobzhou是用户输入的值，此时可以得到正确的值：\n\n```sql\nmysql> select * \n    ->   from tb_user \n    ->  where username = 'jacobzhou';\n+------+-----------+----------+------+\n| id   | username  | password | age  |\n+------+-----------+----------+------+\n|    1 | jacobzhou | 123456   |   29 |\n+------+-----------+----------+------+\n1 row in set (0.00 sec)\n```\n\n但是，当用户输入错误的值，如jacobzhou';drop table  tb_test;，如果使用的是字符串拼接的方式去执行，SQL语句就变成了：\n\n```mysql\nselect * \n  from tb_user \n where username = 'jacobzhou';drop table tb_test;';\n```\n\n执行结果为：\n\n```sql\nmysql> select * \n    ->   from tb_user \n    ->  where username = 'jacobzhou';drop table tb_test;';\n+------+-----------+----------+------+\n| id   | username  | password | age  |\n+------+-----------+----------+------+\n|    1 | jacobzhou | 123456   |   29 |\n+------+-----------+----------+------+\n1 row in set (0.00 sec)\n\nERROR 1051 (42S02): Unknown table 'db-platform.tb_test'\n    '> \n```\n\n以上就是一个SQL注入的例子，可以看到，如果db-platform.tb_test表存在，那就会被恶意删除。例子相对较极端，对于Django自带的connection来说，使用execute函数执行SQL语句的时候，每次只执行一条语句，后一条语句不会执行。因此上面的例子在Django中是不成立的，但是足以说明SQL注入所带来的安全风险。那SQL注入都有哪些方式，如何才能防止SQL注入呢？\n\n## SQL注入原理\n\nWeb应用程序对于用户输入的数据和合法性没有严谨的判断，前端用户的输入直接传输给后端，攻击者通过构造不同的参数，形成不同的SQL语句来实现对数据库的任意操作。\nSQL注入产生需要满足两个条件：\n\n- 参数用户可控：前端传给后端的参数内容是用户可以控制的\n- 参数带入数据库查询：传入的参数直接拼接到SQL语句，且带入数据库查询\n\n## SQL注入类型\n\nSQL注入的分类有很多，如POST注入、Cookie注入、延时注入、搜索注入等，但是归根结底也是数字型和字符型注入的不同展现形式或者是注入的位置不同。\n\n### 数字型\n\n用户输入为整数，假设SQL语句为：\n\n```sql\nselect * from home_application_database where id = 3; \n```\n\n其中3为数字，是用户正常输入。\n\n当满足如下条件，则可能存在数字型注入：\n\n- 输入3' 页面报错（SQL语法错误）\n- 输入3 and 1 = 1 页面正常返回结果\n- 输入3 and 1=2 页面返回错误（SQL语句返回空数据）\n\n如果后台使用的是`select * from home_application_database where id = `和未经验证的用户输入做拼接后去数据库查询，就满足了上面的三个条件，存在数字型注入。\n\n这里可以看到用户输入必须是整数，后端验证用户输入必须是整数才会继续执行即可解决。\n\n### 字符型\n\n用户输入是字符串，如SQL语句：\n\n```sql\nselect * from home_application_database where name = '154'\n```\n\n其中154是字符串，是用户正常输入。\n\n当满足如下条件时，则可能存在字符型注入：\n\n- 输入154'，页面异常（SQL语句语法错误）\n- 输入154' and 1 = 1 -- ，页面正常返回\n- 输入154' and 1 = 2 -- ，页面错误（查询结果为空）\n\n同数字型，如果后台直接使用拼接语句的形式去数据库执行，则就满足了上面单个条件，存在字符型注入。攻击者使用单引号的方式提前结束前一个单引号，并使用and来添加其他操作。\n\n## 如何防止SQL注入\n\n在开发时应该秉持一种**外部参数皆不可信**的原则来进行开发。\n\n- 加强参数验证\n\n  开发时，验证所有来自前端的输入，必须是符合要求的数据类型，符合指定规则的数据才允许继续往下执行。\n\n- SQL语句参数化处理\n\n  减少使用或不使用字符串拼接的方式执行SQL，而是将用户输入当着参数传给执行SQL的方法，如Django中的cursor.execute()函数就支持在SQL语句中使用占位符，将输入作为参数传递给方法执行。\n\n- 存储过程\n\n  使用存储过程也可以有效防止SQL注入，不过在存储过程中，需使用占位符，并且使用输入参数来预编译SQL语句后再执行。\n\n## Django中防止SQL注入\n\nDjango中使用ORM可以有效防止SQL注入，所以应该尽可能使用ORM。但是ORM对于复杂查询就无能为力了，这时就需要执行原生SQL时，可以使用如下方式：\n\n1. 使用extra（不建议使用这种方式执行SQL）\n2. 使用raw\n3. 使用django.db执行自定义SQL\n4. 直接使用pymysql\n\n在使用原生SQL语句时，应避免直接使用用户输入拼接SQL语句，上面三种执行原生SQL的方式均提供了占位符来进行参数替换，防止SQL注入。我们比较常用的是3、和4，两种方法都是使用cursor.execue()方法，具体如下：\n\n- django.db\n\n  ```python\n  from django.db import connection\n  cursor = connection.cursor()\n  cursor.execute(sql)\n  result = cursor.fetchall()\n  ```\n\n- pymysql\n\n  ```python\n  connection = pymysql.connect(**mysql_server)\n  cursor = connection.cursor()\n  cursor.execute(sql)\n  result = cursor.fetchall()\n  ```\n\n  execute中的sql语句使用占位符，并传入相应参数即可防止SQL注入：\n\n  ```\n  sql=\"select * from home_application_database where id = %s\" \n  cursor.execute(sql,3)\n  1\n  cursor.execute(sql,\"3'\")\n  1\n  E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: '3''\n    self._do_get_result()\n  cursor.execute(sql,\"3 and 1 = 1 \")\n  E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: '3 and 1 = 1 '\n  1\n    self._do_get_result()\n  cursor.execute(sql,\"3 and 1 = 2 \")\n  E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: '3 and 1 = 2 '\n    self._do_get_result()\n  1\n  ```\n\n  从上面执行结果看出，对于整数型注入，使用execute中带参数执行的方式，并不满足注入条件，当使用3'，3 and 1 = 1 ，3 and 1 = 2 作为输入传给execute执行时，程序报错。\n\n  同理对于字符型注入也一样。\n\n  > 注意：在使用execute函数执行时，SQL语句中的占位符，不管是字符还是整型，都使用%s，且对于字符型的数据，在SQL语句里面不能使用'%s'，否则会报错。使用参数替换本质上是对输入的参数进行转义处理，防止输入中的引号。\n\n","slug":"SQL注入介绍及预防","published":1,"updated":"2022-01-01T14:32:15.501Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vp0037hx8953s2d6oa","content":"<p>SQL 注入攻击是通过将恶意的SQL语句如添加、删除等插入到应用的输入参数中，经过后台解析后发送到数据库服务器上解析执行进行的攻击。本文以mysql为例，讨论SQL注入以及在Django中如何防止SQL注入。</p>\n<h2 id=\"SQL注入介绍\"><a href=\"#SQL注入介绍\" class=\"headerlink\" title=\"SQL注入介绍\"></a>SQL注入介绍</h2><p>在Web程序中，一般都会有后台根据用户输入内容查找或者执行相关动作的场景，如登录时查询用户是否存在。后台在处理的时候可能是根据用户输入的用户名，拼接SQL之后到数据库查询来判断，这时，如果用户恶意输入不正确内容或内容本身存在问题，会导致应用程序崩溃，甚至是丢失数据等导致相关损失。即通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。这种场景就称为SQL注入。</p>\n<h3 id=\"一个SQL注入的简单例子\"><a href=\"#一个SQL注入的简单例子\" class=\"headerlink\" title=\"一个SQL注入的简单例子\"></a>一个SQL注入的简单例子</h3><p>如执行一条SQL语句:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> </span><br><span class=\"line\">  <span class=\"keyword\">from</span> tb_user </span><br><span class=\"line\"> <span class=\"keyword\">where</span> username <span class=\"operator\">=</span> <span class=\"string\">&#x27;jacobzhou&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>其中jacobzhou是用户输入的值，此时可以得到正确的值：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>   <span class=\"keyword\">from</span> tb_user </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>  <span class=\"keyword\">where</span> username <span class=\"operator\">=</span> <span class=\"string\">&#x27;jacobzhou&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id   <span class=\"operator\">|</span> username  <span class=\"operator\">|</span> password <span class=\"operator\">|</span> age  <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>    <span class=\"number\">1</span> <span class=\"operator\">|</span> jacobzhou <span class=\"operator\">|</span> <span class=\"number\">123456</span>   <span class=\"operator\">|</span>   <span class=\"number\">29</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n<p>但是，当用户输入错误的值，如jacobzhou’;drop table  tb_test;，如果使用的是字符串拼接的方式去执行，SQL语句就变成了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * </span><br><span class=\"line\">  from tb_user </span><br><span class=\"line\"> where username &#x3D; &#39;jacobzhou&#39;;drop table tb_test;&#39;;</span><br></pre></td></tr></table></figure>\n\n<p>执行结果为：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>   <span class=\"keyword\">from</span> tb_user </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>  <span class=\"keyword\">where</span> username <span class=\"operator\">=</span> <span class=\"string\">&#x27;jacobzhou&#x27;</span>;<span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> tb_test;<span class=\"string\">&#x27;;</span></span><br><span class=\"line\"><span class=\"string\">+------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"string\">| id   | username  | password | age  |</span></span><br><span class=\"line\"><span class=\"string\">+------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"string\">|    1 | jacobzhou | 123456   |   29 |</span></span><br><span class=\"line\"><span class=\"string\">+------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"string\">1 row in set (0.00 sec)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">ERROR 1051 (42S02): Unknown table &#x27;</span>db<span class=\"operator\">-</span>platform.tb_test<span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">    &#x27;</span><span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>以上就是一个SQL注入的例子，可以看到，如果db-platform.tb_test表存在，那就会被恶意删除。例子相对较极端，对于Django自带的connection来说，使用execute函数执行SQL语句的时候，每次只执行一条语句，后一条语句不会执行。因此上面的例子在Django中是不成立的，但是足以说明SQL注入所带来的安全风险。那SQL注入都有哪些方式，如何才能防止SQL注入呢？</p>\n<h2 id=\"SQL注入原理\"><a href=\"#SQL注入原理\" class=\"headerlink\" title=\"SQL注入原理\"></a>SQL注入原理</h2><p>Web应用程序对于用户输入的数据和合法性没有严谨的判断，前端用户的输入直接传输给后端，攻击者通过构造不同的参数，形成不同的SQL语句来实现对数据库的任意操作。<br>SQL注入产生需要满足两个条件：</p>\n<ul>\n<li>参数用户可控：前端传给后端的参数内容是用户可以控制的</li>\n<li>参数带入数据库查询：传入的参数直接拼接到SQL语句，且带入数据库查询</li>\n</ul>\n<h2 id=\"SQL注入类型\"><a href=\"#SQL注入类型\" class=\"headerlink\" title=\"SQL注入类型\"></a>SQL注入类型</h2><p>SQL注入的分类有很多，如POST注入、Cookie注入、延时注入、搜索注入等，但是归根结底也是数字型和字符型注入的不同展现形式或者是注入的位置不同。</p>\n<h3 id=\"数字型\"><a href=\"#数字型\" class=\"headerlink\" title=\"数字型\"></a>数字型</h3><p>用户输入为整数，假设SQL语句为：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> home_application_database <span class=\"keyword\">where</span> id <span class=\"operator\">=</span> <span class=\"number\">3</span>; </span><br></pre></td></tr></table></figure>\n\n<p>其中3为数字，是用户正常输入。</p>\n<p>当满足如下条件，则可能存在数字型注入：</p>\n<ul>\n<li>输入3’ 页面报错（SQL语法错误）</li>\n<li>输入3 and 1 = 1 页面正常返回结果</li>\n<li>输入3 and 1=2 页面返回错误（SQL语句返回空数据）</li>\n</ul>\n<p>如果后台使用的是<code>select * from home_application_database where id = </code>和未经验证的用户输入做拼接后去数据库查询，就满足了上面的三个条件，存在数字型注入。</p>\n<p>这里可以看到用户输入必须是整数，后端验证用户输入必须是整数才会继续执行即可解决。</p>\n<h3 id=\"字符型\"><a href=\"#字符型\" class=\"headerlink\" title=\"字符型\"></a>字符型</h3><p>用户输入是字符串，如SQL语句：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> home_application_database <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;154&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>其中154是字符串，是用户正常输入。</p>\n<p>当满足如下条件时，则可能存在字符型注入：</p>\n<ul>\n<li>输入154’，页面异常（SQL语句语法错误）</li>\n<li>输入154’ and 1 = 1 – ，页面正常返回</li>\n<li>输入154’ and 1 = 2 – ，页面错误（查询结果为空）</li>\n</ul>\n<p>同数字型，如果后台直接使用拼接语句的形式去数据库执行，则就满足了上面单个条件，存在字符型注入。攻击者使用单引号的方式提前结束前一个单引号，并使用and来添加其他操作。</p>\n<h2 id=\"如何防止SQL注入\"><a href=\"#如何防止SQL注入\" class=\"headerlink\" title=\"如何防止SQL注入\"></a>如何防止SQL注入</h2><p>在开发时应该秉持一种<strong>外部参数皆不可信</strong>的原则来进行开发。</p>\n<ul>\n<li><p>加强参数验证</p>\n<p>开发时，验证所有来自前端的输入，必须是符合要求的数据类型，符合指定规则的数据才允许继续往下执行。</p>\n</li>\n<li><p>SQL语句参数化处理</p>\n<p>减少使用或不使用字符串拼接的方式执行SQL，而是将用户输入当着参数传给执行SQL的方法，如Django中的cursor.execute()函数就支持在SQL语句中使用占位符，将输入作为参数传递给方法执行。</p>\n</li>\n<li><p>存储过程</p>\n<p>使用存储过程也可以有效防止SQL注入，不过在存储过程中，需使用占位符，并且使用输入参数来预编译SQL语句后再执行。</p>\n</li>\n</ul>\n<h2 id=\"Django中防止SQL注入\"><a href=\"#Django中防止SQL注入\" class=\"headerlink\" title=\"Django中防止SQL注入\"></a>Django中防止SQL注入</h2><p>Django中使用ORM可以有效防止SQL注入，所以应该尽可能使用ORM。但是ORM对于复杂查询就无能为力了，这时就需要执行原生SQL时，可以使用如下方式：</p>\n<ol>\n<li>使用extra（不建议使用这种方式执行SQL）</li>\n<li>使用raw</li>\n<li>使用django.db执行自定义SQL</li>\n<li>直接使用pymysql</li>\n</ol>\n<p>在使用原生SQL语句时，应避免直接使用用户输入拼接SQL语句，上面三种执行原生SQL的方式均提供了占位符来进行参数替换，防止SQL注入。我们比较常用的是3、和4，两种方法都是使用cursor.execue()方法，具体如下：</p>\n<ul>\n<li><p>django.db</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> connection</span><br><span class=\"line\">cursor = connection.cursor()</span><br><span class=\"line\">cursor.execute(sql)</span><br><span class=\"line\">result = cursor.fetchall()</span><br></pre></td></tr></table></figure></li>\n<li><p>pymysql</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">connection = pymysql.connect(**mysql_server)</span><br><span class=\"line\">cursor = connection.cursor()</span><br><span class=\"line\">cursor.execute(sql)</span><br><span class=\"line\">result = cursor.fetchall()</span><br></pre></td></tr></table></figure>\n\n<p>execute中的sql语句使用占位符，并传入相应参数即可防止SQL注入：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sql&#x3D;&quot;select * from home_application_database where id &#x3D; %s&quot; </span><br><span class=\"line\">cursor.execute(sql,3)</span><br><span class=\"line\">1</span><br><span class=\"line\">cursor.execute(sql,&quot;3&#39;&quot;)</span><br><span class=\"line\">1</span><br><span class=\"line\">E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: &#39;3&#39;&#39;</span><br><span class=\"line\">  self._do_get_result()</span><br><span class=\"line\">cursor.execute(sql,&quot;3 and 1 &#x3D; 1 &quot;)</span><br><span class=\"line\">E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: &#39;3 and 1 &#x3D; 1 &#39;</span><br><span class=\"line\">1</span><br><span class=\"line\">  self._do_get_result()</span><br><span class=\"line\">cursor.execute(sql,&quot;3 and 1 &#x3D; 2 &quot;)</span><br><span class=\"line\">E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: &#39;3 and 1 &#x3D; 2 &#39;</span><br><span class=\"line\">  self._do_get_result()</span><br><span class=\"line\">1</span><br></pre></td></tr></table></figure>\n\n<p>从上面执行结果看出，对于整数型注入，使用execute中带参数执行的方式，并不满足注入条件，当使用3’，3 and 1 = 1 ，3 and 1 = 2 作为输入传给execute执行时，程序报错。</p>\n<p>同理对于字符型注入也一样。</p>\n<blockquote>\n<p>注意：在使用execute函数执行时，SQL语句中的占位符，不管是字符还是整型，都使用%s，且对于字符型的数据，在SQL语句里面不能使用’%s’，否则会报错。使用参数替换本质上是对输入的参数进行转义处理，防止输入中的引号。</p>\n</blockquote>\n</li>\n</ul>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<p>SQL 注入攻击是通过将恶意的SQL语句如添加、删除等插入到应用的输入参数中，经过后台解析后发送到数据库服务器上解析执行进行的攻击。本文以mysql为例，讨论SQL注入以及在Django中如何防止SQL注入。</p>\n<h2 id=\"SQL注入介绍\"><a href=\"#SQL注入介绍\" class=\"headerlink\" title=\"SQL注入介绍\"></a>SQL注入介绍</h2><p>在Web程序中，一般都会有后台根据用户输入内容查找或者执行相关动作的场景，如登录时查询用户是否存在。后台在处理的时候可能是根据用户输入的用户名，拼接SQL之后到数据库查询来判断，这时，如果用户恶意输入不正确内容或内容本身存在问题，会导致应用程序崩溃，甚至是丢失数据等导致相关损失。即通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。这种场景就称为SQL注入。</p>\n<h3 id=\"一个SQL注入的简单例子\"><a href=\"#一个SQL注入的简单例子\" class=\"headerlink\" title=\"一个SQL注入的简单例子\"></a>一个SQL注入的简单例子</h3><p>如执行一条SQL语句:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> </span><br><span class=\"line\">  <span class=\"keyword\">from</span> tb_user </span><br><span class=\"line\"> <span class=\"keyword\">where</span> username <span class=\"operator\">=</span> <span class=\"string\">&#x27;jacobzhou&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>其中jacobzhou是用户输入的值，此时可以得到正确的值：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>   <span class=\"keyword\">from</span> tb_user </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>  <span class=\"keyword\">where</span> username <span class=\"operator\">=</span> <span class=\"string\">&#x27;jacobzhou&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id   <span class=\"operator\">|</span> username  <span class=\"operator\">|</span> password <span class=\"operator\">|</span> age  <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>    <span class=\"number\">1</span> <span class=\"operator\">|</span> jacobzhou <span class=\"operator\">|</span> <span class=\"number\">123456</span>   <span class=\"operator\">|</span>   <span class=\"number\">29</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n<p>但是，当用户输入错误的值，如jacobzhou’;drop table  tb_test;，如果使用的是字符串拼接的方式去执行，SQL语句就变成了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * </span><br><span class=\"line\">  from tb_user </span><br><span class=\"line\"> where username &#x3D; &#39;jacobzhou&#39;;drop table tb_test;&#39;;</span><br></pre></td></tr></table></figure>\n\n<p>执行结果为：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>   <span class=\"keyword\">from</span> tb_user </span><br><span class=\"line\">    <span class=\"operator\">-</span><span class=\"operator\">&gt;</span>  <span class=\"keyword\">where</span> username <span class=\"operator\">=</span> <span class=\"string\">&#x27;jacobzhou&#x27;</span>;<span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> tb_test;<span class=\"string\">&#x27;;</span></span><br><span class=\"line\"><span class=\"string\">+------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"string\">| id   | username  | password | age  |</span></span><br><span class=\"line\"><span class=\"string\">+------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"string\">|    1 | jacobzhou | 123456   |   29 |</span></span><br><span class=\"line\"><span class=\"string\">+------+-----------+----------+------+</span></span><br><span class=\"line\"><span class=\"string\">1 row in set (0.00 sec)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">ERROR 1051 (42S02): Unknown table &#x27;</span>db<span class=\"operator\">-</span>platform.tb_test<span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">    &#x27;</span><span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<p>以上就是一个SQL注入的例子，可以看到，如果db-platform.tb_test表存在，那就会被恶意删除。例子相对较极端，对于Django自带的connection来说，使用execute函数执行SQL语句的时候，每次只执行一条语句，后一条语句不会执行。因此上面的例子在Django中是不成立的，但是足以说明SQL注入所带来的安全风险。那SQL注入都有哪些方式，如何才能防止SQL注入呢？</p>\n<h2 id=\"SQL注入原理\"><a href=\"#SQL注入原理\" class=\"headerlink\" title=\"SQL注入原理\"></a>SQL注入原理</h2><p>Web应用程序对于用户输入的数据和合法性没有严谨的判断，前端用户的输入直接传输给后端，攻击者通过构造不同的参数，形成不同的SQL语句来实现对数据库的任意操作。<br>SQL注入产生需要满足两个条件：</p>\n<ul>\n<li>参数用户可控：前端传给后端的参数内容是用户可以控制的</li>\n<li>参数带入数据库查询：传入的参数直接拼接到SQL语句，且带入数据库查询</li>\n</ul>\n<h2 id=\"SQL注入类型\"><a href=\"#SQL注入类型\" class=\"headerlink\" title=\"SQL注入类型\"></a>SQL注入类型</h2><p>SQL注入的分类有很多，如POST注入、Cookie注入、延时注入、搜索注入等，但是归根结底也是数字型和字符型注入的不同展现形式或者是注入的位置不同。</p>\n<h3 id=\"数字型\"><a href=\"#数字型\" class=\"headerlink\" title=\"数字型\"></a>数字型</h3><p>用户输入为整数，假设SQL语句为：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> home_application_database <span class=\"keyword\">where</span> id <span class=\"operator\">=</span> <span class=\"number\">3</span>; </span><br></pre></td></tr></table></figure>\n\n<p>其中3为数字，是用户正常输入。</p>\n<p>当满足如下条件，则可能存在数字型注入：</p>\n<ul>\n<li>输入3’ 页面报错（SQL语法错误）</li>\n<li>输入3 and 1 = 1 页面正常返回结果</li>\n<li>输入3 and 1=2 页面返回错误（SQL语句返回空数据）</li>\n</ul>\n<p>如果后台使用的是<code>select * from home_application_database where id = </code>和未经验证的用户输入做拼接后去数据库查询，就满足了上面的三个条件，存在数字型注入。</p>\n<p>这里可以看到用户输入必须是整数，后端验证用户输入必须是整数才会继续执行即可解决。</p>\n<h3 id=\"字符型\"><a href=\"#字符型\" class=\"headerlink\" title=\"字符型\"></a>字符型</h3><p>用户输入是字符串，如SQL语句：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> home_application_database <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;154&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>其中154是字符串，是用户正常输入。</p>\n<p>当满足如下条件时，则可能存在字符型注入：</p>\n<ul>\n<li>输入154’，页面异常（SQL语句语法错误）</li>\n<li>输入154’ and 1 = 1 – ，页面正常返回</li>\n<li>输入154’ and 1 = 2 – ，页面错误（查询结果为空）</li>\n</ul>\n<p>同数字型，如果后台直接使用拼接语句的形式去数据库执行，则就满足了上面单个条件，存在字符型注入。攻击者使用单引号的方式提前结束前一个单引号，并使用and来添加其他操作。</p>\n<h2 id=\"如何防止SQL注入\"><a href=\"#如何防止SQL注入\" class=\"headerlink\" title=\"如何防止SQL注入\"></a>如何防止SQL注入</h2><p>在开发时应该秉持一种<strong>外部参数皆不可信</strong>的原则来进行开发。</p>\n<ul>\n<li><p>加强参数验证</p>\n<p>开发时，验证所有来自前端的输入，必须是符合要求的数据类型，符合指定规则的数据才允许继续往下执行。</p>\n</li>\n<li><p>SQL语句参数化处理</p>\n<p>减少使用或不使用字符串拼接的方式执行SQL，而是将用户输入当着参数传给执行SQL的方法，如Django中的cursor.execute()函数就支持在SQL语句中使用占位符，将输入作为参数传递给方法执行。</p>\n</li>\n<li><p>存储过程</p>\n<p>使用存储过程也可以有效防止SQL注入，不过在存储过程中，需使用占位符，并且使用输入参数来预编译SQL语句后再执行。</p>\n</li>\n</ul>\n<h2 id=\"Django中防止SQL注入\"><a href=\"#Django中防止SQL注入\" class=\"headerlink\" title=\"Django中防止SQL注入\"></a>Django中防止SQL注入</h2><p>Django中使用ORM可以有效防止SQL注入，所以应该尽可能使用ORM。但是ORM对于复杂查询就无能为力了，这时就需要执行原生SQL时，可以使用如下方式：</p>\n<ol>\n<li>使用extra（不建议使用这种方式执行SQL）</li>\n<li>使用raw</li>\n<li>使用django.db执行自定义SQL</li>\n<li>直接使用pymysql</li>\n</ol>\n<p>在使用原生SQL语句时，应避免直接使用用户输入拼接SQL语句，上面三种执行原生SQL的方式均提供了占位符来进行参数替换，防止SQL注入。我们比较常用的是3、和4，两种方法都是使用cursor.execue()方法，具体如下：</p>\n<ul>\n<li><p>django.db</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> connection</span><br><span class=\"line\">cursor = connection.cursor()</span><br><span class=\"line\">cursor.execute(sql)</span><br><span class=\"line\">result = cursor.fetchall()</span><br></pre></td></tr></table></figure></li>\n<li><p>pymysql</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">connection = pymysql.connect(**mysql_server)</span><br><span class=\"line\">cursor = connection.cursor()</span><br><span class=\"line\">cursor.execute(sql)</span><br><span class=\"line\">result = cursor.fetchall()</span><br></pre></td></tr></table></figure>\n\n<p>execute中的sql语句使用占位符，并传入相应参数即可防止SQL注入：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sql&#x3D;&quot;select * from home_application_database where id &#x3D; %s&quot; </span><br><span class=\"line\">cursor.execute(sql,3)</span><br><span class=\"line\">1</span><br><span class=\"line\">cursor.execute(sql,&quot;3&#39;&quot;)</span><br><span class=\"line\">1</span><br><span class=\"line\">E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: &#39;3&#39;&#39;</span><br><span class=\"line\">  self._do_get_result()</span><br><span class=\"line\">cursor.execute(sql,&quot;3 and 1 &#x3D; 1 &quot;)</span><br><span class=\"line\">E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: &#39;3 and 1 &#x3D; 1 &#39;</span><br><span class=\"line\">1</span><br><span class=\"line\">  self._do_get_result()</span><br><span class=\"line\">cursor.execute(sql,&quot;3 and 1 &#x3D; 2 &quot;)</span><br><span class=\"line\">E:\\venv\\python2\\lib\\site-packages\\pymysql\\cursors.py:297: Warning: Truncated incorrect DOUBLE value: &#39;3 and 1 &#x3D; 2 &#39;</span><br><span class=\"line\">  self._do_get_result()</span><br><span class=\"line\">1</span><br></pre></td></tr></table></figure>\n\n<p>从上面执行结果看出，对于整数型注入，使用execute中带参数执行的方式，并不满足注入条件，当使用3’，3 and 1 = 1 ，3 and 1 = 2 作为输入传给execute执行时，程序报错。</p>\n<p>同理对于字符型注入也一样。</p>\n<blockquote>\n<p>注意：在使用execute函数执行时，SQL语句中的占位符，不管是字符还是整型，都使用%s，且对于字符型的数据，在SQL语句里面不能使用’%s’，否则会报错。使用参数替换本质上是对输入的参数进行转义处理，防止输入中的引号。</p>\n</blockquote>\n</li>\n</ul>\n"},{"title":"活着：现实与意义","keywords":"活着","cover":"2021/10/21/活着：现实与意义/451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg","top_img":"2021/10/21/活着：现实与意义/451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg","date":"2021-10-21T12:02:17.000Z","description":"人是为活着本身而活着的，而不是为活着之外的任何事物所活着","_content":"\n# 一、脑图\n\n![](活着.png)\n\n[下载Xmind脑图](活着.xmind)\n\n# 二、摘录\n\n人是为活着本身而活着的，而不是为活着之外的任何事物所活着\n\n做人呵，一旦嫖上以后，也就免不了要去赌。这个嫖和赌，就像是胳膊和肩膀连在一起，怎么都分不开。\n\n人只要活得高兴，穷也不怕。\n\n人要是累得整天没力气，就不会去乱想了。\n\n只要想着自己不死，就死不了。\n\n我全身都是越来越硬，只有一个地方越来越软。\n\n做人不能忘记四条，话不要说错，床不要睡错，门槛不要踏错，口袋不要摸错。\n\n人老了也是人，是人就得干净一些。\n\n死人都还想活过来，你一个大活人可不能去死。\n\n你的命是爹娘给的，你不要命了也得先去问问他们。\n\n一个人命再大，要是自己想死，那就怎么也活不了。\n\n我也想不到，先前最怕的就是我和家珍死了凤霞怎么办，你娶了凤霞，我们心就定了，有了孩子更好了，凤霞以后死了也有人收作。\n\n人啊，活着时受了再多的苦，到了快死的时候也会想个法子来宽慰自己，\n\n葬，全是我亲手埋的，到了有一天我腿一伸，也不用担心谁了。我也想通了，轮到自己死时，安安心心死就是，不用盼着收尸的人，村里肯定会有人来埋我的，要不我人一臭，那气味谁也受不了。我不会让别人白白埋我的，我在枕头底下压了十元钱，这十元钱我饿死也不会去动它的，村里人都知道这十元钱是给替我收尸的那个人，他们也都知道我死后是要和家珍他们埋在一起的。\n\n做人还是平常点好，争这个争那个，争来争去赔了自己的命。像我这样，说起来是越混越没出息，可寿命长，我认识的人一个挨着一个死去，我还活着。\n\n想想做牛真是可怜。累死累活替人干了一辈子，老了，力气小了，就要被人宰了吃掉。\n\n# 三、感想\n人活着是没有意义的，或者说人活着的意义就是活着本身。\n没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？\n人们每天都做着重复的事情，每一代的人都重复着上一代人的路途。但是既然活着，又何必急着去死？\n谁又能确定自己是活着的？","source":"_posts/活着：现实与意义.md","raw":"---\ntitle: 活着：现实与意义\ncategory: 读书笔记\ntags:\n  - 读书笔记\nkeywords: 活着\ncover: 451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg\ntop_img: 451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg\ndate: 2021-10-21 20:02:17\ndescription: 人是为活着本身而活着的，而不是为活着之外的任何事物所活着\n---\n\n# 一、脑图\n\n![](活着.png)\n\n[下载Xmind脑图](活着.xmind)\n\n# 二、摘录\n\n人是为活着本身而活着的，而不是为活着之外的任何事物所活着\n\n做人呵，一旦嫖上以后，也就免不了要去赌。这个嫖和赌，就像是胳膊和肩膀连在一起，怎么都分不开。\n\n人只要活得高兴，穷也不怕。\n\n人要是累得整天没力气，就不会去乱想了。\n\n只要想着自己不死，就死不了。\n\n我全身都是越来越硬，只有一个地方越来越软。\n\n做人不能忘记四条，话不要说错，床不要睡错，门槛不要踏错，口袋不要摸错。\n\n人老了也是人，是人就得干净一些。\n\n死人都还想活过来，你一个大活人可不能去死。\n\n你的命是爹娘给的，你不要命了也得先去问问他们。\n\n一个人命再大，要是自己想死，那就怎么也活不了。\n\n我也想不到，先前最怕的就是我和家珍死了凤霞怎么办，你娶了凤霞，我们心就定了，有了孩子更好了，凤霞以后死了也有人收作。\n\n人啊，活着时受了再多的苦，到了快死的时候也会想个法子来宽慰自己，\n\n葬，全是我亲手埋的，到了有一天我腿一伸，也不用担心谁了。我也想通了，轮到自己死时，安安心心死就是，不用盼着收尸的人，村里肯定会有人来埋我的，要不我人一臭，那气味谁也受不了。我不会让别人白白埋我的，我在枕头底下压了十元钱，这十元钱我饿死也不会去动它的，村里人都知道这十元钱是给替我收尸的那个人，他们也都知道我死后是要和家珍他们埋在一起的。\n\n做人还是平常点好，争这个争那个，争来争去赔了自己的命。像我这样，说起来是越混越没出息，可寿命长，我认识的人一个挨着一个死去，我还活着。\n\n想想做牛真是可怜。累死累活替人干了一辈子，老了，力气小了，就要被人宰了吃掉。\n\n# 三、感想\n人活着是没有意义的，或者说人活着的意义就是活着本身。\n没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？\n人们每天都做着重复的事情，每一代的人都重复着上一代人的路途。但是既然活着，又何必急着去死？\n谁又能确定自己是活着的？","slug":"活着：现实与意义","published":1,"updated":"2022-01-01T14:32:15.512Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vr0038hx897xiz4n91","content":"<h1 id=\"一、脑图\"><a href=\"#一、脑图\" class=\"headerlink\" title=\"一、脑图\"></a>一、脑图</h1><p><img src=\"%E6%B4%BB%E7%9D%80.png\"></p>\n<p><a href=\"%E6%B4%BB%E7%9D%80.xmind\">下载Xmind脑图</a></p>\n<h1 id=\"二、摘录\"><a href=\"#二、摘录\" class=\"headerlink\" title=\"二、摘录\"></a>二、摘录</h1><p>人是为活着本身而活着的，而不是为活着之外的任何事物所活着</p>\n<p>做人呵，一旦嫖上以后，也就免不了要去赌。这个嫖和赌，就像是胳膊和肩膀连在一起，怎么都分不开。</p>\n<p>人只要活得高兴，穷也不怕。</p>\n<p>人要是累得整天没力气，就不会去乱想了。</p>\n<p>只要想着自己不死，就死不了。</p>\n<p>我全身都是越来越硬，只有一个地方越来越软。</p>\n<p>做人不能忘记四条，话不要说错，床不要睡错，门槛不要踏错，口袋不要摸错。</p>\n<p>人老了也是人，是人就得干净一些。</p>\n<p>死人都还想活过来，你一个大活人可不能去死。</p>\n<p>你的命是爹娘给的，你不要命了也得先去问问他们。</p>\n<p>一个人命再大，要是自己想死，那就怎么也活不了。</p>\n<p>我也想不到，先前最怕的就是我和家珍死了凤霞怎么办，你娶了凤霞，我们心就定了，有了孩子更好了，凤霞以后死了也有人收作。</p>\n<p>人啊，活着时受了再多的苦，到了快死的时候也会想个法子来宽慰自己，</p>\n<p>葬，全是我亲手埋的，到了有一天我腿一伸，也不用担心谁了。我也想通了，轮到自己死时，安安心心死就是，不用盼着收尸的人，村里肯定会有人来埋我的，要不我人一臭，那气味谁也受不了。我不会让别人白白埋我的，我在枕头底下压了十元钱，这十元钱我饿死也不会去动它的，村里人都知道这十元钱是给替我收尸的那个人，他们也都知道我死后是要和家珍他们埋在一起的。</p>\n<p>做人还是平常点好，争这个争那个，争来争去赔了自己的命。像我这样，说起来是越混越没出息，可寿命长，我认识的人一个挨着一个死去，我还活着。</p>\n<p>想想做牛真是可怜。累死累活替人干了一辈子，老了，力气小了，就要被人宰了吃掉。</p>\n<h1 id=\"三、感想\"><a href=\"#三、感想\" class=\"headerlink\" title=\"三、感想\"></a>三、感想</h1><p>人活着是没有意义的，或者说人活着的意义就是活着本身。<br>没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？<br>人们每天都做着重复的事情，每一代的人都重复着上一代人的路途。但是既然活着，又何必急着去死？<br>谁又能确定自己是活着的？</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<h1 id=\"一、脑图\"><a href=\"#一、脑图\" class=\"headerlink\" title=\"一、脑图\"></a>一、脑图</h1><p><img src=\"%E6%B4%BB%E7%9D%80.png\"></p>\n<p><a href=\"%E6%B4%BB%E7%9D%80.xmind\">下载Xmind脑图</a></p>\n<h1 id=\"二、摘录\"><a href=\"#二、摘录\" class=\"headerlink\" title=\"二、摘录\"></a>二、摘录</h1><p>人是为活着本身而活着的，而不是为活着之外的任何事物所活着</p>\n<p>做人呵，一旦嫖上以后，也就免不了要去赌。这个嫖和赌，就像是胳膊和肩膀连在一起，怎么都分不开。</p>\n<p>人只要活得高兴，穷也不怕。</p>\n<p>人要是累得整天没力气，就不会去乱想了。</p>\n<p>只要想着自己不死，就死不了。</p>\n<p>我全身都是越来越硬，只有一个地方越来越软。</p>\n<p>做人不能忘记四条，话不要说错，床不要睡错，门槛不要踏错，口袋不要摸错。</p>\n<p>人老了也是人，是人就得干净一些。</p>\n<p>死人都还想活过来，你一个大活人可不能去死。</p>\n<p>你的命是爹娘给的，你不要命了也得先去问问他们。</p>\n<p>一个人命再大，要是自己想死，那就怎么也活不了。</p>\n<p>我也想不到，先前最怕的就是我和家珍死了凤霞怎么办，你娶了凤霞，我们心就定了，有了孩子更好了，凤霞以后死了也有人收作。</p>\n<p>人啊，活着时受了再多的苦，到了快死的时候也会想个法子来宽慰自己，</p>\n<p>葬，全是我亲手埋的，到了有一天我腿一伸，也不用担心谁了。我也想通了，轮到自己死时，安安心心死就是，不用盼着收尸的人，村里肯定会有人来埋我的，要不我人一臭，那气味谁也受不了。我不会让别人白白埋我的，我在枕头底下压了十元钱，这十元钱我饿死也不会去动它的，村里人都知道这十元钱是给替我收尸的那个人，他们也都知道我死后是要和家珍他们埋在一起的。</p>\n<p>做人还是平常点好，争这个争那个，争来争去赔了自己的命。像我这样，说起来是越混越没出息，可寿命长，我认识的人一个挨着一个死去，我还活着。</p>\n<p>想想做牛真是可怜。累死累活替人干了一辈子，老了，力气小了，就要被人宰了吃掉。</p>\n<h1 id=\"三、感想\"><a href=\"#三、感想\" class=\"headerlink\" title=\"三、感想\"></a>三、感想</h1><p>人活着是没有意义的，或者说人活着的意义就是活着本身。<br>没有必须要去死的理由，那就好好的活着，活着或许没有意义，但是死亡也不见得有意义？<br>人们每天都做着重复的事情，每一代的人都重复着上一代人的路途。但是既然活着，又何必急着去死？<br>谁又能确定自己是活着的？</p>\n"},{"title":"如何写好一篇技术文章","date":"2021-03-27T02:36:03.000Z","keywords":"技术文章","cover":"2021/03/27/如何写好一篇技术文章/1603476003.jpg","top_img":"2021/03/27/如何写好一篇技术文章/1603476003.jpg","description":"本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。","_content":"\n本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。\n\n![如何写好一篇技术文章](如何写好一篇技术文章.png)\n\n\n\n详细的内容请移步 https://www.jianshu.com/p/77aeb135e5d1 。\n\n文中的参考地址 https://github.com/ruanyf/document-style-guide 中的内容也不错。\n\n","source":"_posts/如何写好一篇技术文章.md","raw":"---\ntitle: 如何写好一篇技术文章\ndate: 2021-03-27 10:36:03\ncategory: 技术文章 \ntags:\n\t- 技术文章\nkeywords: '技术文章'\ncover: 1603476003.jpg\ntop_img: 1603476003.jpg\ndescription: 本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。\n---\n\n本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。本文仅一张脑图，由 https://www.jianshu.com/p/77aeb135e5d1 总结而来。\n\n![如何写好一篇技术文章](如何写好一篇技术文章.png)\n\n\n\n详细的内容请移步 https://www.jianshu.com/p/77aeb135e5d1 。\n\n文中的参考地址 https://github.com/ruanyf/document-style-guide 中的内容也不错。\n\n","slug":"如何写好一篇技术文章","published":1,"updated":"2022-01-01T14:32:15.508Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vr003ahx898hka666b","content":"<p>本文仅一张脑图，由 <a href=\"https://www.jianshu.com/p/77aeb135e5d1\">https://www.jianshu.com/p/77aeb135e5d1</a> 总结而来。本文仅一张脑图，由 <a href=\"https://www.jianshu.com/p/77aeb135e5d1\">https://www.jianshu.com/p/77aeb135e5d1</a> 总结而来。</p>\n<p><img src=\"%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BD%E4%B8%80%E7%AF%87%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0.png\" alt=\"如何写好一篇技术文章\"></p>\n<p>详细的内容请移步 <a href=\"https://www.jianshu.com/p/77aeb135e5d1\">https://www.jianshu.com/p/77aeb135e5d1</a> 。</p>\n<p>文中的参考地址 <a href=\"https://github.com/ruanyf/document-style-guide\">https://github.com/ruanyf/document-style-guide</a> 中的内容也不错。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>本文仅一张脑图，由 <a href=\"https://www.jianshu.com/p/77aeb135e5d1\">https://www.jianshu.com/p/77aeb135e5d1</a> 总结而来。本文仅一张脑图，由 <a href=\"https://www.jianshu.com/p/77aeb135e5d1\">https://www.jianshu.com/p/77aeb135e5d1</a> 总结而来。</p>\n<p><img src=\"%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BD%E4%B8%80%E7%AF%87%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0.png\" alt=\"如何写好一篇技术文章\"></p>\n<p>详细的内容请移步 <a href=\"https://www.jianshu.com/p/77aeb135e5d1\">https://www.jianshu.com/p/77aeb135e5d1</a> 。</p>\n<p>文中的参考地址 <a href=\"https://github.com/ruanyf/document-style-guide\">https://github.com/ruanyf/document-style-guide</a> 中的内容也不错。</p>\n"},{"title":"股票盈利宝典：强庄股买卖","date":"2021-09-28T22:43:50.000Z","keywords":null,"cover":"2021/09/29/股票盈利宝典：强庄股买卖/pc29.jpg","top_img":"2021/09/29/股票盈利宝典：强庄股买卖/pc29.jpg","description":"《股票盈利宝典》视频教程学习笔记","_content":"\n\n\n## 一、神奇的趋势线\n\n- 神奇的趋势线：144均线\n- 顺势而为：在大版上涨趋势中去找做符合144均线以上股票，（能做到这一点就已经超越了60%的散户）当然144均线以上知识其中的一个条件，还需要配合量能、筹码等知识。\n\n## 二、主力成交量技术\n\n- 有效跌破：跌破后的连续三个交易日的收盘价在支撑位下方\n- 有效突破：突破后的连续3个交易日的收盘价在压力位上方\n- 压力位、支撑位：根据经验选择\n- 成交量：指一个时间单位内对某项交易成交的数量（单位：手）\n- 成交额：成交量\\*100\\*成交价格\n- 成交量就是真金白银、交易活跃程度\n- 成交量放大（放量）：主力是可以做出来的，倒手活着大量买入\n- 成交量放大（缩量）：主力是不能控制的，主力自己不买卖，不能控制别的投资者买卖\n- 成交量120日均量是重要的参考标志，交易活跃。大部分强势股都是交易活跃\n\n## 三、主力筹码技术\n\n- 筹码：流通盘固定，但是持有股票人的买入价格不一样，所以持有者筹码价格不一样\n  - 能有效识别主力建仓和派发全过程\n  - 能分辨支撑位和压力位\n  - 判断成交密集区和筹码分布变化\n- 主力不愿意拉升的筹码形态\n  - 大量的套牢筹码\n  - 筹码分布极其不均匀\n\n## 四、识别主力手法\n\n![](识别主力手法.png)\n\n## 五、主力诱导手法\n\n- 名博、新闻、媒体上看到的优质股票消息，大部分都是诱导\n- 主力出货无非就是诱导你进场\n- 主力诱导手法：\n  - 主力提前画瓢，让你看出所谓的“规律”\n  - 创新高诱导\n\n## 六、短线强庄股\n\n- 你是如何买股票的？\n  - 抄底（很容易操在半山腰）\n  - 最高（很容易被套）\n  - 买低位横盘股\n- 短线强庄股特点\n  - 股价站稳144均线上方\n  - 有连续的3个交易提成交量在120日均线以上\n  - 套牢筹码不能大于80%\n  - 前期有下跌过的（不是在高位）\n  - 流通值小于100亿\n\n\n\n## 七、短线强庄股初选\n\n- 下午15:00后抽时间复盘\n- 初步选出短线强庄股（按涨幅从高到低排序）\n\n## 八、强庄股买卖点\n\n- 选出完全符合短线强庄股特点的个股\n- 剔除新股和ST股\n- 提出突破144均线后涨幅超过20%的个股\n- 剔除走势紊乱的个股\n\n- 大盘处于震荡行情活着上涨行情（最好上涨行情）\n- 符合条件的个股最好是属于热门题材的个股\n- 买入时机最好是在5日均线附近\n- 利润在5到15个点左右可以考虑卖出\n- 不破5日线不出\n- 结合前期高点压力位置卖出","source":"_posts/股票盈利宝典：强庄股买卖.md","raw":"---\ntitle: 股票盈利宝典：强庄股买卖\ndate: 2021-09-29 06:43:50\ncategory: 股票\ntags: \n - 股票\nkeywords: \ncover: pc29.jpg\ntop_img: pc29.jpg\ndescription:  《股票盈利宝典》视频教程学习笔记\n---\n\n\n\n## 一、神奇的趋势线\n\n- 神奇的趋势线：144均线\n- 顺势而为：在大版上涨趋势中去找做符合144均线以上股票，（能做到这一点就已经超越了60%的散户）当然144均线以上知识其中的一个条件，还需要配合量能、筹码等知识。\n\n## 二、主力成交量技术\n\n- 有效跌破：跌破后的连续三个交易日的收盘价在支撑位下方\n- 有效突破：突破后的连续3个交易日的收盘价在压力位上方\n- 压力位、支撑位：根据经验选择\n- 成交量：指一个时间单位内对某项交易成交的数量（单位：手）\n- 成交额：成交量\\*100\\*成交价格\n- 成交量就是真金白银、交易活跃程度\n- 成交量放大（放量）：主力是可以做出来的，倒手活着大量买入\n- 成交量放大（缩量）：主力是不能控制的，主力自己不买卖，不能控制别的投资者买卖\n- 成交量120日均量是重要的参考标志，交易活跃。大部分强势股都是交易活跃\n\n## 三、主力筹码技术\n\n- 筹码：流通盘固定，但是持有股票人的买入价格不一样，所以持有者筹码价格不一样\n  - 能有效识别主力建仓和派发全过程\n  - 能分辨支撑位和压力位\n  - 判断成交密集区和筹码分布变化\n- 主力不愿意拉升的筹码形态\n  - 大量的套牢筹码\n  - 筹码分布极其不均匀\n\n## 四、识别主力手法\n\n![](识别主力手法.png)\n\n## 五、主力诱导手法\n\n- 名博、新闻、媒体上看到的优质股票消息，大部分都是诱导\n- 主力出货无非就是诱导你进场\n- 主力诱导手法：\n  - 主力提前画瓢，让你看出所谓的“规律”\n  - 创新高诱导\n\n## 六、短线强庄股\n\n- 你是如何买股票的？\n  - 抄底（很容易操在半山腰）\n  - 最高（很容易被套）\n  - 买低位横盘股\n- 短线强庄股特点\n  - 股价站稳144均线上方\n  - 有连续的3个交易提成交量在120日均线以上\n  - 套牢筹码不能大于80%\n  - 前期有下跌过的（不是在高位）\n  - 流通值小于100亿\n\n\n\n## 七、短线强庄股初选\n\n- 下午15:00后抽时间复盘\n- 初步选出短线强庄股（按涨幅从高到低排序）\n\n## 八、强庄股买卖点\n\n- 选出完全符合短线强庄股特点的个股\n- 剔除新股和ST股\n- 提出突破144均线后涨幅超过20%的个股\n- 剔除走势紊乱的个股\n\n- 大盘处于震荡行情活着上涨行情（最好上涨行情）\n- 符合条件的个股最好是属于热门题材的个股\n- 买入时机最好是在5日均线附近\n- 利润在5到15个点左右可以考虑卖出\n- 不破5日线不出\n- 结合前期高点压力位置卖出","slug":"股票盈利宝典：强庄股买卖","published":1,"updated":"2022-01-01T14:32:15.515Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vs003chx89ci44hhqn","content":"<h2 id=\"一、神奇的趋势线\"><a href=\"#一、神奇的趋势线\" class=\"headerlink\" title=\"一、神奇的趋势线\"></a>一、神奇的趋势线</h2><ul>\n<li>神奇的趋势线：144均线</li>\n<li>顺势而为：在大版上涨趋势中去找做符合144均线以上股票，（能做到这一点就已经超越了60%的散户）当然144均线以上知识其中的一个条件，还需要配合量能、筹码等知识。</li>\n</ul>\n<h2 id=\"二、主力成交量技术\"><a href=\"#二、主力成交量技术\" class=\"headerlink\" title=\"二、主力成交量技术\"></a>二、主力成交量技术</h2><ul>\n<li>有效跌破：跌破后的连续三个交易日的收盘价在支撑位下方</li>\n<li>有效突破：突破后的连续3个交易日的收盘价在压力位上方</li>\n<li>压力位、支撑位：根据经验选择</li>\n<li>成交量：指一个时间单位内对某项交易成交的数量（单位：手）</li>\n<li>成交额：成交量*100*成交价格</li>\n<li>成交量就是真金白银、交易活跃程度</li>\n<li>成交量放大（放量）：主力是可以做出来的，倒手活着大量买入</li>\n<li>成交量放大（缩量）：主力是不能控制的，主力自己不买卖，不能控制别的投资者买卖</li>\n<li>成交量120日均量是重要的参考标志，交易活跃。大部分强势股都是交易活跃</li>\n</ul>\n<h2 id=\"三、主力筹码技术\"><a href=\"#三、主力筹码技术\" class=\"headerlink\" title=\"三、主力筹码技术\"></a>三、主力筹码技术</h2><ul>\n<li>筹码：流通盘固定，但是持有股票人的买入价格不一样，所以持有者筹码价格不一样<ul>\n<li>能有效识别主力建仓和派发全过程</li>\n<li>能分辨支撑位和压力位</li>\n<li>判断成交密集区和筹码分布变化</li>\n</ul>\n</li>\n<li>主力不愿意拉升的筹码形态<ul>\n<li>大量的套牢筹码</li>\n<li>筹码分布极其不均匀</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"四、识别主力手法\"><a href=\"#四、识别主力手法\" class=\"headerlink\" title=\"四、识别主力手法\"></a>四、识别主力手法</h2><p><img src=\"%E8%AF%86%E5%88%AB%E4%B8%BB%E5%8A%9B%E6%89%8B%E6%B3%95.png\"></p>\n<h2 id=\"五、主力诱导手法\"><a href=\"#五、主力诱导手法\" class=\"headerlink\" title=\"五、主力诱导手法\"></a>五、主力诱导手法</h2><ul>\n<li>名博、新闻、媒体上看到的优质股票消息，大部分都是诱导</li>\n<li>主力出货无非就是诱导你进场</li>\n<li>主力诱导手法：<ul>\n<li>主力提前画瓢，让你看出所谓的“规律”</li>\n<li>创新高诱导</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"六、短线强庄股\"><a href=\"#六、短线强庄股\" class=\"headerlink\" title=\"六、短线强庄股\"></a>六、短线强庄股</h2><ul>\n<li>你是如何买股票的？<ul>\n<li>抄底（很容易操在半山腰）</li>\n<li>最高（很容易被套）</li>\n<li>买低位横盘股</li>\n</ul>\n</li>\n<li>短线强庄股特点<ul>\n<li>股价站稳144均线上方</li>\n<li>有连续的3个交易提成交量在120日均线以上</li>\n<li>套牢筹码不能大于80%</li>\n<li>前期有下跌过的（不是在高位）</li>\n<li>流通值小于100亿</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"七、短线强庄股初选\"><a href=\"#七、短线强庄股初选\" class=\"headerlink\" title=\"七、短线强庄股初选\"></a>七、短线强庄股初选</h2><ul>\n<li>下午15:00后抽时间复盘</li>\n<li>初步选出短线强庄股（按涨幅从高到低排序）</li>\n</ul>\n<h2 id=\"八、强庄股买卖点\"><a href=\"#八、强庄股买卖点\" class=\"headerlink\" title=\"八、强庄股买卖点\"></a>八、强庄股买卖点</h2><ul>\n<li><p>选出完全符合短线强庄股特点的个股</p>\n</li>\n<li><p>剔除新股和ST股</p>\n</li>\n<li><p>提出突破144均线后涨幅超过20%的个股</p>\n</li>\n<li><p>剔除走势紊乱的个股</p>\n</li>\n<li><p>大盘处于震荡行情活着上涨行情（最好上涨行情）</p>\n</li>\n<li><p>符合条件的个股最好是属于热门题材的个股</p>\n</li>\n<li><p>买入时机最好是在5日均线附近</p>\n</li>\n<li><p>利润在5到15个点左右可以考虑卖出</p>\n</li>\n<li><p>不破5日线不出</p>\n</li>\n<li><p>结合前期高点压力位置卖出</p>\n</li>\n</ul>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<h2 id=\"一、神奇的趋势线\"><a href=\"#一、神奇的趋势线\" class=\"headerlink\" title=\"一、神奇的趋势线\"></a>一、神奇的趋势线</h2><ul>\n<li>神奇的趋势线：144均线</li>\n<li>顺势而为：在大版上涨趋势中去找做符合144均线以上股票，（能做到这一点就已经超越了60%的散户）当然144均线以上知识其中的一个条件，还需要配合量能、筹码等知识。</li>\n</ul>\n<h2 id=\"二、主力成交量技术\"><a href=\"#二、主力成交量技术\" class=\"headerlink\" title=\"二、主力成交量技术\"></a>二、主力成交量技术</h2><ul>\n<li>有效跌破：跌破后的连续三个交易日的收盘价在支撑位下方</li>\n<li>有效突破：突破后的连续3个交易日的收盘价在压力位上方</li>\n<li>压力位、支撑位：根据经验选择</li>\n<li>成交量：指一个时间单位内对某项交易成交的数量（单位：手）</li>\n<li>成交额：成交量*100*成交价格</li>\n<li>成交量就是真金白银、交易活跃程度</li>\n<li>成交量放大（放量）：主力是可以做出来的，倒手活着大量买入</li>\n<li>成交量放大（缩量）：主力是不能控制的，主力自己不买卖，不能控制别的投资者买卖</li>\n<li>成交量120日均量是重要的参考标志，交易活跃。大部分强势股都是交易活跃</li>\n</ul>\n<h2 id=\"三、主力筹码技术\"><a href=\"#三、主力筹码技术\" class=\"headerlink\" title=\"三、主力筹码技术\"></a>三、主力筹码技术</h2><ul>\n<li>筹码：流通盘固定，但是持有股票人的买入价格不一样，所以持有者筹码价格不一样<ul>\n<li>能有效识别主力建仓和派发全过程</li>\n<li>能分辨支撑位和压力位</li>\n<li>判断成交密集区和筹码分布变化</li>\n</ul>\n</li>\n<li>主力不愿意拉升的筹码形态<ul>\n<li>大量的套牢筹码</li>\n<li>筹码分布极其不均匀</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"四、识别主力手法\"><a href=\"#四、识别主力手法\" class=\"headerlink\" title=\"四、识别主力手法\"></a>四、识别主力手法</h2><p><img src=\"%E8%AF%86%E5%88%AB%E4%B8%BB%E5%8A%9B%E6%89%8B%E6%B3%95.png\"></p>\n<h2 id=\"五、主力诱导手法\"><a href=\"#五、主力诱导手法\" class=\"headerlink\" title=\"五、主力诱导手法\"></a>五、主力诱导手法</h2><ul>\n<li>名博、新闻、媒体上看到的优质股票消息，大部分都是诱导</li>\n<li>主力出货无非就是诱导你进场</li>\n<li>主力诱导手法：<ul>\n<li>主力提前画瓢，让你看出所谓的“规律”</li>\n<li>创新高诱导</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"六、短线强庄股\"><a href=\"#六、短线强庄股\" class=\"headerlink\" title=\"六、短线强庄股\"></a>六、短线强庄股</h2><ul>\n<li>你是如何买股票的？<ul>\n<li>抄底（很容易操在半山腰）</li>\n<li>最高（很容易被套）</li>\n<li>买低位横盘股</li>\n</ul>\n</li>\n<li>短线强庄股特点<ul>\n<li>股价站稳144均线上方</li>\n<li>有连续的3个交易提成交量在120日均线以上</li>\n<li>套牢筹码不能大于80%</li>\n<li>前期有下跌过的（不是在高位）</li>\n<li>流通值小于100亿</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"七、短线强庄股初选\"><a href=\"#七、短线强庄股初选\" class=\"headerlink\" title=\"七、短线强庄股初选\"></a>七、短线强庄股初选</h2><ul>\n<li>下午15:00后抽时间复盘</li>\n<li>初步选出短线强庄股（按涨幅从高到低排序）</li>\n</ul>\n<h2 id=\"八、强庄股买卖点\"><a href=\"#八、强庄股买卖点\" class=\"headerlink\" title=\"八、强庄股买卖点\"></a>八、强庄股买卖点</h2><ul>\n<li><p>选出完全符合短线强庄股特点的个股</p>\n</li>\n<li><p>剔除新股和ST股</p>\n</li>\n<li><p>提出突破144均线后涨幅超过20%的个股</p>\n</li>\n<li><p>剔除走势紊乱的个股</p>\n</li>\n<li><p>大盘处于震荡行情活着上涨行情（最好上涨行情）</p>\n</li>\n<li><p>符合条件的个股最好是属于热门题材的个股</p>\n</li>\n<li><p>买入时机最好是在5日均线附近</p>\n</li>\n<li><p>利润在5到15个点左右可以考虑卖出</p>\n</li>\n<li><p>不破5日线不出</p>\n</li>\n<li><p>结合前期高点压力位置卖出</p>\n</li>\n</ul>\n"},{"title":"搭建一个单主模式的MGR集群","cover":"2021/05/10/搭建一个单主模式的MGR集群/1605722404.jpg","top_img:":"1605722404.jpg","date":"2021-05-10T02:55:23.000Z","keywords":"‘MySQL,组复制’","description":"搭建一个单主模式的MGR集群","_content":"\n搭建一个单主模式的MGR集群\n\n# 环境说明\n\n实验基于MySQL8.0.24版本，操作系统为CentOS7，共三个节点，分别如下：\n\n| 主机名 | IP              | Port | Server Id |\n| ------ | --------------- | ---- | --------- |\n| db156  | 192.168.165.156 | 3306 | 1         |\n| db157  | 192.168.165.157 | 3306 | 2         |\n| db225  | 192.168.165.225 | 3306 | 3         |\n\n架构如下：\n\n![单节点单主组复制架构](单节点单主组复制架构.png)\n\n# 修改hosts配置\n\n修改每个服务器的/etc/hosts文件并增加每个服务器的映射：\n\n```\n192.168.165.156 db156\n192.168.165.157 db157\n192.168.165.225 db225\n```\n\n# 部署MySQL实例\n\n不做赘述\n\n# 第一个节点配置\n\n修改my.cnf文件并重启MySQL服务\n\n在mysqld下增加如下配置：\n\n```\ndisabled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\nserver_id = 1\ngtid_mode=ON\nenforce_gtid_consistency=ON\nbinlog_checksum=NONE\nlog_bin = /data/mysql/logs/mysql-bin\nlog_slave_updates=ON\nbinlog_format=ROW\nmaster_info_repository=TABLE\nrelay_log_info_repository=TABLE\ntransaction_write_set_extraction=XXHASH64\nplugin_load_add='group_replication.so'\ngroup_replication_group_name=\"1eab024d-afdd-11eb-a2d1-005056a0bb1a\"\ngroup_replication_start_on_boot=off\ngroup_replication_local_address= \"192.168.165.156:33061\"\ngroup_replication_group_seeds= \"192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061\"\ngroup_replication_bootstrap_group=off\n```\n\n重启MySQL服务后执行如下操作：\n\n```sql\n[root@db156 ~]# mysql\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.24 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER repl@'%' IDENTIFIED BY '123456';\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> GRANT REPLICATION SLAVE ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT BACKUP_ADMIN ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CHANGE REPLICATION SOURCE TO SOURCE_USER='repl', SOURCE_PASSWORD='123456' FOR CHANNEL 'group_replication_recovery';\nQuery OK, 0 rows affected, 2 warnings (0.02 sec)\n\nmysql> SET GLOBAL group_replication_bootstrap_group=ON;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected (2.24 sec)\n\nmysql> SET GLOBAL group_replication_bootstrap_group=OFF;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SELECT * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 9b4c6994-afd5-11eb-beab-005056a0bb1a | db156       |        3306 | ONLINE       | PRIMARY     | 8.0.24         |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n1 row in set (0.00 sec)\n\n# 创建测试库\nmysql> CREATE DATABASE test;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> USE test;\nDatabase changed\nmysql> CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 TEXT NOT NULL);\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> INSERT INTO t1 VALUES (1, 'Luis');\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> \n\n```\n\n# 第二个节点配置\n\n将第一个节点的配置文件复制到第二个节点并修改server-id和group_replication_local_address即可\n\n```\nserver_id = 2\nbinlog_format = ROW\ndisabled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\ngtid_mode=ON\nenforce_gtid_consistency=ON\nbinlog_checksum=NONE\nlog_slave_updates=ON\nmaster_info_repository=TABLE\nrelay_log_info_repository=TABLE\ntransaction_write_set_extraction=XXHASH64\nplugin_load_add='group_replication.so'\ngroup_replication_group_name=\"1eab024d-afdd-11eb-a2d1-005056a0bb1a\"\ngroup_replication_start_on_boot=off\ngroup_replication_local_address= \"192.168.165.157:33061\"\ngroup_replication_group_seeds= \"192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061\"\ngroup_replication_bootstrap_group=off\n```\n\n重启后执行如下操作，注意和第一个节点的区别：\n\n```sql\n[root@db157 ~]# mysql\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.24 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER repl@'%' IDENTIFIED BY '123456';\nQuery OK, 0 rows affected (0.03 sec)\n\nmysql> GRANT REPLICATION SLAVE ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT BACKUP_ADMIN ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CHANGE REPLICATION SOURCE TO SOURCE_USER='repl', SOURCE_PASSWORD='123456' FOR CHANNEL 'group_replication_recovery';\nQuery OK, 0 rows affected, 2 warnings (0.01 sec)\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected (3.11 sec)\n\nmysql> SELECT * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 89999650-afd6-11eb-893e-005056a0d28b | db157       |        3306 | RECOVERING   | SECONDARY   | 8.0.24         |\n| group_replication_applier | 9b4c6994-afd5-11eb-beab-005056a0bb1a | db156       |        3306 | ONLINE       | PRIMARY     | 8.0.24         |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n2 rows in set (0.01 sec)\n\nmysql> SELECT * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 89999650-afd6-11eb-893e-005056a0d28b | db157       |        3306 | ONLINE       | SECONDARY   | 8.0.24         |\n| group_replication_applier | 9b4c6994-afd5-11eb-beab-005056a0bb1a | db156       |        3306 | ONLINE       | PRIMARY     | 8.0.24         |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n2 rows in set (0.00 sec)\n\nmysql> \n```\n\n\n\n# 第三个节点配置\n\n与第二个节点相同","source":"_posts/搭建一个单主模式的MGR集群.md","raw":"---\ntitle: 搭建一个单主模式的MGR集群\ntags:\n  - MySQL\n  - 组复制\ncategory:\n  - MySQL\ncover: 1605722404.jpg\n'top_img:': 1605722404.jpg\ndate: 2021-05-10 10:55:23\nkeywords: ‘MySQL,组复制’\ndescription: 搭建一个单主模式的MGR集群\n---\n\n搭建一个单主模式的MGR集群\n\n# 环境说明\n\n实验基于MySQL8.0.24版本，操作系统为CentOS7，共三个节点，分别如下：\n\n| 主机名 | IP              | Port | Server Id |\n| ------ | --------------- | ---- | --------- |\n| db156  | 192.168.165.156 | 3306 | 1         |\n| db157  | 192.168.165.157 | 3306 | 2         |\n| db225  | 192.168.165.225 | 3306 | 3         |\n\n架构如下：\n\n![单节点单主组复制架构](单节点单主组复制架构.png)\n\n# 修改hosts配置\n\n修改每个服务器的/etc/hosts文件并增加每个服务器的映射：\n\n```\n192.168.165.156 db156\n192.168.165.157 db157\n192.168.165.225 db225\n```\n\n# 部署MySQL实例\n\n不做赘述\n\n# 第一个节点配置\n\n修改my.cnf文件并重启MySQL服务\n\n在mysqld下增加如下配置：\n\n```\ndisabled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\nserver_id = 1\ngtid_mode=ON\nenforce_gtid_consistency=ON\nbinlog_checksum=NONE\nlog_bin = /data/mysql/logs/mysql-bin\nlog_slave_updates=ON\nbinlog_format=ROW\nmaster_info_repository=TABLE\nrelay_log_info_repository=TABLE\ntransaction_write_set_extraction=XXHASH64\nplugin_load_add='group_replication.so'\ngroup_replication_group_name=\"1eab024d-afdd-11eb-a2d1-005056a0bb1a\"\ngroup_replication_start_on_boot=off\ngroup_replication_local_address= \"192.168.165.156:33061\"\ngroup_replication_group_seeds= \"192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061\"\ngroup_replication_bootstrap_group=off\n```\n\n重启MySQL服务后执行如下操作：\n\n```sql\n[root@db156 ~]# mysql\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.24 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER repl@'%' IDENTIFIED BY '123456';\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> GRANT REPLICATION SLAVE ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT BACKUP_ADMIN ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CHANGE REPLICATION SOURCE TO SOURCE_USER='repl', SOURCE_PASSWORD='123456' FOR CHANNEL 'group_replication_recovery';\nQuery OK, 0 rows affected, 2 warnings (0.02 sec)\n\nmysql> SET GLOBAL group_replication_bootstrap_group=ON;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected (2.24 sec)\n\nmysql> SET GLOBAL group_replication_bootstrap_group=OFF;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SELECT * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 9b4c6994-afd5-11eb-beab-005056a0bb1a | db156       |        3306 | ONLINE       | PRIMARY     | 8.0.24         |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n1 row in set (0.00 sec)\n\n# 创建测试库\nmysql> CREATE DATABASE test;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> USE test;\nDatabase changed\nmysql> CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 TEXT NOT NULL);\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> INSERT INTO t1 VALUES (1, 'Luis');\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> \n\n```\n\n# 第二个节点配置\n\n将第一个节点的配置文件复制到第二个节点并修改server-id和group_replication_local_address即可\n\n```\nserver_id = 2\nbinlog_format = ROW\ndisabled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\ngtid_mode=ON\nenforce_gtid_consistency=ON\nbinlog_checksum=NONE\nlog_slave_updates=ON\nmaster_info_repository=TABLE\nrelay_log_info_repository=TABLE\ntransaction_write_set_extraction=XXHASH64\nplugin_load_add='group_replication.so'\ngroup_replication_group_name=\"1eab024d-afdd-11eb-a2d1-005056a0bb1a\"\ngroup_replication_start_on_boot=off\ngroup_replication_local_address= \"192.168.165.157:33061\"\ngroup_replication_group_seeds= \"192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061\"\ngroup_replication_bootstrap_group=off\n```\n\n重启后执行如下操作，注意和第一个节点的区别：\n\n```sql\n[root@db157 ~]# mysql\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.24 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER repl@'%' IDENTIFIED BY '123456';\nQuery OK, 0 rows affected (0.03 sec)\n\nmysql> GRANT REPLICATION SLAVE ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT BACKUP_ADMIN ON *.* TO repl@'%';\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CHANGE REPLICATION SOURCE TO SOURCE_USER='repl', SOURCE_PASSWORD='123456' FOR CHANNEL 'group_replication_recovery';\nQuery OK, 0 rows affected, 2 warnings (0.01 sec)\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected (3.11 sec)\n\nmysql> SELECT * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 89999650-afd6-11eb-893e-005056a0d28b | db157       |        3306 | RECOVERING   | SECONDARY   | 8.0.24         |\n| group_replication_applier | 9b4c6994-afd5-11eb-beab-005056a0bb1a | db156       |        3306 | ONLINE       | PRIMARY     | 8.0.24         |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n2 rows in set (0.01 sec)\n\nmysql> SELECT * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 89999650-afd6-11eb-893e-005056a0d28b | db157       |        3306 | ONLINE       | SECONDARY   | 8.0.24         |\n| group_replication_applier | 9b4c6994-afd5-11eb-beab-005056a0bb1a | db156       |        3306 | ONLINE       | PRIMARY     | 8.0.24         |\n+---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+\n2 rows in set (0.00 sec)\n\nmysql> \n```\n\n\n\n# 第三个节点配置\n\n与第二个节点相同","slug":"搭建一个单主模式的MGR集群","published":1,"updated":"2022-01-01T14:32:15.511Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vs003fhx89cdfhgmel","content":"<p>搭建一个单主模式的MGR集群</p>\n<h1 id=\"环境说明\"><a href=\"#环境说明\" class=\"headerlink\" title=\"环境说明\"></a>环境说明</h1><p>实验基于MySQL8.0.24版本，操作系统为CentOS7，共三个节点，分别如下：</p>\n<table>\n<thead>\n<tr>\n<th>主机名</th>\n<th>IP</th>\n<th>Port</th>\n<th>Server Id</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>db156</td>\n<td>192.168.165.156</td>\n<td>3306</td>\n<td>1</td>\n</tr>\n<tr>\n<td>db157</td>\n<td>192.168.165.157</td>\n<td>3306</td>\n<td>2</td>\n</tr>\n<tr>\n<td>db225</td>\n<td>192.168.165.225</td>\n<td>3306</td>\n<td>3</td>\n</tr>\n</tbody></table>\n<p>架构如下：</p>\n<p><img src=\"%E5%8D%95%E8%8A%82%E7%82%B9%E5%8D%95%E4%B8%BB%E7%BB%84%E5%A4%8D%E5%88%B6%E6%9E%B6%E6%9E%84.png\" alt=\"单节点单主组复制架构\"></p>\n<h1 id=\"修改hosts配置\"><a href=\"#修改hosts配置\" class=\"headerlink\" title=\"修改hosts配置\"></a>修改hosts配置</h1><p>修改每个服务器的/etc/hosts文件并增加每个服务器的映射：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.165.156 db156</span><br><span class=\"line\">192.168.165.157 db157</span><br><span class=\"line\">192.168.165.225 db225</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"部署MySQL实例\"><a href=\"#部署MySQL实例\" class=\"headerlink\" title=\"部署MySQL实例\"></a>部署MySQL实例</h1><p>不做赘述</p>\n<h1 id=\"第一个节点配置\"><a href=\"#第一个节点配置\" class=\"headerlink\" title=\"第一个节点配置\"></a>第一个节点配置</h1><p>修改my.cnf文件并重启MySQL服务</p>\n<p>在mysqld下增加如下配置：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">disabled_storage_engines&#x3D;&quot;MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY&quot;</span><br><span class=\"line\">server_id &#x3D; 1</span><br><span class=\"line\">gtid_mode&#x3D;ON</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;ON</span><br><span class=\"line\">binlog_checksum&#x3D;NONE</span><br><span class=\"line\">log_bin &#x3D; &#x2F;data&#x2F;mysql&#x2F;logs&#x2F;mysql-bin</span><br><span class=\"line\">log_slave_updates&#x3D;ON</span><br><span class=\"line\">binlog_format&#x3D;ROW</span><br><span class=\"line\">master_info_repository&#x3D;TABLE</span><br><span class=\"line\">relay_log_info_repository&#x3D;TABLE</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">plugin_load_add&#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">group_replication_group_name&#x3D;&quot;1eab024d-afdd-11eb-a2d1-005056a0bb1a&quot;</span><br><span class=\"line\">group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">group_replication_local_address&#x3D; &quot;192.168.165.156:33061&quot;</span><br><span class=\"line\">group_replication_group_seeds&#x3D; &quot;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&quot;</span><br><span class=\"line\">group_replication_bootstrap_group&#x3D;off</span><br></pre></td></tr></table></figure>\n\n<p>重启MySQL服务后执行如下操作：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"variable\">@db156</span> <span class=\"operator\">~</span>]# mysql</span><br><span class=\"line\">Welcome <span class=\"keyword\">to</span> the MySQL monitor.  Commands <span class=\"keyword\">end</span> <span class=\"keyword\">with</span> ; <span class=\"keyword\">or</span> \\g.</span><br><span class=\"line\">Your MySQL connection id <span class=\"keyword\">is</span> <span class=\"number\">8</span></span><br><span class=\"line\">Server version: <span class=\"number\">8.0</span><span class=\"number\">.24</span> MySQL Community Server <span class=\"operator\">-</span> GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) <span class=\"number\">2000</span>, <span class=\"number\">2021</span>, Oracle <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle <span class=\"keyword\">is</span> a registered trademark <span class=\"keyword\">of</span> Oracle Corporation <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its</span><br><span class=\"line\">affiliates. Other names may be trademarks <span class=\"keyword\">of</span> their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> <span class=\"keyword\">or</span> <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> <span class=\"keyword\">to</span> clear the <span class=\"keyword\">current</span> input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> repl@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.02</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> REPLICATION SLAVE <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> BACKUP_ADMIN <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">1</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> CHANGE REPLICATION SOURCE <span class=\"keyword\">TO</span> SOURCE_USER<span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, SOURCE_PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span> <span class=\"keyword\">FOR</span> CHANNEL <span class=\"string\">&#x27;group_replication_recovery&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected, <span class=\"number\">2</span> warnings (<span class=\"number\">0.02</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> <span class=\"keyword\">GLOBAL</span> group_replication_bootstrap_group<span class=\"operator\">=</span><span class=\"keyword\">ON</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">START</span> GROUP_REPLICATION <span class=\"keyword\">USER</span><span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">2.24</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> <span class=\"keyword\">GLOBAL</span> group_replication_bootstrap_group<span class=\"operator\">=</span>OFF;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> performance_schema.replication_group_members;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> CHANNEL_NAME              <span class=\"operator\">|</span> MEMBER_ID                            <span class=\"operator\">|</span> MEMBER_HOST <span class=\"operator\">|</span> MEMBER_PORT <span class=\"operator\">|</span> MEMBER_STATE <span class=\"operator\">|</span> MEMBER_ROLE <span class=\"operator\">|</span> MEMBER_VERSION <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">9</span>b4c6994<span class=\"operator\">-</span>afd5<span class=\"number\">-11</span>eb<span class=\"operator\">-</span>beab<span class=\"number\">-005056</span>a0bb1a <span class=\"operator\">|</span> db156       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> <span class=\"keyword\">PRIMARY</span>     <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># 创建测试库</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> DATABASE test;</span><br><span class=\"line\">Query OK, <span class=\"number\">1</span> <span class=\"type\">row</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> USE test;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t1 (c1 <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY, c2 TEXT <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>);</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> t1 <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;Luis&#x27;</span>);</span><br><span class=\"line\">Query OK, <span class=\"number\">1</span> <span class=\"type\">row</span> affected (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"第二个节点配置\"><a href=\"#第二个节点配置\" class=\"headerlink\" title=\"第二个节点配置\"></a>第二个节点配置</h1><p>将第一个节点的配置文件复制到第二个节点并修改server-id和group_replication_local_address即可</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server_id &#x3D; 2</span><br><span class=\"line\">binlog_format &#x3D; ROW</span><br><span class=\"line\">disabled_storage_engines&#x3D;&quot;MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY&quot;</span><br><span class=\"line\">gtid_mode&#x3D;ON</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;ON</span><br><span class=\"line\">binlog_checksum&#x3D;NONE</span><br><span class=\"line\">log_slave_updates&#x3D;ON</span><br><span class=\"line\">master_info_repository&#x3D;TABLE</span><br><span class=\"line\">relay_log_info_repository&#x3D;TABLE</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">plugin_load_add&#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">group_replication_group_name&#x3D;&quot;1eab024d-afdd-11eb-a2d1-005056a0bb1a&quot;</span><br><span class=\"line\">group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">group_replication_local_address&#x3D; &quot;192.168.165.157:33061&quot;</span><br><span class=\"line\">group_replication_group_seeds&#x3D; &quot;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&quot;</span><br><span class=\"line\">group_replication_bootstrap_group&#x3D;off</span><br></pre></td></tr></table></figure>\n\n<p>重启后执行如下操作，注意和第一个节点的区别：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"variable\">@db157</span> <span class=\"operator\">~</span>]# mysql</span><br><span class=\"line\">Welcome <span class=\"keyword\">to</span> the MySQL monitor.  Commands <span class=\"keyword\">end</span> <span class=\"keyword\">with</span> ; <span class=\"keyword\">or</span> \\g.</span><br><span class=\"line\">Your MySQL connection id <span class=\"keyword\">is</span> <span class=\"number\">8</span></span><br><span class=\"line\">Server version: <span class=\"number\">8.0</span><span class=\"number\">.24</span> MySQL Community Server <span class=\"operator\">-</span> GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) <span class=\"number\">2000</span>, <span class=\"number\">2021</span>, Oracle <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle <span class=\"keyword\">is</span> a registered trademark <span class=\"keyword\">of</span> Oracle Corporation <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its</span><br><span class=\"line\">affiliates. Other names may be trademarks <span class=\"keyword\">of</span> their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> <span class=\"keyword\">or</span> <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> <span class=\"keyword\">to</span> clear the <span class=\"keyword\">current</span> input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> repl@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.03</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> REPLICATION SLAVE <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> BACKUP_ADMIN <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">1</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> CHANGE REPLICATION SOURCE <span class=\"keyword\">TO</span> SOURCE_USER<span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, SOURCE_PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span> <span class=\"keyword\">FOR</span> CHANNEL <span class=\"string\">&#x27;group_replication_recovery&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected, <span class=\"number\">2</span> warnings (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">START</span> GROUP_REPLICATION <span class=\"keyword\">USER</span><span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">3.11</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> performance_schema.replication_group_members;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> CHANNEL_NAME              <span class=\"operator\">|</span> MEMBER_ID                            <span class=\"operator\">|</span> MEMBER_HOST <span class=\"operator\">|</span> MEMBER_PORT <span class=\"operator\">|</span> MEMBER_STATE <span class=\"operator\">|</span> MEMBER_ROLE <span class=\"operator\">|</span> MEMBER_VERSION <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">89999650</span><span class=\"operator\">-</span>afd6<span class=\"number\">-11</span>eb<span class=\"number\">-893e-005056</span>a0d28b <span class=\"operator\">|</span> db157       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> RECOVERING   <span class=\"operator\">|</span> SECONDARY   <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">9</span>b4c6994<span class=\"operator\">-</span>afd5<span class=\"number\">-11</span>eb<span class=\"operator\">-</span>beab<span class=\"number\">-005056</span>a0bb1a <span class=\"operator\">|</span> db156       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> <span class=\"keyword\">PRIMARY</span>     <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">2</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> performance_schema.replication_group_members;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> CHANNEL_NAME              <span class=\"operator\">|</span> MEMBER_ID                            <span class=\"operator\">|</span> MEMBER_HOST <span class=\"operator\">|</span> MEMBER_PORT <span class=\"operator\">|</span> MEMBER_STATE <span class=\"operator\">|</span> MEMBER_ROLE <span class=\"operator\">|</span> MEMBER_VERSION <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">89999650</span><span class=\"operator\">-</span>afd6<span class=\"number\">-11</span>eb<span class=\"number\">-893e-005056</span>a0d28b <span class=\"operator\">|</span> db157       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> SECONDARY   <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">9</span>b4c6994<span class=\"operator\">-</span>afd5<span class=\"number\">-11</span>eb<span class=\"operator\">-</span>beab<span class=\"number\">-005056</span>a0bb1a <span class=\"operator\">|</span> db156       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> <span class=\"keyword\">PRIMARY</span>     <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">2</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"第三个节点配置\"><a href=\"#第三个节点配置\" class=\"headerlink\" title=\"第三个节点配置\"></a>第三个节点配置</h1><p>与第二个节点相同</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>搭建一个单主模式的MGR集群</p>\n<h1 id=\"环境说明\"><a href=\"#环境说明\" class=\"headerlink\" title=\"环境说明\"></a>环境说明</h1><p>实验基于MySQL8.0.24版本，操作系统为CentOS7，共三个节点，分别如下：</p>\n<table>\n<thead>\n<tr>\n<th>主机名</th>\n<th>IP</th>\n<th>Port</th>\n<th>Server Id</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>db156</td>\n<td>192.168.165.156</td>\n<td>3306</td>\n<td>1</td>\n</tr>\n<tr>\n<td>db157</td>\n<td>192.168.165.157</td>\n<td>3306</td>\n<td>2</td>\n</tr>\n<tr>\n<td>db225</td>\n<td>192.168.165.225</td>\n<td>3306</td>\n<td>3</td>\n</tr>\n</tbody></table>\n<p>架构如下：</p>\n<p><img src=\"%E5%8D%95%E8%8A%82%E7%82%B9%E5%8D%95%E4%B8%BB%E7%BB%84%E5%A4%8D%E5%88%B6%E6%9E%B6%E6%9E%84.png\" alt=\"单节点单主组复制架构\"></p>\n<h1 id=\"修改hosts配置\"><a href=\"#修改hosts配置\" class=\"headerlink\" title=\"修改hosts配置\"></a>修改hosts配置</h1><p>修改每个服务器的/etc/hosts文件并增加每个服务器的映射：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.165.156 db156</span><br><span class=\"line\">192.168.165.157 db157</span><br><span class=\"line\">192.168.165.225 db225</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"部署MySQL实例\"><a href=\"#部署MySQL实例\" class=\"headerlink\" title=\"部署MySQL实例\"></a>部署MySQL实例</h1><p>不做赘述</p>\n<h1 id=\"第一个节点配置\"><a href=\"#第一个节点配置\" class=\"headerlink\" title=\"第一个节点配置\"></a>第一个节点配置</h1><p>修改my.cnf文件并重启MySQL服务</p>\n<p>在mysqld下增加如下配置：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">disabled_storage_engines&#x3D;&quot;MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY&quot;</span><br><span class=\"line\">server_id &#x3D; 1</span><br><span class=\"line\">gtid_mode&#x3D;ON</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;ON</span><br><span class=\"line\">binlog_checksum&#x3D;NONE</span><br><span class=\"line\">log_bin &#x3D; &#x2F;data&#x2F;mysql&#x2F;logs&#x2F;mysql-bin</span><br><span class=\"line\">log_slave_updates&#x3D;ON</span><br><span class=\"line\">binlog_format&#x3D;ROW</span><br><span class=\"line\">master_info_repository&#x3D;TABLE</span><br><span class=\"line\">relay_log_info_repository&#x3D;TABLE</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">plugin_load_add&#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">group_replication_group_name&#x3D;&quot;1eab024d-afdd-11eb-a2d1-005056a0bb1a&quot;</span><br><span class=\"line\">group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">group_replication_local_address&#x3D; &quot;192.168.165.156:33061&quot;</span><br><span class=\"line\">group_replication_group_seeds&#x3D; &quot;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&quot;</span><br><span class=\"line\">group_replication_bootstrap_group&#x3D;off</span><br></pre></td></tr></table></figure>\n\n<p>重启MySQL服务后执行如下操作：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"variable\">@db156</span> <span class=\"operator\">~</span>]# mysql</span><br><span class=\"line\">Welcome <span class=\"keyword\">to</span> the MySQL monitor.  Commands <span class=\"keyword\">end</span> <span class=\"keyword\">with</span> ; <span class=\"keyword\">or</span> \\g.</span><br><span class=\"line\">Your MySQL connection id <span class=\"keyword\">is</span> <span class=\"number\">8</span></span><br><span class=\"line\">Server version: <span class=\"number\">8.0</span><span class=\"number\">.24</span> MySQL Community Server <span class=\"operator\">-</span> GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) <span class=\"number\">2000</span>, <span class=\"number\">2021</span>, Oracle <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle <span class=\"keyword\">is</span> a registered trademark <span class=\"keyword\">of</span> Oracle Corporation <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its</span><br><span class=\"line\">affiliates. Other names may be trademarks <span class=\"keyword\">of</span> their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> <span class=\"keyword\">or</span> <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> <span class=\"keyword\">to</span> clear the <span class=\"keyword\">current</span> input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> repl@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.02</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> REPLICATION SLAVE <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> BACKUP_ADMIN <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">1</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> CHANGE REPLICATION SOURCE <span class=\"keyword\">TO</span> SOURCE_USER<span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, SOURCE_PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span> <span class=\"keyword\">FOR</span> CHANNEL <span class=\"string\">&#x27;group_replication_recovery&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected, <span class=\"number\">2</span> warnings (<span class=\"number\">0.02</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> <span class=\"keyword\">GLOBAL</span> group_replication_bootstrap_group<span class=\"operator\">=</span><span class=\"keyword\">ON</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">START</span> GROUP_REPLICATION <span class=\"keyword\">USER</span><span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">2.24</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> <span class=\"keyword\">GLOBAL</span> group_replication_bootstrap_group<span class=\"operator\">=</span>OFF;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> performance_schema.replication_group_members;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> CHANNEL_NAME              <span class=\"operator\">|</span> MEMBER_ID                            <span class=\"operator\">|</span> MEMBER_HOST <span class=\"operator\">|</span> MEMBER_PORT <span class=\"operator\">|</span> MEMBER_STATE <span class=\"operator\">|</span> MEMBER_ROLE <span class=\"operator\">|</span> MEMBER_VERSION <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">9</span>b4c6994<span class=\"operator\">-</span>afd5<span class=\"number\">-11</span>eb<span class=\"operator\">-</span>beab<span class=\"number\">-005056</span>a0bb1a <span class=\"operator\">|</span> db156       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> <span class=\"keyword\">PRIMARY</span>     <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># 创建测试库</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> DATABASE test;</span><br><span class=\"line\">Query OK, <span class=\"number\">1</span> <span class=\"type\">row</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> USE test;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t1 (c1 <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY, c2 TEXT <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>);</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> t1 <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;Luis&#x27;</span>);</span><br><span class=\"line\">Query OK, <span class=\"number\">1</span> <span class=\"type\">row</span> affected (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"第二个节点配置\"><a href=\"#第二个节点配置\" class=\"headerlink\" title=\"第二个节点配置\"></a>第二个节点配置</h1><p>将第一个节点的配置文件复制到第二个节点并修改server-id和group_replication_local_address即可</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server_id &#x3D; 2</span><br><span class=\"line\">binlog_format &#x3D; ROW</span><br><span class=\"line\">disabled_storage_engines&#x3D;&quot;MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY&quot;</span><br><span class=\"line\">gtid_mode&#x3D;ON</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;ON</span><br><span class=\"line\">binlog_checksum&#x3D;NONE</span><br><span class=\"line\">log_slave_updates&#x3D;ON</span><br><span class=\"line\">master_info_repository&#x3D;TABLE</span><br><span class=\"line\">relay_log_info_repository&#x3D;TABLE</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">plugin_load_add&#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">group_replication_group_name&#x3D;&quot;1eab024d-afdd-11eb-a2d1-005056a0bb1a&quot;</span><br><span class=\"line\">group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">group_replication_local_address&#x3D; &quot;192.168.165.157:33061&quot;</span><br><span class=\"line\">group_replication_group_seeds&#x3D; &quot;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&quot;</span><br><span class=\"line\">group_replication_bootstrap_group&#x3D;off</span><br></pre></td></tr></table></figure>\n\n<p>重启后执行如下操作，注意和第一个节点的区别：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"variable\">@db157</span> <span class=\"operator\">~</span>]# mysql</span><br><span class=\"line\">Welcome <span class=\"keyword\">to</span> the MySQL monitor.  Commands <span class=\"keyword\">end</span> <span class=\"keyword\">with</span> ; <span class=\"keyword\">or</span> \\g.</span><br><span class=\"line\">Your MySQL connection id <span class=\"keyword\">is</span> <span class=\"number\">8</span></span><br><span class=\"line\">Server version: <span class=\"number\">8.0</span><span class=\"number\">.24</span> MySQL Community Server <span class=\"operator\">-</span> GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) <span class=\"number\">2000</span>, <span class=\"number\">2021</span>, Oracle <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle <span class=\"keyword\">is</span> a registered trademark <span class=\"keyword\">of</span> Oracle Corporation <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its</span><br><span class=\"line\">affiliates. Other names may be trademarks <span class=\"keyword\">of</span> their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> <span class=\"keyword\">or</span> <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> <span class=\"keyword\">to</span> clear the <span class=\"keyword\">current</span> input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> repl@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.03</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> REPLICATION SLAVE <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">GRANT</span> BACKUP_ADMIN <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> repl@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SET</span> SQL_LOG_BIN<span class=\"operator\">=</span><span class=\"number\">1</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> CHANGE REPLICATION SOURCE <span class=\"keyword\">TO</span> SOURCE_USER<span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, SOURCE_PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span> <span class=\"keyword\">FOR</span> CHANNEL <span class=\"string\">&#x27;group_replication_recovery&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected, <span class=\"number\">2</span> warnings (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">START</span> GROUP_REPLICATION <span class=\"keyword\">USER</span><span class=\"operator\">=</span><span class=\"string\">&#x27;repl&#x27;</span>, PASSWORD<span class=\"operator\">=</span><span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">3.11</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> performance_schema.replication_group_members;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> CHANNEL_NAME              <span class=\"operator\">|</span> MEMBER_ID                            <span class=\"operator\">|</span> MEMBER_HOST <span class=\"operator\">|</span> MEMBER_PORT <span class=\"operator\">|</span> MEMBER_STATE <span class=\"operator\">|</span> MEMBER_ROLE <span class=\"operator\">|</span> MEMBER_VERSION <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">89999650</span><span class=\"operator\">-</span>afd6<span class=\"number\">-11</span>eb<span class=\"number\">-893e-005056</span>a0d28b <span class=\"operator\">|</span> db157       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> RECOVERING   <span class=\"operator\">|</span> SECONDARY   <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">9</span>b4c6994<span class=\"operator\">-</span>afd5<span class=\"number\">-11</span>eb<span class=\"operator\">-</span>beab<span class=\"number\">-005056</span>a0bb1a <span class=\"operator\">|</span> db156       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> <span class=\"keyword\">PRIMARY</span>     <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">2</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> performance_schema.replication_group_members;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> CHANNEL_NAME              <span class=\"operator\">|</span> MEMBER_ID                            <span class=\"operator\">|</span> MEMBER_HOST <span class=\"operator\">|</span> MEMBER_PORT <span class=\"operator\">|</span> MEMBER_STATE <span class=\"operator\">|</span> MEMBER_ROLE <span class=\"operator\">|</span> MEMBER_VERSION <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">89999650</span><span class=\"operator\">-</span>afd6<span class=\"number\">-11</span>eb<span class=\"number\">-893e-005056</span>a0d28b <span class=\"operator\">|</span> db157       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> SECONDARY   <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> group_replication_applier <span class=\"operator\">|</span> <span class=\"number\">9</span>b4c6994<span class=\"operator\">-</span>afd5<span class=\"number\">-11</span>eb<span class=\"operator\">-</span>beab<span class=\"number\">-005056</span>a0bb1a <span class=\"operator\">|</span> db156       <span class=\"operator\">|</span>        <span class=\"number\">3306</span> <span class=\"operator\">|</span> ONLINE       <span class=\"operator\">|</span> <span class=\"keyword\">PRIMARY</span>     <span class=\"operator\">|</span> <span class=\"number\">8.0</span><span class=\"number\">.24</span>         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------------------------+--------------------------------------+-------------+-------------+--------------+-------------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">2</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"第三个节点配置\"><a href=\"#第三个节点配置\" class=\"headerlink\" title=\"第三个节点配置\"></a>第三个节点配置</h1><p>与第二个节点相同</p>\n"},{"title":"使用码云自动化部署应用","keywords":"持续部署","cover":"2021/12/06/使用码云自动化部署应用/1624644007.jpg","top_img":"2021/12/06/使用码云自动化部署应用/1624644007.jpg","description":"本文介绍在使用hexo构建自己博客的时候，使用码云作为代码仓库，阿里云CentOS7服务器作为部署应用部署服务器来提供服务，使用码云提供的WebHook功能，如何实现在每次提交代码后能够自动打包，自动部署。","date":"2021-12-06T07:59:44.000Z","_content":"\n\n\n\n\n\n\n## 介绍\n\n我们在做一些小型的网站开发的时候，希望能够在将代码推送到仓库后，能够实现自动部署。\n\n本文介绍在使用hexo构建自己博客的时候，使用码云作为代码仓库，阿里云CentOS7服务器作为部署应用部署服务器来提供服务，使用码云提供的WebHook功能，如何实现在每次提交代码后能够自动打包，自动部署。\n\n## 实现步骤\n\n### 配置公钥\n\n1. 生成\n\n   执行如下代码，三次回车后会生成公钥\n\n   ```\n   ssh-keygen -t rsa -C \"git@gitee.com\" \n   ```\n\n2. 查看公钥\n\n   ```\n   cat ~/.ssh/id_rsa.pub\n   ```\n\n   ![image-20211206161301912](image-20211206161301912.png)\n\n3. 添加公钥\n\n   ![image-20211206160759969](image-20211206160759969.png)\n\n   ![image-20211206160843863](image-20211206160843863.png)\n\n   标题可以自定义公钥部分输入步骤2查看得到的结果，点击添加即可\n\n4. 测试\n\n   在部署服务器上执行下面代码。输出如图表示已配置成功。\n\n   ```\n   ssh -T git@gitee.com\n   ```\n\n![image-20211206161152973](image-20211206161152973.png)\n\n### 创建wehook服务\n\n1. 安装node环境\n\n   略\n\n2. 初始化node引用\n\n   切换到node应用目录，执行下面脚本，一路回车即可。\n\n   ```\n   npm ini\n   ```\n\n   \n\n   ![image-20211206161706814](image-20211206161706814.png)\n\n3. 安装插件\n\n   ```\n   npm install  gitee-webhook-handler --save\n   ```\n\n   ![image-20211206161903300](image-20211206161903300.png)\n\n4. 创建服务脚本\n\n   新增index.js文件，内容如下：\n\n   ```javascript\n   var http = require('http')\n   var createHandler = require('gitee-webhook-handler')\n   var handler = createHandler({ path: '/webhooks_push', secret: '123456' })   // webhookpost路径及密码\n   \n   function run_cmd(cmd, args, callback) {\n     var spawn = require('child_process').spawn;\n     var child = spawn(cmd, args);\n     var resp = \"\";\n     child.stdout.on('data', function(buffer) { resp += buffer.toString(); });\n     child.stdout.on('end', function() { callback (resp) });\n   }\n   handler.on('error', function (err) {\n     console.error('Error:', err.message)\n   })\n   handler.on('Push Hook', function (event) {\n     console.log('Received a push event for %s to %s', event.payload.repository.name,event.payload.ref);\n     run_cmd('sh', ['./deploy.sh'], function(text){ console.log(text) }); //部署脚本文件路径\n   })\n   try {\n     http.createServer(function (req, res) {\n       handler(req, res, function (err) {\n         res.statusCode = 404\n         res.end('no such location')\n       })\n     }).listen(83) //服务监听端口\n   }catch(err){\n     console.error('Error:', err.message)\n   }\n   ```\n\n5. 创建部署脚本\n\n   部署脚本根据自己的需求创建，下图是我自己写的hexo博客的简单部署脚本\n\n   ![image-20211206162433796](image-20211206162433796.png)\n\n6. 启动node服务\n\n   执行下面命令即可启动服务\n\n   ```\n   node index.js \n   ```\n\n7. 码云添加WebHook服务\n\n   ![image-20211206162611806](image-20211206162611806.png)\n\n   URL填写上面启动服务后的地址，如我的是http://xx.xx.xx.xx:83/webhooks_push\n\n   WebHook密码/签名密钥填写服务脚本里面写的密码，如我的是：123456\n\n8. 测试服务\n\n   ![image-20211206163253121](image-20211206163253121.png)\n\n   对应的日志输出：\n\n   ![image-20211206163208246](image-20211206163208246.png)\n\n9. 提交代码实现自动部署\n\n   将代码推送到仓库可以看到对应的部署日志，且新增的文章已可以查阅。\n   \n   ![image-20211206164809814](image-20211206164809814.png)","source":"_posts/使用码云自动化部署应用.md","raw":"---\ntitle: 使用码云自动化部署应用\ncategory: 运维\ntags:\n  - 运维\nkeywords: 持续部署\ncover: 1624644007.jpg\ntop_img: 1624644007.jpg\ndescription: >-\n  本文介绍在使用hexo构建自己博客的时候，使用码云作为代码仓库，阿里云CentOS7服务器作为部署应用部署服务器来提供服务，使用码云提供的WebHook功能，如何实现在每次提交代码后能够自动打包，自动部署。\ndate: 2021-12-06 15:59:44\n---\n\n\n\n\n\n\n\n## 介绍\n\n我们在做一些小型的网站开发的时候，希望能够在将代码推送到仓库后，能够实现自动部署。\n\n本文介绍在使用hexo构建自己博客的时候，使用码云作为代码仓库，阿里云CentOS7服务器作为部署应用部署服务器来提供服务，使用码云提供的WebHook功能，如何实现在每次提交代码后能够自动打包，自动部署。\n\n## 实现步骤\n\n### 配置公钥\n\n1. 生成\n\n   执行如下代码，三次回车后会生成公钥\n\n   ```\n   ssh-keygen -t rsa -C \"git@gitee.com\" \n   ```\n\n2. 查看公钥\n\n   ```\n   cat ~/.ssh/id_rsa.pub\n   ```\n\n   ![image-20211206161301912](image-20211206161301912.png)\n\n3. 添加公钥\n\n   ![image-20211206160759969](image-20211206160759969.png)\n\n   ![image-20211206160843863](image-20211206160843863.png)\n\n   标题可以自定义公钥部分输入步骤2查看得到的结果，点击添加即可\n\n4. 测试\n\n   在部署服务器上执行下面代码。输出如图表示已配置成功。\n\n   ```\n   ssh -T git@gitee.com\n   ```\n\n![image-20211206161152973](image-20211206161152973.png)\n\n### 创建wehook服务\n\n1. 安装node环境\n\n   略\n\n2. 初始化node引用\n\n   切换到node应用目录，执行下面脚本，一路回车即可。\n\n   ```\n   npm ini\n   ```\n\n   \n\n   ![image-20211206161706814](image-20211206161706814.png)\n\n3. 安装插件\n\n   ```\n   npm install  gitee-webhook-handler --save\n   ```\n\n   ![image-20211206161903300](image-20211206161903300.png)\n\n4. 创建服务脚本\n\n   新增index.js文件，内容如下：\n\n   ```javascript\n   var http = require('http')\n   var createHandler = require('gitee-webhook-handler')\n   var handler = createHandler({ path: '/webhooks_push', secret: '123456' })   // webhookpost路径及密码\n   \n   function run_cmd(cmd, args, callback) {\n     var spawn = require('child_process').spawn;\n     var child = spawn(cmd, args);\n     var resp = \"\";\n     child.stdout.on('data', function(buffer) { resp += buffer.toString(); });\n     child.stdout.on('end', function() { callback (resp) });\n   }\n   handler.on('error', function (err) {\n     console.error('Error:', err.message)\n   })\n   handler.on('Push Hook', function (event) {\n     console.log('Received a push event for %s to %s', event.payload.repository.name,event.payload.ref);\n     run_cmd('sh', ['./deploy.sh'], function(text){ console.log(text) }); //部署脚本文件路径\n   })\n   try {\n     http.createServer(function (req, res) {\n       handler(req, res, function (err) {\n         res.statusCode = 404\n         res.end('no such location')\n       })\n     }).listen(83) //服务监听端口\n   }catch(err){\n     console.error('Error:', err.message)\n   }\n   ```\n\n5. 创建部署脚本\n\n   部署脚本根据自己的需求创建，下图是我自己写的hexo博客的简单部署脚本\n\n   ![image-20211206162433796](image-20211206162433796.png)\n\n6. 启动node服务\n\n   执行下面命令即可启动服务\n\n   ```\n   node index.js \n   ```\n\n7. 码云添加WebHook服务\n\n   ![image-20211206162611806](image-20211206162611806.png)\n\n   URL填写上面启动服务后的地址，如我的是http://xx.xx.xx.xx:83/webhooks_push\n\n   WebHook密码/签名密钥填写服务脚本里面写的密码，如我的是：123456\n\n8. 测试服务\n\n   ![image-20211206163253121](image-20211206163253121.png)\n\n   对应的日志输出：\n\n   ![image-20211206163208246](image-20211206163208246.png)\n\n9. 提交代码实现自动部署\n\n   将代码推送到仓库可以看到对应的部署日志，且新增的文章已可以查阅。\n   \n   ![image-20211206164809814](image-20211206164809814.png)","slug":"使用码云自动化部署应用","published":1,"updated":"2022-01-01T14:32:15.501Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vt003jhx894yjw6p01","content":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>我们在做一些小型的网站开发的时候，希望能够在将代码推送到仓库后，能够实现自动部署。</p>\n<p>本文介绍在使用hexo构建自己博客的时候，使用码云作为代码仓库，阿里云CentOS7服务器作为部署应用部署服务器来提供服务，使用码云提供的WebHook功能，如何实现在每次提交代码后能够自动打包，自动部署。</p>\n<h2 id=\"实现步骤\"><a href=\"#实现步骤\" class=\"headerlink\" title=\"实现步骤\"></a>实现步骤</h2><h3 id=\"配置公钥\"><a href=\"#配置公钥\" class=\"headerlink\" title=\"配置公钥\"></a>配置公钥</h3><ol>\n<li><p>生成</p>\n<p>执行如下代码，三次回车后会生成公钥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C &quot;git@gitee.com&quot; </span><br></pre></td></tr></table></figure></li>\n<li><p>查看公钥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat ~&#x2F;.ssh&#x2F;id_rsa.pub</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"image-20211206161301912.png\" alt=\"image-20211206161301912\"></p>\n</li>\n<li><p>添加公钥</p>\n<p><img src=\"image-20211206160759969.png\" alt=\"image-20211206160759969\"></p>\n<p><img src=\"image-20211206160843863.png\" alt=\"image-20211206160843863\"></p>\n<p>标题可以自定义公钥部分输入步骤2查看得到的结果，点击添加即可</p>\n</li>\n<li><p>测试</p>\n<p>在部署服务器上执行下面代码。输出如图表示已配置成功。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@gitee.com</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p><img src=\"image-20211206161152973.png\" alt=\"image-20211206161152973\"></p>\n<h3 id=\"创建wehook服务\"><a href=\"#创建wehook服务\" class=\"headerlink\" title=\"创建wehook服务\"></a>创建wehook服务</h3><ol>\n<li><p>安装node环境</p>\n<p>略</p>\n</li>\n<li><p>初始化node引用</p>\n<p>切换到node应用目录，执行下面脚本，一路回车即可。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm ini</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"image-20211206161706814.png\" alt=\"image-20211206161706814\"></p>\n</li>\n<li><p>安装插件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install  gitee-webhook-handler --save</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"image-20211206161903300.png\" alt=\"image-20211206161903300\"></p>\n</li>\n<li><p>创建服务脚本</p>\n<p>新增index.js文件，内容如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> createHandler = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gitee-webhook-handler&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> handler = createHandler(&#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/webhooks_push&#x27;</span>, <span class=\"attr\">secret</span>: <span class=\"string\">&#x27;123456&#x27;</span> &#125;)   <span class=\"comment\">// webhookpost路径及密码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run_cmd</span>(<span class=\"params\">cmd, args, callback</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> spawn = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;child_process&#x27;</span>).spawn;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> child = spawn(cmd, args);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> resp = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  child.stdout.on(<span class=\"string\">&#x27;data&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">buffer</span>) </span>&#123; resp += buffer.toString(); &#125;);</span><br><span class=\"line\">  child.stdout.on(<span class=\"string\">&#x27;end&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; callback (resp) &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">handler.on(<span class=\"string\">&#x27;error&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(<span class=\"string\">&#x27;Error:&#x27;</span>, err.message)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">handler.on(<span class=\"string\">&#x27;Push Hook&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Received a push event for %s to %s&#x27;</span>, event.payload.repository.name,event.payload.ref);</span><br><span class=\"line\">  run_cmd(<span class=\"string\">&#x27;sh&#x27;</span>, [<span class=\"string\">&#x27;./deploy.sh&#x27;</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">text</span>)</span>&#123; <span class=\"built_in\">console</span>.log(text) &#125;); <span class=\"comment\">//部署脚本文件路径</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    handler(req, res, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">      res.statusCode = <span class=\"number\">404</span></span><br><span class=\"line\">      res.end(<span class=\"string\">&#x27;no such location&#x27;</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;).listen(<span class=\"number\">83</span>) <span class=\"comment\">//服务监听端口</span></span><br><span class=\"line\">&#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(<span class=\"string\">&#x27;Error:&#x27;</span>, err.message)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>创建部署脚本</p>\n<p>部署脚本根据自己的需求创建，下图是我自己写的hexo博客的简单部署脚本</p>\n<p><img src=\"image-20211206162433796.png\" alt=\"image-20211206162433796\"></p>\n</li>\n<li><p>启动node服务</p>\n<p>执行下面命令即可启动服务</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node index.js </span><br></pre></td></tr></table></figure></li>\n<li><p>码云添加WebHook服务</p>\n<p><img src=\"image-20211206162611806.png\" alt=\"image-20211206162611806\"></p>\n<p>URL填写上面启动服务后的地址，如我的是<a href=\"http://xx.xx.xx.xx:83/webhooks_push\">http://xx.xx.xx.xx:83/webhooks_push</a></p>\n<p>WebHook密码/签名密钥填写服务脚本里面写的密码，如我的是：123456</p>\n</li>\n<li><p>测试服务</p>\n<p><img src=\"image-20211206163253121.png\" alt=\"image-20211206163253121\"></p>\n<p>对应的日志输出：</p>\n<p><img src=\"image-20211206163208246.png\" alt=\"image-20211206163208246\"></p>\n</li>\n<li><p>提交代码实现自动部署</p>\n<p>将代码推送到仓库可以看到对应的部署日志，且新增的文章已可以查阅。</p>\n<p><img src=\"image-20211206164809814.png\" alt=\"image-20211206164809814\"></p>\n</li>\n</ol>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>我们在做一些小型的网站开发的时候，希望能够在将代码推送到仓库后，能够实现自动部署。</p>\n<p>本文介绍在使用hexo构建自己博客的时候，使用码云作为代码仓库，阿里云CentOS7服务器作为部署应用部署服务器来提供服务，使用码云提供的WebHook功能，如何实现在每次提交代码后能够自动打包，自动部署。</p>\n<h2 id=\"实现步骤\"><a href=\"#实现步骤\" class=\"headerlink\" title=\"实现步骤\"></a>实现步骤</h2><h3 id=\"配置公钥\"><a href=\"#配置公钥\" class=\"headerlink\" title=\"配置公钥\"></a>配置公钥</h3><ol>\n<li><p>生成</p>\n<p>执行如下代码，三次回车后会生成公钥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C &quot;git@gitee.com&quot; </span><br></pre></td></tr></table></figure></li>\n<li><p>查看公钥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat ~&#x2F;.ssh&#x2F;id_rsa.pub</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"image-20211206161301912.png\" alt=\"image-20211206161301912\"></p>\n</li>\n<li><p>添加公钥</p>\n<p><img src=\"image-20211206160759969.png\" alt=\"image-20211206160759969\"></p>\n<p><img src=\"image-20211206160843863.png\" alt=\"image-20211206160843863\"></p>\n<p>标题可以自定义公钥部分输入步骤2查看得到的结果，点击添加即可</p>\n</li>\n<li><p>测试</p>\n<p>在部署服务器上执行下面代码。输出如图表示已配置成功。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@gitee.com</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p><img src=\"image-20211206161152973.png\" alt=\"image-20211206161152973\"></p>\n<h3 id=\"创建wehook服务\"><a href=\"#创建wehook服务\" class=\"headerlink\" title=\"创建wehook服务\"></a>创建wehook服务</h3><ol>\n<li><p>安装node环境</p>\n<p>略</p>\n</li>\n<li><p>初始化node引用</p>\n<p>切换到node应用目录，执行下面脚本，一路回车即可。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm ini</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"image-20211206161706814.png\" alt=\"image-20211206161706814\"></p>\n</li>\n<li><p>安装插件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install  gitee-webhook-handler --save</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"image-20211206161903300.png\" alt=\"image-20211206161903300\"></p>\n</li>\n<li><p>创建服务脚本</p>\n<p>新增index.js文件，内容如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> createHandler = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gitee-webhook-handler&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> handler = createHandler(&#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/webhooks_push&#x27;</span>, <span class=\"attr\">secret</span>: <span class=\"string\">&#x27;123456&#x27;</span> &#125;)   <span class=\"comment\">// webhookpost路径及密码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run_cmd</span>(<span class=\"params\">cmd, args, callback</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> spawn = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;child_process&#x27;</span>).spawn;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> child = spawn(cmd, args);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> resp = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  child.stdout.on(<span class=\"string\">&#x27;data&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">buffer</span>) </span>&#123; resp += buffer.toString(); &#125;);</span><br><span class=\"line\">  child.stdout.on(<span class=\"string\">&#x27;end&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; callback (resp) &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">handler.on(<span class=\"string\">&#x27;error&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(<span class=\"string\">&#x27;Error:&#x27;</span>, err.message)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">handler.on(<span class=\"string\">&#x27;Push Hook&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Received a push event for %s to %s&#x27;</span>, event.payload.repository.name,event.payload.ref);</span><br><span class=\"line\">  run_cmd(<span class=\"string\">&#x27;sh&#x27;</span>, [<span class=\"string\">&#x27;./deploy.sh&#x27;</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">text</span>)</span>&#123; <span class=\"built_in\">console</span>.log(text) &#125;); <span class=\"comment\">//部署脚本文件路径</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    handler(req, res, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">      res.statusCode = <span class=\"number\">404</span></span><br><span class=\"line\">      res.end(<span class=\"string\">&#x27;no such location&#x27;</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;).listen(<span class=\"number\">83</span>) <span class=\"comment\">//服务监听端口</span></span><br><span class=\"line\">&#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(<span class=\"string\">&#x27;Error:&#x27;</span>, err.message)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>创建部署脚本</p>\n<p>部署脚本根据自己的需求创建，下图是我自己写的hexo博客的简单部署脚本</p>\n<p><img src=\"image-20211206162433796.png\" alt=\"image-20211206162433796\"></p>\n</li>\n<li><p>启动node服务</p>\n<p>执行下面命令即可启动服务</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node index.js </span><br></pre></td></tr></table></figure></li>\n<li><p>码云添加WebHook服务</p>\n<p><img src=\"image-20211206162611806.png\" alt=\"image-20211206162611806\"></p>\n<p>URL填写上面启动服务后的地址，如我的是<a href=\"http://xx.xx.xx.xx:83/webhooks_push\">http://xx.xx.xx.xx:83/webhooks_push</a></p>\n<p>WebHook密码/签名密钥填写服务脚本里面写的密码，如我的是：123456</p>\n</li>\n<li><p>测试服务</p>\n<p><img src=\"image-20211206163253121.png\" alt=\"image-20211206163253121\"></p>\n<p>对应的日志输出：</p>\n<p><img src=\"image-20211206163208246.png\" alt=\"image-20211206163208246\"></p>\n</li>\n<li><p>提交代码实现自动部署</p>\n<p>将代码推送到仓库可以看到对应的部署日志，且新增的文章已可以查阅。</p>\n<p><img src=\"image-20211206164809814.png\" alt=\"image-20211206164809814\"></p>\n</li>\n</ol>\n"},{"title":"如何升级MySQL","date":"2020-09-23T16:00:00.000Z","keywords":"MySQL,升级","description":"数据库运行过程中，新版本不断的开发出来，低版本不断被淘汰，在已经运行的业务系统数据库中，我们是否应该升级数据库，升级需要考虑些什么问题呢？","_content":"\n数据库运行过程中，新版本不断的开发出来，低版本不断被淘汰，在已经运行的业务系统数据库中，我们是否应该升级数据库，升级需要考虑些什么问题呢？\n\n## 数据库是否应该升级\n\n在准备对数据库升级之前，需要考虑一下几个问题，升级对业务有什么好处？有什么影响？然后再决定是否升级。在考虑是否升级前，需要对整体评估升级版本后能够解决什么样的问题。同时会带来什么样的问题，避免为了升级而升级。\n\n### MySQL数据库升级会带来什么好处？\n\n**是否能解决业务上的痛点**\n\n业务上，升级可能会带来性能上的提升，当然也可能下降，5.6中有个叫performance_schema的库，默认是不开启的，开启此库会增加数据库系统的负担降低数据库性能，不过在5.7中经过优化，对性能的影响几乎可以忽略了。再如8.0中，提升了安全性，同时也支持在很多关系数据库中已经支持的窗口函数，对于数据统计分析的功能支持更好了。\n\n**是否能解决运维上的痛点**\n\n在运维上，更新的版本多少会带来些新的功能，减轻运维压力，比如MySQL5.7中增加了sys库，相比于5.7之前的版本中，通过sys库可以更好的监控数据库相关的指标。\n\n### 升级会有什么影响\n\n**对原来业务的支持是否影响**\n\n不同版本之间的jdbc不一样，如8.0版本和5.7版本，当升级到8.0之后，相应的应用程序也应该一并升级处理，修改连接数据库的驱动。另外，不同版本之间参数可能不一致，如sql_mode，在不同的版本中默认值不一样，对SQL的处理方式不一样，导致SQL执行结果报错或者不符合预想的情况，另外有些参数在高版本中已经失效禁用了，在升级到新版本后，将无法启动数据库。\n\n**对原来业务性能是否有影响**\n\n上面提到过performance_schema库会对性能有影响，另外，当升级后需要注意InnoDB优化器对SQL语句的处理，不同版本优化方法不一样，可能会不能使用索引导致性能下降。\n\n## 如何升级MySQL\n\n### 制定一个可行的升级方案\n\n当评估了升级会带来的好处和影响后，确定要升级的话需要制定一个可行的升级方案了。\n\n**评估受影响的业务系统**\n\n一般情况下，一个数据库可能会有不同的业务系统使用，在升级前需要确定收到影响的系统，并在升级前通知到位，确保在升级的过程中如果有任何问题都可以找到相关的人来解决或者验证。\n\n**升级的详细步骤**\n\n对于线上系统的升级，是个紧张且重要的事情，不能出任何差错，因此一个详细的操作步骤是必不可少的。在实际的操作方案中，需要详细到可以直接从方案中复制来使用。大致的步骤如下：\n\n1. 对待升级数据库进行备份\n\n2. 升级Slave服务器版本\n\n3. 手动进行主从切换\n\n4. 升级Master服务器版本\n\n5. 升级完成后进行业务检查\n\n6. 升级后的数据库检查（配置文件、数据库对象、操作系统）\n\n7. 升级后的业务检查\n\n**升级失败回滚方案**\n\n俗话说，天有不测风云，虽然不一定能够遇到，但是要准备好在遇到的时候能够处变不惊。一个失败回滚的方案是必不可少的，大致步骤如下：\n\n1. 升级失败回滚的步骤，详细的回滚失败处理步骤\n\n2. 回滚后数据库环境检查\n\n3. 回滚后的业务检查\n\n### 实施升级方案\n\n## 总结\n\n对于线上系统的升级，是个高危影响大的操作，在制定方案的时候需要详细到每一个操作步骤都写清楚，要考虑到所有的情况。更重要的一点，需要在实际线上操作之前按照事先写好的方案文档实际操作并修改不当的地方。对于主从复制的升级，需要注意一点是高版本的MySQL数据库能够作为低版本的从库来使用，反之则会出问题，因此需要先升级从库。\n\n ","source":"_posts/如何升级MySQL.md","raw":"---\ntitle: 如何升级MySQL\ncategory: \n\t- MySQL\ntags:\n\t- MySQL\ndate: 2020-9-24\nkeywords: 'MySQL,升级'\ndescription: 数据库运行过程中，新版本不断的开发出来，低版本不断被淘汰，在已经运行的业务系统数据库中，我们是否应该升级数据库，升级需要考虑些什么问题呢？\n---\n\n数据库运行过程中，新版本不断的开发出来，低版本不断被淘汰，在已经运行的业务系统数据库中，我们是否应该升级数据库，升级需要考虑些什么问题呢？\n\n## 数据库是否应该升级\n\n在准备对数据库升级之前，需要考虑一下几个问题，升级对业务有什么好处？有什么影响？然后再决定是否升级。在考虑是否升级前，需要对整体评估升级版本后能够解决什么样的问题。同时会带来什么样的问题，避免为了升级而升级。\n\n### MySQL数据库升级会带来什么好处？\n\n**是否能解决业务上的痛点**\n\n业务上，升级可能会带来性能上的提升，当然也可能下降，5.6中有个叫performance_schema的库，默认是不开启的，开启此库会增加数据库系统的负担降低数据库性能，不过在5.7中经过优化，对性能的影响几乎可以忽略了。再如8.0中，提升了安全性，同时也支持在很多关系数据库中已经支持的窗口函数，对于数据统计分析的功能支持更好了。\n\n**是否能解决运维上的痛点**\n\n在运维上，更新的版本多少会带来些新的功能，减轻运维压力，比如MySQL5.7中增加了sys库，相比于5.7之前的版本中，通过sys库可以更好的监控数据库相关的指标。\n\n### 升级会有什么影响\n\n**对原来业务的支持是否影响**\n\n不同版本之间的jdbc不一样，如8.0版本和5.7版本，当升级到8.0之后，相应的应用程序也应该一并升级处理，修改连接数据库的驱动。另外，不同版本之间参数可能不一致，如sql_mode，在不同的版本中默认值不一样，对SQL的处理方式不一样，导致SQL执行结果报错或者不符合预想的情况，另外有些参数在高版本中已经失效禁用了，在升级到新版本后，将无法启动数据库。\n\n**对原来业务性能是否有影响**\n\n上面提到过performance_schema库会对性能有影响，另外，当升级后需要注意InnoDB优化器对SQL语句的处理，不同版本优化方法不一样，可能会不能使用索引导致性能下降。\n\n## 如何升级MySQL\n\n### 制定一个可行的升级方案\n\n当评估了升级会带来的好处和影响后，确定要升级的话需要制定一个可行的升级方案了。\n\n**评估受影响的业务系统**\n\n一般情况下，一个数据库可能会有不同的业务系统使用，在升级前需要确定收到影响的系统，并在升级前通知到位，确保在升级的过程中如果有任何问题都可以找到相关的人来解决或者验证。\n\n**升级的详细步骤**\n\n对于线上系统的升级，是个紧张且重要的事情，不能出任何差错，因此一个详细的操作步骤是必不可少的。在实际的操作方案中，需要详细到可以直接从方案中复制来使用。大致的步骤如下：\n\n1. 对待升级数据库进行备份\n\n2. 升级Slave服务器版本\n\n3. 手动进行主从切换\n\n4. 升级Master服务器版本\n\n5. 升级完成后进行业务检查\n\n6. 升级后的数据库检查（配置文件、数据库对象、操作系统）\n\n7. 升级后的业务检查\n\n**升级失败回滚方案**\n\n俗话说，天有不测风云，虽然不一定能够遇到，但是要准备好在遇到的时候能够处变不惊。一个失败回滚的方案是必不可少的，大致步骤如下：\n\n1. 升级失败回滚的步骤，详细的回滚失败处理步骤\n\n2. 回滚后数据库环境检查\n\n3. 回滚后的业务检查\n\n### 实施升级方案\n\n## 总结\n\n对于线上系统的升级，是个高危影响大的操作，在制定方案的时候需要详细到每一个操作步骤都写清楚，要考虑到所有的情况。更重要的一点，需要在实际线上操作之前按照事先写好的方案文档实际操作并修改不当的地方。对于主从复制的升级，需要注意一点是高版本的MySQL数据库能够作为低版本的从库来使用，反之则会出问题，因此需要先升级从库。\n\n ","slug":"如何升级MySQL","published":1,"updated":"2022-01-01T14:32:15.511Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vu003lhx89hgpv1wwb","content":"<p>数据库运行过程中，新版本不断的开发出来，低版本不断被淘汰，在已经运行的业务系统数据库中，我们是否应该升级数据库，升级需要考虑些什么问题呢？</p>\n<h2 id=\"数据库是否应该升级\"><a href=\"#数据库是否应该升级\" class=\"headerlink\" title=\"数据库是否应该升级\"></a>数据库是否应该升级</h2><p>在准备对数据库升级之前，需要考虑一下几个问题，升级对业务有什么好处？有什么影响？然后再决定是否升级。在考虑是否升级前，需要对整体评估升级版本后能够解决什么样的问题。同时会带来什么样的问题，避免为了升级而升级。</p>\n<h3 id=\"MySQL数据库升级会带来什么好处？\"><a href=\"#MySQL数据库升级会带来什么好处？\" class=\"headerlink\" title=\"MySQL数据库升级会带来什么好处？\"></a>MySQL数据库升级会带来什么好处？</h3><p><strong>是否能解决业务上的痛点</strong></p>\n<p>业务上，升级可能会带来性能上的提升，当然也可能下降，5.6中有个叫performance_schema的库，默认是不开启的，开启此库会增加数据库系统的负担降低数据库性能，不过在5.7中经过优化，对性能的影响几乎可以忽略了。再如8.0中，提升了安全性，同时也支持在很多关系数据库中已经支持的窗口函数，对于数据统计分析的功能支持更好了。</p>\n<p><strong>是否能解决运维上的痛点</strong></p>\n<p>在运维上，更新的版本多少会带来些新的功能，减轻运维压力，比如MySQL5.7中增加了sys库，相比于5.7之前的版本中，通过sys库可以更好的监控数据库相关的指标。</p>\n<h3 id=\"升级会有什么影响\"><a href=\"#升级会有什么影响\" class=\"headerlink\" title=\"升级会有什么影响\"></a>升级会有什么影响</h3><p><strong>对原来业务的支持是否影响</strong></p>\n<p>不同版本之间的jdbc不一样，如8.0版本和5.7版本，当升级到8.0之后，相应的应用程序也应该一并升级处理，修改连接数据库的驱动。另外，不同版本之间参数可能不一致，如sql_mode，在不同的版本中默认值不一样，对SQL的处理方式不一样，导致SQL执行结果报错或者不符合预想的情况，另外有些参数在高版本中已经失效禁用了，在升级到新版本后，将无法启动数据库。</p>\n<p><strong>对原来业务性能是否有影响</strong></p>\n<p>上面提到过performance_schema库会对性能有影响，另外，当升级后需要注意InnoDB优化器对SQL语句的处理，不同版本优化方法不一样，可能会不能使用索引导致性能下降。</p>\n<h2 id=\"如何升级MySQL\"><a href=\"#如何升级MySQL\" class=\"headerlink\" title=\"如何升级MySQL\"></a>如何升级MySQL</h2><h3 id=\"制定一个可行的升级方案\"><a href=\"#制定一个可行的升级方案\" class=\"headerlink\" title=\"制定一个可行的升级方案\"></a>制定一个可行的升级方案</h3><p>当评估了升级会带来的好处和影响后，确定要升级的话需要制定一个可行的升级方案了。</p>\n<p><strong>评估受影响的业务系统</strong></p>\n<p>一般情况下，一个数据库可能会有不同的业务系统使用，在升级前需要确定收到影响的系统，并在升级前通知到位，确保在升级的过程中如果有任何问题都可以找到相关的人来解决或者验证。</p>\n<p><strong>升级的详细步骤</strong></p>\n<p>对于线上系统的升级，是个紧张且重要的事情，不能出任何差错，因此一个详细的操作步骤是必不可少的。在实际的操作方案中，需要详细到可以直接从方案中复制来使用。大致的步骤如下：</p>\n<ol>\n<li><p>对待升级数据库进行备份</p>\n</li>\n<li><p>升级Slave服务器版本</p>\n</li>\n<li><p>手动进行主从切换</p>\n</li>\n<li><p>升级Master服务器版本</p>\n</li>\n<li><p>升级完成后进行业务检查</p>\n</li>\n<li><p>升级后的数据库检查（配置文件、数据库对象、操作系统）</p>\n</li>\n<li><p>升级后的业务检查</p>\n</li>\n</ol>\n<p><strong>升级失败回滚方案</strong></p>\n<p>俗话说，天有不测风云，虽然不一定能够遇到，但是要准备好在遇到的时候能够处变不惊。一个失败回滚的方案是必不可少的，大致步骤如下：</p>\n<ol>\n<li><p>升级失败回滚的步骤，详细的回滚失败处理步骤</p>\n</li>\n<li><p>回滚后数据库环境检查</p>\n</li>\n<li><p>回滚后的业务检查</p>\n</li>\n</ol>\n<h3 id=\"实施升级方案\"><a href=\"#实施升级方案\" class=\"headerlink\" title=\"实施升级方案\"></a>实施升级方案</h3><h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>对于线上系统的升级，是个高危影响大的操作，在制定方案的时候需要详细到每一个操作步骤都写清楚，要考虑到所有的情况。更重要的一点，需要在实际线上操作之前按照事先写好的方案文档实际操作并修改不当的地方。对于主从复制的升级，需要注意一点是高版本的MySQL数据库能够作为低版本的从库来使用，反之则会出问题，因此需要先升级从库。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"cover":"/img/top.jpg","excerpt":"","more":"<p>数据库运行过程中，新版本不断的开发出来，低版本不断被淘汰，在已经运行的业务系统数据库中，我们是否应该升级数据库，升级需要考虑些什么问题呢？</p>\n<h2 id=\"数据库是否应该升级\"><a href=\"#数据库是否应该升级\" class=\"headerlink\" title=\"数据库是否应该升级\"></a>数据库是否应该升级</h2><p>在准备对数据库升级之前，需要考虑一下几个问题，升级对业务有什么好处？有什么影响？然后再决定是否升级。在考虑是否升级前，需要对整体评估升级版本后能够解决什么样的问题。同时会带来什么样的问题，避免为了升级而升级。</p>\n<h3 id=\"MySQL数据库升级会带来什么好处？\"><a href=\"#MySQL数据库升级会带来什么好处？\" class=\"headerlink\" title=\"MySQL数据库升级会带来什么好处？\"></a>MySQL数据库升级会带来什么好处？</h3><p><strong>是否能解决业务上的痛点</strong></p>\n<p>业务上，升级可能会带来性能上的提升，当然也可能下降，5.6中有个叫performance_schema的库，默认是不开启的，开启此库会增加数据库系统的负担降低数据库性能，不过在5.7中经过优化，对性能的影响几乎可以忽略了。再如8.0中，提升了安全性，同时也支持在很多关系数据库中已经支持的窗口函数，对于数据统计分析的功能支持更好了。</p>\n<p><strong>是否能解决运维上的痛点</strong></p>\n<p>在运维上，更新的版本多少会带来些新的功能，减轻运维压力，比如MySQL5.7中增加了sys库，相比于5.7之前的版本中，通过sys库可以更好的监控数据库相关的指标。</p>\n<h3 id=\"升级会有什么影响\"><a href=\"#升级会有什么影响\" class=\"headerlink\" title=\"升级会有什么影响\"></a>升级会有什么影响</h3><p><strong>对原来业务的支持是否影响</strong></p>\n<p>不同版本之间的jdbc不一样，如8.0版本和5.7版本，当升级到8.0之后，相应的应用程序也应该一并升级处理，修改连接数据库的驱动。另外，不同版本之间参数可能不一致，如sql_mode，在不同的版本中默认值不一样，对SQL的处理方式不一样，导致SQL执行结果报错或者不符合预想的情况，另外有些参数在高版本中已经失效禁用了，在升级到新版本后，将无法启动数据库。</p>\n<p><strong>对原来业务性能是否有影响</strong></p>\n<p>上面提到过performance_schema库会对性能有影响，另外，当升级后需要注意InnoDB优化器对SQL语句的处理，不同版本优化方法不一样，可能会不能使用索引导致性能下降。</p>\n<h2 id=\"如何升级MySQL\"><a href=\"#如何升级MySQL\" class=\"headerlink\" title=\"如何升级MySQL\"></a>如何升级MySQL</h2><h3 id=\"制定一个可行的升级方案\"><a href=\"#制定一个可行的升级方案\" class=\"headerlink\" title=\"制定一个可行的升级方案\"></a>制定一个可行的升级方案</h3><p>当评估了升级会带来的好处和影响后，确定要升级的话需要制定一个可行的升级方案了。</p>\n<p><strong>评估受影响的业务系统</strong></p>\n<p>一般情况下，一个数据库可能会有不同的业务系统使用，在升级前需要确定收到影响的系统，并在升级前通知到位，确保在升级的过程中如果有任何问题都可以找到相关的人来解决或者验证。</p>\n<p><strong>升级的详细步骤</strong></p>\n<p>对于线上系统的升级，是个紧张且重要的事情，不能出任何差错，因此一个详细的操作步骤是必不可少的。在实际的操作方案中，需要详细到可以直接从方案中复制来使用。大致的步骤如下：</p>\n<ol>\n<li><p>对待升级数据库进行备份</p>\n</li>\n<li><p>升级Slave服务器版本</p>\n</li>\n<li><p>手动进行主从切换</p>\n</li>\n<li><p>升级Master服务器版本</p>\n</li>\n<li><p>升级完成后进行业务检查</p>\n</li>\n<li><p>升级后的数据库检查（配置文件、数据库对象、操作系统）</p>\n</li>\n<li><p>升级后的业务检查</p>\n</li>\n</ol>\n<p><strong>升级失败回滚方案</strong></p>\n<p>俗话说，天有不测风云，虽然不一定能够遇到，但是要准备好在遇到的时候能够处变不惊。一个失败回滚的方案是必不可少的，大致步骤如下：</p>\n<ol>\n<li><p>升级失败回滚的步骤，详细的回滚失败处理步骤</p>\n</li>\n<li><p>回滚后数据库环境检查</p>\n</li>\n<li><p>回滚后的业务检查</p>\n</li>\n</ol>\n<h3 id=\"实施升级方案\"><a href=\"#实施升级方案\" class=\"headerlink\" title=\"实施升级方案\"></a>实施升级方案</h3><h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>对于线上系统的升级，是个高危影响大的操作，在制定方案的时候需要详细到每一个操作步骤都写清楚，要考虑到所有的情况。更重要的一点，需要在实际线上操作之前按照事先写好的方案文档实际操作并修改不当的地方。对于主从复制的升级，需要注意一点是高版本的MySQL数据库能够作为低版本的从库来使用，反之则会出问题，因此需要先升级从库。</p>\n"},{"title":"西西弗神话：去活还是去死","date":"2021-09-07T04:47:52.000Z","keywords":null,"cover":"2021/09/07/西西弗神话：去活还是去死/1623434404.jpg","top_img":"2021/09/07/西西弗神话：去活还是去死/1623434404.jpg","description":"活着有什么意义？","_content":"\n真正严肃的哲学问题只有一个，那便是自杀。判断人生值不值得活，等于回答哲学的根本问题。\n\n不过有一天，“为什么”的疑问油然而生，于是一切就在这种略带惊讶的百无聊赖中开始了。厌倦处在机械生活的末端，但又是开启意识活动的序幕：唤醒意识，触发未来。未来，要么在循环中无意识的返回，要么彻底清醒。觉醒之后，久而久之，所得的结果，要么自杀，要么康复。\n","source":"_posts/西西弗神话：去活还是去死.md","raw":"---\ntitle: 西西弗神话：去活还是去死\ndate: 2021-09-07 12:47:52\ntags:\n  - 读书笔记\ncategory: 读书笔记\nkeywords:\ncover: 1623434404.jpg\ntop_img: 1623434404.jpg\ndescription: 活着有什么意义？\n---\n\n真正严肃的哲学问题只有一个，那便是自杀。判断人生值不值得活，等于回答哲学的根本问题。\n\n不过有一天，“为什么”的疑问油然而生，于是一切就在这种略带惊讶的百无聊赖中开始了。厌倦处在机械生活的末端，但又是开启意识活动的序幕：唤醒意识，触发未来。未来，要么在循环中无意识的返回，要么彻底清醒。觉醒之后，久而久之，所得的结果，要么自杀，要么康复。\n","slug":"西西弗神话：去活还是去死","published":1,"updated":"2022-01-01T14:32:15.518Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vv003phx89e74b5vvr","content":"<p>真正严肃的哲学问题只有一个，那便是自杀。判断人生值不值得活，等于回答哲学的根本问题。</p>\n<p>不过有一天，“为什么”的疑问油然而生，于是一切就在这种略带惊讶的百无聊赖中开始了。厌倦处在机械生活的末端，但又是开启意识活动的序幕：唤醒意识，触发未来。未来，要么在循环中无意识的返回，要么彻底清醒。觉醒之后，久而久之，所得的结果，要么自杀，要么康复。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>真正严肃的哲学问题只有一个，那便是自杀。判断人生值不值得活，等于回答哲学的根本问题。</p>\n<p>不过有一天，“为什么”的疑问油然而生，于是一切就在这种略带惊讶的百无聊赖中开始了。厌倦处在机械生活的末端，但又是开启意识活动的序幕：唤醒意识，触发未来。未来，要么在循环中无意识的返回，要么彻底清醒。觉醒之后，久而久之，所得的结果，要么自杀，要么康复。</p>\n"},{"title":"InnoDB Cluster部署","date":"2021-06-10T08:22:15.000Z","keywords":"InnoDB Cluster,MySQL","top_img":"2021/06/10/InnoDB-Cluster部署/bg.jpg","cover":"2021/06/10/InnoDB-Cluster部署/bg.jpg","description":"部署一个MySQL 8.0.25 InnoDB Cluster集群","_content":"\n部署一个MySQL 8.0.25 InnoDB Cluster集群\n\n## InnoDB Cluster集群简介\n\n![InnoDB Cluster架构](InnoDB Cluster架构.jpg)\n\n## 环境信息\n\n准备三台虚拟机\n\n|                     | 服务器1            | 服务器2            | 服务器3            | 端口                 |\n| ------------------- | ------------------ | ------------------ | ------------------ | -------------------- |\n| 操作系统            | CentOS7            | CentOS7            | CentOS7            | /                    |\n| IP                  | 192.168.165.156    | 192.168.165.157    | 192.168.165.225    | /                    |\n| 主机名              | db156              | db156              | db225              | /                    |\n| MySQL Server 8.0.25 | MGR 节点一         | MGR 节点二         | MGR 节点三         | 3306                 |\n| MySQL Shell 8.0.25  | MySQL Shell节点一  | MySQL Shell节点二  | MySQL Shell节点三  | /                    |\n| MySQL Router 8.0.25 | MySQL Router节点一 | MySQL Router节点二 | MySQL Router节点三 | 6446(写)、6447（读） |\n\n## 部署说明\n\n### 安装顺序\n\n安装MySQL Server--->启用组复制--->安装MySQL Shell ---> 创建InnoDB Cluster集群---> 安装MySQL Router\n\n### 安装包\n\n| 安装包名                                            | MD5值                            | 下载连接                                                     |\n| --------------------------------------------------- | -------------------------------- | ------------------------------------------------------------ |\n| mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz          | a12142a969531cebd845844620bb44a4 | https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz |\n| mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz | 9192ea694ac97a5c5715806ddcf84932 | https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz |\n| mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz   | bcd9b81f422667dbabd0a5d7bbf7638a | https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz |\n\n## 安装MySQL Server\n\n### 安装依赖包\n\n### 创建相关用户\n\n```shell\n[root@db156 ~]# groupadd mysql && useradd -r -g mysql -s /bin/false mysql\ngroupadd: group 'mysql' already exists\n[root@db156 ~]# cat /etc/passwd | grep -iw  \"mysql\"\nmysql:x:997:1000::/home/mysql:/bin/false\n```\n\n### 下载并解压安装包\n\n```\n[root@db156 opt]# wget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\n--2021-06-10 04:43:21--  https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving dev.mysql.com (dev.mysql.com)... 137.254.60.11\nConnecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]\n--2021-06-10 04:43:22--  https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231\nConnecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 896219776 (855M) [text/plain]\nSaving to: ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’\n\n100%[==================================================================================================================================================================>] 896,219,776 14.2MB/s   in 66s    \n\n2021-06-10 04:44:29 (13.0 MB/s) - ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [896219776/896219776]\n\n[root@db156 opt]# wget https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\n--2021-06-10 04:44:39--  https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\nResolving dev.mysql.com (dev.mysql.com)... 137.254.60.11\nConnecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://cdn.mysql.com//Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz [following]\n--2021-06-10 04:44:41--  https://cdn.mysql.com//Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\nResolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231\nConnecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 41487987 (40M) [application/x-tar-gz]\nSaving to: ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’\n\n100%[==================================================================================================================================================================>] 41,487,987  11.6MB/s   in 3.8s   \n\n2021-06-10 04:44:45 (10.4 MB/s) - ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’ saved [41487987/41487987]\n\n[root@db156 opt]# wget https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\n--2021-06-10 04:44:53--  https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving dev.mysql.com (dev.mysql.com)... 137.254.60.11\nConnecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://cdn.mysql.com//Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]\n--2021-06-10 04:44:54--  https://cdn.mysql.com//Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231\nConnecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 65288920 (62M) [text/plain]\nSaving to: ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’\n\n100%[==================================================================================================================================================================>] 65,288,920  12.5MB/s   in 6.1s   \n\n2021-06-10 04:45:01 (10.3 MB/s) - ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [65288920/65288920]\n\n[root@db156 opt]# tar -xf mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\n[root@db156 opt]# mv mysql-8.0.25-linux-glibc2.12-x86_64 /usr/local/mysql/\n[root@db156 opt]# chown -R mysql:mysql /usr/local/mysql/\n[root@db156 opt]# chmod -R 755 /usr/local/mysql/\n```\n\n### 创建相关目录\n\n```\n[root@db156 opt]# mkdir -p /data/mysql/{data,binlog,relay}\n[root@db156 opt]# chown -R mysql:mysql /data/mysql/\n[root@db156 opt]# chmod -R 750 /data/mysql/\n```\n\n\n\n### 准备配置文件\n\n```\n[mysqld]\nserver_id=13306\ngtid_mode=on\nenforce_gtid_consistency=1\ntransaction_write_set_extraction=XXHASH64\nloose-group_replication_group_name='aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'\nloose-group_replication_start_on_boot=off\nloose-group_replication_ip_whitelist='192.168.165.0/24'\nloose-group_replication_local_address='192.168.165.157:33061'\nloose-group_replication_group_seeds='192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061'\nloose-group_replication_bootstrap_group=off\nloose-group_replication_single_primary_mode=on\nloose-group_replication_enforce_update_everywhere_checks=off\nloose-group_replication_recovery_get_public_key=on\nloose-group_replication_recovery_use_ssl=off\nloose-group_replication_ssl_mode='DISABLED'\nloose-group_replication_consistency='EVENTUAL'\nloose-group_replication_member_expel_timeout=5\nreport_host='192.168.165.157'\nreport_port=3306\nplugin_load_add ='group_replication.so'\nauto_increment_increment=1\nauto_increment_offset=1\nmysqlx_port=33060\nadmin_port=33062\ndatadir=/data/mysql/data\nbasedir=/usr/local/mysql\nuser=mysql\n```\n\n### 初始化MySQL Server\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --initialize-insecure\n2021-06-10T08:12:00.192163Z 0 [System] [MY-013169] [Server] /usr/local/mysql/bin/mysqld (mysqld 8.0.25) initializing of server in progress as process 10863\n2021-06-10T08:12:00.364089Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.\n2021-06-10T08:12:05.120563Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.\n2021-06-10T08:12:05.548074Z 0 [Warning] [MY-013501] [Server] Ignoring --plugin-load[_add] list as the server is running with --initialize(-insecure).\n2021-06-10T08:12:06.717610Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_group_name=aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'.\n2021-06-10T08:12:06.718217Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_start_on_boot=off'.\n2021-06-10T08:12:06.718823Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_ip_whitelist=192.168.165.0/24'.\n2021-06-10T08:12:06.719416Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_local_address=192.168.165.156:33061'.\n2021-06-10T08:12:06.719969Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_group_seeds=192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061'.\n2021-06-10T08:12:06.720542Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_bootstrap_group=off'.\n2021-06-10T08:12:06.721103Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_single_primary_mode=on'.\n2021-06-10T08:12:06.721683Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_enforce_update_everywhere_checks=off'.\n2021-06-10T08:12:06.722250Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_recovery_get_public_key=on'.\n2021-06-10T08:12:06.722873Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_recovery_use_ssl=off'.\n2021-06-10T08:12:06.723485Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_ssl_mode=DISABLED'.\n2021-06-10T08:12:06.724060Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_member_expel_timeout=5'.\n2021-06-10T08:12:06.727059Z 6 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.\n```\n\n\n\n### 配置启动文件并启动MySQL\n\n```\n[root@db156 opt]# vi /usr/lib/systemd/system/mysqld.service\n[root@db156 opt]# cat /usr/lib/systemd/system/mysqld.service\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=https://dev.mysql.com/doc/refman/8.0/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf\nLimitNOFILE = 5000\n[root@db156 opt]# systemctl start mysqld \n[root@db156 opt]# systemctl status mysqld      \n● mysqld.service - MySQL Server\n   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; disabled; vendor preset: disabled)\n   Active: active (running) since Thu 2021-06-10 04:57:12 EDT; 10s ago\n     Docs: man:mysqld(8)\n           https://dev.mysql.com/doc/refman/8.0/en/using-systemd.html\n Main PID: 14232 (mysqld_safe)\n   CGroup: /system.slice/mysqld.service\n           ├─14232 /bin/sh /usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf\n           └─14626 /usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --basedir=/usr/local/mysql --datadir=/data/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=db156.err --pid-fil...\n\nJun 10 04:57:12 db156 systemd[1]: Started MySQL Server.\nJun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.594106Z mysqld_safe Logging to '/data/mysql/data/db156.err'.\nJun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.689214Z mysqld_safe Starting mysqld daemon with databases from /data/mysql/data\n```\n\n在执行`systemctl start mysqld `如果报错`Failed to start mysqld.service: Unit not found.`,可以执行`systemctl daemon-reload`解决。\n\n### 修改本地账号密码并设置不过期\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -e \"SET SQL_LOG_BIN=0;SET global super_read_only=OFF; SET global read_only=OFF; alter user 'root'@'localhost' password expire never; set password for 'root'@'localhost'='123456';flush privileges; SET SQL_LOG_BIN=1;\"\n```\n\n### 创建复制账号并授权\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 9\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER IF NOT EXISTS `repl`@`192.168.165.156` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nCREATE USER IF NOT EXISTS `repl`@`192.168.165.157` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nCREATE USER IF NOT EXISTS `repl`@`192.168.165.225` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nQuery OK, 0 rows affected (0.04 sec)\n\nmysql> CREATE USER IF NOT EXISTS `repl`@`192.168.165.157` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> CREATE USER IF NOT EXISTS `repl`@`192.168.165.225` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nGRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.156`; \nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.156`; \nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.157`; \nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.225`; \nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n### 创建管理账号并授权\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER IF NOT EXISTS `icadmin`@`192.168.165.%` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nQuery OK, 0 rows affected, 1 warning (0.01 sec)\n\nmysql> GRANT SELECT, RELOAD, SHUTDOWN, PROCESS, FILE, SUPER, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE USER ON *.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql> GRANT BACKUP_ADMIN,CLONE_ADMIN,PERSIST_RO_VARIABLES_ADMIN,REPLICATION_APPLIER,SYSTEM_VARIABLES_ADMIN ON *.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nGRANT INSERT, UPDATE, DELETE ON `mysql`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE ON `mysql`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON `mysql_innodb_cluster_metadata`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON `mysql_innodb_cluster_metadata_bkp`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON `mysql_innodb_cluster_metadata_previous`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nFLUSH PRIVILEGES;\nSET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.32 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n\n\n### 安装组复制插件\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 9\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> INSTALL PLUGIN group_replication SONAME 'group_replication.so';\nERROR 1125 (HY000): Function 'group_replication' already exists\nmysql> SELECT PLUGIN_NAME, PLUGIN_STATUS FROM INFORMATION_SCHEMA.PLUGINS  WHERE PLUGIN_NAME LIKE '%group_replication%';\n+-------------------+---------------+\n| PLUGIN_NAME       | PLUGIN_STATUS |\n+-------------------+---------------+\n| group_replication | ACTIVE        |\n+-------------------+---------------+\n1 row in set (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n\n\n### 设置复制通道\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 10\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> CHANGE MASTER TO MASTER_USER='repl', MASTER_PASSWORD='123456' FOR CHANNEL 'group_replication_recovery';\nQuery OK, 0 rows affected, 5 warnings (0.01 sec)\n\nmysql> SELECT User_name,Channel_name FROM mysql.slave_master_info WHERE user_name = 'repl';\n+-----------+----------------------------+\n| User_name | Channel_name               |\n+-----------+----------------------------+\n| repl      | group_replication_recovery |\n+-----------+----------------------------+\n1 row in set (0.00 sec)\n\nmysql> SET global group_replication_recovery_get_public_key=ON;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n\n\n### 查看MySQL进程\n\n```\n[root@db156 opt]# ps -ef | grep mysql\nmysql    14232     1  0 04:57 ?        00:00:00 /bin/sh /usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf\nmysql    14626 14232  0 04:57 ?        00:00:03 /usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --basedir=/usr/local/mysql --datadir=/data/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=db156.err --pid-file=db156.pid\nroot     15500  9686  0 05:12 pts/0    00:00:00 grep --color=auto mysql\n[root@db156 opt]# \n```\n\n\n\n> 说明：其他两个节点也按照以上步骤部署\n\n## 启用MGR组复制\n\n三个MySQL Server实例部署完成之后，就可以启用组复制了。\n\n对于组复制，数据必须存储在InnoDB事务存储引擎中，使用其他存储引擎（包括临时 MEMORY存储引擎）可能会导致组复制中的错误。disabled_storage_engines 如下设置 系统变量以防止其使用：\n\ndisabled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\n\n修改配置文件，添加上面的配置并重启即可：\n\n```\n[root@db156 opt]# vi /etc/my.cnf \n[root@db156 opt]# cat /etc/my.cnf\n[mysqld]\nserver_id=13306\ngtid_mode=on\nenforce_gtid_consistency=1\ntransaction_write_set_extraction=XXHASH64\nloose-group_replication_group_name='aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'\nloose-group_replication_start_on_boot=off\nloose-group_replication_ip_whitelist='192.168.165.0/24'\nloose-group_replication_local_address='192.168.165.156:33061'\nloose-group_replication_group_seeds='192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061'\nloose-group_replication_bootstrap_group=off\nloose-group_replication_single_primary_mode=on\nloose-group_replication_enforce_update_everywhere_checks=off\nloose-group_replication_recovery_get_public_key=on\nloose-group_replication_recovery_use_ssl=off\nloose-group_replication_ssl_mode='DISABLED'\nloose-group_replication_consistency='EVENTUAL'\nloose-group_replication_member_expel_timeout=5\nreport_host='192.168.165.156'\nreport_port=3306\nplugin_load_add ='group_replication.so'\nauto_increment_increment=1\nauto_increment_offset=1\nmysqlx_port=33060\nadmin_port=33062\ndatadir=/data/mysql/data\nbasedir=/usr/local/mysql\nuser=mysql\nbled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\n[root@db225 opt]# systemctl restart mysqld\n```\n\n\n\n首次启动组复制的过程称为引导，，可以使用group_replication_bootstrap_group系统变量来引导组，且只能在一个实例上执行并只能执行一次。\n\n我们选择节点一上执行：\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET GLOBAL group_replication_bootstrap_group=ON;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected, 1 warning (2.22 sec)\n\nmysql> SET GLOBAL group_replication_bootstrap_group=OFF;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> \n```\n\n节点二及节点三：\n\n```\n[root@db225 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected, 1 warning (2.64 sec)\n\nmysql> \n```\n\n在将其他节点添加至复制组时，如果报一下错误：\n\n```\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nERROR 3092 (HY000): The server is not configured properly to be an active member of the group. Please see more details on error log.\n```\n\n查看到日志如下：\n\n```\n2021-06-10T10:42:54.535154Z 10 [System] [MY-010597] [Repl] 'CHANGE MASTER TO FOR CHANNEL 'group_replication_applier' executed'. Previous state master_host='', master_port= 3306, master_log_file='', master_log_pos= 4, master_bind=''. New state master_host='<NULL>', master_port= 0, master_log_file='', master_log_pos= 4, master_bind=''.\n2021-06-10T10:42:57.045266Z 0 [ERROR] [MY-011526] [Repl] Plugin group_replication reported: 'This member has more executed transactions than those present in the group. Local transactions: 689d5d1d-c9cc-11eb-8243-005056a0d28b:1 > Group transactions: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1'\n2021-06-10T10:42:57.056782Z 0 [ERROR] [MY-011522] [Repl] Plugin group_replication reported: 'The member contains transactions not present in the group. The member will now exit the group.'\n2021-06-10T10:42:57.056911Z 0 [System] [MY-011503] [Repl] Plugin group_replication reported: 'Group membership changed to 192.168.165.157:3306, 192.168.165.156:3306 on view 16233217077427225:2.'\n2021-06-10T10:43:00.730039Z 0 [System] [MY-011504] [Repl] Plugin group_replication reported: 'Group membership changed: This member has left the group.'\n2021-06-10T10:43:00.758719Z 9 [System] [MY-011566] [Repl] Plugin group_replication reported: 'Setting super_read_only=OFF.'\n```\n\n则在该节点上执行`reset master`可以解决。\n\n查看组复制状态(任何一个实例均可查询)：\n\n```\nmysql> select * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST     | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 689d5d1d-c9cc-11eb-8243-005056a0d28b | 192.168.165.157 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |\n| group_replication_applier | 71d57215-c9cc-11eb-a5ac-005056a098ec | 192.168.165.225 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |\n| group_replication_applier | 8b5f525d-c9c3-11eb-bf4e-005056a0bb1a | 192.168.165.156 |        3306 | ONLINE       | PRIMARY     | 8.0.25         |\n+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+\n3 rows in set (1.54 sec)\n\nmysql> \n```\n\n至此，MGR三节点的组复制搭建完成。\n\n## 安装MySQL Shell\n\n安装过程如下：\n\n```\n[root@db156 opt]# tar -xf mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz \n[root@db156 opt]# mv mysql-shell-8.0.25-linux-glibc2.12-x86-64bit /usr/local/mysqlshell\n[root@db156 opt]# chown -R mysql:mysql /usr/local/mysqlshell/\n[root@db156 opt]# chmod -R 755 /usr/local/mysqlshell/\n[root@db156 opt]# echo \"export PATH=\\$PATH:/usr/local/mysqlshell/bin\" >> /etc/profile\n[root@db156 opt]# source /etc/profile\n```\n\n三个节点均执行以上步骤安装。\n\n\n\n## 创建InnoDB Cluster集群\n\n通过mysqlsh命令使用安装MySQL Server时创建的管理账号连接到MySQL 实例，执行`dba.createCluster()`创建集群，并过过`dba.getCluster(\"testCluster\").status()`查看集群状态：\n\n```\n[root@db225 opt]# mysqlsh icadmin@192.168.165.156:3306\nPlease provide the password for 'icadmin@192.168.165.156:3306': ******\nSave password for 'icadmin@192.168.165.156:3306'? [Y]es/[N]o/Ne[v]er (default No): \nMySQL Shell 8.0.25\n\nCopyright (c) 2016, 2021, Oracle and/or its affiliates.\nOracle is a registered trademark of Oracle Corporation and/or its affiliates.\nOther names may be trademarks of their respective owners.\n\nType '\\help' or '\\?' for help; '\\quit' to exit.\nCreating a session to 'icadmin@192.168.165.156:3306'\nFetching schema names for autocompletion... Press ^C to stop.\nYour MySQL connection id is 28\nServer version: 8.0.25 MySQL Community Server - GPL\nNo default schema selected; type \\use <schema> to set one.\n MySQL  192.168.165.156:3306 ssl  JS > var cluster = dba.createCluster('testCluster', {adoptFromGR: true});\nA new InnoDB cluster will be created based on the existing replication group on instance '192.168.165.156:3306'.\n\nCreating InnoDB cluster 'testCluster' on '192.168.165.156:3306'...\n\nAdding Seed Instance...\nAdding Instance '192.168.165.157:3306'...\nAdding Instance '192.168.165.225:3306'...\nAdding Instance '192.168.165.156:3306'...\nResetting distributed recovery credentials across the cluster...\nNOTE: User 'mysql_innodb_cluster_13306'@'%' already existed at instance '192.168.165.156:3306'. It will be deleted and created again with a new password.\nNOTE: User 'mysql_innodb_cluster_13306'@'%' already existed at instance '192.168.165.156:3306'. It will be deleted and created again with a new password.\nCluster successfully created based on existing replication group.\n\n MySQL  192.168.165.156:3306 ssl  JS > dba.getCluster(\"testCluster\").status();\n{\n    \"clusterName\": \"testCluster\", \n    \"defaultReplicaSet\": {\n        \"name\": \"default\", \n        \"primary\": \"192.168.165.156:3306\", \n        \"ssl\": \"DISABLED\", \n        \"status\": \"OK\", \n        \"statusText\": \"Cluster is ONLINE and can tolerate up to ONE failure.\", \n        \"topology\": {\n            \"192.168.165.156:3306\": {\n                \"address\": \"192.168.165.156:3306\", \n                \"instanceErrors\": [\n                    \"NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.\"\n                ], \n                \"memberRole\": \"PRIMARY\", \n                \"mode\": \"R/W\", \n                \"readReplicas\": {}, \n                \"replicationLag\": null, \n                \"role\": \"HA\", \n                \"status\": \"ONLINE\", \n                \"version\": \"8.0.25\"\n            }, \n            \"192.168.165.157:3306\": {\n                \"address\": \"192.168.165.157:3306\", \n                \"instanceErrors\": [\n                    \"NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.\"\n                ], \n                \"memberRole\": \"SECONDARY\", \n                \"mode\": \"R/O\", \n                \"readReplicas\": {}, \n                \"replicationLag\": null, \n                \"role\": \"HA\", \n                \"status\": \"ONLINE\", \n                \"version\": \"8.0.25\"\n            }, \n            \"192.168.165.225:3306\": {\n                \"address\": \"192.168.165.225:3306\", \n                \"instanceErrors\": [\n                    \"NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.\"\n                ], \n                \"memberRole\": \"SECONDARY\", \n                \"mode\": \"R/O\", \n                \"readReplicas\": {}, \n                \"replicationLag\": null, \n                \"role\": \"HA\", \n                \"status\": \"ONLINE\", \n                \"version\": \"8.0.25\"\n            }\n        }, \n        \"topologyMode\": \"Single-Primary\"\n    }, \n    \"groupInformationSourceMember\": \"192.168.165.156:3306\"\n}\n MySQL  192.168.165.156:3306 ssl  JS > \n```\n\n其中：\n\n- \"status\": \"OK\" 表示集群状态是正常的\n- \"topologyMode\": \"Single-Primary\" 表示是单主模式\n- \"mode\": \"R/W\" 表示可读可写\n- \"mode\": \"R/O\" 表示只读\n\n\n\n## 安装MySQL Router\n\n安装：\n\n```\n[root@db156 opt]# tar -xf mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz \n[root@db156 opt]# mv mysql-router-8.0.25-linux-glibc2.12-x86_64 /usr/local/mysqlrouter\n[root@db156 opt]# chown -R mysql:mysql /usr/local/mysqlrouter/\n[root@db156 opt]# chmod -R 755 /usr/local/mysqlrouter/\n[root@db156 opt]# mkdir -p /data/mysqlrouter\n[root@db156 opt]# chown -R mysql:mysql /data/mysqlrouter/\n[root@db156 opt]# echo \"export PATH=\\$PATH:/usr/local/mysqlrouter/bin\" >> /etc/profile\n[root@db156 opt]# source /etc/profile\n```\n\nbootstrap引导:\n\n```\n[root@db156 opt]# /usr/local/mysqlrouter/bin/mysqlrouter --bootstrap icadmin@192.168.165.156:3306 --directory /data/mysqlrouter --conf-use-sockets --user=mysql --name=mysql_router_13306 --conf-bind-address=192.168.165.156 --account-host=\"192.168.165.%\"\nPlease enter MySQL password for icadmin: \n# Bootstrapping MySQL Router instance at '/data/mysqlrouter'...\n\n- Creating account(s) (only those that are needed, if any)\n- Verifying account (using it to run SQL queries that would be run by Router)\n- Storing account in keyring\n- Adjusting permissions of generated files\n- Creating configuration /data/mysqlrouter/mysqlrouter.conf\n\n# MySQL Router 'mysql_router_13306' configured for the InnoDB Cluster 'testCluster'\n\nAfter this MySQL Router has been started with the generated configuration\n\n    $ /usr/local/mysqlrouter/bin/mysqlrouter -c /data/mysqlrouter/mysqlrouter.conf\n\nthe cluster 'testCluster' can be reached by connecting to:\n\n## MySQL Classic protocol\n\n- Read/Write Connections: localhost:6446, /data/mysqlrouter/mysql.sock\n- Read/Only Connections:  localhost:6447, /data/mysqlrouter/mysqlro.sock\n\n## MySQL X protocol\n\n- Read/Write Connections: localhost:6448, /data/mysqlrouter/mysqlx.sock\n- Read/Only Connections:  localhost:6449, /data/mysqlrouter/mysqlxro.sock\n\n[root@db156 opt]# \n```\n\n引导成功后会在/data/mysqlrouter目录下生成所需的数据文件，目录结构如下：\n\n```\n[root@db156 opt]# tree /data/mysqlrouter/\n/data/mysqlrouter/\n├── data\n│   ├── ca-key.pem\n│   ├── ca.pem\n│   ├── keyring\n│   ├── router-cert.pem\n│   ├── router-key.pem\n│   └── state.json\n├── log\n│   └── mysqlrouter.log\n├── mysqlrouter.conf\n├── mysqlrouter.key\n├── run\n├── start.sh\n└── stop.sh\n\n3 directories, 11 files\n```\n\n生成的MySQL Router配置文件如下：\n\n```\n[root@db156 opt]# cat /data/mysqlrouter/mysqlrouter.conf \n# File automatically generated during MySQL Router bootstrap\n[DEFAULT]\nname=mysql_router_13306\nuser=mysql\nlogging_folder=/data/mysqlrouter/log\nruntime_folder=/data/mysqlrouter/run\ndata_folder=/data/mysqlrouter/data\nkeyring_path=/data/mysqlrouter/data/keyring\nmaster_key_path=/data/mysqlrouter/mysqlrouter.key\nconnect_timeout=15\nread_timeout=30\ndynamic_state=/data/mysqlrouter/data/state.json\nclient_ssl_cert=/data/mysqlrouter/data/router-cert.pem\nclient_ssl_key=/data/mysqlrouter/data/router-key.pem\nclient_ssl_mode=PREFERRED\nserver_ssl_mode=AS_CLIENT\nserver_ssl_verify=DISABLED\n\n[logger]\nlevel = INFO\n\n[metadata_cache:testCluster]\ncluster_type=gr\nrouter_id=1\nuser=mysql_router1_7d9sq1vuggg9\nmetadata_cluster=testCluster\nttl=0.5\nauth_cache_ttl=-1\nauth_cache_refresh_interval=2\nuse_gr_notifications=0\n\n[routing:testCluster_rw]\nbind_address=192.168.165.156\nbind_port=6446\nsocket=/data/mysqlrouter/mysql.sock\ndestinations=metadata-cache://testCluster/?role=PRIMARY\nrouting_strategy=first-available\nprotocol=classic\n\n[routing:testCluster_ro]\nbind_address=192.168.165.156\nbind_port=6447\nsocket=/data/mysqlrouter/mysqlro.sock\ndestinations=metadata-cache://testCluster/?role=SECONDARY\nrouting_strategy=round-robin-with-fallback\nprotocol=classic\n\n[routing:testCluster_x_rw]\nbind_address=192.168.165.156\nbind_port=6448\nsocket=/data/mysqlrouter/mysqlx.sock\ndestinations=metadata-cache://testCluster/?role=PRIMARY\nrouting_strategy=first-available\nprotocol=x\n\n[routing:testCluster_x_ro]\nbind_address=192.168.165.156\nbind_port=6449\nsocket=/data/mysqlrouter/mysqlxro.sock\ndestinations=metadata-cache://testCluster/?role=SECONDARY\nrouting_strategy=round-robin-with-fallback\nprotocol=x\n\n[http_server]\nport=8443\nssl=1\nssl_cert=/data/mysqlrouter/data/router-cert.pem\nssl_key=/data/mysqlrouter/data/router-key.pem\n\n[http_auth_realm:default_auth_realm]\nbackend=default_auth_backend\nmethod=basic\nname=default_realm\n\n[rest_router]\nrequire_realm=default_auth_realm\n\n[rest_api]\n\n[http_auth_backend:default_auth_backend]\nbackend=metadata_cache\n\n[rest_routing]\nrequire_realm=default_auth_realm\n\n[rest_metadata_cache]\nrequire_realm=default_auth_realm\n\n[root@db156 opt]# \n```\n\n启动MySQL路由：\n\n```\n[root@db156 opt]# bash /data/mysqlrouter/start.sh 2>&1 > /dev/null &\n[root@db156 opt]# ps -ef | grep mysqlrouter\nroot     24911     1  0 08:00 pts/0    00:00:00 sudo ROUTER_PID=/data/mysqlrouter/mysqlrouter.pid /usr/local/mysqlrouter/bin/mysqlrouter -c /data/mysqlrouter/mysqlrouter.conf --user=mysql\nmysql    24913 24911  2 08:00 pts/0    00:00:01 /usr/local/mysqlrouter/bin/mysqlrouter -c /data/mysqlrouter/mysqlrouter.conf --user=mysql\nroot     24998  9686  0 08:01 pts/0    00:00:00 grep --color=auto mysqlrouter\n```\n\n读写分离测试：使用不同的端口\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uicadmin -p -h 192.168.165.156 -P 6446    \nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 196\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> select @@hostname as hostname, @@port as port;\n+----------+------+\n| hostname | port |\n+----------+------+\n| db156    | 3306 |\n+----------+------+\n1 row in set (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uicadmin -p -h 192.168.165.156 -P 6447\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 30\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> select @@hostname as hostname, @@port as port;\n+----------+------+\n| hostname | port |\n+----------+------+\n| db225    | 3306 |\n+----------+------+\n1 row in set (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uicadmin -p -h 192.168.165.156 -P 6447\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 1517\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> select @@hostname as hostname, @@port as port;\n+----------+------+\n| hostname | port |\n+----------+------+\n| db157    | 3306 |\n+----------+------+\n1 row in set (0.00 sec)\n\nmysql> \n```\n\n可以看到使用读写端口6446时连接的是主节点，而使用只读端口6447连接时是在两个从节点之间切换操作。\n\n\n\n","source":"_posts/InnoDB-Cluster部署.md","raw":"---\ntitle: InnoDB Cluster部署\ndate: 2021-06-10 16:22:15\ncategory: MySQL\ntags:\n  - MySQL\n  - InnoDB Cluster\nkeywords: 'InnoDB Cluster,MySQL'\ntop_img: bg.jpg\ncover: bg.jpg\ndescription: 部署一个MySQL 8.0.25 InnoDB Cluster集群\n---\n\n部署一个MySQL 8.0.25 InnoDB Cluster集群\n\n## InnoDB Cluster集群简介\n\n![InnoDB Cluster架构](InnoDB Cluster架构.jpg)\n\n## 环境信息\n\n准备三台虚拟机\n\n|                     | 服务器1            | 服务器2            | 服务器3            | 端口                 |\n| ------------------- | ------------------ | ------------------ | ------------------ | -------------------- |\n| 操作系统            | CentOS7            | CentOS7            | CentOS7            | /                    |\n| IP                  | 192.168.165.156    | 192.168.165.157    | 192.168.165.225    | /                    |\n| 主机名              | db156              | db156              | db225              | /                    |\n| MySQL Server 8.0.25 | MGR 节点一         | MGR 节点二         | MGR 节点三         | 3306                 |\n| MySQL Shell 8.0.25  | MySQL Shell节点一  | MySQL Shell节点二  | MySQL Shell节点三  | /                    |\n| MySQL Router 8.0.25 | MySQL Router节点一 | MySQL Router节点二 | MySQL Router节点三 | 6446(写)、6447（读） |\n\n## 部署说明\n\n### 安装顺序\n\n安装MySQL Server--->启用组复制--->安装MySQL Shell ---> 创建InnoDB Cluster集群---> 安装MySQL Router\n\n### 安装包\n\n| 安装包名                                            | MD5值                            | 下载连接                                                     |\n| --------------------------------------------------- | -------------------------------- | ------------------------------------------------------------ |\n| mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz          | a12142a969531cebd845844620bb44a4 | https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz |\n| mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz | 9192ea694ac97a5c5715806ddcf84932 | https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz |\n| mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz   | bcd9b81f422667dbabd0a5d7bbf7638a | https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz |\n\n## 安装MySQL Server\n\n### 安装依赖包\n\n### 创建相关用户\n\n```shell\n[root@db156 ~]# groupadd mysql && useradd -r -g mysql -s /bin/false mysql\ngroupadd: group 'mysql' already exists\n[root@db156 ~]# cat /etc/passwd | grep -iw  \"mysql\"\nmysql:x:997:1000::/home/mysql:/bin/false\n```\n\n### 下载并解压安装包\n\n```\n[root@db156 opt]# wget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\n--2021-06-10 04:43:21--  https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving dev.mysql.com (dev.mysql.com)... 137.254.60.11\nConnecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]\n--2021-06-10 04:43:22--  https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231\nConnecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 896219776 (855M) [text/plain]\nSaving to: ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’\n\n100%[==================================================================================================================================================================>] 896,219,776 14.2MB/s   in 66s    \n\n2021-06-10 04:44:29 (13.0 MB/s) - ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [896219776/896219776]\n\n[root@db156 opt]# wget https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\n--2021-06-10 04:44:39--  https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\nResolving dev.mysql.com (dev.mysql.com)... 137.254.60.11\nConnecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://cdn.mysql.com//Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz [following]\n--2021-06-10 04:44:41--  https://cdn.mysql.com//Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\nResolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231\nConnecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 41487987 (40M) [application/x-tar-gz]\nSaving to: ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’\n\n100%[==================================================================================================================================================================>] 41,487,987  11.6MB/s   in 3.8s   \n\n2021-06-10 04:44:45 (10.4 MB/s) - ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’ saved [41487987/41487987]\n\n[root@db156 opt]# wget https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\n--2021-06-10 04:44:53--  https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving dev.mysql.com (dev.mysql.com)... 137.254.60.11\nConnecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://cdn.mysql.com//Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]\n--2021-06-10 04:44:54--  https://cdn.mysql.com//Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\nResolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231\nConnecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 65288920 (62M) [text/plain]\nSaving to: ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’\n\n100%[==================================================================================================================================================================>] 65,288,920  12.5MB/s   in 6.1s   \n\n2021-06-10 04:45:01 (10.3 MB/s) - ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [65288920/65288920]\n\n[root@db156 opt]# tar -xf mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\n[root@db156 opt]# mv mysql-8.0.25-linux-glibc2.12-x86_64 /usr/local/mysql/\n[root@db156 opt]# chown -R mysql:mysql /usr/local/mysql/\n[root@db156 opt]# chmod -R 755 /usr/local/mysql/\n```\n\n### 创建相关目录\n\n```\n[root@db156 opt]# mkdir -p /data/mysql/{data,binlog,relay}\n[root@db156 opt]# chown -R mysql:mysql /data/mysql/\n[root@db156 opt]# chmod -R 750 /data/mysql/\n```\n\n\n\n### 准备配置文件\n\n```\n[mysqld]\nserver_id=13306\ngtid_mode=on\nenforce_gtid_consistency=1\ntransaction_write_set_extraction=XXHASH64\nloose-group_replication_group_name='aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'\nloose-group_replication_start_on_boot=off\nloose-group_replication_ip_whitelist='192.168.165.0/24'\nloose-group_replication_local_address='192.168.165.157:33061'\nloose-group_replication_group_seeds='192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061'\nloose-group_replication_bootstrap_group=off\nloose-group_replication_single_primary_mode=on\nloose-group_replication_enforce_update_everywhere_checks=off\nloose-group_replication_recovery_get_public_key=on\nloose-group_replication_recovery_use_ssl=off\nloose-group_replication_ssl_mode='DISABLED'\nloose-group_replication_consistency='EVENTUAL'\nloose-group_replication_member_expel_timeout=5\nreport_host='192.168.165.157'\nreport_port=3306\nplugin_load_add ='group_replication.so'\nauto_increment_increment=1\nauto_increment_offset=1\nmysqlx_port=33060\nadmin_port=33062\ndatadir=/data/mysql/data\nbasedir=/usr/local/mysql\nuser=mysql\n```\n\n### 初始化MySQL Server\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --initialize-insecure\n2021-06-10T08:12:00.192163Z 0 [System] [MY-013169] [Server] /usr/local/mysql/bin/mysqld (mysqld 8.0.25) initializing of server in progress as process 10863\n2021-06-10T08:12:00.364089Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.\n2021-06-10T08:12:05.120563Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.\n2021-06-10T08:12:05.548074Z 0 [Warning] [MY-013501] [Server] Ignoring --plugin-load[_add] list as the server is running with --initialize(-insecure).\n2021-06-10T08:12:06.717610Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_group_name=aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'.\n2021-06-10T08:12:06.718217Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_start_on_boot=off'.\n2021-06-10T08:12:06.718823Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_ip_whitelist=192.168.165.0/24'.\n2021-06-10T08:12:06.719416Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_local_address=192.168.165.156:33061'.\n2021-06-10T08:12:06.719969Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_group_seeds=192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061'.\n2021-06-10T08:12:06.720542Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_bootstrap_group=off'.\n2021-06-10T08:12:06.721103Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_single_primary_mode=on'.\n2021-06-10T08:12:06.721683Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_enforce_update_everywhere_checks=off'.\n2021-06-10T08:12:06.722250Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_recovery_get_public_key=on'.\n2021-06-10T08:12:06.722873Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_recovery_use_ssl=off'.\n2021-06-10T08:12:06.723485Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_ssl_mode=DISABLED'.\n2021-06-10T08:12:06.724060Z 0 [Warning] [MY-000067] [Server] unknown variable 'loose-group_replication_member_expel_timeout=5'.\n2021-06-10T08:12:06.727059Z 6 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.\n```\n\n\n\n### 配置启动文件并启动MySQL\n\n```\n[root@db156 opt]# vi /usr/lib/systemd/system/mysqld.service\n[root@db156 opt]# cat /usr/lib/systemd/system/mysqld.service\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=https://dev.mysql.com/doc/refman/8.0/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf\nLimitNOFILE = 5000\n[root@db156 opt]# systemctl start mysqld \n[root@db156 opt]# systemctl status mysqld      \n● mysqld.service - MySQL Server\n   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; disabled; vendor preset: disabled)\n   Active: active (running) since Thu 2021-06-10 04:57:12 EDT; 10s ago\n     Docs: man:mysqld(8)\n           https://dev.mysql.com/doc/refman/8.0/en/using-systemd.html\n Main PID: 14232 (mysqld_safe)\n   CGroup: /system.slice/mysqld.service\n           ├─14232 /bin/sh /usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf\n           └─14626 /usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --basedir=/usr/local/mysql --datadir=/data/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=db156.err --pid-fil...\n\nJun 10 04:57:12 db156 systemd[1]: Started MySQL Server.\nJun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.594106Z mysqld_safe Logging to '/data/mysql/data/db156.err'.\nJun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.689214Z mysqld_safe Starting mysqld daemon with databases from /data/mysql/data\n```\n\n在执行`systemctl start mysqld `如果报错`Failed to start mysqld.service: Unit not found.`,可以执行`systemctl daemon-reload`解决。\n\n### 修改本地账号密码并设置不过期\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -e \"SET SQL_LOG_BIN=0;SET global super_read_only=OFF; SET global read_only=OFF; alter user 'root'@'localhost' password expire never; set password for 'root'@'localhost'='123456';flush privileges; SET SQL_LOG_BIN=1;\"\n```\n\n### 创建复制账号并授权\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 9\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER IF NOT EXISTS `repl`@`192.168.165.156` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nCREATE USER IF NOT EXISTS `repl`@`192.168.165.157` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nCREATE USER IF NOT EXISTS `repl`@`192.168.165.225` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nQuery OK, 0 rows affected (0.04 sec)\n\nmysql> CREATE USER IF NOT EXISTS `repl`@`192.168.165.157` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> CREATE USER IF NOT EXISTS `repl`@`192.168.165.225` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nGRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.156`; \nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.156`; \nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.157`; \nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO `repl`@`192.168.165.225`; \nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n### 创建管理账号并授权\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET SQL_LOG_BIN=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> CREATE USER IF NOT EXISTS `icadmin`@`192.168.165.%` IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;\nQuery OK, 0 rows affected, 1 warning (0.01 sec)\n\nmysql> GRANT SELECT, RELOAD, SHUTDOWN, PROCESS, FILE, SUPER, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE USER ON *.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql> GRANT BACKUP_ADMIN,CLONE_ADMIN,PERSIST_RO_VARIABLES_ADMIN,REPLICATION_APPLIER,SYSTEM_VARIABLES_ADMIN ON *.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nGRANT INSERT, UPDATE, DELETE ON `mysql`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE ON `mysql`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON `mysql_innodb_cluster_metadata`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON `mysql_innodb_cluster_metadata_bkp`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON `mysql_innodb_cluster_metadata_previous`.* TO `icadmin`@`192.168.165.%` WITH GRANT OPTION;\nFLUSH PRIVILEGES;\nSET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.32 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SET SQL_LOG_BIN=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n\n\n### 安装组复制插件\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 9\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> INSTALL PLUGIN group_replication SONAME 'group_replication.so';\nERROR 1125 (HY000): Function 'group_replication' already exists\nmysql> SELECT PLUGIN_NAME, PLUGIN_STATUS FROM INFORMATION_SCHEMA.PLUGINS  WHERE PLUGIN_NAME LIKE '%group_replication%';\n+-------------------+---------------+\n| PLUGIN_NAME       | PLUGIN_STATUS |\n+-------------------+---------------+\n| group_replication | ACTIVE        |\n+-------------------+---------------+\n1 row in set (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n\n\n### 设置复制通道\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 10\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> CHANGE MASTER TO MASTER_USER='repl', MASTER_PASSWORD='123456' FOR CHANNEL 'group_replication_recovery';\nQuery OK, 0 rows affected, 5 warnings (0.01 sec)\n\nmysql> SELECT User_name,Channel_name FROM mysql.slave_master_info WHERE user_name = 'repl';\n+-----------+----------------------------+\n| User_name | Channel_name               |\n+-----------+----------------------------+\n| repl      | group_replication_recovery |\n+-----------+----------------------------+\n1 row in set (0.00 sec)\n\nmysql> SET global group_replication_recovery_get_public_key=ON;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# \n```\n\n\n\n### 查看MySQL进程\n\n```\n[root@db156 opt]# ps -ef | grep mysql\nmysql    14232     1  0 04:57 ?        00:00:00 /bin/sh /usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf\nmysql    14626 14232  0 04:57 ?        00:00:03 /usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --basedir=/usr/local/mysql --datadir=/data/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=db156.err --pid-file=db156.pid\nroot     15500  9686  0 05:12 pts/0    00:00:00 grep --color=auto mysql\n[root@db156 opt]# \n```\n\n\n\n> 说明：其他两个节点也按照以上步骤部署\n\n## 启用MGR组复制\n\n三个MySQL Server实例部署完成之后，就可以启用组复制了。\n\n对于组复制，数据必须存储在InnoDB事务存储引擎中，使用其他存储引擎（包括临时 MEMORY存储引擎）可能会导致组复制中的错误。disabled_storage_engines 如下设置 系统变量以防止其使用：\n\ndisabled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\n\n修改配置文件，添加上面的配置并重启即可：\n\n```\n[root@db156 opt]# vi /etc/my.cnf \n[root@db156 opt]# cat /etc/my.cnf\n[mysqld]\nserver_id=13306\ngtid_mode=on\nenforce_gtid_consistency=1\ntransaction_write_set_extraction=XXHASH64\nloose-group_replication_group_name='aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'\nloose-group_replication_start_on_boot=off\nloose-group_replication_ip_whitelist='192.168.165.0/24'\nloose-group_replication_local_address='192.168.165.156:33061'\nloose-group_replication_group_seeds='192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061'\nloose-group_replication_bootstrap_group=off\nloose-group_replication_single_primary_mode=on\nloose-group_replication_enforce_update_everywhere_checks=off\nloose-group_replication_recovery_get_public_key=on\nloose-group_replication_recovery_use_ssl=off\nloose-group_replication_ssl_mode='DISABLED'\nloose-group_replication_consistency='EVENTUAL'\nloose-group_replication_member_expel_timeout=5\nreport_host='192.168.165.156'\nreport_port=3306\nplugin_load_add ='group_replication.so'\nauto_increment_increment=1\nauto_increment_offset=1\nmysqlx_port=33060\nadmin_port=33062\ndatadir=/data/mysql/data\nbasedir=/usr/local/mysql\nuser=mysql\nbled_storage_engines=\"MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY\"\n[root@db225 opt]# systemctl restart mysqld\n```\n\n\n\n首次启动组复制的过程称为引导，，可以使用group_replication_bootstrap_group系统变量来引导组，且只能在一个实例上执行并只能执行一次。\n\n我们选择节点一上执行：\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> SET GLOBAL group_replication_bootstrap_group=ON;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected, 1 warning (2.22 sec)\n\nmysql> SET GLOBAL group_replication_bootstrap_group=OFF;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> \n```\n\n节点二及节点三：\n\n```\n[root@db225 opt]# /usr/local/mysql/bin/mysql -uroot -S /tmp/mysql.sock -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nQuery OK, 0 rows affected, 1 warning (2.64 sec)\n\nmysql> \n```\n\n在将其他节点添加至复制组时，如果报一下错误：\n\n```\nmysql> START GROUP_REPLICATION USER='repl', PASSWORD='123456';\nERROR 3092 (HY000): The server is not configured properly to be an active member of the group. Please see more details on error log.\n```\n\n查看到日志如下：\n\n```\n2021-06-10T10:42:54.535154Z 10 [System] [MY-010597] [Repl] 'CHANGE MASTER TO FOR CHANNEL 'group_replication_applier' executed'. Previous state master_host='', master_port= 3306, master_log_file='', master_log_pos= 4, master_bind=''. New state master_host='<NULL>', master_port= 0, master_log_file='', master_log_pos= 4, master_bind=''.\n2021-06-10T10:42:57.045266Z 0 [ERROR] [MY-011526] [Repl] Plugin group_replication reported: 'This member has more executed transactions than those present in the group. Local transactions: 689d5d1d-c9cc-11eb-8243-005056a0d28b:1 > Group transactions: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1'\n2021-06-10T10:42:57.056782Z 0 [ERROR] [MY-011522] [Repl] Plugin group_replication reported: 'The member contains transactions not present in the group. The member will now exit the group.'\n2021-06-10T10:42:57.056911Z 0 [System] [MY-011503] [Repl] Plugin group_replication reported: 'Group membership changed to 192.168.165.157:3306, 192.168.165.156:3306 on view 16233217077427225:2.'\n2021-06-10T10:43:00.730039Z 0 [System] [MY-011504] [Repl] Plugin group_replication reported: 'Group membership changed: This member has left the group.'\n2021-06-10T10:43:00.758719Z 9 [System] [MY-011566] [Repl] Plugin group_replication reported: 'Setting super_read_only=OFF.'\n```\n\n则在该节点上执行`reset master`可以解决。\n\n查看组复制状态(任何一个实例均可查询)：\n\n```\nmysql> select * FROM performance_schema.replication_group_members;\n+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+\n| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST     | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |\n+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+\n| group_replication_applier | 689d5d1d-c9cc-11eb-8243-005056a0d28b | 192.168.165.157 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |\n| group_replication_applier | 71d57215-c9cc-11eb-a5ac-005056a098ec | 192.168.165.225 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |\n| group_replication_applier | 8b5f525d-c9c3-11eb-bf4e-005056a0bb1a | 192.168.165.156 |        3306 | ONLINE       | PRIMARY     | 8.0.25         |\n+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+\n3 rows in set (1.54 sec)\n\nmysql> \n```\n\n至此，MGR三节点的组复制搭建完成。\n\n## 安装MySQL Shell\n\n安装过程如下：\n\n```\n[root@db156 opt]# tar -xf mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz \n[root@db156 opt]# mv mysql-shell-8.0.25-linux-glibc2.12-x86-64bit /usr/local/mysqlshell\n[root@db156 opt]# chown -R mysql:mysql /usr/local/mysqlshell/\n[root@db156 opt]# chmod -R 755 /usr/local/mysqlshell/\n[root@db156 opt]# echo \"export PATH=\\$PATH:/usr/local/mysqlshell/bin\" >> /etc/profile\n[root@db156 opt]# source /etc/profile\n```\n\n三个节点均执行以上步骤安装。\n\n\n\n## 创建InnoDB Cluster集群\n\n通过mysqlsh命令使用安装MySQL Server时创建的管理账号连接到MySQL 实例，执行`dba.createCluster()`创建集群，并过过`dba.getCluster(\"testCluster\").status()`查看集群状态：\n\n```\n[root@db225 opt]# mysqlsh icadmin@192.168.165.156:3306\nPlease provide the password for 'icadmin@192.168.165.156:3306': ******\nSave password for 'icadmin@192.168.165.156:3306'? [Y]es/[N]o/Ne[v]er (default No): \nMySQL Shell 8.0.25\n\nCopyright (c) 2016, 2021, Oracle and/or its affiliates.\nOracle is a registered trademark of Oracle Corporation and/or its affiliates.\nOther names may be trademarks of their respective owners.\n\nType '\\help' or '\\?' for help; '\\quit' to exit.\nCreating a session to 'icadmin@192.168.165.156:3306'\nFetching schema names for autocompletion... Press ^C to stop.\nYour MySQL connection id is 28\nServer version: 8.0.25 MySQL Community Server - GPL\nNo default schema selected; type \\use <schema> to set one.\n MySQL  192.168.165.156:3306 ssl  JS > var cluster = dba.createCluster('testCluster', {adoptFromGR: true});\nA new InnoDB cluster will be created based on the existing replication group on instance '192.168.165.156:3306'.\n\nCreating InnoDB cluster 'testCluster' on '192.168.165.156:3306'...\n\nAdding Seed Instance...\nAdding Instance '192.168.165.157:3306'...\nAdding Instance '192.168.165.225:3306'...\nAdding Instance '192.168.165.156:3306'...\nResetting distributed recovery credentials across the cluster...\nNOTE: User 'mysql_innodb_cluster_13306'@'%' already existed at instance '192.168.165.156:3306'. It will be deleted and created again with a new password.\nNOTE: User 'mysql_innodb_cluster_13306'@'%' already existed at instance '192.168.165.156:3306'. It will be deleted and created again with a new password.\nCluster successfully created based on existing replication group.\n\n MySQL  192.168.165.156:3306 ssl  JS > dba.getCluster(\"testCluster\").status();\n{\n    \"clusterName\": \"testCluster\", \n    \"defaultReplicaSet\": {\n        \"name\": \"default\", \n        \"primary\": \"192.168.165.156:3306\", \n        \"ssl\": \"DISABLED\", \n        \"status\": \"OK\", \n        \"statusText\": \"Cluster is ONLINE and can tolerate up to ONE failure.\", \n        \"topology\": {\n            \"192.168.165.156:3306\": {\n                \"address\": \"192.168.165.156:3306\", \n                \"instanceErrors\": [\n                    \"NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.\"\n                ], \n                \"memberRole\": \"PRIMARY\", \n                \"mode\": \"R/W\", \n                \"readReplicas\": {}, \n                \"replicationLag\": null, \n                \"role\": \"HA\", \n                \"status\": \"ONLINE\", \n                \"version\": \"8.0.25\"\n            }, \n            \"192.168.165.157:3306\": {\n                \"address\": \"192.168.165.157:3306\", \n                \"instanceErrors\": [\n                    \"NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.\"\n                ], \n                \"memberRole\": \"SECONDARY\", \n                \"mode\": \"R/O\", \n                \"readReplicas\": {}, \n                \"replicationLag\": null, \n                \"role\": \"HA\", \n                \"status\": \"ONLINE\", \n                \"version\": \"8.0.25\"\n            }, \n            \"192.168.165.225:3306\": {\n                \"address\": \"192.168.165.225:3306\", \n                \"instanceErrors\": [\n                    \"NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.\"\n                ], \n                \"memberRole\": \"SECONDARY\", \n                \"mode\": \"R/O\", \n                \"readReplicas\": {}, \n                \"replicationLag\": null, \n                \"role\": \"HA\", \n                \"status\": \"ONLINE\", \n                \"version\": \"8.0.25\"\n            }\n        }, \n        \"topologyMode\": \"Single-Primary\"\n    }, \n    \"groupInformationSourceMember\": \"192.168.165.156:3306\"\n}\n MySQL  192.168.165.156:3306 ssl  JS > \n```\n\n其中：\n\n- \"status\": \"OK\" 表示集群状态是正常的\n- \"topologyMode\": \"Single-Primary\" 表示是单主模式\n- \"mode\": \"R/W\" 表示可读可写\n- \"mode\": \"R/O\" 表示只读\n\n\n\n## 安装MySQL Router\n\n安装：\n\n```\n[root@db156 opt]# tar -xf mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz \n[root@db156 opt]# mv mysql-router-8.0.25-linux-glibc2.12-x86_64 /usr/local/mysqlrouter\n[root@db156 opt]# chown -R mysql:mysql /usr/local/mysqlrouter/\n[root@db156 opt]# chmod -R 755 /usr/local/mysqlrouter/\n[root@db156 opt]# mkdir -p /data/mysqlrouter\n[root@db156 opt]# chown -R mysql:mysql /data/mysqlrouter/\n[root@db156 opt]# echo \"export PATH=\\$PATH:/usr/local/mysqlrouter/bin\" >> /etc/profile\n[root@db156 opt]# source /etc/profile\n```\n\nbootstrap引导:\n\n```\n[root@db156 opt]# /usr/local/mysqlrouter/bin/mysqlrouter --bootstrap icadmin@192.168.165.156:3306 --directory /data/mysqlrouter --conf-use-sockets --user=mysql --name=mysql_router_13306 --conf-bind-address=192.168.165.156 --account-host=\"192.168.165.%\"\nPlease enter MySQL password for icadmin: \n# Bootstrapping MySQL Router instance at '/data/mysqlrouter'...\n\n- Creating account(s) (only those that are needed, if any)\n- Verifying account (using it to run SQL queries that would be run by Router)\n- Storing account in keyring\n- Adjusting permissions of generated files\n- Creating configuration /data/mysqlrouter/mysqlrouter.conf\n\n# MySQL Router 'mysql_router_13306' configured for the InnoDB Cluster 'testCluster'\n\nAfter this MySQL Router has been started with the generated configuration\n\n    $ /usr/local/mysqlrouter/bin/mysqlrouter -c /data/mysqlrouter/mysqlrouter.conf\n\nthe cluster 'testCluster' can be reached by connecting to:\n\n## MySQL Classic protocol\n\n- Read/Write Connections: localhost:6446, /data/mysqlrouter/mysql.sock\n- Read/Only Connections:  localhost:6447, /data/mysqlrouter/mysqlro.sock\n\n## MySQL X protocol\n\n- Read/Write Connections: localhost:6448, /data/mysqlrouter/mysqlx.sock\n- Read/Only Connections:  localhost:6449, /data/mysqlrouter/mysqlxro.sock\n\n[root@db156 opt]# \n```\n\n引导成功后会在/data/mysqlrouter目录下生成所需的数据文件，目录结构如下：\n\n```\n[root@db156 opt]# tree /data/mysqlrouter/\n/data/mysqlrouter/\n├── data\n│   ├── ca-key.pem\n│   ├── ca.pem\n│   ├── keyring\n│   ├── router-cert.pem\n│   ├── router-key.pem\n│   └── state.json\n├── log\n│   └── mysqlrouter.log\n├── mysqlrouter.conf\n├── mysqlrouter.key\n├── run\n├── start.sh\n└── stop.sh\n\n3 directories, 11 files\n```\n\n生成的MySQL Router配置文件如下：\n\n```\n[root@db156 opt]# cat /data/mysqlrouter/mysqlrouter.conf \n# File automatically generated during MySQL Router bootstrap\n[DEFAULT]\nname=mysql_router_13306\nuser=mysql\nlogging_folder=/data/mysqlrouter/log\nruntime_folder=/data/mysqlrouter/run\ndata_folder=/data/mysqlrouter/data\nkeyring_path=/data/mysqlrouter/data/keyring\nmaster_key_path=/data/mysqlrouter/mysqlrouter.key\nconnect_timeout=15\nread_timeout=30\ndynamic_state=/data/mysqlrouter/data/state.json\nclient_ssl_cert=/data/mysqlrouter/data/router-cert.pem\nclient_ssl_key=/data/mysqlrouter/data/router-key.pem\nclient_ssl_mode=PREFERRED\nserver_ssl_mode=AS_CLIENT\nserver_ssl_verify=DISABLED\n\n[logger]\nlevel = INFO\n\n[metadata_cache:testCluster]\ncluster_type=gr\nrouter_id=1\nuser=mysql_router1_7d9sq1vuggg9\nmetadata_cluster=testCluster\nttl=0.5\nauth_cache_ttl=-1\nauth_cache_refresh_interval=2\nuse_gr_notifications=0\n\n[routing:testCluster_rw]\nbind_address=192.168.165.156\nbind_port=6446\nsocket=/data/mysqlrouter/mysql.sock\ndestinations=metadata-cache://testCluster/?role=PRIMARY\nrouting_strategy=first-available\nprotocol=classic\n\n[routing:testCluster_ro]\nbind_address=192.168.165.156\nbind_port=6447\nsocket=/data/mysqlrouter/mysqlro.sock\ndestinations=metadata-cache://testCluster/?role=SECONDARY\nrouting_strategy=round-robin-with-fallback\nprotocol=classic\n\n[routing:testCluster_x_rw]\nbind_address=192.168.165.156\nbind_port=6448\nsocket=/data/mysqlrouter/mysqlx.sock\ndestinations=metadata-cache://testCluster/?role=PRIMARY\nrouting_strategy=first-available\nprotocol=x\n\n[routing:testCluster_x_ro]\nbind_address=192.168.165.156\nbind_port=6449\nsocket=/data/mysqlrouter/mysqlxro.sock\ndestinations=metadata-cache://testCluster/?role=SECONDARY\nrouting_strategy=round-robin-with-fallback\nprotocol=x\n\n[http_server]\nport=8443\nssl=1\nssl_cert=/data/mysqlrouter/data/router-cert.pem\nssl_key=/data/mysqlrouter/data/router-key.pem\n\n[http_auth_realm:default_auth_realm]\nbackend=default_auth_backend\nmethod=basic\nname=default_realm\n\n[rest_router]\nrequire_realm=default_auth_realm\n\n[rest_api]\n\n[http_auth_backend:default_auth_backend]\nbackend=metadata_cache\n\n[rest_routing]\nrequire_realm=default_auth_realm\n\n[rest_metadata_cache]\nrequire_realm=default_auth_realm\n\n[root@db156 opt]# \n```\n\n启动MySQL路由：\n\n```\n[root@db156 opt]# bash /data/mysqlrouter/start.sh 2>&1 > /dev/null &\n[root@db156 opt]# ps -ef | grep mysqlrouter\nroot     24911     1  0 08:00 pts/0    00:00:00 sudo ROUTER_PID=/data/mysqlrouter/mysqlrouter.pid /usr/local/mysqlrouter/bin/mysqlrouter -c /data/mysqlrouter/mysqlrouter.conf --user=mysql\nmysql    24913 24911  2 08:00 pts/0    00:00:01 /usr/local/mysqlrouter/bin/mysqlrouter -c /data/mysqlrouter/mysqlrouter.conf --user=mysql\nroot     24998  9686  0 08:01 pts/0    00:00:00 grep --color=auto mysqlrouter\n```\n\n读写分离测试：使用不同的端口\n\n```\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uicadmin -p -h 192.168.165.156 -P 6446    \nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 196\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> select @@hostname as hostname, @@port as port;\n+----------+------+\n| hostname | port |\n+----------+------+\n| db156    | 3306 |\n+----------+------+\n1 row in set (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uicadmin -p -h 192.168.165.156 -P 6447\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 30\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> select @@hostname as hostname, @@port as port;\n+----------+------+\n| hostname | port |\n+----------+------+\n| db225    | 3306 |\n+----------+------+\n1 row in set (0.00 sec)\n\nmysql> exit\nBye\n[root@db156 opt]# /usr/local/mysql/bin/mysql -uicadmin -p -h 192.168.165.156 -P 6447\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 1517\nServer version: 8.0.25 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> select @@hostname as hostname, @@port as port;\n+----------+------+\n| hostname | port |\n+----------+------+\n| db157    | 3306 |\n+----------+------+\n1 row in set (0.00 sec)\n\nmysql> \n```\n\n可以看到使用读写端口6446时连接的是主节点，而使用只读端口6447连接时是在两个从节点之间切换操作。\n\n\n\n","slug":"InnoDB-Cluster部署","published":1,"updated":"2022-01-01T14:32:15.489Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl7r727vz0045hx8961j67306","content":"<p>部署一个MySQL 8.0.25 InnoDB Cluster集群</p>\n<h2 id=\"InnoDB-Cluster集群简介\"><a href=\"#InnoDB-Cluster集群简介\" class=\"headerlink\" title=\"InnoDB Cluster集群简介\"></a>InnoDB Cluster集群简介</h2><p>![InnoDB Cluster架构](InnoDB Cluster架构.jpg)</p>\n<h2 id=\"环境信息\"><a href=\"#环境信息\" class=\"headerlink\" title=\"环境信息\"></a>环境信息</h2><p>准备三台虚拟机</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>服务器1</th>\n<th>服务器2</th>\n<th>服务器3</th>\n<th>端口</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>操作系统</td>\n<td>CentOS7</td>\n<td>CentOS7</td>\n<td>CentOS7</td>\n<td>/</td>\n</tr>\n<tr>\n<td>IP</td>\n<td>192.168.165.156</td>\n<td>192.168.165.157</td>\n<td>192.168.165.225</td>\n<td>/</td>\n</tr>\n<tr>\n<td>主机名</td>\n<td>db156</td>\n<td>db156</td>\n<td>db225</td>\n<td>/</td>\n</tr>\n<tr>\n<td>MySQL Server 8.0.25</td>\n<td>MGR 节点一</td>\n<td>MGR 节点二</td>\n<td>MGR 节点三</td>\n<td>3306</td>\n</tr>\n<tr>\n<td>MySQL Shell 8.0.25</td>\n<td>MySQL Shell节点一</td>\n<td>MySQL Shell节点二</td>\n<td>MySQL Shell节点三</td>\n<td>/</td>\n</tr>\n<tr>\n<td>MySQL Router 8.0.25</td>\n<td>MySQL Router节点一</td>\n<td>MySQL Router节点二</td>\n<td>MySQL Router节点三</td>\n<td>6446(写)、6447（读）</td>\n</tr>\n</tbody></table>\n<h2 id=\"部署说明\"><a href=\"#部署说明\" class=\"headerlink\" title=\"部署说明\"></a>部署说明</h2><h3 id=\"安装顺序\"><a href=\"#安装顺序\" class=\"headerlink\" title=\"安装顺序\"></a>安装顺序</h3><p>安装MySQL Server—&gt;启用组复制—&gt;安装MySQL Shell —&gt; 创建InnoDB Cluster集群—&gt; 安装MySQL Router</p>\n<h3 id=\"安装包\"><a href=\"#安装包\" class=\"headerlink\" title=\"安装包\"></a>安装包</h3><table>\n<thead>\n<tr>\n<th>安装包名</th>\n<th>MD5值</th>\n<th>下载连接</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</td>\n<td>a12142a969531cebd845844620bb44a4</td>\n<td><a href=\"https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\">https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</a></td>\n</tr>\n<tr>\n<td>mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz</td>\n<td>9192ea694ac97a5c5715806ddcf84932</td>\n<td><a href=\"https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\">https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</a></td>\n</tr>\n<tr>\n<td>mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</td>\n<td>bcd9b81f422667dbabd0a5d7bbf7638a</td>\n<td><a href=\"https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\">https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"安装MySQL-Server\"><a href=\"#安装MySQL-Server\" class=\"headerlink\" title=\"安装MySQL Server\"></a>安装MySQL Server</h2><h3 id=\"安装依赖包\"><a href=\"#安装依赖包\" class=\"headerlink\" title=\"安装依赖包\"></a>安装依赖包</h3><h3 id=\"创建相关用户\"><a href=\"#创建相关用户\" class=\"headerlink\" title=\"创建相关用户\"></a>创建相关用户</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 ~]# groupadd mysql &amp;&amp; useradd -r -g mysql -s /bin/false mysql</span><br><span class=\"line\">groupadd: group &#x27;mysql&#x27; already exists</span><br><span class=\"line\">[root@db156 ~]# cat /etc/passwd | grep -iw  &quot;mysql&quot;</span><br><span class=\"line\">mysql:x:997:1000::/home/mysql:/bin/false</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载并解压安装包\"><a href=\"#下载并解压安装包\" class=\"headerlink\" title=\"下载并解压安装包\"></a>下载并解压安装包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">--2021-06-10 04:43:21--  https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving dev.mysql.com (dev.mysql.com)... 137.254.60.11</span><br><span class=\"line\">Connecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 302 Found</span><br><span class=\"line\">Location: https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]</span><br><span class=\"line\">--2021-06-10 04:43:22--  https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231</span><br><span class=\"line\">Connecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 200 OK</span><br><span class=\"line\">Length: 896219776 (855M) [text&#x2F;plain]</span><br><span class=\"line\">Saving to: ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’</span><br><span class=\"line\"></span><br><span class=\"line\">100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 896,219,776 14.2MB&#x2F;s   in 66s    </span><br><span class=\"line\"></span><br><span class=\"line\">2021-06-10 04:44:29 (13.0 MB&#x2F;s) - ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [896219776&#x2F;896219776]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</span><br><span class=\"line\">--2021-06-10 04:44:39--  https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</span><br><span class=\"line\">Resolving dev.mysql.com (dev.mysql.com)... 137.254.60.11</span><br><span class=\"line\">Connecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 302 Found</span><br><span class=\"line\">Location: https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz [following]</span><br><span class=\"line\">--2021-06-10 04:44:41--  https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</span><br><span class=\"line\">Resolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231</span><br><span class=\"line\">Connecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 200 OK</span><br><span class=\"line\">Length: 41487987 (40M) [application&#x2F;x-tar-gz]</span><br><span class=\"line\">Saving to: ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’</span><br><span class=\"line\"></span><br><span class=\"line\">100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 41,487,987  11.6MB&#x2F;s   in 3.8s   </span><br><span class=\"line\"></span><br><span class=\"line\">2021-06-10 04:44:45 (10.4 MB&#x2F;s) - ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’ saved [41487987&#x2F;41487987]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">--2021-06-10 04:44:53--  https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving dev.mysql.com (dev.mysql.com)... 137.254.60.11</span><br><span class=\"line\">Connecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 302 Found</span><br><span class=\"line\">Location: https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]</span><br><span class=\"line\">--2021-06-10 04:44:54--  https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231</span><br><span class=\"line\">Connecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 200 OK</span><br><span class=\"line\">Length: 65288920 (62M) [text&#x2F;plain]</span><br><span class=\"line\">Saving to: ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’</span><br><span class=\"line\"></span><br><span class=\"line\">100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 65,288,920  12.5MB&#x2F;s   in 6.1s   </span><br><span class=\"line\"></span><br><span class=\"line\">2021-06-10 04:45:01 (10.3 MB&#x2F;s) - ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [65288920&#x2F;65288920]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# tar -xf mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">[root@db156 opt]# mv mysql-8.0.25-linux-glibc2.12-x86_64 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 755 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建相关目录\"><a href=\"#创建相关目录\" class=\"headerlink\" title=\"创建相关目录\"></a>创建相关目录</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# mkdir -p &#x2F;data&#x2F;mysql&#x2F;&#123;data,binlog,relay&#125;</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;data&#x2F;mysql&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 750 &#x2F;data&#x2F;mysql&#x2F;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"准备配置文件\"><a href=\"#准备配置文件\" class=\"headerlink\" title=\"准备配置文件\"></a>准备配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">server_id&#x3D;13306</span><br><span class=\"line\">gtid_mode&#x3D;on</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;1</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">loose-group_replication_group_name&#x3D;&#39;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&#39;</span><br><span class=\"line\">loose-group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">loose-group_replication_ip_whitelist&#x3D;&#39;192.168.165.0&#x2F;24&#39;</span><br><span class=\"line\">loose-group_replication_local_address&#x3D;&#39;192.168.165.157:33061&#39;</span><br><span class=\"line\">loose-group_replication_group_seeds&#x3D;&#39;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&#39;</span><br><span class=\"line\">loose-group_replication_bootstrap_group&#x3D;off</span><br><span class=\"line\">loose-group_replication_single_primary_mode&#x3D;on</span><br><span class=\"line\">loose-group_replication_enforce_update_everywhere_checks&#x3D;off</span><br><span class=\"line\">loose-group_replication_recovery_get_public_key&#x3D;on</span><br><span class=\"line\">loose-group_replication_recovery_use_ssl&#x3D;off</span><br><span class=\"line\">loose-group_replication_ssl_mode&#x3D;&#39;DISABLED&#39;</span><br><span class=\"line\">loose-group_replication_consistency&#x3D;&#39;EVENTUAL&#39;</span><br><span class=\"line\">loose-group_replication_member_expel_timeout&#x3D;5</span><br><span class=\"line\">report_host&#x3D;&#39;192.168.165.157&#39;</span><br><span class=\"line\">report_port&#x3D;3306</span><br><span class=\"line\">plugin_load_add &#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">auto_increment_increment&#x3D;1</span><br><span class=\"line\">auto_increment_offset&#x3D;1</span><br><span class=\"line\">mysqlx_port&#x3D;33060</span><br><span class=\"line\">admin_port&#x3D;33062</span><br><span class=\"line\">datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data</span><br><span class=\"line\">basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class=\"line\">user&#x3D;mysql</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"初始化MySQL-Server\"><a href=\"#初始化MySQL-Server\" class=\"headerlink\" title=\"初始化MySQL Server\"></a>初始化MySQL Server</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf --initialize-insecure</span><br><span class=\"line\">2021-06-10T08:12:00.192163Z 0 [System] [MY-013169] [Server] &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld (mysqld 8.0.25) initializing of server in progress as process 10863</span><br><span class=\"line\">2021-06-10T08:12:00.364089Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.</span><br><span class=\"line\">2021-06-10T08:12:05.120563Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.</span><br><span class=\"line\">2021-06-10T08:12:05.548074Z 0 [Warning] [MY-013501] [Server] Ignoring --plugin-load[_add] list as the server is running with --initialize(-insecure).</span><br><span class=\"line\">2021-06-10T08:12:06.717610Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_group_name&#x3D;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.718217Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_start_on_boot&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.718823Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_ip_whitelist&#x3D;192.168.165.0&#x2F;24&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.719416Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_local_address&#x3D;192.168.165.156:33061&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.719969Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_group_seeds&#x3D;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.720542Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_bootstrap_group&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.721103Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_single_primary_mode&#x3D;on&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.721683Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_enforce_update_everywhere_checks&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.722250Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_recovery_get_public_key&#x3D;on&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.722873Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_recovery_use_ssl&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.723485Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_ssl_mode&#x3D;DISABLED&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.724060Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_member_expel_timeout&#x3D;5&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.727059Z 6 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"配置启动文件并启动MySQL\"><a href=\"#配置启动文件并启动MySQL\" class=\"headerlink\" title=\"配置启动文件并启动MySQL\"></a>配置启动文件并启动MySQL</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# vi &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service</span><br><span class=\"line\">[root@db156 opt]# cat &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;MySQL Server</span><br><span class=\"line\">Documentation&#x3D;man:mysqld(8)</span><br><span class=\"line\">Documentation&#x3D;https:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;using-systemd.html</span><br><span class=\"line\">After&#x3D;network.target</span><br><span class=\"line\">After&#x3D;syslog.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User&#x3D;mysql</span><br><span class=\"line\">Group&#x3D;mysql</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">LimitNOFILE &#x3D; 5000</span><br><span class=\"line\">[root@db156 opt]# systemctl start mysqld </span><br><span class=\"line\">[root@db156 opt]# systemctl status mysqld      </span><br><span class=\"line\">● mysqld.service - MySQL Server</span><br><span class=\"line\">   Loaded: loaded (&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service; disabled; vendor preset: disabled)</span><br><span class=\"line\">   Active: active (running) since Thu 2021-06-10 04:57:12 EDT; 10s ago</span><br><span class=\"line\">     Docs: man:mysqld(8)</span><br><span class=\"line\">           https:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;using-systemd.html</span><br><span class=\"line\"> Main PID: 14232 (mysqld_safe)</span><br><span class=\"line\">   CGroup: &#x2F;system.slice&#x2F;mysqld.service</span><br><span class=\"line\">           ├─14232 &#x2F;bin&#x2F;sh &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">           └─14626 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data --plugin-dir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin --log-error&#x3D;db156.err --pid-fil...</span><br><span class=\"line\"></span><br><span class=\"line\">Jun 10 04:57:12 db156 systemd[1]: Started MySQL Server.</span><br><span class=\"line\">Jun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.594106Z mysqld_safe Logging to &#39;&#x2F;data&#x2F;mysql&#x2F;data&#x2F;db156.err&#39;.</span><br><span class=\"line\">Jun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.689214Z mysqld_safe Starting mysqld daemon with databases from &#x2F;data&#x2F;mysql&#x2F;data</span><br></pre></td></tr></table></figure>\n\n<p>在执行<code>systemctl start mysqld </code>如果报错<code>Failed to start mysqld.service: Unit not found.</code>,可以执行<code>systemctl daemon-reload</code>解决。</p>\n<h3 id=\"修改本地账号密码并设置不过期\"><a href=\"#修改本地账号密码并设置不过期\" class=\"headerlink\" title=\"修改本地账号密码并设置不过期\"></a>修改本地账号密码并设置不过期</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -e &quot;SET SQL_LOG_BIN&#x3D;0;SET global super_read_only&#x3D;OFF; SET global read_only&#x3D;OFF; alter user &#39;root&#39;@&#39;localhost&#39; password expire never; set password for &#39;root&#39;@&#39;localhost&#39;&#x3D;&#39;123456&#39;;flush privileges; SET SQL_LOG_BIN&#x3D;1;&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建复制账号并授权\"><a href=\"#创建复制账号并授权\" class=\"headerlink\" title=\"创建复制账号并授权\"></a>创建复制账号并授权</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 9</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;0;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.156&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.157&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.225&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">Query OK, 0 rows affected (0.04 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.157&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">Query OK, 0 rows affected (0.02 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.225&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.156&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.156&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.157&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.225&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;1;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建管理账号并授权\"><a href=\"#创建管理账号并授权\" class=\"headerlink\" title=\"创建管理账号并授权\"></a>创建管理账号并授权</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 8</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;0;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;icadmin&#96;@&#96;192.168.165.%&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT SELECT, RELOAD, SHUTDOWN, PROCESS, FILE, SUPER, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE USER ON *.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT BACKUP_ADMIN,CLONE_ADMIN,PERSIST_RO_VARIABLES_ADMIN,REPLICATION_APPLIER,SYSTEM_VARIABLES_ADMIN ON *.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">GRANT INSERT, UPDATE, DELETE ON &#96;mysql&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE ON &#96;mysql&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON &#96;mysql_innodb_cluster_metadata&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON &#96;mysql_innodb_cluster_metadata_bkp&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON &#96;mysql_innodb_cluster_metadata_previous&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br><span class=\"line\">SET SQL_LOG_BIN&#x3D;1;</span><br><span class=\"line\">Query OK, 0 rows affected (0.32 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;1;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装组复制插件\"><a href=\"#安装组复制插件\" class=\"headerlink\" title=\"安装组复制插件\"></a>安装组复制插件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 9</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; INSTALL PLUGIN group_replication SONAME &#39;group_replication.so&#39;;</span><br><span class=\"line\">ERROR 1125 (HY000): Function &#39;group_replication&#39; already exists</span><br><span class=\"line\">mysql&gt; SELECT PLUGIN_NAME, PLUGIN_STATUS FROM INFORMATION_SCHEMA.PLUGINS  WHERE PLUGIN_NAME LIKE &#39;%group_replication%&#39;;</span><br><span class=\"line\">+-------------------+---------------+</span><br><span class=\"line\">| PLUGIN_NAME       | PLUGIN_STATUS |</span><br><span class=\"line\">+-------------------+---------------+</span><br><span class=\"line\">| group_replication | ACTIVE        |</span><br><span class=\"line\">+-------------------+---------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"设置复制通道\"><a href=\"#设置复制通道\" class=\"headerlink\" title=\"设置复制通道\"></a>设置复制通道</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 10</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CHANGE MASTER TO MASTER_USER&#x3D;&#39;repl&#39;, MASTER_PASSWORD&#x3D;&#39;123456&#39; FOR CHANNEL &#39;group_replication_recovery&#39;;</span><br><span class=\"line\">Query OK, 0 rows affected, 5 warnings (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SELECT User_name,Channel_name FROM mysql.slave_master_info WHERE user_name &#x3D; &#39;repl&#39;;</span><br><span class=\"line\">+-----------+----------------------------+</span><br><span class=\"line\">| User_name | Channel_name               |</span><br><span class=\"line\">+-----------+----------------------------+</span><br><span class=\"line\">| repl      | group_replication_recovery |</span><br><span class=\"line\">+-----------+----------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET global group_replication_recovery_get_public_key&#x3D;ON;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"查看MySQL进程\"><a href=\"#查看MySQL进程\" class=\"headerlink\" title=\"查看MySQL进程\"></a>查看MySQL进程</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# ps -ef | grep mysql</span><br><span class=\"line\">mysql    14232     1  0 04:57 ?        00:00:00 &#x2F;bin&#x2F;sh &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">mysql    14626 14232  0 04:57 ?        00:00:03 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data --plugin-dir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin --log-error&#x3D;db156.err --pid-file&#x3D;db156.pid</span><br><span class=\"line\">root     15500  9686  0 05:12 pts&#x2F;0    00:00:00 grep --color&#x3D;auto mysql</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<blockquote>\n<p>说明：其他两个节点也按照以上步骤部署</p>\n</blockquote>\n<h2 id=\"启用MGR组复制\"><a href=\"#启用MGR组复制\" class=\"headerlink\" title=\"启用MGR组复制\"></a>启用MGR组复制</h2><p>三个MySQL Server实例部署完成之后，就可以启用组复制了。</p>\n<p>对于组复制，数据必须存储在InnoDB事务存储引擎中，使用其他存储引擎（包括临时 MEMORY存储引擎）可能会导致组复制中的错误。disabled_storage_engines 如下设置 系统变量以防止其使用：</p>\n<p>disabled_storage_engines=”MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY”</p>\n<p>修改配置文件，添加上面的配置并重启即可：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# vi &#x2F;etc&#x2F;my.cnf </span><br><span class=\"line\">[root@db156 opt]# cat &#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">server_id&#x3D;13306</span><br><span class=\"line\">gtid_mode&#x3D;on</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;1</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">loose-group_replication_group_name&#x3D;&#39;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&#39;</span><br><span class=\"line\">loose-group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">loose-group_replication_ip_whitelist&#x3D;&#39;192.168.165.0&#x2F;24&#39;</span><br><span class=\"line\">loose-group_replication_local_address&#x3D;&#39;192.168.165.156:33061&#39;</span><br><span class=\"line\">loose-group_replication_group_seeds&#x3D;&#39;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&#39;</span><br><span class=\"line\">loose-group_replication_bootstrap_group&#x3D;off</span><br><span class=\"line\">loose-group_replication_single_primary_mode&#x3D;on</span><br><span class=\"line\">loose-group_replication_enforce_update_everywhere_checks&#x3D;off</span><br><span class=\"line\">loose-group_replication_recovery_get_public_key&#x3D;on</span><br><span class=\"line\">loose-group_replication_recovery_use_ssl&#x3D;off</span><br><span class=\"line\">loose-group_replication_ssl_mode&#x3D;&#39;DISABLED&#39;</span><br><span class=\"line\">loose-group_replication_consistency&#x3D;&#39;EVENTUAL&#39;</span><br><span class=\"line\">loose-group_replication_member_expel_timeout&#x3D;5</span><br><span class=\"line\">report_host&#x3D;&#39;192.168.165.156&#39;</span><br><span class=\"line\">report_port&#x3D;3306</span><br><span class=\"line\">plugin_load_add &#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">auto_increment_increment&#x3D;1</span><br><span class=\"line\">auto_increment_offset&#x3D;1</span><br><span class=\"line\">mysqlx_port&#x3D;33060</span><br><span class=\"line\">admin_port&#x3D;33062</span><br><span class=\"line\">datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data</span><br><span class=\"line\">basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class=\"line\">user&#x3D;mysql</span><br><span class=\"line\">bled_storage_engines&#x3D;&quot;MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY&quot;</span><br><span class=\"line\">[root@db225 opt]# systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n\n\n\n<p>首次启动组复制的过程称为引导，，可以使用group_replication_bootstrap_group系统变量来引导组，且只能在一个实例上执行并只能执行一次。</p>\n<p>我们选择节点一上执行：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 8</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET GLOBAL group_replication_bootstrap_group&#x3D;ON;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; START GROUP_REPLICATION USER&#x3D;&#39;repl&#39;, PASSWORD&#x3D;&#39;123456&#39;;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (2.22 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET GLOBAL group_replication_bootstrap_group&#x3D;OFF;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>节点二及节点三：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db225 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 8</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; START GROUP_REPLICATION USER&#x3D;&#39;repl&#39;, PASSWORD&#x3D;&#39;123456&#39;;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (2.64 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>在将其他节点添加至复制组时，如果报一下错误：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; START GROUP_REPLICATION USER&#x3D;&#39;repl&#39;, PASSWORD&#x3D;&#39;123456&#39;;</span><br><span class=\"line\">ERROR 3092 (HY000): The server is not configured properly to be an active member of the group. Please see more details on error log.</span><br></pre></td></tr></table></figure>\n\n<p>查看到日志如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2021-06-10T10:42:54.535154Z 10 [System] [MY-010597] [Repl] &#39;CHANGE MASTER TO FOR CHANNEL &#39;group_replication_applier&#39; executed&#39;. Previous state master_host&#x3D;&#39;&#39;, master_port&#x3D; 3306, master_log_file&#x3D;&#39;&#39;, master_log_pos&#x3D; 4, master_bind&#x3D;&#39;&#39;. New state master_host&#x3D;&#39;&lt;NULL&gt;&#39;, master_port&#x3D; 0, master_log_file&#x3D;&#39;&#39;, master_log_pos&#x3D; 4, master_bind&#x3D;&#39;&#39;.</span><br><span class=\"line\">2021-06-10T10:42:57.045266Z 0 [ERROR] [MY-011526] [Repl] Plugin group_replication reported: &#39;This member has more executed transactions than those present in the group. Local transactions: 689d5d1d-c9cc-11eb-8243-005056a0d28b:1 &gt; Group transactions: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1&#39;</span><br><span class=\"line\">2021-06-10T10:42:57.056782Z 0 [ERROR] [MY-011522] [Repl] Plugin group_replication reported: &#39;The member contains transactions not present in the group. The member will now exit the group.&#39;</span><br><span class=\"line\">2021-06-10T10:42:57.056911Z 0 [System] [MY-011503] [Repl] Plugin group_replication reported: &#39;Group membership changed to 192.168.165.157:3306, 192.168.165.156:3306 on view 16233217077427225:2.&#39;</span><br><span class=\"line\">2021-06-10T10:43:00.730039Z 0 [System] [MY-011504] [Repl] Plugin group_replication reported: &#39;Group membership changed: This member has left the group.&#39;</span><br><span class=\"line\">2021-06-10T10:43:00.758719Z 9 [System] [MY-011566] [Repl] Plugin group_replication reported: &#39;Setting super_read_only&#x3D;OFF.&#39;</span><br></pre></td></tr></table></figure>\n\n<p>则在该节点上执行<code>reset master</code>可以解决。</p>\n<p>查看组复制状态(任何一个实例均可查询)：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * FROM performance_schema.replication_group_members;</span><br><span class=\"line\">+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+</span><br><span class=\"line\">| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST     | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |</span><br><span class=\"line\">+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+</span><br><span class=\"line\">| group_replication_applier | 689d5d1d-c9cc-11eb-8243-005056a0d28b | 192.168.165.157 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |</span><br><span class=\"line\">| group_replication_applier | 71d57215-c9cc-11eb-a5ac-005056a098ec | 192.168.165.225 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |</span><br><span class=\"line\">| group_replication_applier | 8b5f525d-c9c3-11eb-bf4e-005056a0bb1a | 192.168.165.156 |        3306 | ONLINE       | PRIMARY     | 8.0.25         |</span><br><span class=\"line\">+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+</span><br><span class=\"line\">3 rows in set (1.54 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>至此，MGR三节点的组复制搭建完成。</p>\n<h2 id=\"安装MySQL-Shell\"><a href=\"#安装MySQL-Shell\" class=\"headerlink\" title=\"安装MySQL Shell\"></a>安装MySQL Shell</h2><p>安装过程如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# tar -xf mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz </span><br><span class=\"line\">[root@db156 opt]# mv mysql-shell-8.0.25-linux-glibc2.12-x86-64bit &#x2F;usr&#x2F;local&#x2F;mysqlshell</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;usr&#x2F;local&#x2F;mysqlshell&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 755 &#x2F;usr&#x2F;local&#x2F;mysqlshell&#x2F;</span><br><span class=\"line\">[root@db156 opt]# echo &quot;export PATH&#x3D;\\$PATH:&#x2F;usr&#x2F;local&#x2F;mysqlshell&#x2F;bin&quot; &gt;&gt; &#x2F;etc&#x2F;profile</span><br><span class=\"line\">[root@db156 opt]# source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>\n\n<p>三个节点均执行以上步骤安装。</p>\n<h2 id=\"创建InnoDB-Cluster集群\"><a href=\"#创建InnoDB-Cluster集群\" class=\"headerlink\" title=\"创建InnoDB Cluster集群\"></a>创建InnoDB Cluster集群</h2><p>通过mysqlsh命令使用安装MySQL Server时创建的管理账号连接到MySQL 实例，执行<code>dba.createCluster()</code>创建集群，并过过<code>dba.getCluster(&quot;testCluster&quot;).status()</code>查看集群状态：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db225 opt]# mysqlsh icadmin@192.168.165.156:3306</span><br><span class=\"line\">Please provide the password for &#39;icadmin@192.168.165.156:3306&#39;: ******</span><br><span class=\"line\">Save password for &#39;icadmin@192.168.165.156:3306&#39;? [Y]es&#x2F;[N]o&#x2F;Ne[v]er (default No): </span><br><span class=\"line\">MySQL Shell 8.0.25</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2016, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its affiliates.</span><br><span class=\"line\">Other names may be trademarks of their respective owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;\\help&#39; or &#39;\\?&#39; for help; &#39;\\quit&#39; to exit.</span><br><span class=\"line\">Creating a session to &#39;icadmin@192.168.165.156:3306&#39;</span><br><span class=\"line\">Fetching schema names for autocompletion... Press ^C to stop.</span><br><span class=\"line\">Your MySQL connection id is 28</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\">No default schema selected; type \\use &lt;schema&gt; to set one.</span><br><span class=\"line\"> MySQL  192.168.165.156:3306 ssl  JS &gt; var cluster &#x3D; dba.createCluster(&#39;testCluster&#39;, &#123;adoptFromGR: true&#125;);</span><br><span class=\"line\">A new InnoDB cluster will be created based on the existing replication group on instance &#39;192.168.165.156:3306&#39;.</span><br><span class=\"line\"></span><br><span class=\"line\">Creating InnoDB cluster &#39;testCluster&#39; on &#39;192.168.165.156:3306&#39;...</span><br><span class=\"line\"></span><br><span class=\"line\">Adding Seed Instance...</span><br><span class=\"line\">Adding Instance &#39;192.168.165.157:3306&#39;...</span><br><span class=\"line\">Adding Instance &#39;192.168.165.225:3306&#39;...</span><br><span class=\"line\">Adding Instance &#39;192.168.165.156:3306&#39;...</span><br><span class=\"line\">Resetting distributed recovery credentials across the cluster...</span><br><span class=\"line\">NOTE: User &#39;mysql_innodb_cluster_13306&#39;@&#39;%&#39; already existed at instance &#39;192.168.165.156:3306&#39;. It will be deleted and created again with a new password.</span><br><span class=\"line\">NOTE: User &#39;mysql_innodb_cluster_13306&#39;@&#39;%&#39; already existed at instance &#39;192.168.165.156:3306&#39;. It will be deleted and created again with a new password.</span><br><span class=\"line\">Cluster successfully created based on existing replication group.</span><br><span class=\"line\"></span><br><span class=\"line\"> MySQL  192.168.165.156:3306 ssl  JS &gt; dba.getCluster(&quot;testCluster&quot;).status();</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;clusterName&quot;: &quot;testCluster&quot;, </span><br><span class=\"line\">    &quot;defaultReplicaSet&quot;: &#123;</span><br><span class=\"line\">        &quot;name&quot;: &quot;default&quot;, </span><br><span class=\"line\">        &quot;primary&quot;: &quot;192.168.165.156:3306&quot;, </span><br><span class=\"line\">        &quot;ssl&quot;: &quot;DISABLED&quot;, </span><br><span class=\"line\">        &quot;status&quot;: &quot;OK&quot;, </span><br><span class=\"line\">        &quot;statusText&quot;: &quot;Cluster is ONLINE and can tolerate up to ONE failure.&quot;, </span><br><span class=\"line\">        &quot;topology&quot;: &#123;</span><br><span class=\"line\">            &quot;192.168.165.156:3306&quot;: &#123;</span><br><span class=\"line\">                &quot;address&quot;: &quot;192.168.165.156:3306&quot;, </span><br><span class=\"line\">                &quot;instanceErrors&quot;: [</span><br><span class=\"line\">                    &quot;NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.&quot;</span><br><span class=\"line\">                ], </span><br><span class=\"line\">                &quot;memberRole&quot;: &quot;PRIMARY&quot;, </span><br><span class=\"line\">                &quot;mode&quot;: &quot;R&#x2F;W&quot;, </span><br><span class=\"line\">                &quot;readReplicas&quot;: &#123;&#125;, </span><br><span class=\"line\">                &quot;replicationLag&quot;: null, </span><br><span class=\"line\">                &quot;role&quot;: &quot;HA&quot;, </span><br><span class=\"line\">                &quot;status&quot;: &quot;ONLINE&quot;, </span><br><span class=\"line\">                &quot;version&quot;: &quot;8.0.25&quot;</span><br><span class=\"line\">            &#125;, </span><br><span class=\"line\">            &quot;192.168.165.157:3306&quot;: &#123;</span><br><span class=\"line\">                &quot;address&quot;: &quot;192.168.165.157:3306&quot;, </span><br><span class=\"line\">                &quot;instanceErrors&quot;: [</span><br><span class=\"line\">                    &quot;NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.&quot;</span><br><span class=\"line\">                ], </span><br><span class=\"line\">                &quot;memberRole&quot;: &quot;SECONDARY&quot;, </span><br><span class=\"line\">                &quot;mode&quot;: &quot;R&#x2F;O&quot;, </span><br><span class=\"line\">                &quot;readReplicas&quot;: &#123;&#125;, </span><br><span class=\"line\">                &quot;replicationLag&quot;: null, </span><br><span class=\"line\">                &quot;role&quot;: &quot;HA&quot;, </span><br><span class=\"line\">                &quot;status&quot;: &quot;ONLINE&quot;, </span><br><span class=\"line\">                &quot;version&quot;: &quot;8.0.25&quot;</span><br><span class=\"line\">            &#125;, </span><br><span class=\"line\">            &quot;192.168.165.225:3306&quot;: &#123;</span><br><span class=\"line\">                &quot;address&quot;: &quot;192.168.165.225:3306&quot;, </span><br><span class=\"line\">                &quot;instanceErrors&quot;: [</span><br><span class=\"line\">                    &quot;NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.&quot;</span><br><span class=\"line\">                ], </span><br><span class=\"line\">                &quot;memberRole&quot;: &quot;SECONDARY&quot;, </span><br><span class=\"line\">                &quot;mode&quot;: &quot;R&#x2F;O&quot;, </span><br><span class=\"line\">                &quot;readReplicas&quot;: &#123;&#125;, </span><br><span class=\"line\">                &quot;replicationLag&quot;: null, </span><br><span class=\"line\">                &quot;role&quot;: &quot;HA&quot;, </span><br><span class=\"line\">                &quot;status&quot;: &quot;ONLINE&quot;, </span><br><span class=\"line\">                &quot;version&quot;: &quot;8.0.25&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, </span><br><span class=\"line\">        &quot;topologyMode&quot;: &quot;Single-Primary&quot;</span><br><span class=\"line\">    &#125;, </span><br><span class=\"line\">    &quot;groupInformationSourceMember&quot;: &quot;192.168.165.156:3306&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> MySQL  192.168.165.156:3306 ssl  JS &gt; </span><br></pre></td></tr></table></figure>\n\n<p>其中：</p>\n<ul>\n<li>“status”: “OK” 表示集群状态是正常的</li>\n<li>“topologyMode”: “Single-Primary” 表示是单主模式</li>\n<li>“mode”: “R/W” 表示可读可写</li>\n<li>“mode”: “R/O” 表示只读</li>\n</ul>\n<h2 id=\"安装MySQL-Router\"><a href=\"#安装MySQL-Router\" class=\"headerlink\" title=\"安装MySQL Router\"></a>安装MySQL Router</h2><p>安装：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# tar -xf mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz </span><br><span class=\"line\">[root@db156 opt]# mv mysql-router-8.0.25-linux-glibc2.12-x86_64 &#x2F;usr&#x2F;local&#x2F;mysqlrouter</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 755 &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">[root@db156 opt]# mkdir -p &#x2F;data&#x2F;mysqlrouter</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;data&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">[root@db156 opt]# echo &quot;export PATH&#x3D;\\$PATH:&#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&quot; &gt;&gt; &#x2F;etc&#x2F;profile</span><br><span class=\"line\">[root@db156 opt]# source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>\n\n<p>bootstrap引导:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter --bootstrap icadmin@192.168.165.156:3306 --directory &#x2F;data&#x2F;mysqlrouter --conf-use-sockets --user&#x3D;mysql --name&#x3D;mysql_router_13306 --conf-bind-address&#x3D;192.168.165.156 --account-host&#x3D;&quot;192.168.165.%&quot;</span><br><span class=\"line\">Please enter MySQL password for icadmin: </span><br><span class=\"line\"># Bootstrapping MySQL Router instance at &#39;&#x2F;data&#x2F;mysqlrouter&#39;...</span><br><span class=\"line\"></span><br><span class=\"line\">- Creating account(s) (only those that are needed, if any)</span><br><span class=\"line\">- Verifying account (using it to run SQL queries that would be run by Router)</span><br><span class=\"line\">- Storing account in keyring</span><br><span class=\"line\">- Adjusting permissions of generated files</span><br><span class=\"line\">- Creating configuration &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf</span><br><span class=\"line\"></span><br><span class=\"line\"># MySQL Router &#39;mysql_router_13306&#39; configured for the InnoDB Cluster &#39;testCluster&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">After this MySQL Router has been started with the generated configuration</span><br><span class=\"line\"></span><br><span class=\"line\">    $ &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter -c &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf</span><br><span class=\"line\"></span><br><span class=\"line\">the cluster &#39;testCluster&#39; can be reached by connecting to:</span><br><span class=\"line\"></span><br><span class=\"line\">## MySQL Classic protocol</span><br><span class=\"line\"></span><br><span class=\"line\">- Read&#x2F;Write Connections: localhost:6446, &#x2F;data&#x2F;mysqlrouter&#x2F;mysql.sock</span><br><span class=\"line\">- Read&#x2F;Only Connections:  localhost:6447, &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlro.sock</span><br><span class=\"line\"></span><br><span class=\"line\">## MySQL X protocol</span><br><span class=\"line\"></span><br><span class=\"line\">- Read&#x2F;Write Connections: localhost:6448, &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlx.sock</span><br><span class=\"line\">- Read&#x2F;Only Connections:  localhost:6449, &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlxro.sock</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n<p>引导成功后会在/data/mysqlrouter目录下生成所需的数据文件，目录结构如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# tree &#x2F;data&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">&#x2F;data&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">├── data</span><br><span class=\"line\">│   ├── ca-key.pem</span><br><span class=\"line\">│   ├── ca.pem</span><br><span class=\"line\">│   ├── keyring</span><br><span class=\"line\">│   ├── router-cert.pem</span><br><span class=\"line\">│   ├── router-key.pem</span><br><span class=\"line\">│   └── state.json</span><br><span class=\"line\">├── log</span><br><span class=\"line\">│   └── mysqlrouter.log</span><br><span class=\"line\">├── mysqlrouter.conf</span><br><span class=\"line\">├── mysqlrouter.key</span><br><span class=\"line\">├── run</span><br><span class=\"line\">├── start.sh</span><br><span class=\"line\">└── stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\">3 directories, 11 files</span><br></pre></td></tr></table></figure>\n\n<p>生成的MySQL Router配置文件如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# cat &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf </span><br><span class=\"line\"># File automatically generated during MySQL Router bootstrap</span><br><span class=\"line\">[DEFAULT]</span><br><span class=\"line\">name&#x3D;mysql_router_13306</span><br><span class=\"line\">user&#x3D;mysql</span><br><span class=\"line\">logging_folder&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;log</span><br><span class=\"line\">runtime_folder&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;run</span><br><span class=\"line\">data_folder&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data</span><br><span class=\"line\">keyring_path&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;keyring</span><br><span class=\"line\">master_key_path&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.key</span><br><span class=\"line\">connect_timeout&#x3D;15</span><br><span class=\"line\">read_timeout&#x3D;30</span><br><span class=\"line\">dynamic_state&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;state.json</span><br><span class=\"line\">client_ssl_cert&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-cert.pem</span><br><span class=\"line\">client_ssl_key&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-key.pem</span><br><span class=\"line\">client_ssl_mode&#x3D;PREFERRED</span><br><span class=\"line\">server_ssl_mode&#x3D;AS_CLIENT</span><br><span class=\"line\">server_ssl_verify&#x3D;DISABLED</span><br><span class=\"line\"></span><br><span class=\"line\">[logger]</span><br><span class=\"line\">level &#x3D; INFO</span><br><span class=\"line\"></span><br><span class=\"line\">[metadata_cache:testCluster]</span><br><span class=\"line\">cluster_type&#x3D;gr</span><br><span class=\"line\">router_id&#x3D;1</span><br><span class=\"line\">user&#x3D;mysql_router1_7d9sq1vuggg9</span><br><span class=\"line\">metadata_cluster&#x3D;testCluster</span><br><span class=\"line\">ttl&#x3D;0.5</span><br><span class=\"line\">auth_cache_ttl&#x3D;-1</span><br><span class=\"line\">auth_cache_refresh_interval&#x3D;2</span><br><span class=\"line\">use_gr_notifications&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_rw]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6446</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysql.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;PRIMARY</span><br><span class=\"line\">routing_strategy&#x3D;first-available</span><br><span class=\"line\">protocol&#x3D;classic</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_ro]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6447</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlro.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;SECONDARY</span><br><span class=\"line\">routing_strategy&#x3D;round-robin-with-fallback</span><br><span class=\"line\">protocol&#x3D;classic</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_x_rw]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6448</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlx.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;PRIMARY</span><br><span class=\"line\">routing_strategy&#x3D;first-available</span><br><span class=\"line\">protocol&#x3D;x</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_x_ro]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6449</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlxro.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;SECONDARY</span><br><span class=\"line\">routing_strategy&#x3D;round-robin-with-fallback</span><br><span class=\"line\">protocol&#x3D;x</span><br><span class=\"line\"></span><br><span class=\"line\">[http_server]</span><br><span class=\"line\">port&#x3D;8443</span><br><span class=\"line\">ssl&#x3D;1</span><br><span class=\"line\">ssl_cert&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-cert.pem</span><br><span class=\"line\">ssl_key&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-key.pem</span><br><span class=\"line\"></span><br><span class=\"line\">[http_auth_realm:default_auth_realm]</span><br><span class=\"line\">backend&#x3D;default_auth_backend</span><br><span class=\"line\">method&#x3D;basic</span><br><span class=\"line\">name&#x3D;default_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_router]</span><br><span class=\"line\">require_realm&#x3D;default_auth_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_api]</span><br><span class=\"line\"></span><br><span class=\"line\">[http_auth_backend:default_auth_backend]</span><br><span class=\"line\">backend&#x3D;metadata_cache</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_routing]</span><br><span class=\"line\">require_realm&#x3D;default_auth_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_metadata_cache]</span><br><span class=\"line\">require_realm&#x3D;default_auth_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n<p>启动MySQL路由：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# bash &#x2F;data&#x2F;mysqlrouter&#x2F;start.sh 2&gt;&amp;1 &gt; &#x2F;dev&#x2F;null &amp;</span><br><span class=\"line\">[root@db156 opt]# ps -ef | grep mysqlrouter</span><br><span class=\"line\">root     24911     1  0 08:00 pts&#x2F;0    00:00:00 sudo ROUTER_PID&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.pid &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter -c &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf --user&#x3D;mysql</span><br><span class=\"line\">mysql    24913 24911  2 08:00 pts&#x2F;0    00:00:01 &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter -c &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf --user&#x3D;mysql</span><br><span class=\"line\">root     24998  9686  0 08:01 pts&#x2F;0    00:00:00 grep --color&#x3D;auto mysqlrouter</span><br></pre></td></tr></table></figure>\n\n<p>读写分离测试：使用不同的端口</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uicadmin -p -h 192.168.165.156 -P 6446    </span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 196</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select @@hostname as hostname, @@port as port;</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| hostname | port |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| db156    | 3306 |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uicadmin -p -h 192.168.165.156 -P 6447</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 30</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select @@hostname as hostname, @@port as port;</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| hostname | port |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| db225    | 3306 |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uicadmin -p -h 192.168.165.156 -P 6447</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 1517</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select @@hostname as hostname, @@port as port;</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| hostname | port |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| db157    | 3306 |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>可以看到使用读写端口6446时连接的是主节点，而使用只读端口6447连接时是在两个从节点之间切换操作。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"学习资料","class_desc":"值得一看的学习资料","link_list":[{"name":"Typecho","link":"https://typecho.me/","descr":"主题网站模板"},{"name":"LeetCode","link":"https://leetcode.com/","avatar":"https://leetcode.com/static/images/LeetCode_logo_rvs.png","descr":"程序员算法刷题经典网站"},{"name":"Python100天","link":"https://github.com/jackfrued/Python-100-Days","descr":"GitHub上的经典Python学习资料"}]},{"class_name":"常用工具","class_desc":"常用工具网站","link_list":[{"name":"Travis-ci","link":"https://travis-ci.com/","avatar":"https://cdn.travis-ci.com/images/ui/travis-ci-logo-hover-51a78629352a38fdd0046d35766797d2.svg","descr":"持续集成和持续部署工具"},{"name":"工具猫","link":"https://www.toolmao.com/","avatar":"https://www.toolmao.com/wp-content/uploads/2020/04/logo.png","descr":"工具集成"},{"name":"鸠摩搜索","link":"https://www.jiumodiary.com/","avatar":"https://www2.jiumodiary.com/images/front/eleps.png","descr":"电子书搜索神器"}]},{"class_name":"开源产品","class_desc":"一些好用的开源产品","link_list":[{"name":"SQL审核查询平台","link":"https://github.com/hhyo/archery/","descr":"Archery是archer的分支项目，定位于SQL审核查询平台，旨在提升DBA的工作效率，支持多数据库的SQL上线和查询，同时支持丰富的MySQL运维功能，所有功能都兼容手机端操作"},{"name":"开源运维平台","link":"https://github.com/openspug/spug","avatar":"https://www.spug.dev/img/logo-spug-txt-white.png","descr":"面向中小型企业设计的轻量级无Agent的自动化运维平台，整合了主机管理、主机批量执行、主机在线终端、文件在线上传下载、应用发布部署、在线任务计划、配置中心、监控、报警等一系列功能。"}]},{"class_name":"PPT相关网站","class_desc":"像讲故事一样做工作汇报","link_list":[{"name":"PPT模板","link":"https://slidesgo.com/"},{"name":"图片网站","link":"https://www.pexels.com"},{"name":"图标网站","link":"https://iconpark.oceanengine.com/official"},{"name":"字体网站","link":"https://www.qiuziti.com/"},{"name":"插件网站","link":"https://www.islide.cc/"}]},{"class_name":"好看的图片","class_desc":"哪些好看的免费的图片","link_list":[{"name":"unsplash","link":"https://unsplash.com/","avatar":"<svg width=\"32\" height=\"32\" class=\"_1Jlgk\" viewBox=\"0 0 32 32\" version=\"1.1\" aria-labelledby=\"unsplash-home\" aria-hidden=\"false\"><title id=\"unsplash-home\">Unsplash Home</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg>"}]}]}},"excerpt":"","more":"<p>部署一个MySQL 8.0.25 InnoDB Cluster集群</p>\n<h2 id=\"InnoDB-Cluster集群简介\"><a href=\"#InnoDB-Cluster集群简介\" class=\"headerlink\" title=\"InnoDB Cluster集群简介\"></a>InnoDB Cluster集群简介</h2><p>![InnoDB Cluster架构](InnoDB Cluster架构.jpg)</p>\n<h2 id=\"环境信息\"><a href=\"#环境信息\" class=\"headerlink\" title=\"环境信息\"></a>环境信息</h2><p>准备三台虚拟机</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>服务器1</th>\n<th>服务器2</th>\n<th>服务器3</th>\n<th>端口</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>操作系统</td>\n<td>CentOS7</td>\n<td>CentOS7</td>\n<td>CentOS7</td>\n<td>/</td>\n</tr>\n<tr>\n<td>IP</td>\n<td>192.168.165.156</td>\n<td>192.168.165.157</td>\n<td>192.168.165.225</td>\n<td>/</td>\n</tr>\n<tr>\n<td>主机名</td>\n<td>db156</td>\n<td>db156</td>\n<td>db225</td>\n<td>/</td>\n</tr>\n<tr>\n<td>MySQL Server 8.0.25</td>\n<td>MGR 节点一</td>\n<td>MGR 节点二</td>\n<td>MGR 节点三</td>\n<td>3306</td>\n</tr>\n<tr>\n<td>MySQL Shell 8.0.25</td>\n<td>MySQL Shell节点一</td>\n<td>MySQL Shell节点二</td>\n<td>MySQL Shell节点三</td>\n<td>/</td>\n</tr>\n<tr>\n<td>MySQL Router 8.0.25</td>\n<td>MySQL Router节点一</td>\n<td>MySQL Router节点二</td>\n<td>MySQL Router节点三</td>\n<td>6446(写)、6447（读）</td>\n</tr>\n</tbody></table>\n<h2 id=\"部署说明\"><a href=\"#部署说明\" class=\"headerlink\" title=\"部署说明\"></a>部署说明</h2><h3 id=\"安装顺序\"><a href=\"#安装顺序\" class=\"headerlink\" title=\"安装顺序\"></a>安装顺序</h3><p>安装MySQL Server—&gt;启用组复制—&gt;安装MySQL Shell —&gt; 创建InnoDB Cluster集群—&gt; 安装MySQL Router</p>\n<h3 id=\"安装包\"><a href=\"#安装包\" class=\"headerlink\" title=\"安装包\"></a>安装包</h3><table>\n<thead>\n<tr>\n<th>安装包名</th>\n<th>MD5值</th>\n<th>下载连接</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</td>\n<td>a12142a969531cebd845844620bb44a4</td>\n<td><a href=\"https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz\">https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</a></td>\n</tr>\n<tr>\n<td>mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz</td>\n<td>9192ea694ac97a5c5715806ddcf84932</td>\n<td><a href=\"https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz\">https://dev.mysql.com/get/Downloads/MySQL-Shell/mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</a></td>\n</tr>\n<tr>\n<td>mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</td>\n<td>bcd9b81f422667dbabd0a5d7bbf7638a</td>\n<td><a href=\"https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz\">https://dev.mysql.com/get/Downloads/MySQL-Router/mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"安装MySQL-Server\"><a href=\"#安装MySQL-Server\" class=\"headerlink\" title=\"安装MySQL Server\"></a>安装MySQL Server</h2><h3 id=\"安装依赖包\"><a href=\"#安装依赖包\" class=\"headerlink\" title=\"安装依赖包\"></a>安装依赖包</h3><h3 id=\"创建相关用户\"><a href=\"#创建相关用户\" class=\"headerlink\" title=\"创建相关用户\"></a>创建相关用户</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 ~]# groupadd mysql &amp;&amp; useradd -r -g mysql -s /bin/false mysql</span><br><span class=\"line\">groupadd: group &#x27;mysql&#x27; already exists</span><br><span class=\"line\">[root@db156 ~]# cat /etc/passwd | grep -iw  &quot;mysql&quot;</span><br><span class=\"line\">mysql:x:997:1000::/home/mysql:/bin/false</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载并解压安装包\"><a href=\"#下载并解压安装包\" class=\"headerlink\" title=\"下载并解压安装包\"></a>下载并解压安装包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">--2021-06-10 04:43:21--  https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving dev.mysql.com (dev.mysql.com)... 137.254.60.11</span><br><span class=\"line\">Connecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 302 Found</span><br><span class=\"line\">Location: https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]</span><br><span class=\"line\">--2021-06-10 04:43:22--  https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-8.0&#x2F;mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231</span><br><span class=\"line\">Connecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 200 OK</span><br><span class=\"line\">Length: 896219776 (855M) [text&#x2F;plain]</span><br><span class=\"line\">Saving to: ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’</span><br><span class=\"line\"></span><br><span class=\"line\">100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 896,219,776 14.2MB&#x2F;s   in 66s    </span><br><span class=\"line\"></span><br><span class=\"line\">2021-06-10 04:44:29 (13.0 MB&#x2F;s) - ‘mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [896219776&#x2F;896219776]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</span><br><span class=\"line\">--2021-06-10 04:44:39--  https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</span><br><span class=\"line\">Resolving dev.mysql.com (dev.mysql.com)... 137.254.60.11</span><br><span class=\"line\">Connecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 302 Found</span><br><span class=\"line\">Location: https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz [following]</span><br><span class=\"line\">--2021-06-10 04:44:41--  https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Shell&#x2F;mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz</span><br><span class=\"line\">Resolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231</span><br><span class=\"line\">Connecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 200 OK</span><br><span class=\"line\">Length: 41487987 (40M) [application&#x2F;x-tar-gz]</span><br><span class=\"line\">Saving to: ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’</span><br><span class=\"line\"></span><br><span class=\"line\">100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 41,487,987  11.6MB&#x2F;s   in 3.8s   </span><br><span class=\"line\"></span><br><span class=\"line\">2021-06-10 04:44:45 (10.4 MB&#x2F;s) - ‘mysql-shell-8.0.25-linux-glibc2.12-x86-32bit.tar.gz’ saved [41487987&#x2F;41487987]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# wget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">--2021-06-10 04:44:53--  https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving dev.mysql.com (dev.mysql.com)... 137.254.60.11</span><br><span class=\"line\">Connecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 302 Found</span><br><span class=\"line\">Location: https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz [following]</span><br><span class=\"line\">--2021-06-10 04:44:54--  https:&#x2F;&#x2F;cdn.mysql.com&#x2F;&#x2F;Downloads&#x2F;MySQL-Router&#x2F;mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">Resolving cdn.mysql.com (cdn.mysql.com)... 104.71.212.231</span><br><span class=\"line\">Connecting to cdn.mysql.com (cdn.mysql.com)|104.71.212.231|:443... connected.</span><br><span class=\"line\">HTTP request sent, awaiting response... 200 OK</span><br><span class=\"line\">Length: 65288920 (62M) [text&#x2F;plain]</span><br><span class=\"line\">Saving to: ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’</span><br><span class=\"line\"></span><br><span class=\"line\">100%[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;] 65,288,920  12.5MB&#x2F;s   in 6.1s   </span><br><span class=\"line\"></span><br><span class=\"line\">2021-06-10 04:45:01 (10.3 MB&#x2F;s) - ‘mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz’ saved [65288920&#x2F;65288920]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# tar -xf mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz</span><br><span class=\"line\">[root@db156 opt]# mv mysql-8.0.25-linux-glibc2.12-x86_64 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 755 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建相关目录\"><a href=\"#创建相关目录\" class=\"headerlink\" title=\"创建相关目录\"></a>创建相关目录</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# mkdir -p &#x2F;data&#x2F;mysql&#x2F;&#123;data,binlog,relay&#125;</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;data&#x2F;mysql&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 750 &#x2F;data&#x2F;mysql&#x2F;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"准备配置文件\"><a href=\"#准备配置文件\" class=\"headerlink\" title=\"准备配置文件\"></a>准备配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">server_id&#x3D;13306</span><br><span class=\"line\">gtid_mode&#x3D;on</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;1</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">loose-group_replication_group_name&#x3D;&#39;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&#39;</span><br><span class=\"line\">loose-group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">loose-group_replication_ip_whitelist&#x3D;&#39;192.168.165.0&#x2F;24&#39;</span><br><span class=\"line\">loose-group_replication_local_address&#x3D;&#39;192.168.165.157:33061&#39;</span><br><span class=\"line\">loose-group_replication_group_seeds&#x3D;&#39;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&#39;</span><br><span class=\"line\">loose-group_replication_bootstrap_group&#x3D;off</span><br><span class=\"line\">loose-group_replication_single_primary_mode&#x3D;on</span><br><span class=\"line\">loose-group_replication_enforce_update_everywhere_checks&#x3D;off</span><br><span class=\"line\">loose-group_replication_recovery_get_public_key&#x3D;on</span><br><span class=\"line\">loose-group_replication_recovery_use_ssl&#x3D;off</span><br><span class=\"line\">loose-group_replication_ssl_mode&#x3D;&#39;DISABLED&#39;</span><br><span class=\"line\">loose-group_replication_consistency&#x3D;&#39;EVENTUAL&#39;</span><br><span class=\"line\">loose-group_replication_member_expel_timeout&#x3D;5</span><br><span class=\"line\">report_host&#x3D;&#39;192.168.165.157&#39;</span><br><span class=\"line\">report_port&#x3D;3306</span><br><span class=\"line\">plugin_load_add &#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">auto_increment_increment&#x3D;1</span><br><span class=\"line\">auto_increment_offset&#x3D;1</span><br><span class=\"line\">mysqlx_port&#x3D;33060</span><br><span class=\"line\">admin_port&#x3D;33062</span><br><span class=\"line\">datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data</span><br><span class=\"line\">basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class=\"line\">user&#x3D;mysql</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"初始化MySQL-Server\"><a href=\"#初始化MySQL-Server\" class=\"headerlink\" title=\"初始化MySQL Server\"></a>初始化MySQL Server</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf --initialize-insecure</span><br><span class=\"line\">2021-06-10T08:12:00.192163Z 0 [System] [MY-013169] [Server] &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld (mysqld 8.0.25) initializing of server in progress as process 10863</span><br><span class=\"line\">2021-06-10T08:12:00.364089Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.</span><br><span class=\"line\">2021-06-10T08:12:05.120563Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.</span><br><span class=\"line\">2021-06-10T08:12:05.548074Z 0 [Warning] [MY-013501] [Server] Ignoring --plugin-load[_add] list as the server is running with --initialize(-insecure).</span><br><span class=\"line\">2021-06-10T08:12:06.717610Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_group_name&#x3D;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.718217Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_start_on_boot&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.718823Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_ip_whitelist&#x3D;192.168.165.0&#x2F;24&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.719416Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_local_address&#x3D;192.168.165.156:33061&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.719969Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_group_seeds&#x3D;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.720542Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_bootstrap_group&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.721103Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_single_primary_mode&#x3D;on&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.721683Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_enforce_update_everywhere_checks&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.722250Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_recovery_get_public_key&#x3D;on&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.722873Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_recovery_use_ssl&#x3D;off&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.723485Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_ssl_mode&#x3D;DISABLED&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.724060Z 0 [Warning] [MY-000067] [Server] unknown variable &#39;loose-group_replication_member_expel_timeout&#x3D;5&#39;.</span><br><span class=\"line\">2021-06-10T08:12:06.727059Z 6 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"配置启动文件并启动MySQL\"><a href=\"#配置启动文件并启动MySQL\" class=\"headerlink\" title=\"配置启动文件并启动MySQL\"></a>配置启动文件并启动MySQL</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# vi &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service</span><br><span class=\"line\">[root@db156 opt]# cat &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;MySQL Server</span><br><span class=\"line\">Documentation&#x3D;man:mysqld(8)</span><br><span class=\"line\">Documentation&#x3D;https:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;using-systemd.html</span><br><span class=\"line\">After&#x3D;network.target</span><br><span class=\"line\">After&#x3D;syslog.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User&#x3D;mysql</span><br><span class=\"line\">Group&#x3D;mysql</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">LimitNOFILE &#x3D; 5000</span><br><span class=\"line\">[root@db156 opt]# systemctl start mysqld </span><br><span class=\"line\">[root@db156 opt]# systemctl status mysqld      </span><br><span class=\"line\">● mysqld.service - MySQL Server</span><br><span class=\"line\">   Loaded: loaded (&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service; disabled; vendor preset: disabled)</span><br><span class=\"line\">   Active: active (running) since Thu 2021-06-10 04:57:12 EDT; 10s ago</span><br><span class=\"line\">     Docs: man:mysqld(8)</span><br><span class=\"line\">           https:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;using-systemd.html</span><br><span class=\"line\"> Main PID: 14232 (mysqld_safe)</span><br><span class=\"line\">   CGroup: &#x2F;system.slice&#x2F;mysqld.service</span><br><span class=\"line\">           ├─14232 &#x2F;bin&#x2F;sh &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">           └─14626 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data --plugin-dir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin --log-error&#x3D;db156.err --pid-fil...</span><br><span class=\"line\"></span><br><span class=\"line\">Jun 10 04:57:12 db156 systemd[1]: Started MySQL Server.</span><br><span class=\"line\">Jun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.594106Z mysqld_safe Logging to &#39;&#x2F;data&#x2F;mysql&#x2F;data&#x2F;db156.err&#39;.</span><br><span class=\"line\">Jun 10 04:57:13 db156 mysqld_safe[14232]: 2021-06-10T08:57:13.689214Z mysqld_safe Starting mysqld daemon with databases from &#x2F;data&#x2F;mysql&#x2F;data</span><br></pre></td></tr></table></figure>\n\n<p>在执行<code>systemctl start mysqld </code>如果报错<code>Failed to start mysqld.service: Unit not found.</code>,可以执行<code>systemctl daemon-reload</code>解决。</p>\n<h3 id=\"修改本地账号密码并设置不过期\"><a href=\"#修改本地账号密码并设置不过期\" class=\"headerlink\" title=\"修改本地账号密码并设置不过期\"></a>修改本地账号密码并设置不过期</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -e &quot;SET SQL_LOG_BIN&#x3D;0;SET global super_read_only&#x3D;OFF; SET global read_only&#x3D;OFF; alter user &#39;root&#39;@&#39;localhost&#39; password expire never; set password for &#39;root&#39;@&#39;localhost&#39;&#x3D;&#39;123456&#39;;flush privileges; SET SQL_LOG_BIN&#x3D;1;&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建复制账号并授权\"><a href=\"#创建复制账号并授权\" class=\"headerlink\" title=\"创建复制账号并授权\"></a>创建复制账号并授权</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 9</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;0;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.156&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.157&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.225&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">Query OK, 0 rows affected (0.04 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.157&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">Query OK, 0 rows affected (0.02 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;repl&#96;@&#96;192.168.165.225&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.156&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.156&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.157&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE, REPLICATION CLIENT, BACKUP_ADMIN ON *.* TO &#96;repl&#96;@&#96;192.168.165.225&#96;; </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;1;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建管理账号并授权\"><a href=\"#创建管理账号并授权\" class=\"headerlink\" title=\"创建管理账号并授权\"></a>创建管理账号并授权</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 8</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;0;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CREATE USER IF NOT EXISTS &#96;icadmin&#96;@&#96;192.168.165.%&#96; IDENTIFIED BY &#39;123456&#39; PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT SELECT, RELOAD, SHUTDOWN, PROCESS, FILE, SUPER, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE USER ON *.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT BACKUP_ADMIN,CLONE_ADMIN,PERSIST_RO_VARIABLES_ADMIN,REPLICATION_APPLIER,SYSTEM_VARIABLES_ADMIN ON *.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">GRANT INSERT, UPDATE, DELETE ON &#96;mysql&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE ON &#96;mysql&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON &#96;mysql_innodb_cluster_metadata&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON &#96;mysql_innodb_cluster_metadata_bkp&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON &#96;mysql_innodb_cluster_metadata_previous&#96;.* TO &#96;icadmin&#96;@&#96;192.168.165.%&#96; WITH GRANT OPTION;</span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br><span class=\"line\">SET SQL_LOG_BIN&#x3D;1;</span><br><span class=\"line\">Query OK, 0 rows affected (0.32 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET SQL_LOG_BIN&#x3D;1;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装组复制插件\"><a href=\"#安装组复制插件\" class=\"headerlink\" title=\"安装组复制插件\"></a>安装组复制插件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 9</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; INSTALL PLUGIN group_replication SONAME &#39;group_replication.so&#39;;</span><br><span class=\"line\">ERROR 1125 (HY000): Function &#39;group_replication&#39; already exists</span><br><span class=\"line\">mysql&gt; SELECT PLUGIN_NAME, PLUGIN_STATUS FROM INFORMATION_SCHEMA.PLUGINS  WHERE PLUGIN_NAME LIKE &#39;%group_replication%&#39;;</span><br><span class=\"line\">+-------------------+---------------+</span><br><span class=\"line\">| PLUGIN_NAME       | PLUGIN_STATUS |</span><br><span class=\"line\">+-------------------+---------------+</span><br><span class=\"line\">| group_replication | ACTIVE        |</span><br><span class=\"line\">+-------------------+---------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"设置复制通道\"><a href=\"#设置复制通道\" class=\"headerlink\" title=\"设置复制通道\"></a>设置复制通道</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 10</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CHANGE MASTER TO MASTER_USER&#x3D;&#39;repl&#39;, MASTER_PASSWORD&#x3D;&#39;123456&#39; FOR CHANNEL &#39;group_replication_recovery&#39;;</span><br><span class=\"line\">Query OK, 0 rows affected, 5 warnings (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SELECT User_name,Channel_name FROM mysql.slave_master_info WHERE user_name &#x3D; &#39;repl&#39;;</span><br><span class=\"line\">+-----------+----------------------------+</span><br><span class=\"line\">| User_name | Channel_name               |</span><br><span class=\"line\">+-----------+----------------------------+</span><br><span class=\"line\">| repl      | group_replication_recovery |</span><br><span class=\"line\">+-----------+----------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET global group_replication_recovery_get_public_key&#x3D;ON;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"查看MySQL进程\"><a href=\"#查看MySQL进程\" class=\"headerlink\" title=\"查看MySQL进程\"></a>查看MySQL进程</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# ps -ef | grep mysql</span><br><span class=\"line\">mysql    14232     1  0 04:57 ?        00:00:00 &#x2F;bin&#x2F;sh &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">mysql    14626 14232  0 04:57 ?        00:00:03 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld --defaults-file&#x3D;&#x2F;etc&#x2F;my.cnf --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql --datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data --plugin-dir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin --log-error&#x3D;db156.err --pid-file&#x3D;db156.pid</span><br><span class=\"line\">root     15500  9686  0 05:12 pts&#x2F;0    00:00:00 grep --color&#x3D;auto mysql</span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n\n\n<blockquote>\n<p>说明：其他两个节点也按照以上步骤部署</p>\n</blockquote>\n<h2 id=\"启用MGR组复制\"><a href=\"#启用MGR组复制\" class=\"headerlink\" title=\"启用MGR组复制\"></a>启用MGR组复制</h2><p>三个MySQL Server实例部署完成之后，就可以启用组复制了。</p>\n<p>对于组复制，数据必须存储在InnoDB事务存储引擎中，使用其他存储引擎（包括临时 MEMORY存储引擎）可能会导致组复制中的错误。disabled_storage_engines 如下设置 系统变量以防止其使用：</p>\n<p>disabled_storage_engines=”MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY”</p>\n<p>修改配置文件，添加上面的配置并重启即可：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# vi &#x2F;etc&#x2F;my.cnf </span><br><span class=\"line\">[root@db156 opt]# cat &#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">server_id&#x3D;13306</span><br><span class=\"line\">gtid_mode&#x3D;on</span><br><span class=\"line\">enforce_gtid_consistency&#x3D;1</span><br><span class=\"line\">transaction_write_set_extraction&#x3D;XXHASH64</span><br><span class=\"line\">loose-group_replication_group_name&#x3D;&#39;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&#39;</span><br><span class=\"line\">loose-group_replication_start_on_boot&#x3D;off</span><br><span class=\"line\">loose-group_replication_ip_whitelist&#x3D;&#39;192.168.165.0&#x2F;24&#39;</span><br><span class=\"line\">loose-group_replication_local_address&#x3D;&#39;192.168.165.156:33061&#39;</span><br><span class=\"line\">loose-group_replication_group_seeds&#x3D;&#39;192.168.165.156:33061,192.168.165.157:33061,192.168.165.225:33061&#39;</span><br><span class=\"line\">loose-group_replication_bootstrap_group&#x3D;off</span><br><span class=\"line\">loose-group_replication_single_primary_mode&#x3D;on</span><br><span class=\"line\">loose-group_replication_enforce_update_everywhere_checks&#x3D;off</span><br><span class=\"line\">loose-group_replication_recovery_get_public_key&#x3D;on</span><br><span class=\"line\">loose-group_replication_recovery_use_ssl&#x3D;off</span><br><span class=\"line\">loose-group_replication_ssl_mode&#x3D;&#39;DISABLED&#39;</span><br><span class=\"line\">loose-group_replication_consistency&#x3D;&#39;EVENTUAL&#39;</span><br><span class=\"line\">loose-group_replication_member_expel_timeout&#x3D;5</span><br><span class=\"line\">report_host&#x3D;&#39;192.168.165.156&#39;</span><br><span class=\"line\">report_port&#x3D;3306</span><br><span class=\"line\">plugin_load_add &#x3D;&#39;group_replication.so&#39;</span><br><span class=\"line\">auto_increment_increment&#x3D;1</span><br><span class=\"line\">auto_increment_offset&#x3D;1</span><br><span class=\"line\">mysqlx_port&#x3D;33060</span><br><span class=\"line\">admin_port&#x3D;33062</span><br><span class=\"line\">datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data</span><br><span class=\"line\">basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class=\"line\">user&#x3D;mysql</span><br><span class=\"line\">bled_storage_engines&#x3D;&quot;MyISAM,BLACKHOLE,FEDERATED,ARCHIVE,MEMORY&quot;</span><br><span class=\"line\">[root@db225 opt]# systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n\n\n\n<p>首次启动组复制的过程称为引导，，可以使用group_replication_bootstrap_group系统变量来引导组，且只能在一个实例上执行并只能执行一次。</p>\n<p>我们选择节点一上执行：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 8</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET GLOBAL group_replication_bootstrap_group&#x3D;ON;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; START GROUP_REPLICATION USER&#x3D;&#39;repl&#39;, PASSWORD&#x3D;&#39;123456&#39;;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (2.22 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SET GLOBAL group_replication_bootstrap_group&#x3D;OFF;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>节点二及节点三：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db225 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uroot -S &#x2F;tmp&#x2F;mysql.sock -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 8</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; START GROUP_REPLICATION USER&#x3D;&#39;repl&#39;, PASSWORD&#x3D;&#39;123456&#39;;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (2.64 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>在将其他节点添加至复制组时，如果报一下错误：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; START GROUP_REPLICATION USER&#x3D;&#39;repl&#39;, PASSWORD&#x3D;&#39;123456&#39;;</span><br><span class=\"line\">ERROR 3092 (HY000): The server is not configured properly to be an active member of the group. Please see more details on error log.</span><br></pre></td></tr></table></figure>\n\n<p>查看到日志如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2021-06-10T10:42:54.535154Z 10 [System] [MY-010597] [Repl] &#39;CHANGE MASTER TO FOR CHANNEL &#39;group_replication_applier&#39; executed&#39;. Previous state master_host&#x3D;&#39;&#39;, master_port&#x3D; 3306, master_log_file&#x3D;&#39;&#39;, master_log_pos&#x3D; 4, master_bind&#x3D;&#39;&#39;. New state master_host&#x3D;&#39;&lt;NULL&gt;&#39;, master_port&#x3D; 0, master_log_file&#x3D;&#39;&#39;, master_log_pos&#x3D; 4, master_bind&#x3D;&#39;&#39;.</span><br><span class=\"line\">2021-06-10T10:42:57.045266Z 0 [ERROR] [MY-011526] [Repl] Plugin group_replication reported: &#39;This member has more executed transactions than those present in the group. Local transactions: 689d5d1d-c9cc-11eb-8243-005056a0d28b:1 &gt; Group transactions: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1&#39;</span><br><span class=\"line\">2021-06-10T10:42:57.056782Z 0 [ERROR] [MY-011522] [Repl] Plugin group_replication reported: &#39;The member contains transactions not present in the group. The member will now exit the group.&#39;</span><br><span class=\"line\">2021-06-10T10:42:57.056911Z 0 [System] [MY-011503] [Repl] Plugin group_replication reported: &#39;Group membership changed to 192.168.165.157:3306, 192.168.165.156:3306 on view 16233217077427225:2.&#39;</span><br><span class=\"line\">2021-06-10T10:43:00.730039Z 0 [System] [MY-011504] [Repl] Plugin group_replication reported: &#39;Group membership changed: This member has left the group.&#39;</span><br><span class=\"line\">2021-06-10T10:43:00.758719Z 9 [System] [MY-011566] [Repl] Plugin group_replication reported: &#39;Setting super_read_only&#x3D;OFF.&#39;</span><br></pre></td></tr></table></figure>\n\n<p>则在该节点上执行<code>reset master</code>可以解决。</p>\n<p>查看组复制状态(任何一个实例均可查询)：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * FROM performance_schema.replication_group_members;</span><br><span class=\"line\">+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+</span><br><span class=\"line\">| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST     | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |</span><br><span class=\"line\">+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+</span><br><span class=\"line\">| group_replication_applier | 689d5d1d-c9cc-11eb-8243-005056a0d28b | 192.168.165.157 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |</span><br><span class=\"line\">| group_replication_applier | 71d57215-c9cc-11eb-a5ac-005056a098ec | 192.168.165.225 |        3306 | ONLINE       | SECONDARY   | 8.0.25         |</span><br><span class=\"line\">| group_replication_applier | 8b5f525d-c9c3-11eb-bf4e-005056a0bb1a | 192.168.165.156 |        3306 | ONLINE       | PRIMARY     | 8.0.25         |</span><br><span class=\"line\">+---------------------------+--------------------------------------+-----------------+-------------+--------------+-------------+----------------+</span><br><span class=\"line\">3 rows in set (1.54 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>至此，MGR三节点的组复制搭建完成。</p>\n<h2 id=\"安装MySQL-Shell\"><a href=\"#安装MySQL-Shell\" class=\"headerlink\" title=\"安装MySQL Shell\"></a>安装MySQL Shell</h2><p>安装过程如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# tar -xf mysql-shell-8.0.25-linux-glibc2.12-x86-64bit.tar.gz </span><br><span class=\"line\">[root@db156 opt]# mv mysql-shell-8.0.25-linux-glibc2.12-x86-64bit &#x2F;usr&#x2F;local&#x2F;mysqlshell</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;usr&#x2F;local&#x2F;mysqlshell&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 755 &#x2F;usr&#x2F;local&#x2F;mysqlshell&#x2F;</span><br><span class=\"line\">[root@db156 opt]# echo &quot;export PATH&#x3D;\\$PATH:&#x2F;usr&#x2F;local&#x2F;mysqlshell&#x2F;bin&quot; &gt;&gt; &#x2F;etc&#x2F;profile</span><br><span class=\"line\">[root@db156 opt]# source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>\n\n<p>三个节点均执行以上步骤安装。</p>\n<h2 id=\"创建InnoDB-Cluster集群\"><a href=\"#创建InnoDB-Cluster集群\" class=\"headerlink\" title=\"创建InnoDB Cluster集群\"></a>创建InnoDB Cluster集群</h2><p>通过mysqlsh命令使用安装MySQL Server时创建的管理账号连接到MySQL 实例，执行<code>dba.createCluster()</code>创建集群，并过过<code>dba.getCluster(&quot;testCluster&quot;).status()</code>查看集群状态：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db225 opt]# mysqlsh icadmin@192.168.165.156:3306</span><br><span class=\"line\">Please provide the password for &#39;icadmin@192.168.165.156:3306&#39;: ******</span><br><span class=\"line\">Save password for &#39;icadmin@192.168.165.156:3306&#39;? [Y]es&#x2F;[N]o&#x2F;Ne[v]er (default No): </span><br><span class=\"line\">MySQL Shell 8.0.25</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2016, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its affiliates.</span><br><span class=\"line\">Other names may be trademarks of their respective owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;\\help&#39; or &#39;\\?&#39; for help; &#39;\\quit&#39; to exit.</span><br><span class=\"line\">Creating a session to &#39;icadmin@192.168.165.156:3306&#39;</span><br><span class=\"line\">Fetching schema names for autocompletion... Press ^C to stop.</span><br><span class=\"line\">Your MySQL connection id is 28</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\">No default schema selected; type \\use &lt;schema&gt; to set one.</span><br><span class=\"line\"> MySQL  192.168.165.156:3306 ssl  JS &gt; var cluster &#x3D; dba.createCluster(&#39;testCluster&#39;, &#123;adoptFromGR: true&#125;);</span><br><span class=\"line\">A new InnoDB cluster will be created based on the existing replication group on instance &#39;192.168.165.156:3306&#39;.</span><br><span class=\"line\"></span><br><span class=\"line\">Creating InnoDB cluster &#39;testCluster&#39; on &#39;192.168.165.156:3306&#39;...</span><br><span class=\"line\"></span><br><span class=\"line\">Adding Seed Instance...</span><br><span class=\"line\">Adding Instance &#39;192.168.165.157:3306&#39;...</span><br><span class=\"line\">Adding Instance &#39;192.168.165.225:3306&#39;...</span><br><span class=\"line\">Adding Instance &#39;192.168.165.156:3306&#39;...</span><br><span class=\"line\">Resetting distributed recovery credentials across the cluster...</span><br><span class=\"line\">NOTE: User &#39;mysql_innodb_cluster_13306&#39;@&#39;%&#39; already existed at instance &#39;192.168.165.156:3306&#39;. It will be deleted and created again with a new password.</span><br><span class=\"line\">NOTE: User &#39;mysql_innodb_cluster_13306&#39;@&#39;%&#39; already existed at instance &#39;192.168.165.156:3306&#39;. It will be deleted and created again with a new password.</span><br><span class=\"line\">Cluster successfully created based on existing replication group.</span><br><span class=\"line\"></span><br><span class=\"line\"> MySQL  192.168.165.156:3306 ssl  JS &gt; dba.getCluster(&quot;testCluster&quot;).status();</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;clusterName&quot;: &quot;testCluster&quot;, </span><br><span class=\"line\">    &quot;defaultReplicaSet&quot;: &#123;</span><br><span class=\"line\">        &quot;name&quot;: &quot;default&quot;, </span><br><span class=\"line\">        &quot;primary&quot;: &quot;192.168.165.156:3306&quot;, </span><br><span class=\"line\">        &quot;ssl&quot;: &quot;DISABLED&quot;, </span><br><span class=\"line\">        &quot;status&quot;: &quot;OK&quot;, </span><br><span class=\"line\">        &quot;statusText&quot;: &quot;Cluster is ONLINE and can tolerate up to ONE failure.&quot;, </span><br><span class=\"line\">        &quot;topology&quot;: &#123;</span><br><span class=\"line\">            &quot;192.168.165.156:3306&quot;: &#123;</span><br><span class=\"line\">                &quot;address&quot;: &quot;192.168.165.156:3306&quot;, </span><br><span class=\"line\">                &quot;instanceErrors&quot;: [</span><br><span class=\"line\">                    &quot;NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.&quot;</span><br><span class=\"line\">                ], </span><br><span class=\"line\">                &quot;memberRole&quot;: &quot;PRIMARY&quot;, </span><br><span class=\"line\">                &quot;mode&quot;: &quot;R&#x2F;W&quot;, </span><br><span class=\"line\">                &quot;readReplicas&quot;: &#123;&#125;, </span><br><span class=\"line\">                &quot;replicationLag&quot;: null, </span><br><span class=\"line\">                &quot;role&quot;: &quot;HA&quot;, </span><br><span class=\"line\">                &quot;status&quot;: &quot;ONLINE&quot;, </span><br><span class=\"line\">                &quot;version&quot;: &quot;8.0.25&quot;</span><br><span class=\"line\">            &#125;, </span><br><span class=\"line\">            &quot;192.168.165.157:3306&quot;: &#123;</span><br><span class=\"line\">                &quot;address&quot;: &quot;192.168.165.157:3306&quot;, </span><br><span class=\"line\">                &quot;instanceErrors&quot;: [</span><br><span class=\"line\">                    &quot;NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.&quot;</span><br><span class=\"line\">                ], </span><br><span class=\"line\">                &quot;memberRole&quot;: &quot;SECONDARY&quot;, </span><br><span class=\"line\">                &quot;mode&quot;: &quot;R&#x2F;O&quot;, </span><br><span class=\"line\">                &quot;readReplicas&quot;: &#123;&#125;, </span><br><span class=\"line\">                &quot;replicationLag&quot;: null, </span><br><span class=\"line\">                &quot;role&quot;: &quot;HA&quot;, </span><br><span class=\"line\">                &quot;status&quot;: &quot;ONLINE&quot;, </span><br><span class=\"line\">                &quot;version&quot;: &quot;8.0.25&quot;</span><br><span class=\"line\">            &#125;, </span><br><span class=\"line\">            &quot;192.168.165.225:3306&quot;: &#123;</span><br><span class=\"line\">                &quot;address&quot;: &quot;192.168.165.225:3306&quot;, </span><br><span class=\"line\">                &quot;instanceErrors&quot;: [</span><br><span class=\"line\">                    &quot;NOTE: The required parallel-appliers settings are not enabled on the instance. Use dba.configureInstance() to fix it.&quot;</span><br><span class=\"line\">                ], </span><br><span class=\"line\">                &quot;memberRole&quot;: &quot;SECONDARY&quot;, </span><br><span class=\"line\">                &quot;mode&quot;: &quot;R&#x2F;O&quot;, </span><br><span class=\"line\">                &quot;readReplicas&quot;: &#123;&#125;, </span><br><span class=\"line\">                &quot;replicationLag&quot;: null, </span><br><span class=\"line\">                &quot;role&quot;: &quot;HA&quot;, </span><br><span class=\"line\">                &quot;status&quot;: &quot;ONLINE&quot;, </span><br><span class=\"line\">                &quot;version&quot;: &quot;8.0.25&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, </span><br><span class=\"line\">        &quot;topologyMode&quot;: &quot;Single-Primary&quot;</span><br><span class=\"line\">    &#125;, </span><br><span class=\"line\">    &quot;groupInformationSourceMember&quot;: &quot;192.168.165.156:3306&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> MySQL  192.168.165.156:3306 ssl  JS &gt; </span><br></pre></td></tr></table></figure>\n\n<p>其中：</p>\n<ul>\n<li>“status”: “OK” 表示集群状态是正常的</li>\n<li>“topologyMode”: “Single-Primary” 表示是单主模式</li>\n<li>“mode”: “R/W” 表示可读可写</li>\n<li>“mode”: “R/O” 表示只读</li>\n</ul>\n<h2 id=\"安装MySQL-Router\"><a href=\"#安装MySQL-Router\" class=\"headerlink\" title=\"安装MySQL Router\"></a>安装MySQL Router</h2><p>安装：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# tar -xf mysql-router-8.0.25-linux-glibc2.12-x86_64.tar.xz </span><br><span class=\"line\">[root@db156 opt]# mv mysql-router-8.0.25-linux-glibc2.12-x86_64 &#x2F;usr&#x2F;local&#x2F;mysqlrouter</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">[root@db156 opt]# chmod -R 755 &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">[root@db156 opt]# mkdir -p &#x2F;data&#x2F;mysqlrouter</span><br><span class=\"line\">[root@db156 opt]# chown -R mysql:mysql &#x2F;data&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">[root@db156 opt]# echo &quot;export PATH&#x3D;\\$PATH:&#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&quot; &gt;&gt; &#x2F;etc&#x2F;profile</span><br><span class=\"line\">[root@db156 opt]# source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>\n\n<p>bootstrap引导:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter --bootstrap icadmin@192.168.165.156:3306 --directory &#x2F;data&#x2F;mysqlrouter --conf-use-sockets --user&#x3D;mysql --name&#x3D;mysql_router_13306 --conf-bind-address&#x3D;192.168.165.156 --account-host&#x3D;&quot;192.168.165.%&quot;</span><br><span class=\"line\">Please enter MySQL password for icadmin: </span><br><span class=\"line\"># Bootstrapping MySQL Router instance at &#39;&#x2F;data&#x2F;mysqlrouter&#39;...</span><br><span class=\"line\"></span><br><span class=\"line\">- Creating account(s) (only those that are needed, if any)</span><br><span class=\"line\">- Verifying account (using it to run SQL queries that would be run by Router)</span><br><span class=\"line\">- Storing account in keyring</span><br><span class=\"line\">- Adjusting permissions of generated files</span><br><span class=\"line\">- Creating configuration &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf</span><br><span class=\"line\"></span><br><span class=\"line\"># MySQL Router &#39;mysql_router_13306&#39; configured for the InnoDB Cluster &#39;testCluster&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">After this MySQL Router has been started with the generated configuration</span><br><span class=\"line\"></span><br><span class=\"line\">    $ &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter -c &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf</span><br><span class=\"line\"></span><br><span class=\"line\">the cluster &#39;testCluster&#39; can be reached by connecting to:</span><br><span class=\"line\"></span><br><span class=\"line\">## MySQL Classic protocol</span><br><span class=\"line\"></span><br><span class=\"line\">- Read&#x2F;Write Connections: localhost:6446, &#x2F;data&#x2F;mysqlrouter&#x2F;mysql.sock</span><br><span class=\"line\">- Read&#x2F;Only Connections:  localhost:6447, &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlro.sock</span><br><span class=\"line\"></span><br><span class=\"line\">## MySQL X protocol</span><br><span class=\"line\"></span><br><span class=\"line\">- Read&#x2F;Write Connections: localhost:6448, &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlx.sock</span><br><span class=\"line\">- Read&#x2F;Only Connections:  localhost:6449, &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlxro.sock</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n<p>引导成功后会在/data/mysqlrouter目录下生成所需的数据文件，目录结构如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# tree &#x2F;data&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">&#x2F;data&#x2F;mysqlrouter&#x2F;</span><br><span class=\"line\">├── data</span><br><span class=\"line\">│   ├── ca-key.pem</span><br><span class=\"line\">│   ├── ca.pem</span><br><span class=\"line\">│   ├── keyring</span><br><span class=\"line\">│   ├── router-cert.pem</span><br><span class=\"line\">│   ├── router-key.pem</span><br><span class=\"line\">│   └── state.json</span><br><span class=\"line\">├── log</span><br><span class=\"line\">│   └── mysqlrouter.log</span><br><span class=\"line\">├── mysqlrouter.conf</span><br><span class=\"line\">├── mysqlrouter.key</span><br><span class=\"line\">├── run</span><br><span class=\"line\">├── start.sh</span><br><span class=\"line\">└── stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\">3 directories, 11 files</span><br></pre></td></tr></table></figure>\n\n<p>生成的MySQL Router配置文件如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# cat &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf </span><br><span class=\"line\"># File automatically generated during MySQL Router bootstrap</span><br><span class=\"line\">[DEFAULT]</span><br><span class=\"line\">name&#x3D;mysql_router_13306</span><br><span class=\"line\">user&#x3D;mysql</span><br><span class=\"line\">logging_folder&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;log</span><br><span class=\"line\">runtime_folder&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;run</span><br><span class=\"line\">data_folder&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data</span><br><span class=\"line\">keyring_path&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;keyring</span><br><span class=\"line\">master_key_path&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.key</span><br><span class=\"line\">connect_timeout&#x3D;15</span><br><span class=\"line\">read_timeout&#x3D;30</span><br><span class=\"line\">dynamic_state&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;state.json</span><br><span class=\"line\">client_ssl_cert&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-cert.pem</span><br><span class=\"line\">client_ssl_key&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-key.pem</span><br><span class=\"line\">client_ssl_mode&#x3D;PREFERRED</span><br><span class=\"line\">server_ssl_mode&#x3D;AS_CLIENT</span><br><span class=\"line\">server_ssl_verify&#x3D;DISABLED</span><br><span class=\"line\"></span><br><span class=\"line\">[logger]</span><br><span class=\"line\">level &#x3D; INFO</span><br><span class=\"line\"></span><br><span class=\"line\">[metadata_cache:testCluster]</span><br><span class=\"line\">cluster_type&#x3D;gr</span><br><span class=\"line\">router_id&#x3D;1</span><br><span class=\"line\">user&#x3D;mysql_router1_7d9sq1vuggg9</span><br><span class=\"line\">metadata_cluster&#x3D;testCluster</span><br><span class=\"line\">ttl&#x3D;0.5</span><br><span class=\"line\">auth_cache_ttl&#x3D;-1</span><br><span class=\"line\">auth_cache_refresh_interval&#x3D;2</span><br><span class=\"line\">use_gr_notifications&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_rw]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6446</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysql.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;PRIMARY</span><br><span class=\"line\">routing_strategy&#x3D;first-available</span><br><span class=\"line\">protocol&#x3D;classic</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_ro]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6447</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlro.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;SECONDARY</span><br><span class=\"line\">routing_strategy&#x3D;round-robin-with-fallback</span><br><span class=\"line\">protocol&#x3D;classic</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_x_rw]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6448</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlx.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;PRIMARY</span><br><span class=\"line\">routing_strategy&#x3D;first-available</span><br><span class=\"line\">protocol&#x3D;x</span><br><span class=\"line\"></span><br><span class=\"line\">[routing:testCluster_x_ro]</span><br><span class=\"line\">bind_address&#x3D;192.168.165.156</span><br><span class=\"line\">bind_port&#x3D;6449</span><br><span class=\"line\">socket&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlxro.sock</span><br><span class=\"line\">destinations&#x3D;metadata-cache:&#x2F;&#x2F;testCluster&#x2F;?role&#x3D;SECONDARY</span><br><span class=\"line\">routing_strategy&#x3D;round-robin-with-fallback</span><br><span class=\"line\">protocol&#x3D;x</span><br><span class=\"line\"></span><br><span class=\"line\">[http_server]</span><br><span class=\"line\">port&#x3D;8443</span><br><span class=\"line\">ssl&#x3D;1</span><br><span class=\"line\">ssl_cert&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-cert.pem</span><br><span class=\"line\">ssl_key&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;data&#x2F;router-key.pem</span><br><span class=\"line\"></span><br><span class=\"line\">[http_auth_realm:default_auth_realm]</span><br><span class=\"line\">backend&#x3D;default_auth_backend</span><br><span class=\"line\">method&#x3D;basic</span><br><span class=\"line\">name&#x3D;default_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_router]</span><br><span class=\"line\">require_realm&#x3D;default_auth_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_api]</span><br><span class=\"line\"></span><br><span class=\"line\">[http_auth_backend:default_auth_backend]</span><br><span class=\"line\">backend&#x3D;metadata_cache</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_routing]</span><br><span class=\"line\">require_realm&#x3D;default_auth_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[rest_metadata_cache]</span><br><span class=\"line\">require_realm&#x3D;default_auth_realm</span><br><span class=\"line\"></span><br><span class=\"line\">[root@db156 opt]# </span><br></pre></td></tr></table></figure>\n\n<p>启动MySQL路由：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# bash &#x2F;data&#x2F;mysqlrouter&#x2F;start.sh 2&gt;&amp;1 &gt; &#x2F;dev&#x2F;null &amp;</span><br><span class=\"line\">[root@db156 opt]# ps -ef | grep mysqlrouter</span><br><span class=\"line\">root     24911     1  0 08:00 pts&#x2F;0    00:00:00 sudo ROUTER_PID&#x3D;&#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.pid &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter -c &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf --user&#x3D;mysql</span><br><span class=\"line\">mysql    24913 24911  2 08:00 pts&#x2F;0    00:00:01 &#x2F;usr&#x2F;local&#x2F;mysqlrouter&#x2F;bin&#x2F;mysqlrouter -c &#x2F;data&#x2F;mysqlrouter&#x2F;mysqlrouter.conf --user&#x3D;mysql</span><br><span class=\"line\">root     24998  9686  0 08:01 pts&#x2F;0    00:00:00 grep --color&#x3D;auto mysqlrouter</span><br></pre></td></tr></table></figure>\n\n<p>读写分离测试：使用不同的端口</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uicadmin -p -h 192.168.165.156 -P 6446    </span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 196</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select @@hostname as hostname, @@port as port;</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| hostname | port |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| db156    | 3306 |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uicadmin -p -h 192.168.165.156 -P 6447</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 30</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select @@hostname as hostname, @@port as port;</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| hostname | port |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| db225    | 3306 |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; exit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root@db156 opt]# &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -uicadmin -p -h 192.168.165.156 -P 6447</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 1517</span><br><span class=\"line\">Server version: 8.0.25 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2021, Oracle and&#x2F;or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select @@hostname as hostname, @@port as port;</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| hostname | port |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">| db157    | 3306 |</span><br><span class=\"line\">+----------+------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<p>可以看到使用读写端口6446时连接的是主节点，而使用只读端口6447连接时是在两个从节点之间切换操作。</p>\n"}],"PostAsset":[{"_id":"source/_posts/CentOS7下如何设置MySQL开机自启/1611770404.jpg","slug":"1611770404.jpg","post":"cl7r727us0013hx891i9x22d1","modified":0,"renderable":0},{"_id":"source/_posts/CentOS7下如何设置MySQL开机自启/1611856804.jpg","slug":"1611856804.jpg","post":"cl7r727us0013hx891i9x22d1","modified":0,"renderable":0},{"_id":"source/_posts/CentOS7下如何设置MySQL开机自启/1612461604.jpg","slug":"1612461604.jpg","post":"cl7r727us0013hx891i9x22d1","modified":0,"renderable":0},{"_id":"source/_posts/Django多表关联查询时数据错误/1588096803.jpg","slug":"1588096803.jpg","post":"cl7r727ux0018hx89heokhqr9","modified":0,"renderable":0},{"_id":"source/_posts/Django多表关联查询时数据错误/image-20211112181443714.png","slug":"image-20211112181443714.png","post":"cl7r727ux0018hx89heokhqr9","modified":0,"renderable":0},{"_id":"source/_posts/Django多表关联查询时数据错误/image-20211112182409956.png","slug":"image-20211112182409956.png","post":"cl7r727ux0018hx89heokhqr9","modified":0,"renderable":0},{"_id":"source/_posts/Django多表关联查询时数据错误/image-20211112184343393.png","slug":"image-20211112184343393.png","post":"cl7r727ux0018hx89heokhqr9","modified":0,"renderable":0},{"_id":"source/_posts/Django常见问题/Django.png","slug":"Django.png","post":"cl7r727uy001chx89hwvihi2w","modified":0,"renderable":0},{"_id":"source/_posts/Django常见问题/Django.xmind","slug":"Django.xmind","post":"cl7r727uy001chx89hwvihi2w","modified":0,"renderable":0},{"_id":"source/_posts/Django常见问题/bg.jpg","slug":"bg.jpg","post":"cl7r727uy001chx89hwvihi2w","modified":0,"renderable":0},{"_id":"source/_posts/MySQL8-0-OCP大纲/1603562403.jpg","slug":"1603562403.jpg","post":"cl7r727v3001hhx891ccte5i6","modified":0,"renderable":0},{"_id":"source/_posts/MySQL性能优化：回表、覆盖索引及索引下推优化/1618855205.jpg","slug":"1618855205.jpg","post":"cl7r727v7001jhx89drp99jhd","modified":0,"renderable":0},{"_id":"source/_posts/MySQL性能优化：回表、覆盖索引及索引下推优化/InnoDB索引结构.png","slug":"InnoDB索引结构.png","post":"cl7r727v7001jhx89drp99jhd","modified":0,"renderable":0},{"_id":"source/_posts/MySQL主从复制原理/1600279205.jpg","slug":"1600279205.jpg","post":"cl7r727va001ohx895pek834q","modified":0,"renderable":0},{"_id":"source/_posts/MySQL主从复制原理/MySQL主从复制原理.png","slug":"MySQL主从复制原理.png","post":"cl7r727va001ohx895pek834q","modified":0,"renderable":0},{"_id":"source/_posts/MySQL查询未区分大小写/1606845605.jpg","slug":"1606845605.jpg","post":"cl7r727vd001whx890rn2h5qo","modified":0,"renderable":0},{"_id":"source/_posts/MySQL组复制介绍/46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg","slug":"46d975bc24216df1de79256fd0cd260828b339bd6c4f55bb5e333c210017d6ee.jpg","post":"cl7r727vb001rhx896gj7dvkb","modified":0,"renderable":0},{"_id":"source/_posts/MySQL组复制介绍/半同步复制原理.png","slug":"半同步复制原理.png","post":"cl7r727vb001rhx896gj7dvkb","modified":0,"renderable":0},{"_id":"source/_posts/MySQL组复制介绍/单节点单主组复制架构.png","slug":"单节点单主组复制架构.png","post":"cl7r727vb001rhx896gj7dvkb","modified":0,"renderable":0},{"_id":"source/_posts/MySQL组复制介绍/异步复制原理.png","slug":"异步复制原理.png","post":"cl7r727vb001rhx896gj7dvkb","modified":0,"renderable":0},{"_id":"source/_posts/MySQL组复制介绍/组复制原理.png","slug":"组复制原理.png","post":"cl7r727vb001rhx896gj7dvkb","modified":0,"renderable":0},{"_id":"source/_posts/Python算法之冒泡排序/1604599205.jpg","slug":"1604599205.jpg","post":"cl7r727vh0025hx895d9mekql","modified":0,"renderable":0},{"_id":"source/_posts/Python算法之冒泡排序/冒泡排序.gif","slug":"冒泡排序.gif","post":"cl7r727vh0025hx895d9mekql","modified":0,"renderable":0},{"_id":"source/_posts/MySQL索引介绍/B+树索引结构.jpg","slug":"B+树索引结构.jpg","post":"cl7r727vi002ahx89232j1d68","modified":0,"renderable":0},{"_id":"source/_posts/MySQL索引介绍/文章大纲.png","slug":"文章大纲.png","post":"cl7r727vi002ahx89232j1d68","modified":0,"renderable":0},{"_id":"source/_posts/Python生成公共包（SDK）/1590516004.jpg","slug":"1590516004.jpg","post":"cl7r727vi002dhx894t1r7omk","modified":0,"renderable":0},{"_id":"source/_posts/活着：现实与意义/451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg","slug":"451dbdcc3474f144783295b4ecf40ae69dec7d48ca508a0f07025af69f32ef38.jpg","post":"cl7r727vr0038hx897xiz4n91","modified":0,"renderable":0},{"_id":"source/_posts/活着：现实与意义/活着.png","slug":"活着.png","post":"cl7r727vr0038hx897xiz4n91","modified":0,"renderable":0},{"_id":"source/_posts/活着：现实与意义/活着.xmind","slug":"活着.xmind","post":"cl7r727vr0038hx897xiz4n91","modified":0,"renderable":0},{"_id":"source/_posts/如何写好一篇技术文章/1603476003.jpg","slug":"1603476003.jpg","post":"cl7r727vr003ahx898hka666b","modified":0,"renderable":0},{"_id":"source/_posts/如何写好一篇技术文章/如何写好一篇技术文章.png","slug":"如何写好一篇技术文章.png","post":"cl7r727vr003ahx898hka666b","modified":0,"renderable":0},{"_id":"source/_posts/股票盈利宝典：强庄股买卖/pc29.jpg","slug":"pc29.jpg","post":"cl7r727vs003chx89ci44hhqn","modified":0,"renderable":0},{"_id":"source/_posts/股票盈利宝典：强庄股买卖/识别主力手法.png","slug":"识别主力手法.png","post":"cl7r727vs003chx89ci44hhqn","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/1624644007.jpg","slug":"1624644007.jpg","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160755363.png","slug":"image-20211206160755363.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160759969.png","slug":"image-20211206160759969.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160843863.png","slug":"image-20211206160843863.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160943238.png","slug":"image-20211206160943238.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206160948267.png","slug":"image-20211206160948267.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161008502.png","slug":"image-20211206161008502.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161152973.png","slug":"image-20211206161152973.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161301912.png","slug":"image-20211206161301912.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161706814.png","slug":"image-20211206161706814.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206161903300.png","slug":"image-20211206161903300.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206162433796.png","slug":"image-20211206162433796.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206162611806.png","slug":"image-20211206162611806.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206163142229.png","slug":"image-20211206163142229.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206163208246.png","slug":"image-20211206163208246.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206163253121.png","slug":"image-20211206163253121.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/使用码云自动化部署应用/image-20211206164809814.png","slug":"image-20211206164809814.png","post":"cl7r727vt003jhx894yjw6p01","modified":0,"renderable":0},{"_id":"source/_posts/西西弗神话：去活还是去死/1623434404.jpg","slug":"1623434404.jpg","post":"cl7r727vv003phx89e74b5vvr","modified":0,"renderable":0},{"_id":"source/_posts/搭建一个单主模式的MGR集群/1605722404.jpg","slug":"1605722404.jpg","post":"cl7r727vs003fhx89cdfhgmel","modified":0,"renderable":0},{"_id":"source/_posts/搭建一个单主模式的MGR集群/单节点单主组复制架构.png","slug":"单节点单主组复制架构.png","post":"cl7r727vs003fhx89cdfhgmel","modified":0,"renderable":0},{"_id":"source/_posts/InnoDB-Cluster部署/InnoDB Cluster架构.jpg","slug":"InnoDB Cluster架构.jpg","post":"cl7r727vz0045hx8961j67306","modified":0,"renderable":0},{"_id":"source/_posts/InnoDB-Cluster部署/bg.jpg","slug":"bg.jpg","post":"cl7r727vz0045hx8961j67306","modified":0,"renderable":0}],"PostCategory":[{"post_id":"cl7r727uq0012hx89ekboh8c6","category_id":"cl7r727us0014hx89a6rdg4l7","_id":"cl7r727uz001ehx893ox1cxvs"},{"post_id":"cl7r727us0013hx891i9x22d1","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727va001mhx898a6ye824"},{"post_id":"cl7r727uy001dhx89dzwmh6of","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vb001qhx898y6j5118"},{"post_id":"cl7r727v3001hhx891ccte5i6","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vb001shx89ebrf3eci"},{"post_id":"cl7r727uv0016hx89a2a9ardo","category_id":"cl7r727us0014hx89a6rdg4l7","_id":"cl7r727vg001xhx890rfien4h"},{"post_id":"cl7r727v7001jhx89drp99jhd","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vg001zhx894ewf8734"},{"post_id":"cl7r727va001ohx895pek834q","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vh0023hx8984598ben"},{"post_id":"cl7r727ux0018hx89heokhqr9","category_id":"cl7r727v9001lhx899wj4c5b5","_id":"cl7r727vh0026hx899fwxe7gh"},{"post_id":"cl7r727vb001rhx896gj7dvkb","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vi002bhx89ezythgrh"},{"post_id":"cl7r727vd001whx890rn2h5qo","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vj002ehx892dz354a5"},{"post_id":"cl7r727uy001chx89hwvihi2w","category_id":"cl7r727v9001lhx899wj4c5b5","_id":"cl7r727vj002ihx896oe65z1v"},{"post_id":"cl7r727vg001yhx89hxjob5z6","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vj002khx89byun988h"},{"post_id":"cl7r727vi002ahx89232j1d68","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vj002nhx892irb4ulv"},{"post_id":"cl7r727vi002dhx894t1r7omk","category_id":"cl7r727v9001lhx899wj4c5b5","_id":"cl7r727vj002phx898100d1m0"},{"post_id":"cl7r727vg0022hx89eb83hi95","category_id":"cl7r727vi0027hx896jg0amwz","_id":"cl7r727vj002rhx899tembogl"},{"post_id":"cl7r727vh0025hx895d9mekql","category_id":"cl7r727vj002hhx89fqcs0zwf","_id":"cl7r727vk002uhx895nio6ynv"},{"post_id":"cl7r727vp0037hx8953s2d6oa","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vs003dhx89dec26aj6"},{"post_id":"cl7r727vr0038hx897xiz4n91","category_id":"cl7r727us0014hx89a6rdg4l7","_id":"cl7r727vs003ghx89gusfdol5"},{"post_id":"cl7r727vs003fhx89cdfhgmel","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vv003qhx89d4tk61q5"},{"post_id":"cl7r727vr003ahx898hka666b","category_id":"cl7r727vs003ehx892baah018","_id":"cl7r727vv003shx89ak5p8766"},{"post_id":"cl7r727vu003lhx89hgpv1wwb","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727vw003whx899iou8258"},{"post_id":"cl7r727vv003phx89e74b5vvr","category_id":"cl7r727us0014hx89a6rdg4l7","_id":"cl7r727vw003yhx89g0nsbxu5"},{"post_id":"cl7r727vs003chx89ci44hhqn","category_id":"cl7r727vv003mhx899fgrbbwi","_id":"cl7r727vw0040hx896ra6511o"},{"post_id":"cl7r727vt003jhx894yjw6p01","category_id":"cl7r727vv003thx89eicgfeg3","_id":"cl7r727vw0042hx89cud77yj1"},{"post_id":"cl7r727vz0045hx8961j67306","category_id":"cl7r727ux0019hx89auo93vrs","_id":"cl7r727w00047hx892hndel4l"}],"PostTag":[{"post_id":"cl7r727uq0012hx89ekboh8c6","tag_id":"cl7r727uu0015hx898u05cfac","_id":"cl7r727uy001bhx8973gibkgj"},{"post_id":"cl7r727us0013hx891i9x22d1","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727v6001ihx896sw21ode"},{"post_id":"cl7r727uy001dhx89dzwmh6of","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727v9001khx892f6j1aho"},{"post_id":"cl7r727uv0016hx89a2a9ardo","tag_id":"cl7r727uu0015hx898u05cfac","_id":"cl7r727va001phx89cl62feg6"},{"post_id":"cl7r727va001ohx895pek834q","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vc001vhx896abmdaw5"},{"post_id":"cl7r727vd001whx890rn2h5qo","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vg0020hx896dj0goxa"},{"post_id":"cl7r727ux0018hx89heokhqr9","tag_id":"cl7r727va001nhx89am6q820q","_id":"cl7r727vh0024hx892ri1hl0p"},{"post_id":"cl7r727ux0018hx89heokhqr9","tag_id":"cl7r727vc001uhx891pexa77g","_id":"cl7r727vi0028hx893eja5dig"},{"post_id":"cl7r727vg001yhx89hxjob5z6","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vi002chx89hrlmhxww"},{"post_id":"cl7r727vi002ahx89232j1d68","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vj002fhx89ffmhaj8i"},{"post_id":"cl7r727uy001chx89hwvihi2w","tag_id":"cl7r727va001nhx89am6q820q","_id":"cl7r727vj002jhx89h62nb6uu"},{"post_id":"cl7r727uy001chx89hwvihi2w","tag_id":"cl7r727vc001uhx891pexa77g","_id":"cl7r727vj002lhx89c5a8ffbz"},{"post_id":"cl7r727vi002dhx894t1r7omk","tag_id":"cl7r727va001nhx89am6q820q","_id":"cl7r727vj002ohx891afa0nzz"},{"post_id":"cl7r727v3001hhx891ccte5i6","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vj002qhx899a6k11lu"},{"post_id":"cl7r727v3001hhx891ccte5i6","tag_id":"cl7r727vj002ghx89cx2xgrx8","_id":"cl7r727vk002thx895owr9ewt"},{"post_id":"cl7r727v7001jhx89drp99jhd","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vk002whx896ho542iy"},{"post_id":"cl7r727v7001jhx89drp99jhd","tag_id":"cl7r727vj002mhx8940s186x4","_id":"cl7r727vk002xhx891p0d2din"},{"post_id":"cl7r727v7001jhx89drp99jhd","tag_id":"cl7r727vk002shx8955t69zv1","_id":"cl7r727vk002zhx89fb2o0pfh"},{"post_id":"cl7r727vb001rhx896gj7dvkb","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vk0030hx891y8iapej"},{"post_id":"cl7r727vb001rhx896gj7dvkb","tag_id":"cl7r727vk002vhx894ir6b8z4","_id":"cl7r727vk0032hx89fck204tt"},{"post_id":"cl7r727vg0022hx89eb83hi95","tag_id":"cl7r727vk002yhx898100hyke","_id":"cl7r727vk0033hx893z8tbx3o"},{"post_id":"cl7r727vh0025hx895d9mekql","tag_id":"cl7r727vk0031hx890hk6aazu","_id":"cl7r727vk0035hx89188p3lb4"},{"post_id":"cl7r727vh0025hx895d9mekql","tag_id":"cl7r727vk0034hx8951nz6nyq","_id":"cl7r727vk0036hx89er2i0wln"},{"post_id":"cl7r727vr0038hx897xiz4n91","tag_id":"cl7r727uu0015hx898u05cfac","_id":"cl7r727vs003bhx89h9ki6m9r"},{"post_id":"cl7r727vp0037hx8953s2d6oa","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vt003ihx89509235o2"},{"post_id":"cl7r727vp0037hx8953s2d6oa","tag_id":"cl7r727vr0039hx89ewvcdop3","_id":"cl7r727vu003khx893zbba5mx"},{"post_id":"cl7r727vs003fhx89cdfhgmel","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vv003ohx890ze4erce"},{"post_id":"cl7r727vs003fhx89cdfhgmel","tag_id":"cl7r727vk002vhx894ir6b8z4","_id":"cl7r727vv003rhx892fmf9i1k"},{"post_id":"cl7r727vr003ahx898hka666b","tag_id":"cl7r727vs003hhx89417919cl","_id":"cl7r727vw003vhx898yk6143i"},{"post_id":"cl7r727vu003lhx89hgpv1wwb","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727vw003xhx8960pz9exf"},{"post_id":"cl7r727vv003phx89e74b5vvr","tag_id":"cl7r727uu0015hx898u05cfac","_id":"cl7r727vw003zhx89ew70dcbn"},{"post_id":"cl7r727vs003chx89ci44hhqn","tag_id":"cl7r727vv003nhx89706u6k3z","_id":"cl7r727vw0041hx890q5mby0q"},{"post_id":"cl7r727vt003jhx894yjw6p01","tag_id":"cl7r727vw003uhx892iex95yi","_id":"cl7r727vw0043hx892yv6dbqw"},{"post_id":"cl7r727vz0045hx8961j67306","tag_id":"cl7r727uy001ahx89033ccd10","_id":"cl7r727w00048hx897sb67auk"},{"post_id":"cl7r727vz0045hx8961j67306","tag_id":"cl7r727vz0046hx8978vn3vip","_id":"cl7r727w00049hx894m570pr5"}],"Tag":[{"name":"读书笔记","_id":"cl7r727uu0015hx898u05cfac"},{"name":"MySQL","_id":"cl7r727uy001ahx89033ccd10"},{"name":"Python","_id":"cl7r727va001nhx89am6q820q"},{"name":"Django","_id":"cl7r727vc001uhx891pexa77g"},{"name":"OCP","_id":"cl7r727vj002ghx89cx2xgrx8"},{"name":"索引","_id":"cl7r727vj002mhx8940s186x4"},{"name":"性能优化","_id":"cl7r727vk002shx8955t69zv1"},{"name":"组复制","_id":"cl7r727vk002vhx894ir6b8z4"},{"name":"Oracle","_id":"cl7r727vk002yhx898100hyke"},{"name":"排序算法","_id":"cl7r727vk0031hx890hk6aazu"},{"name":"冒泡排序","_id":"cl7r727vk0034hx8951nz6nyq"},{"name":"SQL注入","_id":"cl7r727vr0039hx89ewvcdop3"},{"name":"技术文章","_id":"cl7r727vs003hhx89417919cl"},{"name":"股票","_id":"cl7r727vv003nhx89706u6k3z"},{"name":"运维","_id":"cl7r727vw003uhx892iex95yi"},{"name":"InnoDB Cluster","_id":"cl7r727vz0046hx8978vn3vip"}]}}